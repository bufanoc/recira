/* Copyright (c) 2008, 2009, 2010 Nicira, Inc. */

if(!dojo._hasResource["nox.ext.apps.commonui.directory.Host"]){dojo._hasResource["nox.ext.apps.commonui.directory.Host"]=true;dojo.provide("nox.ext.apps.commonui.directory.Host");dojo.require("nox.ext.apps.commonui.directory.UserStore");dojo.require("nox.ext.apps.commonui.directory.HostGroupStore");dojo.require("nox.ext.apps.commonui.directory.HostBindingStore");dojo.require("nox.ext.apps.commonui.directory.HostInterfaceStore");dojo.require("nox.ext.apps.commonui.directory.Directories");dojo.require("nox.ext.apps.commonui.directory._Principal");dojo.declare("nox.ext.apps.commonui.directory.Host",[nox.ext.apps.commonui.directory._Principal],{constructor:function(_1){dojo.mixin(this.updateTypes,{"info":{load:dojo.hitch(this,"updateInfo")},"osFingerprint":{load:dojo.hitch(this,"updateOSFingerprint")},"lastSeen":{load:dojo.hitch(this,"updateLastSeen")},"activeInterfaces":{load:dojo.hitch(this,"updateActiveInterfaces")}});},wsv1Path:function(){if(this.isNull()){return null;}return "/ws.v1/host/"+encodeURIComponent(this.directoryName())+"/"+encodeURIComponent(this.principalName());},uiMonitorPath:function(){if(this.isNull()){return null;}return "/Monitors/Hosts/HostInfo?name="+encodeURIComponent(this._data.name);},updateInfo:function(_2){return this._xhrGetMixin("info",this.wsv1Path());},updateOSFingerprint:function(){return this._xhrGetMixin("osFingerprint",this.wsv1Path()+"/os_fingerprint");},updateLastSeen:function(){return this._xhrGetMixin("lastSeen",this.wsv1Path()+"/last_seen");},updateActiveInterfaces:function(){if(this.activeInterfacesStore==null){this.activeInterfacesStore=this.interfaceStore({hostObj:this,itemParameters:{updateList:["info"]}});}return this._storeQueryMixin("updateActiveInterfaces","active_interfaces",this.activeInterfacesStore,{},null);},groupStore:function(_3){return new this.dmws.HostGroupStore(dojo.mixin(_3,{url:this.wsv1Path()+"/group"}));},userStore:function(_4){return new this.dmws.UserStore(dojo.mixin(_4,{url:this.wsv1Path()+"/active/user"}));},bindingStore:function(_5){return new this.dmws.HostBindingStore(dojo.mixin(_5,{"url":this.wsv1Path(),"hostObj":this}));},interfaceStore:function(_6){return new this.dmws.HostInterfaceStore(dojo.mixin(_6,{"url":this.wsv1Path()+"/active/interface","hostObj":this}));},save:function(){var bs=this.bindingStore({});bs.update({onComplete:function(){bs.save();bs.destroy();}});}});}