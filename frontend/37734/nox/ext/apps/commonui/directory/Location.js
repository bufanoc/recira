/* Copyright (c) 2008, 2009, 2010 Nicira, Inc. */

if(!dojo._hasResource["nox.ext.apps.commonui.directory.Location"]){dojo._hasResource["nox.ext.apps.commonui.directory.Location"]=true;dojo.provide("nox.ext.apps.commonui.directory.Location");dojo.require("nox.ext.apps.commonui.directory.SwitchPort");dojo.require("nox.ext.apps.commonui.directory.Switch");dojo.require("nox.ext.apps.commonui.directory.Directories");dojo.require("nox.ext.apps.commonui.directory._Principal");dojo.require("nox.ext.apps.commonui.directory.HostStore");dojo.require("nox.ext.apps.commonui.directory.UserStore");dojo.require("nox.ext.apps.commonui.directory.LocationGroupStore");dojo.declare("nox.ext.apps.commonui.directory.Location",[nox.ext.apps.commonui.directory._Principal],{dmws:nox.ext.apps.commonui.directory,constructor:function(_1){if(this.switchObj==undefined){this.switchObj=null;}if(this.switchPortObj==undefined){this.switchPortObj=null;}dojo.mixin(this.derivedAttributes,{"uiSwitchMonitorLink":{get:dojo.hitch(this,"uiSwitchMonitorLink"),hasChanged:dojo.hitch(this,"basicDataChanged",["switch_name"])},"uiSwitchMonitorLinkText":{get:dojo.hitch(this,"uiSwitchMonitorLinkText"),hasChanged:dojo.hitch(this,"basicDataChanged",["switch_name"])},"uiSwitchPortMonitorLink":{get:dojo.hitch(this,"uiSwitchPortMonitorLink"),hasChanged:dojo.hitch(this,"basicDataChanged",["switch_name","port_name"])},"uiSwitchPortMonitorLinkText":{get:dojo.hitch(this,"uiSwitchPortMonitorLinkText"),hasChanged:dojo.hitch(this,"basicDataChanged",["switch_name","port_name"])}});dojo.mixin(this.updateTypes,{"info":{load:dojo.hitch(this,"updateInfo")},"config":{load:dojo.hitch(this,"updateConfig")}});},wsv1Path:function(){if(this.isNull()){return null;}return "/ws.v1/location/"+encodeURIComponent(this.directoryName())+"/"+encodeURIComponent(this.principalName());},uiMonitorPath:function(){if(this.isNull()){return null;}if(this.switchPortObj==null){return null;}return this.switchPortObj.uiMonitorPath();},uiSwitchMonitorLink:function(){if(this.switchObj==null){return null;}return this.switchObj.uiMonitorLink();},uiSwitchMonitorLinkText:function(){if(this.switchObj==null){return null;}return this.switchObj.uiMonitorLinkText();},uiSwitchPortMonitorLink:function(){if(this.switchPortObj==null){return null;}return this.switchPortObj.uiMonitorLink();},uiSwitchPortMonitorLinkText:function(){if(this.switchPortObj==null){return null;}return this.switchPortObj.uiMonitorLinkText();},updateConfig:function(){return this._xhrGetMixin("config",this.wsv1Path()+"/config",function(r){this.switchObj=new this.dmws.Switch({initialData:{name:r.switch_name}});this.switchPortObj=new this.dmws.SwitchPort({initialData:{name:r.port_name},switchObj:this.switchObj});return r;});},updateInfo:function(){return this._xhrGetMixin("info",this.wsv1Path());},hostStore:function(_3){return new this.dmws.HostStore(dojo.mixin(_3,{"url":this.wsv1Path()+"/host","locationObj":this}));},userStore:function(_4){return new this.dmws.UserStore(dojo.mixin(_4,{"url":this.wsv1Path()+"/user","locationObj":this}));},groupStore:function(_5){return new this.dmws.LocationGroupStore(dojo.mixin(_5,{"url":this.wsv1Path()+"/group","locationObj":this}));}});}