/* Copyright (c) 2008, 2009, 2010 Nicira, Inc. */

if(!dojo._hasResource["nox.ext.apps.commonui.directory.PrincipalInfoEditUtils"]){dojo._hasResource["nox.ext.apps.commonui.directory.PrincipalInfoEditUtils"]=true;dojo.provide("nox.ext.apps.commonui.directory.PrincipalInfoEditUtils");dojo.require("nox.ext.apps.commonui.directory.Directories");(function(){var u=nox.ext.apps.commonui.directory.PrincipalInfoEditUtils;u.get_attr_row=function(_2,_3,_4){if(_4){return {name:_2,header:_3,attr:_2,editor:dijit.form.TextBox,editAttr:_2,editSet:function(_5,_6){_5.setValue(_2,_6);_5.save();}};}else{return {name:_2,header:_3,attr:_2};}};u.get_name_row=function(_7,_8){if(_8){return {name:"name",header:_7,attr:"principalName",editor:dijit.form.TextBox,editAttr:"principalName",editSet:function(_9,_a){_9.rename({name:_a,onComplete:function(_b){document.location=_b.uiMonitorPath();},onError:function(_c){console_log("Error occurred during rename.");}});}};}else{return {name:"name",header:_7,attr:"principalName"};}};u.get_directory_row=function(_d,_e,_f){var _10=function(){var v=this.getDisplayedValue();var _12=nox.ext.apps.commonui.directory.Directories.datastore;if(v==_e){return true;}if(_12._items==null){return false;}for(var i=0;i<_12._items.length;i++){if(v==_12._items[i]._data["name"]){return true;}}return false;};var n="directory";var hdr="Directory Name";var _16="directoryName";if(_f||_e=="discovered"){query={};query["write_"+_d+"_enabled"]=true;return {name:n,header:hdr,attr:_16,editor:dijit.form.FilteringSelect,editorProps:{store:nox.ext.apps.commonui.directory.Directories.datastore,query:query,isValid:_10},editAttr:"directoryName",editSet:function(_17,_18){_17.change_directory({name:_18,onComplete:function(_19){document.location=_19.uiMonitorPath();}});}};}else{return {name:n,header:hdr,attr:_16};}};u.get_groups_row=function(_1a,_1b,_1c){var _1d=new coreui.ItemList({store:_1a,labelAttr:"uiMonitorLinkText",sort:{decreasing:false,attr:"displayName"},changeAnimFn:coreui.base.changeHighlightFn,ignoreNull:true});if(false){return {name:"groups",header:"Group Membership",noupdate:true,editable:true,dialogEditor:true,editor:coreui.ItemListEditor,editorProps:{title:"Group Membership",selectedStore:_1a,allStore:_1b},get:function(_1e){return _1d.domNode;}};}else{return {name:"groups",header:"Group Membership",noupdate:true,editor:coreui.ItemListEditor,get:function(_1f){return _1d.domNode;}};}};})();}