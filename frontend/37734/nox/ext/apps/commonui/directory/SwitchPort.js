/* Copyright (c) 2008, 2009, 2010 Nicira, Inc. */

if(!dojo._hasResource["nox.ext.apps.commonui.directory.SwitchPort"]){dojo._hasResource["nox.ext.apps.commonui.directory.SwitchPort"]=true;dojo.provide("nox.ext.apps.commonui.directory.SwitchPort");dojo.require("nox.ext.apps.commonui.coreui._NamedEntity");dojo.require("nox.ext.apps.commonui.directory.HostStore");dojo.require("nox.ext.apps.commonui.directory.UserStore");dojo.declare("nox.ext.apps.commonui.directory.SwitchPort",[nox.ext.apps.commonui.coreui._NamedEntity],{dmws:nox.ext.apps.commonui.directory,constructor:function(_1){if(this.switchObj==undefined){throw new Error("SwitchPort must be initialized with the associated switch object");}dojo.mixin(this.derivedAttributes,{uiMonitorPath:{get:dojo.hitch(this,"uiMonitorPath"),hasChanged:dojo.hitch(this,"nameHasChanged")},uiMonitorLink:{get:dojo.hitch(this,"uiMonitorLink"),hasChanged:dojo.hitch(this,"nameHasChanged")},uiMonitorLinkText:{get:dojo.hitch(this,"uiMonitorLinkText"),hasChanged:dojo.hitch(this,"nameHasChanged")},"uiSwitchAndPortMonitorLinks":{get:dojo.hitch(this,"uiSwitchAndPortMonitorLinks")},speed:{get:dojo.hitch(this,"speed")},port_no:{get:dojo.hitch(this,"port_no")},locationDirectoryName:{get:dojo.hitch(this,"locationDirectoryName"),set:dojo.hitch(this,"locationDirectoryNameSet"),hasChanged:dojo.hitch(this,"locationHasChanged")},locationPrincipalName:{get:dojo.hitch(this,"locationPrincipalName"),set:dojo.hitch(this,"locationPrincipalNameSet"),hasChanged:dojo.hitch(this,"locationHasChanged")}});dojo.mixin(this.updateTypes,{"stat":{load:dojo.hitch(this,"updateStat")},"config":{load:dojo.hitch(this,"updateConfig")}});},wsv1Path:function(){return this.switchObj.wsv1Path()+"/port/"+this._data.name;},uiMonitorPath:function(){return "/Monitors/Switches/SwitchPortInfo?switch="+encodeURIComponent(this.switchObj.getValue("name"))+"&port="+encodeURIComponent(this.getValue("name"));},uiMonitorLink:function(){var a=document.createElement("a");a.href=this.uiMonitorPath();a.appendChild(document.createTextNode(this._data.name));return a;},uiMonitorLinkText:function(){return "<a href='"+this.uiMonitorPath()+"'>"+this._data.name+"</a>";},uiSwitchAndPortMonitorLinks:function(){var s=document.createElement("span");s.appendChild(this.switchObj.uiMonitorLink());s.appendChild(document.createTextNode(":"));s.appendChild(this.uiMonitorLink());return s;},updateStat:function(_4){return this._xhrGetMixin("stat",this.wsv1Path()+"/stat");},updateConfig:function(_5){return this._xhrGetMixin("config",this.wsv1Path()+"/config");},userStore:function(_6){return new this.dmws.UserStore(dojo.mixin(_6,{url:this.wsv1Path()+"/user"}));},hostStore:function(_7){return new this.dmws.HostStore(dojo.mixin(_7,{url:this.wsv1Path()+"/host"}));},speed:function(){if(this._data.stat_speed==null){return this._data.config_speed;}return this._data.stat_speed;},port_no:function(){if(this._data.stat_port_no==null){return this._data.config_port_no;}return this._data.stat_port_no;},locationDirectoryName:function(){try{return this._data.location.split(";",2)[0];}catch(e){return null;}},locationDirectoryNameSet:function(v){var _9=this.locationPrincipalName();this.setValue("location",v+";"+_9);},locationPrincipalName:function(){try{return this._data.location.split(";",2)[1];}catch(e){return null;}},locationPrincipalNameSet:function(v){var _b=this.locationDirectoryName();this.setValue("location",_b+";"+v);},locationHasChanged:function(l){return dojo.some(l,"return item.attribute == 'location';");}});}