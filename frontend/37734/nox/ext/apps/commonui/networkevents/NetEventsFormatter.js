/* Copyright (c) 2008, 2009, 2010 Nicira, Inc. */

if(!dojo._hasResource["nox.ext.apps.commonui.networkevents.NetEventsFormatter"]){dojo._hasResource["nox.ext.apps.commonui.networkevents.NetEventsFormatter"]=true;dojo.provide("nox.ext.apps.commonui.networkevents.NetEventsFormatter");dojo.require("nox.ext.apps.commonui.directory.User");dojo.require("nox.ext.apps.commonui.directory.Switch");dojo.require("nox.ext.apps.commonui.directory.Host");dojo.require("nox.ext.apps.commonui.directory.HostGroup");dojo.require("nox.ext.apps.commonui.directory.UserGroup");dojo.require("nox.ext.apps.commonui.directory.LocationGroup");(function(){var _1=nox.ext.apps.commonui.networkevents.NetEventsFormatter;var _2=nox.ext.apps.commonui.directory;var _3={"switch":_2.Switch,"location":null,"host":_2.Host,"user":_2.User,"switch group":_2.SwitchGroup,"location group":_2.LocationGroup,"host group":_2.HostGroup,"user group":_2.UserGroup};function _4(_5,_6){if(_6=="<unknown>"){return "unknown "+_5;}return _5+" "+_7(_5,_6);};function _8(_9,_a){var _b=0;var l=[];dojo.forEach(_a,function(n){if(n=="<unknown>"){l.push("unknown"+_b++);}else{l.push(_7(_9,n));}});if(_9=="switch"){return _9+"es "+l.join(", ");}else{return _9+"s "+l.join(", ");}};function _7(_e,_f){var _10=null;var c=_3[_e];if(_e=="location"){return _12(_f);}else{if(c){var o=new c({initialData:{name:_f}});return o.uiMonitorLinkText(true);}else{console_log("unknown principal type '"+_e+" for name '"+_f+"' in get_link");return _f;}}};function _14(s){return s.replace(/\\\\/g,"\\");};function _12(_16){var _17=_18(_16);return "<a href='/Monitors/Switches/SwitchPortInfo?switch="+encodeURIComponent(_17[1])+"&port="+encodeURIComponent(_17[2])+"'>"+_17[0]+"</a>";};function _18(_19){var _1a=_19.split(/(\\*)#/);var _1b=[];_1b.push(_14(_1a[0]));for(var i=1;i<_1a.length;i+=2){var sep=_1a[i];var len=_1a[i].length;if(len>0){_1b.push(_1b.pop()+_14(sep.substring(0,len-1)));}if(len&1==1){_1b.push(_1b.pop()+"#"+_14(_1a[i+1]));}else{_1b.push(_14(_1a[i+1]));}}return _1b;};function _1f(_20,_21,_22){var _23=["user","host","location","switch","user group","host group","location group","switch group"];var _24=dojo.map(_23,function(t){return t+"s";});if(_21=="switches"){return _8("switch",_22.split(","));}else{if(dojo.indexOf(_23,_21)!=-1){return _4(_21,_22);}else{if(dojo.indexOf(_24,_21)!=-1){var _26=_21.substring(0,_21.length-1);return _8(_26,_22.split(","));}else{return _20;}}}};_1.format_msg=function(m){return m.replace(/{([^\|]*)\|([^}]*)}/g,_1f);};})();}