<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">


<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Rest Channel Test</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
  <style type="text/css">
    @import "/static/0/dojo/resources/dojo.css";
    @import "/static/0/dojo/dojo/resources/dojo.css";
    @import "/static/0/dijit/themes/dijit.css";
    @import "/static/0/dojox/grid/resources/Grid.css";
    @import "/static/0/dojox/grid/resources/tundraGrid.css";
    @import "/static/0/dijit/themes/tundra/tundra.css";

  </style>
<script type="text/javascript" src="/static/0/dojo/dojo.js"
      djConfig="parseOnLoad: true, isDebug: true"></script>


  <script type="text/javascript">
    dojo.require("dojox.data.JsonRestStore");
    dojo.require("dojox.cometd.RestChannels");
    dojo.require("dojo.parser");
    dojo.require("dojox.grid.DataGrid");
  </script>

  <script type="text/javascript">
 
    dojo.addOnLoad(function() {  
      console.log("onload starting");
      dojox.cometd.RestChannels.defaultInstance.url = "/ws.v1/channels"; 
      console.log("dojox.cometd.RestChannels.defaultInstance = ", 
                          dojox.cometd.RestChannels.defaultInstance); 
      var store = new dojox.data.JsonRestStore(
                            { target : "/ws.v1/rest_channel_test/", 
                              idAttribute : "tree_uid",  
                              labelAttribute : "name" 
                            });
      grid.setStore(store);
    }); 
</script>
</head>
<body class="tundra">
  <p> 
  This is a simple test of the rest channel functionality.  You should see
  a dojo grid that starts out empty.  Every two seconds, one of the following
  things will happen: 
  <ul> 
  <li> A new item will be added to the list </li> 
  <li> An item will be modified by having a '*' added to its name </li> 
  <li> An item will be deleted from the list </li> 
</ul> 
  
  </p> 
<table dojoType="dojox.grid.DataGrid" jsid="grid" id="grid">
              <thead>
                <tr>
                  <th field="name">Name</th>
                  <th field="tree_uid">Tree Uid</th>
                </tr>
              </thead>
            </table>

</body>
</html>

