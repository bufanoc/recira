/* Copyright (c) 2008, 2009, 2010 Nicira, Inc. */

if(!dojo._hasResource["nox.ext.apps.vmanui.Search"]){dojo._hasResource["nox.ext.apps.vmanui.Search"]=true;dojo.provide("nox.ext.apps.vmanui.Search");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.Button");dojo.declare("nox.ext.apps.vmanui.Search",[dijit._Widget,dijit._Templated],{templateString:"<form class=\"noxSearch\" dojoAttachPoint=\"containerNode\" dojoAttachEvent=\"onreset: onReset, onsubmit: onSubmit\"\n        >\n    <div class=\"searchInput\">\n        <img src=\"${imageBasePathStr}/searchIcon.gif\").toString()} alt=\"Filter your Search\" class=\"searchIcon\"\n            dojoAttachPoint=\"changeFilterNode\" />\n        <input type=\"text\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"searchString\" />\n        <img src=\"${imageBasePathStr}/searchClearIcon.gif\" alt=\"Clear your Search\" class=\"searchClear\"\n            dojoAttachEvent=\"onclick: onReset\" />\n    </div>\n</form>\n",imageBasePathStr:dojo.moduleUrl("nox.ext.apps.vmanui","images").toString(),widgetsInTemplate:true,_fillContent:function(_1){this._source=_1;},startup:function(){if(this._started){return;}this.reflectState(true);this.events=[dojo.connect(this.searchString,"onFocus",this,"onSearchFocus"),dojo.connect(this.searchString,"onBlur",this,"onSearchBlur")];var _2=dojo.query(".searchContainer");if(_2.length>0){this.container=dijit.getEnclosingWidget(_2[0]);this.recomputeWidth();if(this.container.resize){dojo.connect(this.container,"resize",this,"recomputeWidth");}}this.inherited(arguments);},recomputeWidth:function(){try{var _3=dojo.style(this.container.domNode,"width")-100;this.searchString._setStyleAttr("width : "+_3+"px");}catch(e){nox.ext.apps.vmanui.main.console_log("Error resizing search box: ",e);}},destroyDescendants:function(){dojo.forEach(this.events,dojo.disconnect);this.inherited(arguments);},reflectState:function(_4){this.isEmpty=_4;if(_4){setTimeout(function(){dojo.addClass(dijit.byId("searchBox").containerNode,"empty");},100);}else{dojo.removeClass(this.domNode,"empty");this.searchString.setValue("");}},onSearchFocus:function(){if(this.isEmpty){this.reflectState(false);}},onSearchBlur:function(){if(this.searchString.getValue()){this.isEmpty=false;}else{this.reflectState(true);}},onReset:function(){this.searchString.setValue("");this.reflectState(true);this.submit();},onSubmit:function(_5){dojo.stopEvent(_5);if(this.isEmpty){this.searchString.setValue("");}this.submit();return false;},submit:function(){if(!nox.ext.apps.vmanui.main.check_warn_on_nav()){return;}nox.ext.apps.vmanui.main.current_tree_item=null;nox.ext.apps.vmanui.vac.load_nav_tree();}});}