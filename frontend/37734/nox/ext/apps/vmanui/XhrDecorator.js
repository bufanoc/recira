/* Copyright (c) 2008, 2009, 2010 Nicira, Inc. */

if(!dojo._hasResource["nox.ext.apps.vmanui.XhrDecorator"]){dojo._hasResource["nox.ext.apps.vmanui.XhrDecorator"]=true;dojo.provide("nox.ext.apps.vmanui.XhrDecorator");dojo.declare("nox.ext.apps.vmanui.RequestTracker",null,{_tracked:null,constructor:function(){this._tracked={};},add:function(_1){if(!parseInt(this._tracked[_1.id])){this._tracked[_1.id]=0;}this._tracked[_1.id]=_1;dojo.publish("/nox/ext/apps/vmanui/RequestTracker/add",[this]);dojo.publish("/nox/ext/apps/vmanui/RequestTracker/change",[this]);},remove:function(_2){delete this._tracked[_2.id];dojo.publish("/nox/ext/apps/vmanui/RequestTracker/remove",[this]);dojo.publish("/nox/ext/apps/vmanui/RequestTracker/change",[this]);},hasActiveRequests:function(){for(var _3 in this._tracked){return true;}return false;},poke:function(){dojo.publish("/nox/ext/apps/vmanui/RequestTracker/change",[this]);}});nox.ext.apps.vmanui.RequestTracker._instance=null;nox.ext.apps.vmanui.RequestTracker.instance=function(){if(!nox.ext.apps.vmanui.RequestTracker._instance){nox.ext.apps.vmanui.RequestTracker._instance=new nox.ext.apps.vmanui.RequestTracker();}return nox.ext.apps.vmanui.RequestTracker._instance;};dojo.forEach(["xhr","xhrGet","xhrPut","xhrPost","xhrDelete","rawXhrPost","rawXhrPut"],function(_4){nox.ext.apps.vmanui[_4]=function(){var _5=dojo[_4].apply(dojo,arguments);nox.ext.apps.vmanui.RequestTracker.instance().add(_5);_5.addBoth(function(_6,_7){nox.ext.apps.vmanui.RequestTracker.instance().remove(_5);});return _5;};});}