/* Copyright (c) 2008, 2009, 2010 Nicira, Inc. */

if(!dojo._hasResource["nox.ext.apps.vmanui.dialog.controller_hostname_edit"]){dojo._hasResource["nox.ext.apps.vmanui.dialog.controller_hostname_edit"]=true;dojo.provide("nox.ext.apps.vmanui.dialog.controller_hostname_edit");dojo.require("nox.ext.apps.vmanui.BoundedDialog");dojo.declare("nox.ext.apps.vmanui.HostNameTextbox",dijit.form.ValidationTextBox,{lowercase:true,isValid:function(){return this.inherited(arguments)&&this.isHostNameValid();},isHostNameValid:function(){var _1=this.textbox.value;if(/^-/.test(_1)||/-$/.test(_1)){return false;}if(/[^a-z0-9-]/.test(_1)){return false;}return true;}});dojo.declare("nox.ext.apps.vmanui.DomainNameTextbox",dijit.form.ValidationTextBox,{lowercase:true,isValid:function(){return this.inherited(arguments)&&this.isDomainNameValid();},isDomainNameValid:function(){var _2=this.textbox.value;var _3=_2.split(".");for(var i=0;i<_3.length;i++){var _5=_3[i];if(/^-/.test(_5)||/-$/.test(_5)){return false;}if(/[^a-z0-9-]/.test(_5)){return false;}}return true;}});dojo.declare("nox.ext.apps.vmanui.dialog.controller_hostname_edit",[dijit._Widget,dijit._Templated],{popup:null,widgetsInTemplate:true,hostname:null,domain:null,templateString:"<div>\n  <form dojoType=\"dijit.form.Form\" dojoAttachEvent=\"onSubmit:formSubmit\">\n    <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" class=\"TableFirewallPolicy\" style=\"background:none;border:none\">\n      <tr>\n        <td><label>Host Name:</label></td>\n        <td><input dojoType=\"nox.ext.apps.vmanui.HostNameTextbox\" name=\"hostname\"\n             dojoAttachPoint=\"hostNameInput\" type=\"text\" required=\"true\" style=\"padding:0\"\n             dojoAttachEvent=\"onKeyUp:_check_submit_enabled\" /></td>\n      </tr>\n      <tr>\n        <td><label>Domain Name:</label></td>\n        <td><input dojoType=\"nox.ext.apps.vmanui.DomainNameTextbox\" name=\"domainname\"\n             dojoAttachPoint=\"domainNameInput\" type=\"text\" required=\"false\" style=\"padding:0\"\n             dojoAttachEvent=\"onKeyUp:_check_submit_enabled\" /></td>\n      </tr>\n    </table>\n\n    <div class=\"dialogButtonContainer\">\n      <button class=\"blueButton\" dojoType=\"dijit.form.Button\" dojoAttachPoint=\"submit_button\" disabled=\"true\" type=\"submit\">Make Changes</button>\n      <button dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:onCancel\">Cancel</button>\n    </div>\n\n  </form>\n</div>\n",constructor:function(){this.hostname="";this.domain="";},postMixInProperties:function(){this.inherited(arguments);this.popup=new nox.ext.apps.vmanui.BoundedDialog({});dojo.connect(this.popup,"onCancel",this,"onCancel");this.popup.attr("title","Controller Host Settings");},show:function(){this.hostNameInput.attr("value",this.hostname);this.domainNameInput.attr("value",this.domain);this._check_submit_enabled();this.submit_button.attr("disabled",true);this.popup.attr("content",this.domNode);dojo.addClass(this.popup.domNode,"controllerAddrEditDialog");nox.ext.apps.vmanui.main.onDialogOpen();this.popup.show();},formSubmit:function(_6){dojo.stopEvent(_6);this.onSubmit();},hide:function(){nox.ext.apps.vmanui.main.onDialogClose();this.popup.destroy();this.destroy();},_check_submit_enabled:function(){this.submit_button.attr("disabled",!this.isValid());},isValid:function(){return this.hostNameInput.isValid()&&this.domainNameInput.isValid();},onCancel:function(){this.hide();},onSubmit:function(){if(!this.isValid()){return;}this.onSave(this.hostNameInput.attr("value"),this.domainNameInput.attr("value"));this.hide();},onSave:function(_7,_8){}});}