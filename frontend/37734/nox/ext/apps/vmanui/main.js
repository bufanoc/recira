/* Copyright (c) 2008, 2009, 2010 Nicira, Inc. */
dojo.provide("nox.ext.apps.vmanui.main");if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(_1,_2){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _3=dojo.date.stamp._isoRegExp.exec(_1);var _4=null;if(_3){_3.shift();if(_3[1]){_3[1]--;}if(_3[6]){_3[6]*=1000;}if(_2){_2=new Date(_2);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(_5){return _2["get"+_5]();}).forEach(function(_6,_7){if(_3[_7]===undefined){_3[_7]=_6;}});}_4=new Date(_3[0]||1970,_3[1]||0,_3[2]||1,_3[3]||0,_3[4]||0,_3[5]||0,_3[6]||0);var _8=0;var _9=_3[7]&&_3[7].charAt(0);if(_9!="Z"){_8=((_3[8]||0)*60)+(Number(_3[9])||0);if(_9!="-"){_8*=-1;}}if(_9){_8-=_4.getTimezoneOffset();}if(_8){_4.setTime(_4.getTime()+_8*60000);}}return _4;};dojo.date.stamp.toISOString=function(_a,_b){var _=function(n){return (n<10)?"0"+n:n;};_b=_b||{};var _e=[];var _f=_b.zulu?"getUTC":"get";var _10="";if(_b.selector!="time"){var _11=_a[_f+"FullYear"]();_10=["0000".substr((_11+"").length)+_11,_(_a[_f+"Month"]()+1),_(_a[_f+"Date"]())].join("-");}_e.push(_10);if(_b.selector!="date"){var _12=[_(_a[_f+"Hours"]()),_(_a[_f+"Minutes"]()),_(_a[_f+"Seconds"]())].join(":");var _13=_a[_f+"Milliseconds"]();if(_b.milliseconds){_12+="."+(_13<100?"0":"")+_(_13);}if(_b.zulu){_12+="Z";}else{if(_b.selector!="time"){var _14=_a.getTimezoneOffset();var _15=Math.abs(_14);_12+=(_14>0?"-":"+")+_(Math.floor(_15/60))+":"+_(_15%60);}}_e.push(_12);}return _e.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){var d=dojo;var _17=d._scopeName+"Type";var qry="["+_17+"]";var _19=0,_1a={};var _1b=function(_1c,_1d){var nso=_1d||_1a;if(dojo.isIE){var cn=_1c["__dojoNameCache"];if(cn&&nso[cn]===_1c){return cn;}}var _20;do{_20="__"+_19++;}while(_20 in nso);nso[_20]=_1c;return _20;};function _21(_22){if(d.isString(_22)){return "string";}if(typeof _22=="number"){return "number";}if(typeof _22=="boolean"){return "boolean";}if(d.isFunction(_22)){return "function";}if(d.isArray(_22)){return "array";}if(_22 instanceof Date){return "date";}if(_22 instanceof d._Url){return "url";}return "object";};function _23(_24,_25){switch(_25){case "string":return _24;case "number":return _24.length?Number(_24):NaN;case "boolean":return typeof _24=="boolean"?_24:!(_24.toLowerCase()=="false");case "function":if(d.isFunction(_24)){_24=_24.toString();_24=d.trim(_24.substring(_24.indexOf("{")+1,_24.length-1));}try{if(_24.search(/[^\w\.]+/i)!=-1){_24=_1b(new Function(_24),this);}return d.getObject(_24,false);}catch(e){return new Function();}case "array":return _24?_24.split(/\s*,\s*/):[];case "date":switch(_24){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_24);}case "url":return d.baseUrl+_24;default:return d.fromJson(_24);}};var _26={};function _27(_28){if(!_26[_28]){var cls=d.getObject(_28);if(!d.isFunction(cls)){throw new Error("Could not load class '"+_28+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?");}var _2a=cls.prototype;var _2b={},_2c={};for(var _2d in _2a){if(_2d.charAt(0)=="_"){continue;}if(_2d in _2c){continue;}var _2e=_2a[_2d];_2b[_2d]=_21(_2e);}_26[_28]={cls:cls,params:_2b};}return _26[_28];};this._functionFromScript=function(_2f){var _30="";var _31="";var _32=_2f.getAttribute("args");if(_32){d.forEach(_32.split(/\s*,\s*/),function(_33,idx){_30+="var "+_33+" = arguments["+idx+"]; ";});}var _35=_2f.getAttribute("with");if(_35&&_35.length){d.forEach(_35.split(/\s*,\s*/),function(_36){_30+="with("+_36+"){";_31+="}";});}return new Function(_30+_2f.innerHTML+_31);};this.instantiate=function(_37,_38){var _39=[];_38=_38||{};d.forEach(_37,function(_3a){if(!_3a){return;}var _3b=_17 in _38?_38[_17]:_3a.getAttribute(_17);if(!_3b||!_3b.length){return;}var _3c=_27(_3b),_3d=_3c.cls,ps=_3d._noScript||_3d.prototype._noScript;var _3f={},_40=_3a.attributes;for(var _41 in _3c.params){var _42=_41 in _38?{value:_38[_41],specified:true}:_40.getNamedItem(_41);if(!_42||(!_42.specified&&(!dojo.isIE||_41.toLowerCase()!="value"))){continue;}var _43=_42.value;switch(_41){case "class":_43="className" in _38?_38.className:_3a.className;break;case "style":_43="style" in _38?_38.style:(_3a.style&&_3a.style.cssText);}var _44=_3c.params[_41];if(typeof _43=="string"){_3f[_41]=_23(_43,_44);}else{_3f[_41]=_43;}}if(!ps){var _45=[],_46=[];d.query("> script[type^='dojo/']",_3a).orphan().forEach(function(_47){var _48=_47.getAttribute("event"),_3b=_47.getAttribute("type"),nf=d.parser._functionFromScript(_47);if(_48){if(_3b=="dojo/connect"){_45.push({event:_48,func:nf});}else{_3f[_48]=nf;}}else{_46.push(nf);}});}var _4a=_3d["markupFactory"];if(!_4a&&_3d["prototype"]){_4a=_3d.prototype["markupFactory"];}var _4b=_4a?_4a(_3f,_3a,_3d):new _3d(_3f,_3a);_39.push(_4b);var _4c=_3a.getAttribute("jsId");if(_4c){d.setObject(_4c,_4b);}if(!ps){d.forEach(_45,function(_4d){d.connect(_4b,_4d.event,null,_4d.func);});d.forEach(_46,function(_4e){_4e.call(_4b);});}});d.forEach(_39,function(_4f){if(_4f&&_4f.startup&&!_4f._started&&(!_4f.getParent||!_4f.getParent())){_4f.startup();}});return _39;};this.parse=function(_50){var _51=d.query(qry,_50);var _52=this.instantiate(_51);return _52;};}();(function(){var _53=function(){if(dojo.config["parseOnLoad"]==true){dojo.parser.parse();}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,_53);}else{dojo._loaders.unshift(_53);}})();}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){var _54=dojo.doc;if(_54.selection){var s=_54.selection;if(s.type=="Text"){return !s.createRange().htmlText.length;}else{return !s.createRange().length;}}else{var _56=dojo.global;var _57=_56.getSelection();if(dojo.isString(_57)){return !_57;}else{return !_57||_57.isCollapsed||!_57.toString();}}},getBookmark:function(){var _58,_59=dojo.doc.selection;if(_59){var _5a=_59.createRange();if(_59.type.toUpperCase()=="CONTROL"){if(_5a.length){_58=[];var i=0,len=_5a.length;while(i<len){_58.push(_5a.item(i++));}}else{_58=null;}}else{_58=_5a.getBookmark();}}else{if(window.getSelection){_59=dojo.global.getSelection();if(_59){_5a=_59.getRangeAt(0);_58=_5a.cloneRange();}}else{console.warn("No idea how to store the current selection for this browser!");}}return _58;},moveToBookmark:function(_5d){var _5e=dojo.doc;if(_5e.selection){var _5f;if(dojo.isArray(_5d)){_5f=_5e.body.createControlRange();dojo.forEach(_5d,function(n){_5f.addElement(n);});}else{_5f=_5e.selection.createRange();_5f.moveToBookmark(_5d);}_5f.select();}else{var _61=dojo.global.getSelection&&dojo.global.getSelection();if(_61&&_61.removeAllRanges){_61.removeAllRanges();_61.addRange(_5d);}else{console.warn("No idea how to restore selection for this browser!");}}},getFocus:function(_62,_63){return {node:_62&&dojo.isDescendant(dijit._curFocus,_62.domNode)?dijit._prevFocus:dijit._curFocus,bookmark:!dojo.withGlobal(_63||dojo.global,dijit.isCollapsed)?dojo.withGlobal(_63||dojo.global,dijit.getBookmark):null,openedForWindow:_63};},focus:function(_64){if(!_64){return;}var _65="node" in _64?_64.node:_64,_66=_64.bookmark,_67=_64.openedForWindow;if(_65){var _68=(_65.tagName.toLowerCase()=="iframe")?_65.contentWindow:_65;if(_68&&_68.focus){try{_68.focus();}catch(e){}}dijit._onFocusNode(_65);}if(_66&&dojo.withGlobal(_67||dojo.global,dijit.isCollapsed)){if(_67){_67.focus();}try{dojo.withGlobal(_67||dojo.global,dijit.moveToBookmark,null,[_66]);}catch(e){}}},_activeStack:[],registerIframe:function(_69){dijit.registerWin(_69.contentWindow,_69);},registerWin:function(_6a,_6b){dojo.connect(_6a.document,"onmousedown",function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);dijit._onTouchNode(_6b||evt.target||evt.srcElement);});var doc=_6a.document;if(doc){if(dojo.isIE){doc.attachEvent("onactivate",function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"){dijit._onFocusNode(_6b||evt.srcElement);}});doc.attachEvent("ondeactivate",function(evt){dijit._onBlurNode(_6b||evt.srcElement);});}else{doc.addEventListener("focus",function(evt){dijit._onFocusNode(_6b||evt.target);},true);doc.addEventListener("blur",function(evt){dijit._onBlurNode(_6b||evt.target);},true);}}doc=null;},_onBlurNode:function(_72){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(_73){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _74=[];try{while(_73){if(_73.dijitPopupParent){_73=dijit.byId(_73.dijitPopupParent).domNode;}else{if(_73.tagName&&_73.tagName.toLowerCase()=="body"){if(_73===dojo.body()){break;}_73=dijit.getDocumentWindow(_73.ownerDocument).frameElement;}else{var id=_73.getAttribute&&_73.getAttribute("widgetId");if(id){_74.unshift(id);}_73=_73.parentNode;}}}}catch(e){}dijit._setStack(_74);},_onFocusNode:function(_76){if(!_76){return;}if(_76.nodeType==9){return;}dijit._onTouchNode(_76);if(_76==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=_76;dojo.publish("focusNode",[_76]);},_setStack:function(_77){var _78=dijit._activeStack;dijit._activeStack=_77;for(var _79=0;_79<Math.min(_78.length,_77.length);_79++){if(_78[_79]!=_77[_79]){break;}}for(var i=_78.length-1;i>=_79;i--){var _7b=dijit.byId(_78[i]);if(_7b){_7b._focused=false;_7b._hasBeenBlurred=true;if(_7b._onBlur){_7b._onBlur();}if(_7b._setStateClass){_7b._setStateClass();}dojo.publish("widgetBlur",[_7b]);}}for(i=_79;i<_77.length;i++){_7b=dijit.byId(_77[i]);if(_7b){_7b._focused=true;if(_7b._onFocus){_7b._onFocus();}if(_7b._setStateClass){_7b._setStateClass();}dojo.publish("widgetFocus",[_7b]);}}}});dojo.addOnLoad(function(){dijit.registerWin(window);});}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};},add:function(_7c){if(this._hash[_7c.id]){throw new Error("Tried to register widget with id=="+_7c.id+" but that id is already registered");}this._hash[_7c.id]=_7c;},remove:function(id){delete this._hash[id];},forEach:function(_7e){for(var id in this._hash){_7e(this._hash[id]);}},filter:function(_80){var res=new dijit.WidgetSet();this.forEach(function(_82){if(_80(_82)){res.add(_82);}});return res;},byId:function(id){return this._hash[id];},byClass:function(cls){return this.filter(function(_85){return _85.declaredClass==cls;});}});dijit.registry=new dijit.WidgetSet();dijit._widgetTypeCtr={};dijit.getUniqueId=function(_86){var id;do{id=_86+"_"+(_86 in dijit._widgetTypeCtr?++dijit._widgetTypeCtr[_86]:dijit._widgetTypeCtr[_86]=0);}while(dijit.byId(id));return id;};dijit.findWidgets=function(_88){var _89=[];function _8a(_8b){var _8c=dojo.isIE?_8b.children:_8b.childNodes,i=0,_8e;while(_8e=_8c[i++]){if(_8e.nodeType!=1){continue;}var _8f=_8e.getAttribute("widgetId");if(_8f){var _90=dijit.byId(_8f);_89.push(_90);}else{_8a(_8e);}}};_8a(_88);return _89;};if(dojo.isIE){dojo.addOnWindowUnload(function(){dojo.forEach(dijit.findWidgets(dojo.body()),function(_91){if(_91.destroyRecursive){_91.destroyRecursive();}else{if(_91.destroy){_91.destroy();}}});});}dijit.byId=function(id){return (dojo.isString(id))?dijit.registry.byId(id):id;};dijit.byNode=function(_93){return dijit.registry.byId(_93.getAttribute("widgetId"));};dijit.getEnclosingWidget=function(_94){while(_94){if(_94.getAttribute&&_94.getAttribute("widgetId")){return dijit.registry.byId(_94.getAttribute("widgetId"));}_94=_94.parentNode;}return null;};dijit._tabElements={area:true,button:true,input:true,object:true,select:true,textarea:true};dijit._isElementShown=function(_95){var _96=dojo.style(_95);return (_96.visibility!="hidden")&&(_96.visibility!="collapsed")&&(_96.display!="none")&&(dojo.attr(_95,"type")!="hidden");};dijit.isTabNavigable=function(_97){if(dojo.hasAttr(_97,"disabled")){return false;}var _98=dojo.hasAttr(_97,"tabindex");var _99=dojo.attr(_97,"tabindex");if(_98&&_99>=0){return true;}var _9a=_97.nodeName.toLowerCase();if(((_9a=="a"&&dojo.hasAttr(_97,"href"))||dijit._tabElements[_9a])&&(!_98||_99>=0)){return true;}return false;};dijit._getTabNavigable=function(_9b){var _9c,_9d,_9e,_9f,_a0,_a1;var _a2=function(_a3){dojo.query("> *",_a3).forEach(function(_a4){var _a5=dijit._isElementShown(_a4);if(_a5&&dijit.isTabNavigable(_a4)){var _a6=dojo.attr(_a4,"tabindex");if(!dojo.hasAttr(_a4,"tabindex")||_a6==0){if(!_9c){_9c=_a4;}_9d=_a4;}else{if(_a6>0){if(!_9e||_a6<_9f){_9f=_a6;_9e=_a4;}if(!_a0||_a6>=_a1){_a1=_a6;_a0=_a4;}}}}if(_a5&&_a4.nodeName.toUpperCase()!="SELECT"){_a2(_a4);}});};if(dijit._isElementShown(_9b)){_a2(_9b);}return {first:_9c,last:_9d,lowest:_9e,highest:_a0};};dijit.getFirstInTabbingOrder=function(_a7){var _a8=dijit._getTabNavigable(dojo.byId(_a7));return _a8.lowest?_a8.lowest:_a8.first;};dijit.getLastInTabbingOrder=function(_a9){var _aa=dijit._getTabNavigable(dojo.byId(_a9));return _aa.last?_aa.last:_aa.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_ab){this.pairs=[];this.returnWrappers=_ab||false;};dojo.extend(dojo.AdapterRegistry,{register:function(_ac,_ad,_ae,_af,_b0){this.pairs[((_b0)?"unshift":"push")]([_ac,_ad,_ae,_af]);},match:function(){for(var i=0;i<this.pairs.length;i++){var _b2=this.pairs[i];if(_b2[1].apply(this,arguments)){if((_b2[3])||(this.returnWrappers)){return _b2[2];}else{return _b2[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(_b3){for(var i=0;i<this.pairs.length;i++){var _b5=this.pairs[i];if(_b5[0]==_b3){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){var _b6=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _b7=dojo._docScroll();return {w:_b6.clientWidth,h:_b6.clientHeight,l:_b7.x,t:_b7.y};};dijit.placeOnScreen=function(_b8,pos,_ba,_bb){var _bc=dojo.map(_ba,function(_bd){var c={corner:_bd,pos:{x:pos.x,y:pos.y}};if(_bb){c.pos.x+=_bd.charAt(1)=="L"?_bb.x:-_bb.x;c.pos.y+=_bd.charAt(0)=="T"?_bb.y:-_bb.y;}return c;});return dijit._place(_b8,_bc);};dijit._place=function(_bf,_c0,_c1){var _c2=dijit.getViewport();if(!_bf.parentNode||String(_bf.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(_bf);}var _c3=null;dojo.some(_c0,function(_c4){var _c5=_c4.corner;var pos=_c4.pos;if(_c1){_c1(_bf,_c4.aroundCorner,_c5);}var _c7=_bf.style;var _c8=_c7.display;var _c9=_c7.visibility;_c7.visibility="hidden";_c7.display="";var mb=dojo.marginBox(_bf);_c7.display=_c8;_c7.visibility=_c9;var _cb=(_c5.charAt(1)=="L"?pos.x:Math.max(_c2.l,pos.x-mb.w)),_cc=(_c5.charAt(0)=="T"?pos.y:Math.max(_c2.t,pos.y-mb.h)),_cd=(_c5.charAt(1)=="L"?Math.min(_c2.l+_c2.w,_cb+mb.w):pos.x),_ce=(_c5.charAt(0)=="T"?Math.min(_c2.t+_c2.h,_cc+mb.h):pos.y),_cf=_cd-_cb,_d0=_ce-_cc,_d1=(mb.w-_cf)+(mb.h-_d0);if(_c3==null||_d1<_c3.overflow){_c3={corner:_c5,aroundCorner:_c4.aroundCorner,x:_cb,y:_cc,w:_cf,h:_d0,overflow:_d1};}return !_d1;});_bf.style.left=_c3.x+"px";_bf.style.top=_c3.y+"px";if(_c3.overflow&&_c1){_c1(_bf,_c3.aroundCorner,_c3.corner);}return _c3;};dijit.placeOnScreenAroundNode=function(_d2,_d3,_d4,_d5){_d3=dojo.byId(_d3);var _d6=_d3.style.display;_d3.style.display="";var _d7=_d3.offsetWidth;var _d8=_d3.offsetHeight;var _d9=dojo.coords(_d3,true);_d3.style.display=_d6;return dijit._placeOnScreenAroundRect(_d2,_d9.x,_d9.y,_d7,_d8,_d4,_d5);};dijit.placeOnScreenAroundRectangle=function(_da,_db,_dc,_dd){return dijit._placeOnScreenAroundRect(_da,_db.x,_db.y,_db.width,_db.height,_dc,_dd);};dijit._placeOnScreenAroundRect=function(_de,x,y,_e1,_e2,_e3,_e4){var _e5=[];for(var _e6 in _e3){_e5.push({aroundCorner:_e6,corner:_e3[_e6],pos:{x:x+(_e6.charAt(1)=="L"?0:_e1),y:y+(_e6.charAt(0)=="T"?0:_e2)}});}return dijit._place(_de,_e5,_e4);};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(_eb,_ec,_ed,_ee){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){if(dojo.isIE&&window!==document.parentWindow&&!doc._parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc._parentWindow||doc.parentWindow||doc.defaultView;};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup=new function(){var _f1=[],_f2=1000,_f3=1;this.prepare=function(_f4){var s=_f4.style;s.visibility="hidden";s.position="absolute";s.top="-9999px";if(s.display=="none"){s.display="";}dojo.body().appendChild(_f4);};this.open=function(_f6){var _f7=_f6.popup,_f8=_f6.orient||{"BL":"TL","TL":"BL"},_f9=_f6.around,id=(_f6.around&&_f6.around.id)?(_f6.around.id+"_dropdown"):("popup_"+_f3++);var _fb=dojo.create("div",{id:id,"class":"dijitPopup",style:{zIndex:_f2+_f1.length,visibility:"hidden"}},dojo.body());dijit.setWaiRole(_fb,"presentation");_fb.style.left=_fb.style.top="0px";if(_f6.parent){_fb.dijitPopupParent=_f6.parent.id;}var s=_f7.domNode.style;s.display="";s.visibility="";s.position="";s.top="0px";_fb.appendChild(_f7.domNode);var _fd=new dijit.BackgroundIframe(_fb);var _fe=_f9?dijit.placeOnScreenAroundElement(_fb,_f9,_f8,_f7.orient?dojo.hitch(_f7,"orient"):null):dijit.placeOnScreen(_fb,_f6,_f8=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],_f6.padding);_fb.style.visibility="visible";var _ff=[];var _100=function(){for(var pi=_f1.length-1;pi>0&&_f1[pi].parent===_f1[pi-1].widget;pi--){}return _f1[pi];};_ff.push(dojo.connect(_fb,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&_f6.onCancel){dojo.stopEvent(evt);_f6.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _103=_100();if(_103&&_103.onCancel){_103.onCancel();}}}}));if(_f7.onCancel){_ff.push(dojo.connect(_f7,"onCancel",null,_f6.onCancel));}_ff.push(dojo.connect(_f7,_f7.onExecute?"onExecute":"onChange",null,function(){var _104=_100();if(_104&&_104.onExecute){_104.onExecute();}}));_f1.push({wrapper:_fb,iframe:_fd,widget:_f7,parent:_f6.parent,onExecute:_f6.onExecute,onCancel:_f6.onCancel,onClose:_f6.onClose,handlers:_ff});if(_f7.onOpen){_f7.onOpen(_fe);}return _fe;};this.close=function(_105){while(dojo.some(_f1,function(elem){return elem.widget==_105;})){var top=_f1.pop(),_108=top.wrapper,_109=top.iframe,_10a=top.widget,_10b=top.onClose;if(_10a.onClose){_10a.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(!_10a||!_10a.domNode){return;}this.prepare(_10a.domNode);_109.destroy();dojo.destroy(_108);if(_10b){_10b();}}};}();dijit._frames=new function(){var _10c=[];this.pop=function(){var _10d;if(_10c.length){_10d=_10c.pop();_10d.style.display="";}else{if(dojo.isIE){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_10d=dojo.doc.createElement(html);}else{_10d=dojo.create("iframe");_10d.src="javascript:\"\"";_10d.className="dijitBackgroundIframe";}_10d.tabIndex=-1;dojo.body().appendChild(_10d);}return _10d;};this.push=function(_110){_110.style.display="none";if(dojo.isIE){_110.style.removeExpression("width");_110.style.removeExpression("height");}_10c.push(_110);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE<7||(dojo.isFF<3&&dojo.hasClass(dojo.body(),"dijit_a11y"))){var _112=dijit._frames.pop();node.appendChild(_112);if(dojo.isIE){_112.style.setExpression("width",dojo._scopeName+".doc.getElementById('"+node.id+"').offsetWidth");_112.style.setExpression("height",dojo._scopeName+".doc.getElementById('"+node.id+"').offsetHeight");}this.iframe=_112;}};dojo.extend(dijit.BackgroundIframe,{destroy:function(){if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node){try{node=dojo.byId(node);var doc=dojo.doc;var body=dojo.body();var html=body.parentNode;if((!(dojo.isFF>=3||dojo.isIE||dojo.isWebKit)||node==body||node==html)&&(typeof node.scrollIntoView=="function")){node.scrollIntoView(false);return;}var ltr=dojo._isBodyLtr();var _118=dojo.isIE>=8&&!_119;var rtl=!ltr&&!_118;var _11b=body;var _119=doc.compatMode=="BackCompat";if(_119){html._offsetWidth=html._clientWidth=body._offsetWidth=body.clientWidth;html._offsetHeight=html._clientHeight=body._offsetHeight=body.clientHeight;}else{if(dojo.isWebKit){body._offsetWidth=body._clientWidth=html.clientWidth;body._offsetHeight=body._clientHeight=html.clientHeight;}else{_11b=html;}html._offsetHeight=html.clientHeight;html._offsetWidth=html.clientWidth;}function _11c(_11d){var ie=dojo.isIE;return ((ie<=6||(ie>=7&&_119))?false:(dojo.style(_11d,"position").toLowerCase()=="fixed"));};function _11f(_120){var _121=_120.parentNode;var _122=_120.offsetParent;if(_122==null||_11c(_120)){_122=html;_121=(_120==body)?html:null;}_120._offsetParent=_122;_120._parent=_121;var bp=dojo._getBorderExtents(_120);_120._borderStart={H:(_118&&!ltr)?(bp.w-bp.l):bp.l,V:bp.t};_120._borderSize={H:bp.w,V:bp.h};_120._scrolledAmount={H:_120.scrollLeft,V:_120.scrollTop};_120._offsetSize={H:_120._offsetWidth||_120.offsetWidth,V:_120._offsetHeight||_120.offsetHeight};_120._offsetStart={H:(_118&&!ltr)?_122.clientWidth-_120.offsetLeft-_120._offsetSize.H:_120.offsetLeft,V:_120.offsetTop};_120._clientSize={H:_120._clientWidth||_120.clientWidth,V:_120._clientHeight||_120.clientHeight};if(_120!=body&&_120!=html&&_120!=node){for(var dir in _120._offsetSize){var _125=_120._offsetSize[dir]-_120._clientSize[dir]-_120._borderSize[dir];var _126=_120._clientSize[dir]>0&&_125>0;if(_126){_120._offsetSize[dir]-=_125;if(dojo.isIE&&rtl&&dir=="H"){_120._offsetStart[dir]+=_125;}}}}};var _127=node;while(_127!=null){if(_11c(_127)){node.scrollIntoView(false);return;}_11f(_127);_127=_127._parent;}if(dojo.isIE&&node._parent){var _128=node._offsetParent;node._offsetStart.H+=_128._borderStart.H;node._offsetStart.V+=_128._borderStart.V;}if(dojo.isIE>=7&&_11b==html&&rtl&&body._offsetStart&&body._offsetStart.H==0){var _129=html.scrollWidth-html._offsetSize.H;if(_129>0){body._offsetStart.H=-_129;}}if(dojo.isIE<=6&&!_119){html._offsetSize.H+=html._borderSize.H;html._offsetSize.V+=html._borderSize.V;}if(rtl&&body._offsetStart&&_11b==html&&html._scrolledAmount){var ofs=body._offsetStart.H;if(ofs<0){html._scrolledAmount.H+=ofs;body._offsetStart.H=0;}}_127=node;while(_127){var _12b=_127._parent;if(!_12b){break;}if(_12b.tagName=="TD"){var _12c=_12b._parent._parent._parent;if(_12b!=_127._offsetParent&&_12b._offsetParent!=_127._offsetParent){_12b=_12c;}}var _12d=_127._offsetParent==_12b;for(var dir in _127._offsetStart){var _12f=dir=="H"?"V":"H";if(rtl&&dir=="H"&&(_12b!=html)&&(_12b!=body)&&(dojo.isIE||dojo.isWebKit)&&_12b._clientSize.H>0&&_12b.scrollWidth>_12b._clientSize.H){var _130=_12b.scrollWidth-_12b._clientSize.H;if(_130>0){_12b._scrolledAmount.H-=_130;}}if(_12b._offsetParent.tagName=="TABLE"){if(dojo.isIE){_12b._offsetStart[dir]-=_12b._offsetParent._borderStart[dir];_12b._borderStart[dir]=_12b._borderSize[dir]=0;}else{_12b._offsetStart[dir]+=_12b._offsetParent._borderStart[dir];}}if(dojo.isIE){_12b._offsetStart[dir]+=_12b._offsetParent._borderStart[dir];}var _131=_127._offsetStart[dir]-_12b._scrolledAmount[dir]-(_12d?0:_12b._offsetStart[dir])-_12b._borderStart[dir];var _132=_131+_127._offsetSize[dir]-_12b._offsetSize[dir]+_12b._borderSize[dir];var _133=(dir=="H")?"scrollLeft":"scrollTop";var _134=dir=="H"&&rtl;var _135=_134?-_132:_131;var _136=_134?-_131:_132;var _137=(_135*_136<=0)?0:Math[(_135<0)?"max":"min"](_135,_136);if(_137!=0){var _138=_12b[_133];_12b[_133]+=(_134)?-_137:_137;var _139=_12b[_133]-_138;}if(_12d){_127._offsetStart[dir]+=_12b._offsetStart[dir];}_127._offsetStart[dir]-=_12b[_133];}_127._parent=_12b._parent;_127._offsetParent=_12b._offsetParent;}_12b=node;var next;while(_12b&&_12b.removeAttribute){next=_12b.parentNode;_12b.removeAttribute("_offsetParent");_12b.removeAttribute("_parent");_12b=next;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}};}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_13e=d.isOpera,maj=Math.floor,ff=d.isFF,_141=d.boxModel.replace(/-/,""),_142={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_iequirks:ie&&d.isQuirks,dj_opera:_13e,dj_opera8:maj(_13e)==8,dj_opera9:maj(_13e)==9,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_gecko:d.isMozilla,dj_ff2:maj(ff)==2,dj_ff3:maj(ff)==3};_142["dj_"+_141]=true;for(var p in _142){if(_142[p]){if(html.className){html.className+=" "+p;}else{html.className=p;}}}dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){html.className+=" dijitRtl";for(var p in _142){if(_142[p]){html.className+=" "+p+"-rtl";}}}});})();}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=(this._currentTimeout<0)?this._initialDelay:((this._subsequentDelay>1)?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay));this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_146,node,_148,obj,_14a,_14b){if(obj!=this._obj){this.stop();this._initialDelay=_14b||500;this._subsequentDelay=_14a||0.9;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_146,_148);this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_14d,_14e,_14f,_150,_151){if(_14d.keyCode){_14d.charOrCode=_14d.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_14d.charCode){_14d.charOrCode=String.fromCharCode(_14d.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_14d.charOrCode&&(_14d.ctrlKey===undefined||_14d.ctrlKey==evt.ctrlKey)&&(_14d.altKey===undefined||_14d.altKey==evt.ctrlKey)&&(_14d.shiftKey===undefined||_14d.shiftKey==evt.ctrlKey)){dojo.stopEvent(evt);dijit.typematic.trigger(_14d,_14e,node,_14f,_14d,_150,_151);}else{if(dijit.typematic._obj==_14d){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_14d){dijit.typematic.stop();}})];},addMouseListener:function(node,_155,_156,_157,_158){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_155,node,_156,node,_157,_158);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){dojo.stopEvent(evt);}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_155,node,_156,node,_157,_158);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_15f,_160,_161,_162,_163,_164,_165){return this.addKeyListener(_160,_161,_162,_163,_164,_165).concat(this.addMouseListener(_15f,_162,_163,_164,_165));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _168=cs.backgroundImage;var _169=(cs.borderTopColor==cs.borderRightColor)||(_168!=null&&(_168=="none"||_168=="url(invalid-url:)"));dojo[_169?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(elem,role){var _16c=this.getWaiRole(elem);return role?(_16c.indexOf(role)>-1):(_16c.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""));},setWaiRole:function(elem,role){var _170=dojo.attr(elem,"role")||"";if(dojo.isFF<3||!this._XhtmlRoles.test(_170)){dojo.attr(elem,"role",dojo.isFF<3?"wairole:"+role:role);}else{if((" "+_170+" ").indexOf(" "+role+" ")<0){var _171=dojo.trim(_170.replace(this._XhtmlRoles,""));var _172=dojo.trim(_170.replace(_171,""));dojo.attr(elem,"role",_172+(_172?" ":"")+role);}}},removeWaiRole:function(elem,role){var _175=dojo.attr(elem,"role");if(!_175){return;}if(role){var _176=dojo.isFF<3?"wairole:"+role:role;var t=dojo.trim((" "+_175+" ").replace(" "+_176+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_179){if(dojo.isFF<3){return elem.hasAttributeNS("http://www.w3.org/2005/07/aaa",_179);}return elem.hasAttribute?elem.hasAttribute("aria-"+_179):!!elem.getAttribute("aria-"+_179);},getWaiState:function(elem,_17b){if(dojo.isFF<3){return elem.getAttributeNS("http://www.w3.org/2005/07/aaa",_17b);}return elem.getAttribute("aria-"+_17b)||"";},setWaiState:function(elem,_17d,_17e){if(dojo.isFF<3){elem.setAttributeNS("http://www.w3.org/2005/07/aaa","aaa:"+_17d,_17e);}else{elem.setAttribute("aria-"+_17d,_17e);}},removeWaiState:function(elem,_180){if(dojo.isFF<3){elem.removeAttributeNS("http://www.w3.org/2005/07/aaa",_180);}else{elem.removeAttribute("aria-"+_180);}}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"connect",function(_181,_182){if(_181&&dojo.isFunction(_181._onConnect)){_181._onConnect(_182);}});dijit._connectOnUseEventHandler=function(_183){};(function(){var _184={};var _185=function(dc){if(!_184[dc]){var r=[];var _188;var _189=dojo.getObject(dc).prototype;for(var _18a in _189){if(dojo.isFunction(_189[_18a])&&(_188=_18a.match(/^_set([a-zA-Z]*)Attr$/))&&_188[1]){r.push(_188[1].charAt(0).toLowerCase()+_188[1].substr(1));}}_184[dc]=r;}return _184[dc]||[];};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")),postscript:function(_18b,_18c){this.create(_18b,_18c);},create:function(_18d,_18e){this.srcNodeRef=dojo.byId(_18e);this._connects=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_18d){this.params=_18d;dojo.mixin(this,_18d);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _190=this.srcNodeRef;if(_190&&_190.parentNode){_190.parentNode.replaceChild(this.domNode,_190);}for(attr in this.params){this._onConnect(attr);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _191=function(attr,_193){if((_193.params&&attr in _193.params)||_193[attr]){_193.attr(attr,_193[attr]);}};for(var attr in this.attributeMap){_191(attr,this);}dojo.forEach(_185(this.declaredClass),function(a){if(!(a in this.attributeMap)){_191(a,this);}},this);},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div");},postCreate:function(){},startup:function(){this._started=true;},destroyRecursive:function(_196){this.destroyDescendants(_196);this.destroy(_196);},destroy:function(_197){this.uninitialize();dojo.forEach(this._connects,function(_198){dojo.forEach(_198,dojo.disconnect);});dojo.forEach(this._supportingWidgets||[],function(w){if(w.destroy){w.destroy();}});this.destroyRendering(_197);dijit.registry.remove(this.id);},destroyRendering:function(_19a){if(this.bgIframe){this.bgIframe.destroy(_19a);delete this.bgIframe;}if(this.domNode){if(_19a){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_19a){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_19b){dojo.forEach(this.getChildren(),function(_19c){if(_19c.destroyRecursive){_19c.destroyRecursive(_19b);}});},uninitialize:function(){return false;},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},_onConnect:function(_19e){if(_19e in this._deferredConnects){var _19f=this[this._deferredConnects[_19e]||"domNode"];this.connect(_19f,_19e.toLowerCase(),_19e);delete this._deferredConnects[_19e];}},_setClassAttr:function(_1a0){var _1a1=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(_1a1,this["class"]);this["class"]=_1a0;dojo.addClass(_1a1,_1a0);},_setStyleAttr:function(_1a2){var _1a3=this[this.attributeMap["style"]||"domNode"];if(dojo.isObject(_1a2)){dojo.style(_1a3,_1a2);}else{if(_1a3.style.cssText){_1a3.style.cssText+="; "+_1a2;}else{_1a3.style.cssText=_1a2;}}this["style"]=_1a2;},setAttribute:function(attr,_1a5){dojo.deprecated(this.declaredClass+"::setAttribute() is deprecated. Use attr() instead.","","2.0");this.attr(attr,_1a5);},_attrToDom:function(attr,_1a7){var _1a8=this.attributeMap[attr];dojo.forEach(dojo.isArray(_1a8)?_1a8:[_1a8],function(_1a9){var _1aa=this[_1a9.node||_1a9||"domNode"];var type=_1a9.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_1a7)){_1a7=dojo.hitch(this,_1a7);}if(/^on[A-Z][a-zA-Z]*$/.test(attr)){attr=attr.toLowerCase();}dojo.attr(_1aa,attr,_1a7);break;case "innerHTML":_1aa.innerHTML=_1a7;break;case "class":dojo.removeClass(_1aa,this[attr]);dojo.addClass(_1aa,_1a7);break;}},this);this[attr]=_1a7;},attr:function(name,_1ad){var args=arguments.length;if(args==1&&!dojo.isString(name)){for(var x in name){this.attr(x,name[x]);}return this;}var _1b0=this._getAttrNames(name);if(args==2){if(this[_1b0.s]){return this[_1b0.s](_1ad)||this;}else{if(name in this.attributeMap){this._attrToDom(name,_1ad);}this[name]=_1ad;}return this;}else{if(this[_1b0.g]){return this[_1b0.g]();}else{return this[name];}}},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"};},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){if(this.containerNode){var list=dojo.query("[widgetId]",this.containerNode);return list.map(dijit.byNode);}else{return [];}},getChildren:function(){if(this.containerNode){return dijit.findWidgets(this.containerNode);}else{return [];}},nodesWithKeyClick:["input","button"],connect:function(obj,_1b6,_1b7){var d=dojo;var dc=dojo.connect;var _1ba=[];if(_1b6=="ondijitclick"){if(!this.nodesWithKeyClick[obj.nodeName]){var m=d.hitch(this,_1b7);_1ba.push(dc(obj,"onkeydown",this,function(e){if(!d.isFF&&e.keyCode==d.keys.ENTER&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){return m(e);}else{if(e.keyCode==d.keys.SPACE){d.stopEvent(e);}}}),dc(obj,"onkeyup",this,function(e){if(e.keyCode==d.keys.SPACE&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){return m(e);}}));if(d.isFF){_1ba.push(dc(obj,"onkeypress",this,function(e){if(e.keyCode==d.keys.ENTER&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){return m(e);}}));}}_1b6="onclick";}_1ba.push(dc(obj,_1b6,this,_1b7));this._connects.push(_1ba);return _1ba;},disconnect:function(_1bf){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_1bf){dojo.forEach(_1bf,dojo.disconnect);this._connects.splice(i,1);return;}}},isLeftToRight:function(){return dojo._isBodyLtr();},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},placeAt:function(_1c1,_1c2){if(_1c1["declaredClass"]&&_1c1["addChild"]){_1c1.addChild(this,_1c2);}else{dojo.place(this.domNode,_1c1,_1c2);}return this;}});})();}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_1cc,map,_1ce,_1cf){_1cf=_1cf||dojo.global;_1ce=(!_1ce)?function(v){return v;}:dojo.hitch(_1cf,_1ce);return _1cc.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_1d1,key,_1d3){var _1d4=dojo.getObject(key,false,map);if(_1d3){_1d4=dojo.getObject(_1d3,false,_1cf).call(_1cf,_1d4,key);}return _1ce(_1d4,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_stringRepl:function(tmpl){var _1d8=this.declaredClass,_1d9=this;return dojo.string.substitute(tmpl,this,function(_1da,key){if(key.charAt(0)=="!"){_1da=dojo.getObject(key.substr(1),false,_1d9);}if(typeof _1da=="undefined"){throw new Error(_1d8+" template:"+key);}if(_1da==null){return "";}return key.charAt(0)=="!"?_1da:_1da.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _1dc=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_1dc)){node=dojo._toDom(this._stringRepl(_1dc));}else{node=_1dc.cloneNode(true);}this.domNode=node;this._attachTemplateNodes(node);if(this.widgetsInTemplate){var cw=(this._supportingWidgets=dojo.parser.parse(node));this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_1e1){var dest=this.containerNode;if(_1e1&&dest){while(_1e1.hasChildNodes()){dest.appendChild(_1e1.firstChild);}}},_attachTemplateNodes:function(_1e3,_1e4){_1e4=_1e4||function(n,p){return n.getAttribute(p);};var _1e7=dojo.isArray(_1e3)?_1e3:(_1e3.all||_1e3.getElementsByTagName("*"));var x=dojo.isArray(_1e3)?0:-1;for(;x<_1e7.length;x++){var _1e9=(x==-1)?_1e3:_1e7[x];if(this.widgetsInTemplate&&_1e4(_1e9,"dojoType")){continue;}var _1ea=_1e4(_1e9,"dojoAttachPoint");if(_1ea){var _1eb,_1ec=_1ea.split(/\s*,\s*/);while((_1eb=_1ec.shift())){if(dojo.isArray(this[_1eb])){this[_1eb].push(_1e9);}else{this[_1eb]=_1e9;}}}var _1ed=_1e4(_1e9,"dojoAttachEvent");if(_1ed){var _1ee,_1ef=_1ed.split(/\s*,\s*/);var trim=dojo.trim;while((_1ee=_1ef.shift())){if(_1ee){var _1f1=null;if(_1ee.indexOf(":")!=-1){var _1f2=_1ee.split(":");_1ee=trim(_1f2[0]);_1f1=trim(_1f2[1]);}else{_1ee=trim(_1ee);}if(!_1f1){_1f1=_1ee;}this.connect(_1e9,_1ee,_1f1);}}}var role=_1e4(_1e9,"waiRole");if(role){dijit.setWaiRole(_1e9,role);}var _1f4=_1e4(_1e9,"waiState");if(_1f4){dojo.forEach(_1f4.split(/\s*,\s*/),function(_1f5){if(_1f5.indexOf("-")!=-1){var pair=_1f5.split("-");dijit.setWaiState(_1e9,pair[0],pair[1]);}});}}}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_1f7,_1f8,_1f9){var _1fa=dijit._Templated._templateCache;var key=_1f8||_1f7;var _1fc=_1fa[key];if(_1fc){if(!_1fc.ownerDocument||_1fc.ownerDocument==dojo.doc){return _1fc;}dojo.destroy(_1fc);}if(!_1f8){_1f8=dijit._Templated._sanitizeTemplateString(dojo.trim(dojo._getText(_1f7)));}_1f8=dojo.string.trim(_1f8);if(_1f9||_1f8.match(/\$\{([^\}]+)\}/g)){return (_1fa[key]=_1f8);}else{return (_1fa[key]=dojo._toDom(_1f8));}};dijit._Templated._sanitizeTemplateString=function(_1fd){if(_1fd){_1fd=_1fd.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _1fe=_1fd.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_1fe){_1fd=_1fe[1];}}else{_1fd="";}return _1fd;};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _1ff=dijit._Templated._templateCache;for(var key in _1ff){var _201=_1ff[key];if(!isNaN(_201.nodeType)){dojo.destroy(_201);}delete _1ff[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_202,_203){var _204=this.containerNode;if(_203&&typeof _203=="number"){var _205=this.getChildren();if(_205&&_205.length>=_203){_204=_205[_203-1].domNode;_203="after";}}dojo.place(_202.domNode,_204,_203);if(this._started&&!_202._started){_202.startup();}},removeChild:function(_206){if(typeof _206=="number"&&_206>0){_206=this.getChildren()[_206];}if(!_206||!_206.domNode){return;}var node=_206.domNode;node.parentNode.removeChild(node);},_nextElement:function(node){do{node=node.nextSibling;}while(node&&node.nodeType!=1);return node;},_firstElement:function(node){node=node.firstChild;if(node&&node.nodeType!=1){node=this._nextElement(node);}return node;},getChildren:function(){return dojo.query("> [widgetId]",this.containerNode).map(dijit.byNode);},hasChildren:function(){return !!this._firstElement(this.containerNode);},destroyDescendants:function(_20a){dojo.forEach(this.getChildren(),function(_20b){_20b.destroyRecursive(_20a);});},_getSiblingOfChild:function(_20c,dir){var node=_20c.domNode;var _20f=(dir>0?"nextSibling":"previousSibling");do{node=node[_20f];}while(node&&(node.nodeType!=1||!dijit.byNode(node)));return node?dijit.byNode(node):null;},getIndexOfChild:function(_210){var _211=this.getChildren();for(var i=0,c;c=_211[i];i++){if(c==_210){return i;}}return -1;}});}if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){for(var p=this.domNode.parentNode;p;p=p.parentNode){var id=p.getAttribute&&p.getAttribute("widgetId");if(id){var _216=dijit.byId(id);return _216.isContainer?_216:null;}}return null;},_getSibling:function(_217){var node=this.domNode;do{node=node[_217+"Sibling"];}while(node&&node.nodeType!=1);if(!node){return null;}var id=node.getAttribute("widgetId");return dijit.byId(id);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer");dojo.addClass(this.domNode,this.baseClass);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_21b){_21b.startup();});if(!this.getParent||!this.getParent()){this.resize();this._viewport=dijit.getViewport();this.connect(dojo.global,"onresize",function(){var _21c=dijit.getViewport();if(_21c.w!=this._viewport.w||_21c.h!=this._viewport.h){this._viewport=_21c;this.resize();}});}this.inherited(arguments);},resize:function(_21d,_21e){var node=this.domNode;if(_21d){dojo.marginBox(node,_21d);if(_21d.t){node.style.top=_21d.t+"px";}if(_21d.l){node.style.left=_21d.l+"px";}}var mb=_21e||{};dojo.mixin(mb,_21d||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(node),mb);}var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var be=dojo._getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=dojo._getPadExtents(node,cs);this._contentBox={l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_226){dojo.addClass(_226.domNode,this.baseClass+"-child");if(_226.baseClass){dojo.addClass(_226.domNode,this.baseClass+"-"+_226.baseClass);}},addChild:function(_227,_228){this.inherited(arguments);if(this._started){this._setupChild(_227);}},removeChild:function(_229){dojo.removeClass(_229.domNode,this.baseClass+"-child");if(_229.baseClass){dojo.removeClass(_229.domNode,this.baseClass+"-"+_229.baseClass);}this.inherited(arguments);}});dijit.layout.marginBox2contentBox=function(node,mb){var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var pb=dojo._getPadBorderExtents(node,cs);return {l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};(function(){var _22f=function(word){return word.substring(0,1).toUpperCase()+word.substring(1);};var size=function(_232,dim){_232.resize?_232.resize(dim):dojo.marginBox(_232.domNode,dim);dojo.mixin(_232,dojo.marginBox(_232.domNode));dojo.mixin(_232,dim);};dijit.layout.layoutChildren=function(_234,dim,_236){dim=dojo.mixin({},dim);dojo.addClass(_234,"dijitLayoutContainer");_236=dojo.filter(_236,function(item){return item.layoutAlign!="client";}).concat(dojo.filter(_236,function(item){return item.layoutAlign=="client";}));dojo.forEach(_236,function(_239){var elm=_239.domNode,pos=_239.layoutAlign;var _23c=elm.style;_23c.left=dim.l+"px";_23c.top=dim.t+"px";_23c.bottom=_23c.right="auto";dojo.addClass(elm,"dijitAlign"+_22f(pos));if(pos=="top"||pos=="bottom"){size(_239,{w:dim.w});dim.h-=_239.h;if(pos=="top"){dim.t+=_239.h;}else{_23c.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){size(_239,{h:dim.h});dim.w-=_239.w;if(pos=="left"){dim.l+=_239.w;}else{_23c.left=dim.l+dim.w+"px";}}else{if(pos=="client"){size(_239,dim);}}}});};})();}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,readOnly:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",disabled:"focusNode",readOnly:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},_setDisabledAttr:function(_23d){this.disabled=_23d;dojo.attr(this.focusNode,"disabled",_23d);dijit.setWaiState(this.focusNode,"disabled",_23d);if(_23d){this._hovering=false;this._active=false;this.focusNode.removeAttribute("tabIndex");}else{this.focusNode.setAttribute("tabIndex",this.tabIndex);}this._setStateClass();},setDisabled:function(_23e){dojo.deprecated("setDisabled("+_23e+") is deprecated. Use attr('disabled',"+_23e+") instead.","","2.0");this.attr("disabled",_23e);},_onFocus:function(e){if(this.scrollOnFocus){dijit.scrollIntoView(this.domNode);}this.inherited(arguments);},_onMouse:function(_240){var _241=_240.currentTarget;if(_241&&_241.getAttribute){this.stateModifier=_241.getAttribute("stateModifier")||"";}if(!this.disabled){switch(_240.type){case "mouseenter":case "mouseover":this._hovering=true;this._active=this._mouseDown;break;case "mouseout":case "mouseleave":this._hovering=false;this._active=false;break;case "mousedown":this._active=true;this._mouseDown=true;var _242=this.connect(dojo.body(),"onmouseup",function(){if(this._mouseDown&&this.isFocusable()){this.focus();}this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(_242);});break;}this._setStateClass();}},isFocusable:function(){return !this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");},focus:function(){dijit.focus(this.focusNode);},_setStateClass:function(){var _243=this.baseClass.split(" ");function _244(_245){_243=_243.concat(dojo.map(_243,function(c){return c+_245;}),"dijit"+_245);};if(this.checked){_244("Checked");}if(this.state){_244(this.state);}if(this.selected){_244("Selected");}if(this.disabled){_244("Disabled");}else{if(this.readOnly){_244("ReadOnly");}else{if(this._active){_244(this.stateModifier+"Active");}else{if(this._focused){_244("Focused");}if(this._hovering){_244(this.stateModifier+"Hover");}}}}var tn=this.stateNode||this.domNode,_248={};dojo.forEach(tn.className.split(" "),function(c){_248[c]=true;});if("_stateClasses" in this){dojo.forEach(this._stateClasses,function(c){delete _248[c];});}dojo.forEach(_243,function(c){_248[c]=true;});var _24c=[];for(var c in _248){_24c.push(c);}tn.className=_24c.join(" ");this._stateClasses=_243;},compare:function(val1,val2){if((typeof val1=="number")&&(typeof val2=="number")){return (isNaN(val1)&&isNaN(val2))?0:(val1-val2);}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(_250){},_onChangeActive:false,_handleOnChange:function(_251,_252){this._lastValue=_251;if(this._lastValueReported==undefined&&(_252===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_251;}if((this.intermediateChanges||_252||_252===undefined)&&((typeof _251!=typeof this._lastValueReported)||this.compare(_251,this._lastValueReported)!=0)){this._lastValueReported=_251;if(this._onChangeActive){this.onChange(_251);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;this._setStateClass();},destroy:function(){if(this._layoutHackHandle){clearTimeout(this._layoutHackHandle);}this.inherited(arguments);},setValue:function(_253){dojo.deprecated("dijit.form._FormWidget:setValue("+_253+") is deprecated.  Use attr('value',"+_253+") instead.","","2.0");this.attr("value",_253);},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");},_layoutHack:function(){if(dojo.isFF==2&&!this._layoutHackHandle){var node=this.domNode;var old=node.style.opacity;node.style.opacity="0.999";this._layoutHackHandle=setTimeout(dojo.hitch(this,function(){this._layoutHackHandle=null;node.style.opacity=old;}),0);}}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:""}),postCreate:function(){if(dojo.isIE||dojo.isWebKit){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._resetValue=this.value;}},_setValueAttr:function(_256,_257){this.value=_256;this._handleOnChange(_256,_257);},_getValueAttr:function(_258){return this._lastValue;},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!e.ctrlKey&&!e.altKey){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}else{if(dojo.isWebKit){te=document.createEvent("Events");te.initEvent("keypress",true,true);te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.target.dispatchEvent(te);}}}}});}if(!dojo._hasResource["dijit.dijit"]){dojo._hasResource["dijit.dijit"]=true;dojo.provide("dijit.dijit");}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",[dijit._Container],{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(_25b,_25c){var _25d=this._keyNavCodes={};var prev=dojo.hitch(this,this.focusPrev);var next=dojo.hitch(this,this.focusNext);dojo.forEach(_25b,function(code){_25d[code]=prev;});dojo.forEach(_25c,function(code){_25d[code]=next;});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"));},addChild:function(_262,_263){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(_262);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusNext:function(){if(this.focusedChild&&this.focusedChild.hasNextFocalNode&&this.focusedChild.hasNextFocalNode()){this.focusedChild.focusNext();return;}var _264=this._getNextFocusableChild(this.focusedChild,1);if(_264.getFocalNodes){this.focusChild(_264,_264.getFocalNodes()[0]);}else{this.focusChild(_264);}},focusPrev:function(){if(this.focusedChild&&this.focusedChild.hasPrevFocalNode&&this.focusedChild.hasPrevFocalNode()){this.focusedChild.focusPrev();return;}var _265=this._getNextFocusableChild(this.focusedChild,-1);if(_265.getFocalNodes){var _266=_265.getFocalNodes();this.focusChild(_265,_266[_266.length-1]);}else{this.focusChild(_265);}},focusChild:function(_267,node){if(_267){if(this.focusedChild&&_267!==this.focusedChild){this._onChildBlur(this.focusedChild);}this.focusedChild=_267;if(node&&_267.focusFocalNode){_267.focusFocalNode(node);}else{_267.focus();}}},_startupChild:function(_269){if(_269.getFocalNodes){dojo.forEach(_269.getFocalNodes(),function(node){dojo.attr(node,"tabindex",-1);this._connectNode(node);},this);}else{var node=_269.focusNode||_269.domNode;if(_269.isFocusable()){dojo.attr(node,"tabindex",-1);}this._connectNode(node);}},_connectNode:function(node){this.connect(node,"onfocus","_onNodeFocus");this.connect(node,"onblur","_onNodeBlur");},_onContainerFocus:function(evt){if(evt.target!==this.domNode){return;}this.focusFirstChild();dojo.removeAttr(this.domNode,"tabIndex");},_onBlur:function(evt){if(this.tabIndex){dojo.attr(this.domNode,"tabindex",this.tabIndex);}},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();dojo.stopEvent(evt);}},_onNodeFocus:function(evt){var _272=dijit.getEnclosingWidget(evt.target);if(_272&&_272.isFocusable()){this.focusedChild=_272;}dojo.stopEvent(evt);},_onNodeBlur:function(evt){dojo.stopEvent(evt);},_onChildBlur:function(_274){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getNextFocusableChild:function(_275,dir){if(_275){_275=this._getSiblingOfChild(_275,dir);}var _277=this.getChildren();for(var i=0;i<_277.length;i++){if(!_275){_275=_277[(dir>0)?0:(_277.length-1)];}if(_275.isFocusable()){return _275;}_275=this._getSiblingOfChild(_275,dir);}return null;}});}if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\"></div>",postCreate:function(){dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:"<div class=\"dijit dijitToolbar\" waiRole=\"toolbar\" tabIndex=\"${tabIndex}\" dojoAttachPoint=\"containerNode\">"+"</div>",postCreate:function(){this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW]);},startup:function(){if(this._started){return;}this.startupKeyNavChildren();this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:"<span class=\"dijit dijitReset dijitLeft dijitInline\"\n\tdojoAttachEvent=\"ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"\n\t><span class=\"dijitReset dijitRight dijitInline\"\n\t\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\t\t><button class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\t\tdojoAttachPoint=\"titleNode,focusNode\" \n\t\t\t\t${nameAttrSetting} type=\"${type}\" value=\"${value}\" waiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t\t><span class=\"dijitReset dijitInline\" dojoAttachPoint=\"iconNode\" \n\t\t\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#10003;</span \n\t\t\t\t></span \n\t\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\" \n\t\t\t\t\tid=\"${id}_label\"  \n\t\t\t\t\tdojoAttachPoint=\"containerNode\"\n\t\t\t\t></span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n",attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),_onClick:function(e){if(this.disabled||this.readOnly){return false;}this._clicked();return this.onClick(e);},_onButtonClick:function(e){if(e.type!="click"&&!(this.type=="submit"||this.type=="reset")){dojo.stopEvent(e);}if(this._onClick(e)===false){e.preventDefault();}else{if(this.type=="submit"&&!this.focusNode.form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _27c=dijit.byNode(node);if(_27c&&typeof _27c._onSubmit=="function"){_27c._onSubmit(e);break;}}}}},_setValueAttr:function(_27d){var attr=this.attributeMap.value||"";if(this[attr.node||attr||"domNode"].tagName=="BUTTON"){if(_27d!=this.value){console.debug("Cannot change the value attribute on a Button widget.");}}},_fillContent:function(_27f){if(_27f&&!("label" in this.params)){this.attr("label",_27f.innerHTML);}},postCreate:function(){if(this.showLabel==false){dojo.addClass(this.containerNode,"dijitDisplayNone");}dojo.setSelectable(this.focusNode,false);this.inherited(arguments);},onClick:function(e){return true;},_clicked:function(e){},setLabel:function(_282){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",_282);},_setLabelAttr:function(_283){this.containerNode.innerHTML=this.label=_283;this._layoutHack();if(this.showLabel==false&&!this.params.title){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container],{baseClass:"dijitDropDownButton",templateString:"<span class=\"dijit dijitReset dijitLeft dijitInline\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey\"\n\t><span class='dijitReset dijitRight dijitInline'\n\t\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\t\t><button class=\"dijitReset dijitStretch dijitButtonContents\" \n\t\t\t\t${nameAttrSetting} type=\"${type}\" value=\"${value}\"\n\t\t\t\tdojoAttachPoint=\"focusNode,titleNode\" \n\t\t\t\twaiRole=\"button\" waiState=\"haspopup-true,labelledby-${id}_label\"\n\t\t\t\t><span class=\"dijitReset dijitInline\" \n\t\t\t\t\tdojoAttachPoint=\"iconNode\"\n\t\t\t\t></span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"  \n\t\t\t\t\tdojoAttachPoint=\"containerNode,popupStateNode\" \n\t\t\t\t\tid=\"${id}_label\"\n\t\t\t\t></span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\">&thinsp;</span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n",_fillContent:function(){if(this.srcNodeRef){var _284=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,_284[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown){var _285=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(_285);delete this.dropDownContainer;}dijit.popup.prepare(this.dropDown.domNode);this.inherited(arguments);},destroyDescendants:function(){if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown;}this.inherited(arguments);},_onArrowClick:function(e){if(this.disabled||this.readOnly){return;}this._toggleDropDown();},_onDropDownClick:function(e){var _288=dojo.isFF&&dojo.isFF<3&&navigator.appVersion.indexOf("Macintosh")!=-1;if(!_288||e.detail!=0||this._seenKeydown){this._onArrowClick(e);}this._seenKeydown=false;},_onDropDownKeydown:function(e){this._seenKeydown=true;},_onDropDownBlur:function(e){this._seenKeydown=false;},_onKey:function(e){if(this.disabled||this.readOnly){return;}if(e.charOrCode==dojo.keys.DOWN_ARROW){if(!this.dropDown||this.dropDown.domNode.style.visibility=="hidden"){dojo.stopEvent(e);this._toggleDropDown();}}},_onBlur:function(){this._closeDropDown();this.inherited(arguments);},_toggleDropDown:function(){if(this.disabled||this.readOnly){return;}dijit.focus(this.popupStateNode);var _28c=this.dropDown;if(!_28c){return;}if(!this._opened){if(_28c.href&&!_28c.isLoaded){var self=this;var _28e=dojo.connect(_28c,"onLoad",function(){dojo.disconnect(_28e);self._openDropDown();});_28c.refresh();return;}else{this._openDropDown();}}else{this._closeDropDown();}},_openDropDown:function(){var _28f=this.dropDown;var _290=_28f.domNode.style.width;var self=this;dijit.popup.open({parent:this,popup:_28f,around:this.domNode,orient:this.isLeftToRight()?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"},onExecute:function(){self._closeDropDown(true);},onCancel:function(){self._closeDropDown(true);},onClose:function(){_28f.domNode.style.width=_290;self.popupStateNode.removeAttribute("popupActive");self._opened=false;}});if(this.domNode.offsetWidth>_28f.domNode.offsetWidth){var _292=null;if(!this.isLeftToRight()){_292=_28f.domNode.parentNode;var _293=_292.offsetLeft+_292.offsetWidth;}dojo.marginBox(_28f.domNode,{w:this.domNode.offsetWidth});if(_292){_292.style.left=_293-this.domNode.offsetWidth+"px";}}this.popupStateNode.setAttribute("popupActive","true");this._opened=true;if(_28f.focus){_28f.focus();}},_closeDropDown:function(_294){if(this._opened){dijit.popup.close(this.dropDown);if(_294){this.focus();}this._opened=false;}}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:"<table class='dijit dijitReset dijitInline dijitLeft'\n\tcellspacing='0' cellpadding='0' waiRole=\"presentation\"\n\t><tbody waiRole=\"presentation\"><tr waiRole=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents dijitButtonNode\"\n\t\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"  dojoAttachPoint=\"titleNode\"\n\t\t\twaiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline\" dojoAttachPoint=\"iconNode\" waiRole=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\" waiRole=\"presentation\"></div\n\t\t></td\n\t\t><td class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton'\n\t\t\tdojoAttachPoint=\"popupStateNode,focusNode\"\n\t\t\tdojoAttachEvent=\"ondijitclick:_onArrowClick, onkeypress:_onKey,onmouseenter:_onMouse,onmouseleave:_onMouse\"\n\t\t\tstateModifier=\"DownArrow\"\n\t\t\ttitle=\"${optionsTitle}\" ${nameAttrSetting}\n\t\t\twaiRole=\"button\" waiState=\"haspopup-true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" waiRole=\"presentation\">&thinsp;</div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" waiRole=\"presentation\">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n",attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"]}),optionsTitle:"",baseClass:"dijitComboButton",_focusedNode:null,postCreate:function(){this.inherited(arguments);this._focalNodes=[this.titleNode,this.popupStateNode];dojo.forEach(this._focalNodes,dojo.hitch(this,function(node){if(dojo.isIE){this.connect(node,"onactivate",this._onNodeFocus);this.connect(node,"ondeactivate",this._onNodeBlur);}else{this.connect(node,"onfocus",this._onNodeFocus);this.connect(node,"onblur",this._onNodeBlur);}}));},focusFocalNode:function(node){this._focusedNode=node;dijit.focus(node);},hasNextFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[1];},focusNext:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?1:0];dijit.focus(this._focusedNode);},hasPrevFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[0];},focusPrev:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?0:1];dijit.focus(this._focusedNode);},getFocalNodes:function(){return this._focalNodes;},_onNodeFocus:function(evt){this._focusedNode=evt.currentTarget;var fnc=this._focusedNode==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.addClass(this._focusedNode,fnc);},_onNodeBlur:function(evt){var fnc=evt.currentTarget==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.removeClass(evt.currentTarget,fnc);},_onBlur:function(){this.inherited(arguments);this._focusedNode=null;}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(evt){this.attr("checked",!this.checked);},_setCheckedAttr:function(_29c){this.checked=_29c;dojo.attr(this.focusNode||this.domNode,"checked",_29c);dijit.setWaiState(this.focusNode||this.domNode,"pressed",_29c);this._setStateClass();this._handleOnChange(_29c,true);},setChecked:function(_29d){dojo.deprecated("setChecked("+_29d+") is deprecated. Use attr('checked',"+_29d+") instead.","","2.0");this.attr("checked",_29d);},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false);}});}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{constructor:function(args){var _t=this;dojo.mixin(_t,args);_t.node=args.node;_t._showArgs=dojo.mixin({},args);_t._showArgs.node=_t.node;_t._showArgs.duration=_t.showDuration;_t.showAnim=_t.showFunc(_t._showArgs);_t._hideArgs=dojo.mixin({},args);_t._hideArgs.node=_t.node;_t._hideArgs.duration=_t.hideDuration;_t.hideAnim=_t.hideFunc(_t._hideArgs);dojo.connect(_t.showAnim,"beforeBegin",dojo.hitch(_t.hideAnim,"stop",true));dojo.connect(_t.hideAnim,"beforeBegin",dojo.hitch(_t.showAnim,"stop",true));},node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,show:function(_2a0){return this.showAnim.play(_2a0||0);},hide:function(_2a1){return this.hideAnim.play(_2a1||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_2a3={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _2a6=function(_2a7){this._index=-1;this._animations=_2a7||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_2a6,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_2a9,_2aa){if(!this._current){this._current=this._animations[this._index=0];}if(!_2aa&&this._current.status()=="playing"){return this;}var _2ab=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_2ac=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_2ae=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_2ab);d.disconnect(_2ac);d.disconnect(_2ae);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_2b2,_2b3){this.pause();var _2b4=this.duration*_2b2;this._current=null;d.some(this._animations,function(a){if(a.duration<=_2b4){this._current=a;return true;}_2b4-=a.duration;return false;});if(this._current){this._current.gotoPercent(_2b4/this._current.duration,_2b3);}return this;},stop:function(_2b6){if(this._current){if(_2b6){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_2a6,_2a3);dojo.fx.chain=function(_2b9){return new _2a6(_2b9);};var _2ba=function(_2bb){this._animations=_2bb||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_2bb,function(a){var _2bd=a.duration;if(a.delay){_2bd+=a.delay;}if(this.duration<_2bd){this.duration=_2bd;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d._Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};d.extend(_2ba,{_doAction:function(_2c0,args){d.forEach(this._animations,function(a){a[_2c0].apply(a,args);});return this;},_onEnd:function(){if(++this._finished==this._animations.length){this._fire("onEnd");}},_call:function(_2c3,args){var t=this._pseudoAnimation;t[_2c3].apply(t,args);},play:function(_2c6,_2c7){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_2c8,_2c9){var ms=this.duration*_2c8;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_2c9);});this._call("gotoPercent",arguments);return this;},stop:function(_2cc){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_2ba,_2a3);dojo.fx.combine=function(_2cd){return new _2ba(_2cd);};dojo.fx.wipeIn=function(args){args.node=d.byId(args.node);var node=args.node,s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _2d3=d.style(node,"height");return Math.max(_2d3,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.coords(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(_2e3,_2e4,_2e5){_2e5=dojo.i18n.normalizeLocale(_2e5);var _2e6=_2e5.split("-");var _2e7=[_2e3,"nls",_2e4].join(".");var _2e8=dojo._loadedModules[_2e7];if(_2e8){var _2e9;for(var i=_2e6.length;i>0;i--){var loc=_2e6.slice(0,i).join("_");if(_2e8[loc]){_2e9=_2e8[loc];break;}}if(!_2e9){_2e9=_2e8.ROOT;}if(_2e9){var _2ec=function(){};_2ec.prototype=_2e9;return new _2ec();}}throw new Error("Bundle not found: "+_2e4+" in "+_2e3+" , locale="+_2e5);};dojo.i18n.normalizeLocale=function(_2ed){var _2ee=_2ed?_2ed.toLowerCase():dojo.locale;if(_2ee=="root"){_2ee="ROOT";}return _2ee;};dojo.i18n._requireLocalization=function(_2ef,_2f0,_2f1,_2f2){var _2f3=dojo.i18n.normalizeLocale(_2f1);var _2f4=[_2ef,"nls",_2f0].join(".");var _2f5="";if(_2f2){var _2f6=_2f2.split(",");for(var i=0;i<_2f6.length;i++){if(_2f3["indexOf"](_2f6[i])==0){if(_2f6[i].length>_2f5.length){_2f5=_2f6[i];}}}if(!_2f5){_2f5="ROOT";}}var _2f8=_2f2?_2f5:_2f3;var _2f9=dojo._loadedModules[_2f4];var _2fa=null;if(_2f9){if(dojo.config.localizationComplete&&_2f9._built){return;}var _2fb=_2f8.replace(/-/g,"_");var _2fc=_2f4+"."+_2fb;_2fa=dojo._loadedModules[_2fc];}if(!_2fa){_2f9=dojo["provide"](_2f4);var syms=dojo._getModuleSymbols(_2ef);var _2fe=syms.concat("nls").join("/");var _2ff;dojo.i18n._searchLocalePath(_2f8,_2f2,function(loc){var _301=loc.replace(/-/g,"_");var _302=_2f4+"."+_301;var _303=false;if(!dojo._loadedModules[_302]){dojo["provide"](_302);var _304=[_2fe];if(loc!="ROOT"){_304.push(loc);}_304.push(_2f0);var _305=_304.join("/")+".js";_303=dojo._loadPath(_305,null,function(hash){var _307=function(){};_307.prototype=_2ff;_2f9[_301]=new _307();for(var j in hash){_2f9[_301][j]=hash[j];}});}else{_303=true;}if(_303&&_2f9[_301]){_2ff=_2f9[_301];}else{_2f9[_301]=_2ff;}if(_2f2){return true;}});}if(_2f2&&_2f3!=_2f5){_2f9[_2f3.replace(/-/g,"_")]=_2f9[_2f5.replace(/-/g,"_")];}};(function(){var _309=dojo.config.extraLocale;if(_309){if(!_309 instanceof Array){_309=[_309];}var req=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(m,b,_30d,_30e){req(m,b,_30d,_30e);if(_30d){return;}for(var i=0;i<_309.length;i++){req(m,b,_309[i],_30e);}};}})();dojo.i18n._searchLocalePath=function(_310,down,_312){_310=dojo.i18n.normalizeLocale(_310);var _313=_310.split("-");var _314=[];for(var i=_313.length;i>0;i--){_314.push(_313.slice(0,i).join("-"));}_314.push(false);if(down){_314.reverse();}for(var j=_314.length-1;j>=0;j--){var loc=_314[j]||"ROOT";var stop=_312(loc);if(stop){break;}}};dojo.i18n._preloadLocalizations=function(_319,_31a){function _31b(_31c){_31c=dojo.i18n.normalizeLocale(_31c);dojo.i18n._searchLocalePath(_31c,true,function(loc){for(var i=0;i<_31a.length;i++){if(_31a[i]==loc){dojo["require"](_319+"_"+loc);return true;}}return false;});};_31b();var _31f=dojo.config.extraLocale||[];for(var i=0;i<_31f.length;i++){_31b(_31f[i]);}};}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(str,_322){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_322&&_322.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_326){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_326);};dojo.regexp.group=function(_329,_32a){return "("+(_32a?"?:":"")+_329+")";};}if(!dojo._hasResource["dojo.number"]){dojo._hasResource["dojo.number"]=true;dojo.provide("dojo.number");dojo.number.format=function(_32b,_32c){_32c=dojo.mixin({},_32c||{});var _32d=dojo.i18n.normalizeLocale(_32c.locale);var _32e=dojo.i18n.getLocalization("dojo.cldr","number",_32d);_32c.customs=_32e;var _32f=_32c.pattern||_32e[(_32c.type||"decimal")+"Format"];if(isNaN(_32b)||Math.abs(_32b)==Infinity){return null;}return dojo.number._applyPattern(_32b,_32f,_32c);};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(_330,_331,_332){_332=_332||{};var _333=_332.customs.group;var _334=_332.customs.decimal;var _335=_331.split(";");var _336=_335[0];_331=_335[(_330<0)?1:0]||("-"+_336);if(_331.indexOf("%")!=-1){_330*=100;}else{if(_331.indexOf("")!=-1){_330*=1000;}else{if(_331.indexOf("")!=-1){_333=_332.customs.currencyGroup||_333;_334=_332.customs.currencyDecimal||_334;_331=_331.replace(/\u00a4{1,3}/,function(_337){var prop=["symbol","currency","displayName"][_337.length-1];return _332[prop]||_332.currency||"";});}else{if(_331.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _339=dojo.number._numberPatternRE;var _33a=_336.match(_339);if(!_33a){throw new Error("unable to find a number expression in pattern: "+_331);}if(_332.fractional===false){_332.places=0;}return _331.replace(_339,dojo.number._formatAbsolute(_330,_33a[0],{decimal:_334,group:_333,places:_332.places,round:_332.round}));};dojo.number.round=function(_33b,_33c,_33d){var _33e=10/(_33d||10);return (_33e*+_33b).toFixed(_33c)/_33e;};if((0.9).toFixed()==0){(function(){var _33f=dojo.number.round;dojo.number.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d||a*Math.pow(10,p+1)<5){d=0;}return _33f(v,p,m)+(v>0?d:-d);};})();}dojo.number._formatAbsolute=function(_345,_346,_347){_347=_347||{};if(_347.places===true){_347.places=0;}if(_347.places===Infinity){_347.places=6;}var _348=_346.split(".");var _349=(_347.places>=0)?_347.places:(_348[1]&&_348[1].length)||0;if(!(_347.round<0)){_345=dojo.number.round(_345,_349,_347.round);}var _34a=String(Math.abs(_345)).split(".");var _34b=_34a[1]||"";if(_347.places){var _34c=dojo.isString(_347.places)&&_347.places.indexOf(",");if(_34c){_347.places=_347.places.substring(_34c+1);}_34a[1]=dojo.string.pad(_34b.substr(0,_347.places),_347.places,"0",true);}else{if(_348[1]&&_347.places!==0){var pad=_348[1].lastIndexOf("0")+1;if(pad>_34b.length){_34a[1]=dojo.string.pad(_34b,pad,"0",true);}var _34e=_348[1].length;if(_34e<_34b.length){_34a[1]=_34b.substr(0,_34e);}}else{if(_34a[1]){_34a.pop();}}}var _34f=_348[0].replace(",","");pad=_34f.indexOf("0");if(pad!=-1){pad=_34f.length-pad;if(pad>_34a[0].length){_34a[0]=dojo.string.pad(_34a[0],pad);}if(_34f.indexOf("#")==-1){_34a[0]=_34a[0].substr(_34a[0].length-pad);}}var _350=_348[0].lastIndexOf(",");var _351,_352;if(_350!=-1){_351=_348[0].length-_350-1;var _353=_348[0].substr(0,_350);_350=_353.lastIndexOf(",");if(_350!=-1){_352=_353.length-_350-1;}}var _354=[];for(var _355=_34a[0];_355;){var off=_355.length-_351;_354.push((off>0)?_355.substr(off):_355);_355=(off>0)?_355.slice(0,off):"";if(_352){_351=_352;delete _352;}}_34a[0]=_354.reverse().join(_347.group||",");return _34a.join(_347.decimal||".");};dojo.number.regexp=function(_357){return dojo.number._parseInfo(_357).regexp;};dojo.number._parseInfo=function(_358){_358=_358||{};var _359=dojo.i18n.normalizeLocale(_358.locale);var _35a=dojo.i18n.getLocalization("dojo.cldr","number",_359);var _35b=_358.pattern||_35a[(_358.type||"decimal")+"Format"];var _35c=_35a.group;var _35d=_35a.decimal;var _35e=1;if(_35b.indexOf("%")!=-1){_35e/=100;}else{if(_35b.indexOf("")!=-1){_35e/=1000;}else{var _35f=_35b.indexOf("")!=-1;if(_35f){_35c=_35a.currencyGroup||_35c;_35d=_35a.currencyDecimal||_35d;}}}var _360=_35b.split(";");if(_360.length==1){_360.push("-"+_360[0]);}var re=dojo.regexp.buildGroupRE(_360,function(_362){_362="(?:"+dojo.regexp.escapeString(_362,".")+")";return _362.replace(dojo.number._numberPatternRE,function(_363){var _364={signed:false,separator:_358.strict?_35c:[_35c,""],fractional:_358.fractional,decimal:_35d,exponent:false};var _365=_363.split(".");var _366=_358.places;if(_365.length==1||_366===0){_364.fractional=false;}else{if(_366===undefined){_366=_358.pattern?_365[1].lastIndexOf("0")+1:Infinity;}if(_366&&_358.fractional==undefined){_364.fractional=true;}if(!_358.places&&(_366<_365[1].length)){_366+=","+_365[1].length;}_364.places=_366;}var _367=_365[0].split(",");if(_367.length>1){_364.groupSize=_367.pop().length;if(_367.length>1){_364.groupSize2=_367.pop().length;}}return "("+dojo.number._realNumberRegexp(_364)+")";});},true);if(_35f){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_368,_369,_36a,_36b){var prop=["symbol","currency","displayName"][_36a.length-1];var _36d=dojo.regexp.escapeString(_358[prop]||_358.currency||"");_369=_369?"[\\s\\xa0]":"";_36b=_36b?"[\\s\\xa0]":"";if(!_358.strict){if(_369){_369+="*";}if(_36b){_36b+="*";}return "(?:"+_369+_36d+_36b+")?";}return _369+_36d+_36b;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_35c,decimal:_35d,factor:_35e};};dojo.number.parse=function(_36e,_36f){var info=dojo.number._parseInfo(_36f);var _371=(new RegExp("^"+info.regexp+"$")).exec(_36e);if(!_371){return NaN;}var _372=_371[1];if(!_371[1]){if(!_371[2]){return NaN;}_372=_371[2];info.factor*=-1;}_372=_372.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _372*info.factor;};dojo.number._realNumberRegexp=function(_373){_373=_373||{};if(!("places" in _373)){_373.places=Infinity;}if(typeof _373.decimal!="string"){_373.decimal=".";}if(!("fractional" in _373)||/^0/.test(_373.places)){_373.fractional=[true,false];}if(!("exponent" in _373)){_373.exponent=[true,false];}if(!("eSigned" in _373)){_373.eSigned=[true,false];}var _374=dojo.number._integerRegexp(_373);var _375=dojo.regexp.buildGroupRE(_373.fractional,function(q){var re="";if(q&&(_373.places!==0)){re="\\"+_373.decimal;if(_373.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_373.places+"}";}}return re;},true);var _378=dojo.regexp.buildGroupRE(_373.exponent,function(q){if(q){return "([eE]"+dojo.number._integerRegexp({signed:_373.eSigned})+")";}return "";});var _37a=_374+_375;if(_375){_37a="(?:(?:"+_37a+")|(?:"+_375+"))";}return _37a+_378;};dojo.number._integerRegexp=function(_37b){_37b=_37b||{};if(!("signed" in _37b)){_37b.signed=[true,false];}if(!("separator" in _37b)){_37b.separator="";}else{if(!("groupSize" in _37b)){_37b.groupSize=3;}}var _37c=dojo.regexp.buildGroupRE(_37b.signed,function(q){return q?"[-+]":"";},true);var _37e=dojo.regexp.buildGroupRE(_37b.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=dojo.regexp.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==""){sep="\\s\\xa0";}}var grp=_37b.groupSize,grp2=_37b.groupSize2;if(grp2){var _382="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_382+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_382;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _37c+_37e;};}if(!dojo._hasResource["dijit.ProgressBar"]){dojo._hasResource["dijit.ProgressBar"]=true;dojo.provide("dijit.ProgressBar");dojo.declare("dijit.ProgressBar",[dijit._Widget,dijit._Templated],{progress:"0",maximum:100,places:0,indeterminate:false,templateString:"<div class=\"dijitProgressBar dijitProgressBarEmpty\"\n\t><div waiRole=\"progressbar\" tabindex=\"0\" dojoAttachPoint=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\"></div\n\t\t><span style=\"visibility:hidden\">&nbsp;</span\n\t></div\n\t><div dojoAttachPoint=\"label\" class=\"dijitProgressBarLabel\" id=\"${id}_label\">&nbsp;</div\n\t><img dojoAttachPoint=\"indeterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\"\n\t></img\n></div>\n",_indeterminateHighContrastImagePath:dojo.moduleUrl("dijit","themes/a11y/indeterminate_progress.gif"),postCreate:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath);this.update();},update:function(_383){dojo.mixin(this,_383||{});var tip=this.internalProgress;var _385=1,_386;if(this.indeterminate){_386="addClass";dijit.removeWaiState(tip,"valuenow");dijit.removeWaiState(tip,"valuemin");dijit.removeWaiState(tip,"valuemax");}else{_386="removeClass";if(String(this.progress).indexOf("%")!=-1){_385=Math.min(parseFloat(this.progress)/100,1);this.progress=_385*this.maximum;}else{this.progress=Math.min(this.progress,this.maximum);_385=this.progress/this.maximum;}var text=this.report(_385);this.label.firstChild.nodeValue=text;dijit.setWaiState(tip,"describedby",this.label.id);dijit.setWaiState(tip,"valuenow",this.progress);dijit.setWaiState(tip,"valuemin",0);dijit.setWaiState(tip,"valuemax",this.maximum);}dojo[_386](this.domNode,"dijitProgressBarIndeterminate");tip.style.width=(_385*100)+"%";this.onChange();},report:function(_388){return dojo.number.format(_388,{type:"percent",places:this.places,locale:this.lang});},onChange:function(){}});}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton");}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(_389,_38a){var rxp="^";var c=null;for(var i=0;i<_389.length;i++){c=_389.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_389.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_38a){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};dojo.data.util.sorter.createSortFunction=function(_391,_392){var _393=[];function _394(attr,dir){return function(_397,_398){var a=_392.getValue(_397,attr);var b=_392.getValue(_398,attr);var _39b=null;if(_392.comparatorMap){if(typeof attr!=="string"){attr=_392.getIdentity(attr);}_39b=_392.comparatorMap[attr]||dojo.data.util.sorter.basicComparator;}_39b=_39b||dojo.data.util.sorter.basicComparator;return dir*_39b(a,b);};};var _39c;for(var i=0;i<_391.length;i++){_39c=_391[i];if(_39c.attribute){var _39e=(_39c.descending)?-1:1;_393.push(_394(_39c.attribute,_39e));}}return function(rowA,rowB){var i=0;while(i<_393.length){var ret=_393[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(_3a3){_3a3=_3a3||{};if(!_3a3.store){_3a3.store=this;}var self=this;var _3a5=function(_3a6,_3a7){if(_3a7.onError){var _3a8=_3a7.scope||dojo.global;_3a7.onError.call(_3a8,_3a6,_3a7);}};var _3a9=function(_3aa,_3ab){var _3ac=_3ab.abort||null;var _3ad=false;var _3ae=_3ab.start?_3ab.start:0;var _3af=(_3ab.count&&(_3ab.count!==Infinity))?(_3ae+_3ab.count):_3aa.length;_3ab.abort=function(){_3ad=true;if(_3ac){_3ac.call(_3ab);}};var _3b0=_3ab.scope||dojo.global;if(!_3ab.store){_3ab.store=self;}if(_3ab.onBegin){_3ab.onBegin.call(_3b0,_3aa.length,_3ab);}if(_3ab.sort){_3aa.sort(dojo.data.util.sorter.createSortFunction(_3ab.sort,self));}if(_3ab.onItem){for(var i=_3ae;(i<_3aa.length)&&(i<_3af);++i){var item=_3aa[i];if(!_3ad){_3ab.onItem.call(_3b0,item,_3ab);}}}if(_3ab.onComplete&&!_3ad){var _3b3=null;if(!_3ab.onItem){_3b3=_3aa.slice(_3ae,_3af);}_3ab.onComplete.call(_3b0,_3b3,_3ab);}};this._fetchItems(_3a3,_3a9,_3a5);return _3a3;};}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(_3b4){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_3b4.url;this._jsonData=_3b4.data;this._datatypeMap=_3b4.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_3b5){return dojo.date.stamp.fromISOString(_3b5);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_3b4.urlPreventCache!==undefined){this.urlPreventCache=_3b4.urlPreventCache?true:false;}if(_3b4.clearOnClose){this.clearOnClose=true;}},url:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");}},_assertIsAttribute:function(_3b7){if(typeof _3b7!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");}},getValue:function(item,_3b9,_3ba){var _3bb=this.getValues(item,_3b9);return (_3bb.length>0)?_3bb[0]:_3ba;},getValues:function(item,_3bd){this._assertIsItem(item);this._assertIsAttribute(_3bd);return item[_3bd]||[];},getAttributes:function(item){this._assertIsItem(item);var _3bf=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_3bf.push(key);}}return _3bf;},hasAttribute:function(item,_3c2){return this.getValues(item,_3c2).length>0;},containsValue:function(item,_3c4,_3c5){var _3c6=undefined;if(typeof _3c5==="string"){_3c6=dojo.data.util.filter.patternToRegExp(_3c5,false);}return this._containsValue(item,_3c4,_3c5,_3c6);},_containsValue:function(item,_3c8,_3c9,_3ca){return dojo.some(this.getValues(item,_3c8),function(_3cb){if(_3cb!==null&&!dojo.isObject(_3cb)&&_3ca){if(_3cb.toString().match(_3ca)){return true;}}else{if(_3c9===_3cb){return true;}}});},isItem:function(_3cc){if(_3cc&&_3cc[this._storeRefPropName]===this){if(this._arrayOfAllItems[_3cc[this._itemNumPropName]]===_3cc){return true;}}return false;},isItemLoaded:function(_3cd){return this.isItem(_3cd);},loadItem:function(_3ce){this._assertIsItem(_3ce.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_fetchItems:function(_3d1,_3d2,_3d3){var self=this;var _3d5=function(_3d6,_3d7){var _3d8=[];var i,key;if(_3d6.query){var _3db;var _3dc=_3d6.queryOptions?_3d6.queryOptions.ignoreCase:false;var _3dd={};for(key in _3d6.query){_3db=_3d6.query[key];if(typeof _3db==="string"){_3dd[key]=dojo.data.util.filter.patternToRegExp(_3db,_3dc);}}for(i=0;i<_3d7.length;++i){var _3de=true;var _3df=_3d7[i];if(_3df===null){_3de=false;}else{for(key in _3d6.query){_3db=_3d6.query[key];if(!self._containsValue(_3df,key,_3db,_3dd[key])){_3de=false;}}}if(_3de){_3d8.push(_3df);}}_3d2(_3d8,_3d6);}else{for(i=0;i<_3d7.length;++i){var item=_3d7[i];if(item!==null){_3d8.push(item);}}_3d2(_3d8,_3d6);}};if(this._loadFinished){_3d5(_3d1,this._getItemsArray(_3d1.queryOptions));}else{if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_3d1,filter:_3d5});}else{this._loadInProgress=true;var _3e1={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache};var _3e2=dojo.xhrGet(_3e1);_3e2.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_3d5(_3d1,self._getItemsArray(_3d1.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_3d3(e,_3d1);}});_3e2.addErrback(function(_3e4){self._loadInProgress=false;_3d3(_3e4,_3d1);});var _3e5=null;if(_3d1.abort){_3e5=_3d1.abort;}_3d1.abort=function(){var df=_3e2;if(df&&df.fired===-1){df.cancel();df=null;}if(_3e5){_3e5.call(_3d1);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_3d5(_3d1,this._getItemsArray(_3d1.queryOptions));}catch(e){_3d3(e,_3d1);}}else{_3d3(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_3d1);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _3e8=this._queuedFetches[i];var _3e9=_3e8.args;var _3ea=_3e8.filter;if(_3ea){_3ea(_3e9,this._getItemsArray(_3e9.queryOptions));}else{this.fetchItemByIdentity(_3e9);}}this._queuedFetches=[];}},_getItemsArray:function(_3eb){if(_3eb&&_3eb.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_3ec){if(this.clearOnClose&&(this._jsonFileUrl!=="")){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_3ed){var _3ee=false;function _3ef(_3f0){var _3f1=((_3f0!==null)&&(typeof _3f0==="object")&&(!dojo.isArray(_3f0)||_3ee)&&(!dojo.isFunction(_3f0))&&(_3f0.constructor==Object||dojo.isArray(_3f0))&&(typeof _3f0._reference==="undefined")&&(typeof _3f0._type==="undefined")&&(typeof _3f0._value==="undefined"));return _3f1;};var self=this;function _3f3(_3f4){self._arrayOfAllItems.push(_3f4);for(var _3f5 in _3f4){var _3f6=_3f4[_3f5];if(_3f6){if(dojo.isArray(_3f6)){var _3f7=_3f6;for(var k=0;k<_3f7.length;++k){var _3f9=_3f7[k];if(_3ef(_3f9)){_3f3(_3f9);}}}else{if(_3ef(_3f6)){_3f3(_3f6);}}}}};this._labelAttr=_3ed.label;var i;var item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_3ed.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(dojo.isArray(item)){_3ee=true;}_3f3(item);item[this._rootItemPropName]=true;}var _3fc={};var key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _3fe=item[key];if(_3fe!==null){if(!dojo.isArray(_3fe)){item[key]=[_3fe];}}else{item[key]=[null];}}_3fc[key]=key;}}while(_3fc[this._storeRefPropName]){this._storeRefPropName+="_";}while(_3fc[this._itemNumPropName]){this._itemNumPropName+="_";}while(_3fc[this._reverseRefMap]){this._reverseRefMap+="_";}var _3ff;var _400=_3ed.identifier;if(_400){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_400;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_3ff=item[_400];var _401=_3ff[0];if(!this._itemsByIdentity[_401]){this._itemsByIdentity[_401]=item;}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_400+"].  Value collided: ["+_401+"]");}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_400+"].  Value collided: ["+_401+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_3ff=item[key];for(var j=0;j<_3ff.length;++j){_3fe=_3ff[j];if(_3fe!==null&&typeof _3fe=="object"){if(_3fe._type&&_3fe._value){var type=_3fe._type;var _404=this._datatypeMap[type];if(!_404){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(dojo.isFunction(_404)){_3ff[j]=new _404(_3fe._value);}else{if(dojo.isFunction(_404.deserialize)){_3ff[j]=_404.deserialize(_3fe._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_3fe._reference){var _405=_3fe._reference;if(!dojo.isObject(_405)){_3ff[j]=this._itemsByIdentity[_405];}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _407=this._arrayOfAllItems[k];var _408=true;for(var _409 in _405){if(_407[_409]!=_405[_409]){_408=false;}}if(_408){_3ff[j]=_407;}}}if(this.referenceIntegrity){var _40a=_3ff[j];if(this.isItem(_40a)){this._addReferenceToMap(_40a,item,key);}}}else{if(this.isItem(_3fe)){if(this.referenceIntegrity){this._addReferenceToMap(_3fe,item,key);}}}}}}}},_addReferenceToMap:function(_40b,_40c,_40d){},getIdentity:function(item){var _40f=this._features["dojo.data.api.Identity"];if(_40f===Number){return item[this._itemNumPropName];}else{var _410=item[_40f];if(_410){return _410[0];}}return null;},fetchItemByIdentity:function(_411){var item;var _413;if(!this._loadFinished){var self=this;if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_411});}else{this._loadInProgress=true;var _415={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache};var _416=dojo.xhrGet(_415);_416.addCallback(function(data){var _418=_411.scope?_411.scope:dojo.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_411.identity);if(_411.onItem){_411.onItem.call(_418,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_411.onError){_411.onError.call(_418,error);}}});_416.addErrback(function(_419){self._loadInProgress=false;if(_411.onError){var _41a=_411.scope?_411.scope:dojo.global;_411.onError.call(_41a,_419);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_411.identity);if(_411.onItem){_413=_411.scope?_411.scope:dojo.global;_411.onItem.call(_413,item);}}}}else{item=this._getItemByIdentity(_411.identity);if(_411.onItem){_413=_411.scope?_411.scope:dojo.global;_411.onItem.call(_413,item);}}},_getItemByIdentity:function(_41b){var item=null;if(this._itemsByIdentity){item=this._itemsByIdentity[_41b];}else{item=this._arrayOfAllItems[_41b];}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _41e=this._features["dojo.data.api.Identity"];if(_41e===Number){return null;}else{return [_41e];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl){var _420={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,sync:true};var _421=dojo.xhrGet(_420);_421.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_421.addErrback(function(_423){throw _423;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(name,_425,_426){var c=document.cookie;if(arguments.length==1){var _428=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(name)+"=([^;]*)"));return _428?decodeURIComponent(_428[1]):undefined;}else{_426=_426||{};var exp=_426.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_426.expires=d;}if(exp&&exp.toUTCString){_426.expires=exp.toUTCString();}_425=encodeURIComponent(_425);var _42b=name+"="+_425,_42c;for(_42c in _426){_42b+="; "+_42c;var _42d=_426[_42c];if(_42d!==true){_42b+="="+_42d;}}document.cookie=_42b;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dijit.tree.TreeStoreModel"]){dojo._hasResource["dijit.tree.TreeStoreModel"]=true;dojo.provide("dijit.tree.TreeStoreModel");dojo.declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],labelAttr:"",root:null,query:null,constructor:function(args){dojo.mixin(this,args);this.connects=[];var _42f=this.store;if(!_42f.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.Tree: store must support dojo.data.Identity");}if(_42f.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([dojo.connect(_42f,"onNew",this,"_onNewItem"),dojo.connect(_42f,"onDelete",this,"_onDeleteItem"),dojo.connect(_42f,"onSet",this,"_onSetItem")]);}},destroy:function(){dojo.forEach(this.connects,dojo.disconnect);},getRoot:function(_430,_431){if(this.root){_430(this.root);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_432){if(_432.length!=1){throw new Error(this.declaredClass+": query "+dojo.toJson(this.query)+" returned "+_432.length+" items, but must return exactly one item");}this.root=_432[0];_430(this.root);}),onError:_431});}},mayHaveChildren:function(item){return dojo.some(this.childrenAttrs,function(attr){return this.store.hasAttribute(item,attr);},this);},getChildren:function(_435,_436,_437){var _438=this.store;var _439=[];for(var i=0;i<this.childrenAttrs.length;i++){var vals=_438.getValues(_435,this.childrenAttrs[i]);_439=_439.concat(vals);}var _43c=0;dojo.forEach(_439,function(item){if(!_438.isItemLoaded(item)){_43c++;}});if(_43c==0){_436(_439);}else{var _43e=function _43e(item){if(--_43c==0){_436(_439);}};dojo.forEach(_439,function(item){if(!_438.isItemLoaded(item)){_438.loadItem({item:item,onItem:_43e,onError:_437});}});}},getIdentity:function(item){return this.store.getIdentity(item);},getLabel:function(item){if(this.labelAttr){return this.store.getValue(item,this.labelAttr);}else{return this.store.getLabel(item);}},newItem:function(args,_444){var _445={parent:_444,attribute:this.childrenAttrs[0]};return this.store.newItem(args,_445);},pasteItem:function(_446,_447,_448,_449,_44a){var _44b=this.store,_44c=this.childrenAttrs[0];if(_447){dojo.forEach(this.childrenAttrs,function(attr){if(_44b.containsValue(_447,attr,_446)){if(!_449){var _44e=dojo.filter(_44b.getValues(_447,attr),function(x){return x!=_446;});_44b.setValues(_447,attr,_44e);}_44c=attr;}});}if(_448){if(typeof _44a=="number"){var _450=_44b.getValues(_448,_44c);_450.splice(_44a,0,_446);_44b.setValues(_448,_44c,_450);}else{_44b.setValues(_448,_44c,_44b.getValues(_448,_44c).concat(_446));}}},onChange:function(item){},onChildrenChange:function(_452,_453){},onDelete:function(_454,_455){},_onNewItem:function(item,_457){if(!_457){return;}this.getChildren(_457.item,dojo.hitch(this,function(_458){this.onChildrenChange(_457.item,_458);}));},_onDeleteItem:function(item){this.onDelete(item);},_onSetItem:function(item,_45b,_45c,_45d){if(dojo.indexOf(this.childrenAttrs,_45b)!=-1){this.getChildren(item,dojo.hitch(this,function(_45e){this.onChildrenChange(item,_45e);}));}else{this.onChange(item);}}});}if(!dojo._hasResource["dijit.tree.ForestStoreModel"]){dojo._hasResource["dijit.tree.ForestStoreModel"]=true;dojo.provide("dijit.tree.ForestStoreModel");dojo.declare("dijit.tree.ForestStoreModel",dijit.tree.TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_45f){this.root={store:this,root:true,id:_45f.rootId,label:_45f.rootLabel,children:_45f.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_461,_462,_463){if(_461===this.root){if(this.root.children){_462(this.root.children);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_464){this.root.children=_464;_462(_464);}),onError:_463});}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_468){if(_468===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(args){},pasteItem:function(_46a,_46b,_46c,_46d,_46e){if(_46b===this.root){if(!_46d){this.onLeaveRoot(_46a);}}dijit.tree.TreeStoreModel.prototype.pasteItem.call(this,_46a,_46b===this.root?null:_46b,_46c===this.root?null:_46c,_46d,_46e);if(_46c===this.root){this.onAddToRoot(_46a);}},onAddToRoot:function(item){console.log(this,": item ",item," added to root");},onLeaveRoot:function(item){console.log(this,": item ",item," removed from root");},_requeryTop:function(){var _471=this.root.children||[];this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_472){this.root.children=_472;if(_471.length!=_472.length||dojo.some(_471,function(item,idx){return _472[idx]!=item;})){this.onChildrenChange(this.root,_472);}})});},_onNewItem:function(item,_476){this._requeryTop();this.inherited(arguments);},_onDeleteItem:function(item){if(dojo.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.Tree"]){dojo._hasResource["dijit.Tree"]=true;dojo.provide("dijit.Tree");dojo.declare("dijit._TreeNode",[dijit._Widget,dijit._Templated,dijit._Container,dijit._Contained],{item:null,isTreeNode:true,label:"",isExpandable:null,isExpanded:false,state:"UNCHECKED",templateString:"<div class=\"dijitTreeNode\" waiRole=\"presentation\"\n\t><div dojoAttachPoint=\"rowNode\" class=\"dijitTreeRow\" waiRole=\"presentation\" dojoAttachEvent=\"onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave\"\n\t\t><img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"expandoNode\" class=\"dijitTreeExpando\" waiRole=\"presentation\"\n\t\t><span dojoAttachPoint=\"expandoNodeText\" class=\"dijitExpandoText\" waiRole=\"presentation\"\n\t\t></span\n\t\t><span dojoAttachPoint=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" waiRole=\"presentation\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"iconNode\" class=\"dijitTreeIcon\" waiRole=\"presentation\"\n\t\t\t><span dojoAttachPoint=\"labelNode\" class=\"dijitTreeLabel\" wairole=\"treeitem\" tabindex=\"-1\" waiState=\"selected-false\" dojoAttachEvent=\"onfocus:_onLabelFocus, onblur:_onLabelBlur\"></span>\n\t\t</span\n\t></div>\n\t<div dojoAttachPoint=\"containerNode\" class=\"dijitTreeContainer\" waiRole=\"presentation\" style=\"display: none;\"></div>\n</div>\n",postCreate:function(){this.setLabelNode(this.label);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){dijit.setWaiState(this.labelNode,"expanded",this.isExpanded);if(this==this.tree.rootNode){dijit.setWaitState(this.tree.domNode,"expanded",this.isExpanded);}}},_setIndentAttr:function(_478){this.indent=_478;var _479=(Math.max(_478,0)*19)+"px";dojo.style(this.domNode,"backgroundPosition",_479+" 0px");dojo.style(this.rowNode,dojo._isBodyLtr()?"paddingLeft":"paddingRight",_479);dojo.forEach(this.getChildren(),function(_47a){_47a.attr("indent",_478+1);});},markProcessing:function(){this.state="LOADING";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,_47d=tree.model;if(tree._v10Compat&&item===_47d.root){item=null;}if(this._iconClass){dojo.removeClass(this.iconNode,this._iconClass);}this._iconClass=tree.getIconClass(item,this.isExpanded);if(this._iconClass){dojo.addClass(this.iconNode,this._iconClass);}dojo.style(this.iconNode,tree.getIconStyle(item,this.isExpanded)||{});if(this._labelClass){dojo.removeClass(this.labelNode,this._labelClass);}this._labelClass=tree.getLabelClass(item,this.isExpanded);if(this._labelClass){dojo.addClass(this.labelNode,this._labelClass);}dojo.style(this.labelNode,tree.getLabelStyle(item,this.isExpanded)||{});},_updateLayout:function(){var _47e=this.getParent();if(!_47e||_47e.rowNode.style.display=="none"){dojo.addClass(this.domNode,"dijitTreeIsRoot");}else{dojo.toggleClass(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_47f){var _480=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];var _481=["*","-","+","*"];var idx=_47f?0:(this.isExpandable?(this.isExpanded?1:2):3);dojo.forEach(_480,function(s){dojo.removeClass(this.expandoNode,s);},this);dojo.addClass(this.expandoNode,_480[idx]);this.expandoNodeText.innerHTML=_481[idx];},expand:function(){if(this.isExpanded){return;}this._wipeOut&&this._wipeOut.stop();this.isExpanded=true;dijit.setWaiState(this.labelNode,"expanded","true");dijit.setWaiRole(this.containerNode,"group");dojo.addClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","true");}if(!this._wipeIn){this._wipeIn=dojo.fx.wipeIn({node:this.containerNode,duration:dijit.defaultDuration});}this._wipeIn.play();},collapse:function(){if(!this.isExpanded){return;}this._wipeIn&&this._wipeIn.stop();this.isExpanded=false;dijit.setWaiState(this.labelNode,"expanded","false");if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","false");}dojo.removeClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(!this._wipeOut){this._wipeOut=dojo.fx.wipeOut({node:this.containerNode,duration:dijit.defaultDuration});}this._wipeOut.play();},setLabelNode:function(_484){this.labelNode.innerHTML="";this.labelNode.appendChild(dojo.doc.createTextNode(_484));},indent:0,setChildItems:function(_485){var tree=this.tree,_487=tree.model;this.getChildren().forEach(function(_488){dijit._Container.prototype.removeChild.call(this,_488);},this);this.state="LOADED";if(_485&&_485.length>0){this.isExpandable=true;dojo.forEach(_485,function(item){var id=_487.getIdentity(item),_48b=tree._itemNodeMap[id],node=(_48b&&!_48b.getParent())?_48b:this.tree._createTreeNode({item:item,tree:tree,isExpandable:_487.mayHaveChildren(item),label:tree.getLabel(item),indent:this.indent+1});if(_48b){_48b.attr("indent",this.indent+1);}this.addChild(node);tree._itemNodeMap[id]=node;if(this.tree._state(item)){tree._expandNode(node);}},this);dojo.forEach(this.getChildren(),function(_48d,idx){_48d._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}if(this==tree.rootNode){var fc=this.tree.showRoot?this:this.getChildren()[0];if(fc){fc.setSelected(true);tree.lastFocused=fc;}else{tree.domNode.setAttribute("tabIndex","0");}}},removeChild:function(node){this.inherited(arguments);var _491=this.getChildren();if(_491.length==0){this.isExpandable=false;this.collapse();}dojo.forEach(_491,function(_492){_492._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},_onLabelFocus:function(evt){dojo.addClass(this.labelNode,"dijitTreeLabelFocused");this.tree._onNodeFocus(this);},_onLabelBlur:function(evt){dojo.removeClass(this.labelNode,"dijitTreeLabelFocused");},setSelected:function(_495){var _496=this.labelNode;_496.setAttribute("tabIndex",_495?"0":"-1");dijit.setWaiState(_496,"selected",_495);dojo.toggleClass(this.rowNode,"dijitTreeNodeSelected",_495);},_onMouseEnter:function(evt){dojo.addClass(this.rowNode,"dijitTreeNodeHover");this.tree._onNodeMouseEnter(this,evt);},_onMouseLeave:function(evt){dojo.removeClass(this.rowNode,"dijitTreeNodeHover");this.tree._onNodeMouseLeave(this,evt);}});dojo.declare("dijit.Tree",[dijit._Widget,dijit._Templated],{store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],openOnClick:false,openOnDblClick:false,templateString:"<div class=\"dijitTreeContainer\" waiRole=\"tree\"\n\tdojoAttachEvent=\"onclick:_onClick,onkeypress:_onKeyPress,ondblclick:_onDblClick\">\n</div>\n",isExpandable:true,isTree:true,persist:true,dndController:null,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:0,betweenThreshold:0,_publish:function(_499,_49a){dojo.publish(this.id,[dojo.mixin({tree:this,event:_499},_49a||{})]);},postMixInProperties:function(){this.tree=this;this._itemNodeMap={};if(!this.cookieName){this.cookieName=this.id+"SaveStateCookie";}},postCreate:function(){this._initState();if(!this.model){this._store2model();}this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this._load();this.inherited(arguments);if(this.dndController){if(dojo.isString(this.dndController)){this.dndController=dojo.getObject(this.dndController);}var _49b={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_49b[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_49b);}},_store2model:function(){this._v10Compat=true;dojo.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _49d={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_49d.mayHaveChildren=dojo.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_49d.getChildren=dojo.hitch(this,function(item,_49f,_4a0){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_49f,_4a0);});}this.model=new dijit.tree.ForestStoreModel(_49d);this.showRoot=Boolean(this.label);},_load:function(){this.model.getRoot(dojo.hitch(this,function(item){var rn=this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),indent:this.showRoot?0:-1});if(!this.showRoot){rn.rowNode.style.display="none";}this.domNode.appendChild(rn.domNode);this._itemNodeMap[this.model.getIdentity(item)]=rn;rn._updateLayout();this._expandNode(rn);}),function(err){console.error(this,": error loading root: ",err);});},mayHaveChildren:function(item){},getItemChildren:function(_4a5,_4a6){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_4a9){return (!item||this.model.mayHaveChildren(item))?(_4a9?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(item,_4ab){},getIconStyle:function(item,_4ad){},getLabelStyle:function(item,_4af){},_onKeyPress:function(e){if(e.altKey){return;}var dk=dojo.keys;var _4b2=dijit.getEnclosingWidget(e.target);if(!_4b2){return;}var key=e.charOrCode;if(typeof key=="string"){if(!e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey){this._onLetterKeyNav({node:_4b2,key:key.toLowerCase()});dojo.stopEvent(e);}}else{var map=this._keyHandlerMap;if(!map){map={};map[dk.ENTER]="_onEnterKey";map[this.isLeftToRight()?dk.LEFT_ARROW:dk.RIGHT_ARROW]="_onLeftArrow";map[this.isLeftToRight()?dk.RIGHT_ARROW:dk.LEFT_ARROW]="_onRightArrow";map[dk.UP_ARROW]="_onUpArrow";map[dk.DOWN_ARROW]="_onDownArrow";map[dk.HOME]="_onHomeKey";map[dk.END]="_onEndKey";this._keyHandlerMap=map;}if(this._keyHandlerMap[key]){this[this._keyHandlerMap[key]]({node:_4b2,item:_4b2.item});dojo.stopEvent(e);}}},_onEnterKey:function(_4b5){this._publish("execute",{item:_4b5.item,node:_4b5.node});this.onClick(_4b5.item,_4b5.node);},_onDownArrow:function(_4b6){var node=this._getNextNode(_4b6.node);if(node&&node.isTreeNode){this.focusNode(node);}},_onUpArrow:function(_4b8){var node=_4b8.node;var _4ba=node.getPreviousSibling();if(_4ba){node=_4ba;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _4bb=node.getChildren();node=_4bb[_4bb.length-1];}}else{var _4bc=node.getParent();if(!(!this.showRoot&&_4bc===this.rootNode)){node=_4bc;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(_4bd){var node=_4bd.node;if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(_4bf){var node=_4bf.node;if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _4c1=node.getParent();if(_4c1&&_4c1.isTreeNode&&!(!this.showRoot&&_4c1===this.rootNode)){this.focusNode(_4c1);}}},_onHomeKey:function(){var node=this._getRootOrFirstNode();if(node){this.focusNode(node);}},_onEndKey:function(_4c3){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();node=c[c.length-1];}if(node&&node.isTreeNode){this.focusNode(node);}},_onLetterKeyNav:function(_4c6){var node=_4c6.node,_4c8=node,key=_4c6.key;do{node=this._getNextNode(node);if(!node){node=this._getRootOrFirstNode();}}while(node!==_4c8&&(node.label.charAt(0).toLowerCase()!=key));if(node&&node.isTreeNode){if(node!==_4c8){this.focusNode(node);}}},_onClick:function(e){var _4cb=e.target;var _4cc=dijit.getEnclosingWidget(_4cb);if(!_4cc||!_4cc.isTreeNode){return;}if((this.openOnClick&&_4cc.isExpandable)||(_4cb==_4cc.expandoNode||_4cb==_4cc.expandoNodeText)){if(_4cc.isExpandable){this._onExpandoClick({node:_4cc});}}else{this._publish("execute",{item:_4cc.item,node:_4cc});this.onClick(_4cc.item,_4cc);this.focusNode(_4cc);}dojo.stopEvent(e);},_onDblClick:function(e){var _4ce=e.target;var _4cf=dijit.getEnclosingWidget(_4ce);if(!_4cf||!_4cf.isTreeNode){return;}if((this.openOnDblClick&&_4cf.isExpandable)||(_4ce==_4cf.expandoNode||_4ce==_4cf.expandoNodeText)){if(_4cf.isExpandable){this._onExpandoClick({node:_4cf});}}else{this._publish("execute",{item:_4cf.item,node:_4cf});this.onDblClick(_4cf.item,_4cf);this.focusNode(_4cf);}dojo.stopEvent(e);},_onExpandoClick:function(_4d0){var node=_4d0.node;this.focusNode(node);if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(item,node){},onDblClick:function(item,node){},onOpen:function(item,node){},onClose:function(item,node){},_getNextNode:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _4db=node.getNextSibling();if(_4db){return _4db;}node=node.getParent();}return null;}},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_collapseNode:function(node){if(node.isExpandable){if(node.state=="LOADING"){return;}node.collapse();this.onClose(node.item,node);if(node.item){this._state(node.item,false);this._saveState();}}},_expandNode:function(node){if(!node.isExpandable){return;}var _4de=this.model,item=node.item;switch(node.state){case "LOADING":return;case "UNCHECKED":node.markProcessing();var _4e0=this;_4de.getChildren(item,function(_4e1){node.unmarkProcessing();node.setChildItems(_4e1);_4e0._expandNode(node);},function(err){console.error(_4e0,": error loading root children: ",err);});break;default:node.expand();this.onOpen(node.item,node);if(item){this._state(item,true);this._saveState();}}},focusNode:function(node){node.labelNode.focus();},_onNodeFocus:function(node){if(node){if(node!=this.lastFocused){this.lastFocused.setSelected(false);}node.setSelected(true);this.lastFocused=node;}},_onNodeMouseEnter:function(node){},_onNodeMouseLeave:function(node){},_onItemChange:function(item){var _4e8=this.model,_4e9=_4e8.getIdentity(item),node=this._itemNodeMap[_4e9];if(node){node.setLabelNode(this.getLabel(item));node._updateItemClasses(item);}},_onItemChildrenChange:function(_4eb,_4ec){var _4ed=this.model,_4ee=_4ed.getIdentity(_4eb),_4ef=this._itemNodeMap[_4ee];if(_4ef){_4ef.setChildItems(_4ec);}},_onItemDelete:function(item){var _4f1=this.model,_4f2=_4f1.getIdentity(item),node=this._itemNodeMap[_4f2];if(node){var _4f4=node.getParent();if(_4f4){_4f4.removeChild(node);}node.destroyRecursive();delete this._itemNodeMap[_4f2];}},_initState:function(){if(this.persist){var _4f5=dojo.cookie(this.cookieName);this._openedItemIds={};if(_4f5){dojo.forEach(_4f5.split(","),function(item){this._openedItemIds[item]=true;},this);}}},_state:function(item,_4f8){if(!this.persist){return false;}var id=this.model.getIdentity(item);if(arguments.length===1){return this._openedItemIds[id];}if(_4f8){this._openedItemIds[id]=true;}else{delete this._openedItemIds[id];}},_saveState:function(){if(!this.persist){return;}var ary=[];for(var id in this._openedItemIds){ary.push(id);}dojo.cookie(this.cookieName,ary.join(","),{expires:365});},destroy:function(){if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!dojo.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},_createTreeNode:function(args){return new dijit._TreeNode(args);}});}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.dnd._isMac=navigator.appVersion.indexOf("Macintosh")>=0;dojo.dnd._copyKey=dojo.dnd._isMac?"metaKey":"ctrlKey";dojo.dnd.getCopyKeyState=function(e){return e[dojo.dnd._copyKey];};dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++dojo.dnd._uniqueId);}while(dojo.byId(id));return id;};dojo.dnd._empty={};dojo.dnd.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};dojo.dnd._lmb=dojo.isIE?1:0;dojo.dnd._isLmbPressed=dojo.isIE?function(e){return e.button&1;}:function(e){return e.button===0;};}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.dnd.getViewport=function(){var d=dojo.doc,dd=d.documentElement,w=window,b=dojo.body();if(dojo.isMozilla){return {w:dd.clientWidth,h:w.innerHeight};}else{if(!dojo.isOpera&&w.innerWidth){return {w:w.innerWidth,h:w.innerHeight};}else{if(!dojo.isOpera&&dd&&dd.clientWidth){return {w:dd.clientWidth,h:dd.clientHeight};}else{if(b.clientWidth){return {w:b.clientWidth,h:b.clientHeight};}}}}return null;};dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(e){var v=dojo.dnd.getViewport(),dx=0,dy=0;if(e.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=-dojo.dnd.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=dojo.dnd.H_AUTOSCROLL_VALUE;}}if(e.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=-dojo.dnd.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=dojo.dnd.V_AUTOSCROLL_VALUE;}}window.scrollBy(dx,dy);};dojo.dnd._validNodes={"div":1,"p":1,"td":1};dojo.dnd._validOverflow={"auto":1,"scroll":1};dojo.dnd.autoScrollNodes=function(e){for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in dojo.dnd._validNodes)){var s=dojo.getComputedStyle(n);if(s.overflow.toLowerCase() in dojo.dnd._validOverflow){var b=dojo._getContentBox(n,s),t=dojo._abs(n,true);var w=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,b.w/2),h=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,b.h/2),rx=e.pageX-t.x,ry=e.pageY-t.y,dx=0,dy=0;if(dojo.isWebKit||dojo.isOpera){rx+=dojo.body().scrollLeft,ry+=dojo.body().scrollTop;}if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}}if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}}var _516=n.scrollLeft,_517=n.scrollTop;n.scrollLeft=n.scrollLeft+dx;n.scrollTop=n.scrollTop+dy;if(_516!=n.scrollLeft||_517!=n.scrollTop){return;}}}try{n=n.parentNode;}catch(x){n=null;}}dojo.dnd.autoScroll(e);};}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(node,e,host){this.node=dojo.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=this.host=host,d=node.ownerDocument,_51d=dojo.connect(d,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(d,"onmousemove",this,"onMouseMove"),dojo.connect(d,"onmouseup",this,"onMouseUp"),dojo.connect(d,"ondragstart",dojo.stopEvent),dojo.connect(d.body,"onselectstart",dojo.stopEvent),_51d];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY});dojo.stopEvent(e);},onMouseUp:function(e){if(dojo.isWebKit&&dojo.dnd._isMac&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}dojo.stopEvent(e);},onFirstMove:function(){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left));t=Math.round(parseFloat(s.top));break;default:s.position="absolute";var m=dojo.marginBox(this.node);var b=dojo.doc.body;var bs=dojo.getComputedStyle(b);var bm=dojo._getMarginBox(b,bs);var bc=dojo._getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this);}dojo.disconnect(this.events.pop());},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(node,_52c){this.node=dojo.byId(node);if(!_52c){_52c={};}this.handle=_52c.handle?dojo.byId(_52c.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_52c.delay>0?_52c.delay:0;this.skip=_52c.skip;this.mover=_52c.mover?_52c.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")];},markupFactory:function(_52d,node){return new dojo.dnd.Moveable(node,_52d);},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dojo.dnd.isFormElement(e)){return;}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}dojo.stopEvent(e);},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}dojo.stopEvent(e);},onMouseUp:function(e){for(var i=0;i<2;++i){dojo.disconnect(this.events.pop());}dojo.stopEvent(e);},onSelectStart:function(e){if(!this.skip||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_535){dojo.publish("/dnd/move/start",[_535]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem");},onMoveStop:function(_536){dojo.publish("/dnd/move/stop",[_536]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem");},onFirstMove:function(_537){},onMove:function(_538,_539){this.onMoving(_538,_539);var s=_538.node.style;s.left=_539.l+"px";s.top=_539.t+"px";this.onMoved(_538,_539);},onMoving:function(_53b,_53c){},onMoved:function(_53d,_53e){}});}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(_53f,node){return new dojo.dnd.move.constrainedMoveable(node,_53f);},constructor:function(node,_542){if(!_542){_542={};}this.constraints=_542.constraints;this.within=_542.within;},onFirstMove:function(_543){var c=this.constraintBox=this.constraints.call(this,_543);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=dojo.marginBox(_543.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_546,_547){var c=this.constraintBox,s=_546.node.style;s.left=(_547.l<c.l?c.l:c.r<_547.l?c.r:_547.l)+"px";s.top=(_547.t<c.t?c.t:c.b<_547.t?c.b:_547.t)+"px";}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(_54a,node){return new dojo.dnd.move.boxConstrainedMoveable(node,_54a);},constructor:function(node,_54d){var box=_54d&&_54d.box;this.constraints=function(){return box;};}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(_54f,node){return new dojo.dnd.move.parentConstrainedMoveable(node,_54f);},constructor:function(node,_552){var area=_552&&_552.area;this.constraints=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(area=="margin"){return mb;}var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});dojo.dnd.move.constrainedMover=function(fun,_559){dojo.deprecated("dojo.dnd.move.constrainedMover, use dojo.dnd.move.constrainedMoveable instead");var _55a=function(node,e,_55d){dojo.dnd.Mover.call(this,node,e,_55d);};dojo.extend(_55a,dojo.dnd.Mover.prototype);dojo.extend(_55a,{onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox,c=this.constraintBox,l=m.l+e.pageX,t=m.t+e.pageY;l=l<c.l?c.l:c.r<l?c.r:l;t=t<c.t?c.t:c.b<t?c.b:t;this.host.onMove(this,{l:l,t:t});},onFirstMove:function(){dojo.dnd.Mover.prototype.onFirstMove.call(this);var c=this.constraintBox=fun.call(this);c.r=c.l+c.w;c.b=c.t+c.h;if(_559){var mb=dojo.marginBox(this.node);c.r-=mb.w;c.b-=mb.h;}}});return _55a;};dojo.dnd.move.boxConstrainedMover=function(box,_566){dojo.deprecated("dojo.dnd.move.boxConstrainedMover, use dojo.dnd.move.boxConstrainedMoveable instead");return dojo.dnd.move.constrainedMover(function(){return box;},_566);};dojo.dnd.move.parentConstrainedMover=function(area,_568){dojo.deprecated("dojo.dnd.move.parentConstrainedMover, use dojo.dnd.move.parentConstrainedMoveable instead");var fun=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(area=="margin"){return mb;}var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};return dojo.dnd.move.constrainedMover(fun,_568);};dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover;}if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var _56e=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(node,_570){if(!_570){_570={};}if(_570.timeout&&typeof _570.timeout=="number"&&_570.timeout>=0){this.timeout=_570.timeout;}},markupFactory:function(_571,node){return new dojo.dnd.TimedMoveable(node,_571);},onMoveStop:function(_573){if(_573._timer){clearTimeout(_573._timer);_56e.call(this,_573,_573._leftTop);}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments);},onMove:function(_574,_575){_574._leftTop=_575;if(!_574._timer){var _t=this;_574._timer=setTimeout(function(){_574._timer=null;_56e.call(_t,_574,_574._leftTop);},this.timeout);}}});})();}if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{reset:function(){dojo.forEach(this.getDescendants(),function(_577){if(_577.reset){_577.reset();}});},validate:function(){var _578=false;return dojo.every(dojo.map(this.getDescendants(),function(_579){_579._hasBeenBlurred=true;var _57a=_579.disabled||!_579.validate||_579.validate();if(!_57a&&!_578){dijit.scrollIntoView(_579.containerNode||_579.domNode);_579.focus();_578=true;}return _57a;}),function(item){return item;});},setValues:function(val){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use attr('value', val) instead.","","2.0");return this.attr("value",val);},_setValueAttr:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_57f){if(!_57f.name){return;}var _580=map[_57f.name]||(map[_57f.name]=[]);_580.push(_57f);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _582=map[name],_583=dojo.getObject(name,false,obj);if(_583===undefined){continue;}if(!dojo.isArray(_583)){_583=[_583];}if(typeof _582[0].checked=="boolean"){dojo.forEach(_582,function(w,i){w.attr("value",dojo.indexOf(_583,w.value)!=-1);});}else{if(_582[0]._multiValue){_582[0].attr("value",_583);}else{dojo.forEach(_582,function(w,i){w.attr("value",_583[i]);});}}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");},_getValueAttr:function(){var obj={};dojo.forEach(this.getDescendants(),function(_589){var name=_589.name;if(!name||_589.disabled){return;}var _58b=_589.attr("value");if(typeof _589.checked=="boolean"){if(/Radio/.test(_589.declaredClass)){if(_58b!==false){dojo.setObject(name,_58b,obj);}else{_58b=dojo.getObject(name,false,obj);if(_58b===undefined){dojo.setObject(name,null,obj);}}}else{var ary=dojo.getObject(name,false,obj);if(!ary){ary=[];dojo.setObject(name,ary,obj);}if(_58b!==false){ary.push(_58b);}}}else{dojo.setObject(name,_58b,obj);}});return obj;},isValid:function(){this._invalidWidgets=dojo.filter(this.getDescendants(),function(_58d){return !_58d.disabled&&_58d.isValid&&!_58d.isValid();});return !this._invalidWidgets.length;},onValidStateChange:function(_58e){},_widgetChange:function(_58f){var _590=this._lastValidState;if(!_58f||this._lastValidState===undefined){_590=this.isValid();if(this._lastValidState===undefined){this._lastValidState=_590;}}else{if(_58f.isValid){this._invalidWidgets=dojo.filter(this._invalidWidgets||[],function(w){return (w!=_58f);},this);if(!_58f.isValid()&&!_58f.attr("disabled")){this._invalidWidgets.push(_58f);}_590=(this._invalidWidgets.length===0);}}if(_590!==this._lastValidState){this._lastValidState=_590;this.onValidStateChange(_590);}},connectChildren:function(){dojo.forEach(this._changeConnections,dojo.hitch(this,"disconnect"));var _592=this;var _593=this._changeConnections=[];dojo.forEach(dojo.filter(this.getDescendants(),function(item){return item.validate;}),function(_595){_593.push(_592.connect(_595,"validate",dojo.hitch(_592,"_widgetChange",_595)));_593.push(_592.connect(_595,"_setDisabledAttr",dojo.hitch(_592,"_widgetChange",_595)));});this._widgetChange(null);},startup:function(){this.inherited(arguments);this._changeConnections=[];this.connectChildren();}});}if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(_596){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.attr("value"));},_getFocusItems:function(_597){var _598=dijit._getTabNavigable(dojo.byId(_597));this._firstFocusItem=_598.lowest||_598.first||_597;this._lastFocusItem=_598.last||_598.highest||this._firstFocusItem;if(dojo.isMoz&&this._firstFocusItem.tagName.toLowerCase()=="input"&&dojo.attr(this._firstFocusItem,"type").toLowerCase()=="file"){dojo.attr(_597,"tabindex","0");this._firstFocusItem=_597;}}});}if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(id){dojo.attr(this.node,"id",id+"_underlay");},_setClassAttr:function(_59a){this.node.className="dijitDialogUnderlay "+_59a;},postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _59d=dijit.getViewport();os.top=_59d.t+"px";os.left=_59d.l+"px";is.width=_59d.w+"px";is.height=_59d.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.layout();if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="block";}},hide:function(){this.domNode.style.display="none";if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="none";}},uninitialize:function(){if(this.bgIframe){this.bgIframe.destroy();}}});}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");(function(){var _59e=0;dojo.html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(node,cont,_5a2){if(_5a2){dojo.html._emptyNode(node);}if(typeof cont=="string"){var pre="",post="",walk=0,name=node.nodeName.toLowerCase();switch(name){case "tr":pre="<tr>";post="</tr>";walk+=1;case "tbody":case "thead":pre="<tbody>"+pre;post+="</tbody>";walk+=1;case "table":pre="<table>"+pre;post+="</table>";walk+=1;break;}if(walk){var n=node.ownerDocument.createElement("div");n.innerHTML=pre+cont+post;do{n=n.firstChild;}while(--walk);dojo.forEach(n.childNodes,function(n){node.appendChild(n.cloneNode(true));});}else{node.innerHTML=cont;}}else{if(cont.nodeType){node.appendChild(cont);}else{dojo.forEach(cont,function(n){node.appendChild(n.cloneNode(true));});}}return node;};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(_5aa,node){dojo.mixin(this,_5aa||{});node=this.node=dojo.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_59e++].join("_");}if(!(this.node||node)){new Error(this.declaredClass+": no node provided to "+this.id);}},set:function(cont,_5ad){if(undefined!==cont){this.content=cont;}if(_5ad){this._mixin(_5ad);}this.onBegin();this.setContent();this.onEnd();return this.node;},setContent:function(){var node=this.node;if(!node){console.error("setContent given no node");}try{node=dojo.html._setNodeContent(node,this.content);}catch(e){var _5af=this.onContentError(e);try{node.innerHTML=_5af;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}dojo.html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(dojo.isString(cont)){if(this.cleanContent){cont=dojo.html._secureForInnerHtml(cont);}if(this.extractContent){var _5b2=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_5b2){cont=_5b2[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.node;delete this.content;},onContentError:function(err){return "Error occured setting content: "+err;},_mixin:function(_5b4){var _5b5={},key;for(key in _5b4){if(key in _5b5){continue;}this[key]=_5b4[key];}},_parse:function(){var _5b7=this.node;try{this.parseResults=dojo.parser.parse(_5b7,true);}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_5ba){var _5bb=this["on"+type+"Error"].call(this,err);if(_5ba){console.error(_5ba,err);}else{if(_5bb){dojo.html._setNodeContent(this.node,_5bb,true);}}}});dojo.html.set=function(node,cont,_5be){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(!_5be){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojo.html._ContentSetter(dojo.mixin(_5be,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",doLayout:true,ioArgs:{},isContainer:true,postMixInProperties:function(){this.inherited(arguments);var _5c0=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_5c0);this.errorMessage=dojo.string.substitute(this.errorMessage,_5c0);if(!this.href&&this.srcNodeRef&&this.srcNodeRef.innerHTML){this.isLoaded=true;}},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},postCreate:function(){this.domNode.title="";if(!dojo.attr(this.domNode,"role")){dijit.setWaiRole(this.domNode,"group");}dojo.addClass(this.domNode,this.baseClass);},startup:function(){if(this._started){return;}if(this.isLoaded){dojo.forEach(this.getChildren(),function(_5c1){_5c1.startup();});if(this.doLayout){this._checkIfSingleChild();}if(!this._singleChild||!dijit._Contained.prototype.getParent.call(this)){this._scheduleLayout();}}this._loadCheck();this.inherited(arguments);},_checkIfSingleChild:function(){var _5c2=dojo.query(">",this.containerNode),_5c3=_5c2.filter(function(node){return dojo.hasAttr(node,"dojoType")||dojo.hasAttr(node,"widgetId");}),_5c5=dojo.filter(_5c3.map(dijit.byNode),function(_5c6){return _5c6&&_5c6.domNode&&_5c6.resize;});if(_5c2.length==_5c3.length&&_5c5.length==1){this._singleChild=_5c5[0];}else{delete this._singleChild;}},setHref:function(href){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use attr('href', ...) instead.","","2.0");return this.attr("href",href);},_setHrefAttr:function(href){this.cancel();this.href=href;if(this._created&&(this.preload||this._isShown())){return this.refresh();}else{this._hrefChanged=true;}},setContent:function(data){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use attr('content', ...) instead.","","2.0");this.attr("content",data);},_setContentAttr:function(data){this.href="";this.cancel();this._setContent(data||"");this._isDownloaded=false;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;},uninitialize:function(){if(this._beingDestroyed){this.cancel();}},destroyRecursive:function(_5cb){if(this._beingDestroyed){return;}this._beingDestroyed=true;this.inherited(arguments);},resize:function(size){dojo.marginBox(this.domNode,size);var node=this.containerNode,mb=dojo.mixin(dojo.marginBox(node),size||{});var cb=(this._contentBox=dijit.layout.marginBox2contentBox(node,mb));if(this._singleChild&&this._singleChild.resize){this._singleChild.resize({w:cb.w,h:cb.h});}},_isShown:function(){if("open" in this){return this.open;}else{var node=this.domNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!dojo.hasClass(node,"dijitHidden");}},_onShow:function(){if(this._needLayout){this._layoutChildren();}this._loadCheck();if(this.onShow){this.onShow();}},_loadCheck:function(){if((this.href&&!this._xhrDfd)&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)&&(this.preload||this._isShown())){delete this._hrefChanged;this.refresh();}},refresh:function(){this.cancel();this._setContent(this.onDownloadStart(),true);var self=this;var _5d2={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(_5d2,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(_5d2));hand.addCallback(function(html){try{self._isDownloaded=true;self._setContent(html,false);self.onDownloadEnd();}catch(err){self._onError("Content",err);}delete self._xhrDfd;return html;});hand.addErrback(function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;});},_onLoadHandler:function(data){this.isLoaded=true;try{this.onLoad(data);}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);}},_onUnloadHandler:function(){this.isLoaded=false;try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);}},destroyDescendants:function(){if(this.isLoaded){this._onUnloadHandler();}var _5d7=this._contentSetter;dojo.forEach(this.getChildren(),function(_5d8){if(_5d8.destroyRecursive){_5d8.destroyRecursive();}});if(_5d7){dojo.forEach(_5d7.parseResults,function(_5d9){if(_5d9.destroyRecursive&&_5d9.domNode&&_5d9.domNode.parentNode==dojo.body()){_5d9.destroyRecursive();}});delete _5d7.parseResults;}dojo.html._emptyNode(this.containerNode);},_setContent:function(cont,_5db){this.destroyDescendants();delete this._singleChild;var _5dc=this._contentSetter;if(!(_5dc&&_5dc instanceof dojo.html._ContentSetter)){_5dc=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _5de=this.onContentError(e);try{this.containerNode.innerHTML=_5de;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _5df=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad},this._contentSetterParams||{});dojo.mixin(_5dc,_5df);_5dc.set((dojo.isObject(cont)&&cont.domNode)?cont.domNode:cont);delete this._contentSetterParams;if(!_5db){dojo.forEach(this.getChildren(),function(_5e0){_5e0.startup();});if(this.doLayout){this._checkIfSingleChild();}this._scheduleLayout();this._onLoadHandler(cont);}},_onError:function(type,err,_5e3){var _5e4=this["on"+type+"Error"].call(this,err);if(_5e3){console.error(_5e3,err);}else{if(_5e4){this._setContent(_5e4,true);}}},_scheduleLayout:function(){if(this._isShown()){this._layoutChildren();}else{this._needLayout=true;}},_layoutChildren:function(){if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{dojo.forEach(this.getChildren(),function(_5e6){if(_5e6.resize){_5e6.resize();}});}delete this._needLayout;},onLoad:function(data){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(_5e8){},onDownloadError:function(_5e9){return this.errorMessage;},onDownloadEnd:function(){}});}if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:null,templateString:"<div waiRole=\"presentation\">\n\t<div class=\"dijitTooltipContainer\" waiRole=\"presentation\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" dojoAttachPoint=\"containerNode\" tabindex=\"-1\" waiRole=\"dialog\"></div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" waiRole=\"presentation\"></div>\n</div>\n",postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");this.containerNode.title=this.title;},orient:function(node,_5eb,_5ec){var c=this._currentOrientClass;if(c){dojo.removeClass(this.domNode,c);}c="dijitTooltipAB"+(_5ec.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(_5ec.charAt(0)=="T"?"Below":"Above");dojo.addClass(this.domNode,c);this._currentOrientClass=c;},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);this._onShow();if(this.autofocus){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem);}},_onKey:function(evt){var node=evt.target;var dk=dojo.keys;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.containerNode);}var _5f2=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==dk.ESCAPE){this.onCancel();dojo.stopEvent(evt);}else{if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_5f2){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_5f2){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{if(evt.charOrCode===dk.TAB){evt.stopPropagation();}}}}}});}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{templateString:null,templateString:"<div class=\"dijitDialog\" tabindex=\"-1\" waiRole=\"dialog\" waiState=\"labelledby-${id}_title\">\n\t<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t<span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\n\t<span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"onclick: onCancel, onmouseenter: _onCloseEnter, onmouseleave: _onCloseLeave\" title=\"${buttonCancel}\">\n\t\t<span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t</span>\n\t</div>\n\t\t<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}]}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,_fixSizes:true,postMixInProperties:function(){var _5f3=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,_5f3);this.inherited(arguments);},postCreate:function(){dojo.style(this.domNode,{visibility:"hidden",position:"absolute",display:"",top:"-9999px"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();this.inherited(arguments);},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){var vp=dijit.getViewport();var p=e._leftTop||dojo.coords(e.node,true);this._relativePosition={t:p.t-vp.t,l:p.l-vp.l};}},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(dojo.isIE==6)?new dojo.dnd.TimedMoveable(node,{handle:this.titleBar}):new dojo.dnd.Moveable(node,{handle:this.titleBar,timeout:0});dojo.subscribe("/dnd/move/stop",this,"_endDrag");}else{dojo.addClass(node,"dijitDialogFixed");}var _5f8={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" ")};var _5fa=dijit._underlay;if(!_5fa){_5fa=dijit._underlay=new dijit.DialogUnderlay(_5f8);}this._fadeIn=dojo.fadeIn({node:node,duration:this.duration,beforeBegin:function(){_5fa.attr(_5f8);_5fa.show();},onEnd:dojo.hitch(this,function(){if(this.autofocus){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem);}})});this._fadeOut=dojo.fadeOut({node:node,duration:this.duration,onEnd:function(){node.style.visibility="hidden";node.style.top="-9999px";dijit._underlay.hide();}});},uninitialize:function(){var _5fb=false;if(this._fadeIn&&this._fadeIn.status()=="playing"){_5fb=true;this._fadeIn.stop();}if(this._fadeOut&&this._fadeOut.status()=="playing"){_5fb=true;this._fadeOut.stop();}if(this.open||_5fb){dijit._underlay.hide();}if(this._moveable){this._moveable.destroy();}},_size:function(){var mb=dojo.marginBox(this.domNode);var _5fd=dijit.getViewport();if(mb.w>=_5fd.w||mb.h>=_5fd.h){dojo.style(this.containerNode,{width:Math.min(mb.w,Math.floor(_5fd.w*0.75))+"px",height:Math.min(mb.h,Math.floor(_5fd.h*0.75))+"px",overflow:"auto",position:"relative"});}},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var node=this.domNode;var _5ff=dijit.getViewport();var p=this._relativePosition;var mb=p?null:dojo.marginBox(node);dojo.style(node,{left:Math.floor(_5ff.l+(p?p.l:(_5ff.w-mb.w)/2))+"px",top:Math.floor(_5ff.t+(p?p.t:(_5ff.h-mb.h)/2))+"px"});}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _605=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_605){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_605){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode){if(evt.charOrCode==dk.ESCAPE){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOut.status()=="playing"){this._fadeOut.stop();}this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var _606=dijit.getViewport();if(!this._oldViewport||_606.h!=this._oldViewport.h||_606.w!=this._oldViewport.w){this.layout();this._oldViewport=_606;}}));this._modalconnects.push(dojo.connect(dojo.doc.documentElement,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,visibility:""});if(this._fixSizes){dojo.style(this.containerNode,{width:"auto",height:"auto"});}this.open=true;this._onShow();this._size();this._position();this._fadeIn.play();this._savedFocus=dijit.getFocus(this);},hide:function(){if(!this._alreadyInitialized){return;}if(this._fadeIn.status()=="playing"){this._fadeIn.stop();}this._fadeOut.play();if(this._scrollConnected){this._scrollConnected=false;}dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];if(this.refocus){this.connect(this._fadeOut,"onEnd",dojo.hitch(dijit,"focus",this._savedFocus));}if(this._relativePosition){delete this._relativePosition;}this.open=false;},layout:function(){if(this.domNode.style.visibility!="hidden"){dijit._underlay.layout();this._position();}},destroy:function(){dojo.forEach(this._modalconnects,dojo.disconnect);if(this.refocus&&this.open){setTimeout(dojo.hitch(dijit,"focus",this._savedFocus),25);}this.inherited(arguments);},_onCloseEnter:function(){dojo.addClass(this.closeButtonNode,"dijitDialogCloseIcon-hover");},_onCloseLeave:function(){dojo.removeClass(this.closeButtonNode,"dijitDialogCloseIcon-hover");}});}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",templateString:"<input class=\"dijit dijitReset dijitLeft\" dojoAttachPoint='textbox,focusNode'\n\tdojoAttachEvent='onmouseenter:_onMouse,onmouseleave:_onMouse'\n\tautocomplete=\"off\" type=\"${type}\" ${nameAttrSetting}\n\t/>\n",baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),_getValueAttr:function(){return this.parse(this.attr("displayedValue"),this.constraints);},_setValueAttr:function(_607,_608,_609){var _60a;if(_607!==undefined){_60a=this.filter(_607);if(typeof _609!="string"){if(_60a!==null&&((typeof _60a!="number")||!isNaN(_60a))){_609=this.filter(this.format(_60a,this.constraints));}else{_609="";}}}if(_609!=null&&_609!=undefined&&((typeof _609)!="number"||!isNaN(_609))&&this.textbox.value!=_609){this.textbox.value=_609;}this.inherited(arguments,[_60a,_608]);},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use attr('displayedValue') instead.","","2.0");return this.attr("displayedValue");},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},setDisplayedValue:function(_60b){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use attr('displayedValue', ...) instead.","","2.0");this.attr("displayedValue",_60b);},_setDisplayedValueAttr:function(_60c){if(_60c===null||_60c===undefined){_60c="";}else{if(typeof _60c!="string"){_60c=String(_60c);}}this.textbox.value=_60c;this._setValueAttr(this.attr("value"),undefined,_60c);},format:function(_60d,_60e){return ((_60d==null||_60d==undefined)?"":(_60d.toString?_60d.toString():_60d));},parse:function(_60f,_610){return _60f;},_refreshState:function(){},_onInput:function(e){if(e&&e.type&&/key/i.test(e.type)&&e.keyCode){switch(e.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return;}}if(this.intermediateChanges){var _612=this;setTimeout(function(){_612._handleOnChange(_612.attr("value"),false);},0);}this._refreshState();},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera){this.connect(this.textbox,"oninput",this._onInput);}else{this.connect(this.textbox,"onkeydown",this._onInput);this.connect(this.textbox,"onkeyup",this._onInput);this.connect(this.textbox,"onpaste",this._onInput);this.connect(this.textbox,"oncut",this._onInput);}this._layoutHack();},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=dojo.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.attr("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_onFocus:function(e){if(this.disabled){return;}this._refreshState();this.inherited(arguments);},reset:function(){this.textbox.value="";this.inherited(arguments);}});dijit.selectInputText=function(_617,_618,stop){var _61a=dojo.global;var _61b=dojo.doc;_617=dojo.byId(_617);if(isNaN(_618)){_618=0;}if(isNaN(stop)){stop=_617.value?_617.value.length:0;}_617.focus();if(_61b["selection"]&&dojo.body()["createTextRange"]){if(_617.createTextRange){var _61c=_617.createTextRange();with(_61c){collapse(true);moveStart("character",_618);moveEnd("character",stop);select();}}}else{if(_61a["getSelection"]){var _61d=_61a.getSelection();if(_617.setSelectionRange){_617.setSelectionRange(_618,stop);}}}};}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\">\n\t<div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" waiRole='alert'></div>\n\t<div class=\"dijitTooltipConnector\"></div>\n</div>\n",postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")});},show:function(_61e,_61f,_620){if(this.aroundNode&&this.aroundNode===_61f){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_61e;this.domNode.style.top=(this.domNode.offsetTop+1)+"px";var _621={};var ltr=this.isLeftToRight();dojo.forEach((_620&&_620.length)?_620:dijit.Tooltip.defaultPosition,function(pos){switch(pos){case "after":_621[ltr?"BR":"BL"]=ltr?"BL":"BR";break;case "before":_621[ltr?"BL":"BR"]=ltr?"BR":"BL";break;case "below":_621[ltr?"BL":"BR"]=ltr?"TL":"TR";_621[ltr?"BR":"BL"]=ltr?"TR":"TL";break;case "above":default:_621[ltr?"TL":"TR"]=ltr?"BL":"BR";_621[ltr?"TR":"TL"]=ltr?"BR":"BL";break;}});var pos=dijit.placeOnScreenAroundElement(this.domNode,_61f,_621,dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_61f;},orient:function(node,_626,_627){node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_626+"-"+_627];},_onShow:function(){if(dojo.isIE){this.domNode.style.filter="";}},hide:function(_628){if(this._onDeck&&this._onDeck[1]==_628){this._onDeck=null;}else{if(this.aroundNode===_628){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});dijit.showTooltip=function(_629,_62a,_62b){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.show(_629,_62a,_62b);};dijit.hideTooltip=function(_62c){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.hide(_62c);};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(ids){this._connectNodes=[];this.connectId=dojo.isArrayLike(ids)?ids:[ids];dojo.forEach(this.connectId,function(id){var node=dojo.byId(id);if(node){this._connectNodes.push(node);dojo.forEach(["onMouseEnter","onMouseLeave","onFocus","onBlur"],function(_630){this.connect(node,_630.toLowerCase(),"_"+_630);},this);if(dojo.isIE){node.style.zoom=1;}}},this);},postCreate:function(){dojo.addClass(this.domNode,"dijitTooltipData");},_onMouseEnter:function(e){this._onHover(e);},_onMouseLeave:function(e){this._onUnHover(e);},_onFocus:function(e){this._focus=true;this._onHover(e);this.inherited(arguments);},_onBlur:function(e){this._focus=false;this._onUnHover(e);this.inherited(arguments);},_onHover:function(e){if(!this._showTimer){var _636=e.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(_636);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_638){_638=_638||this._connectNodes[0];if(!_638){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}dijit.showTooltip(this.label||this.domNode.innerHTML,_638,this.position);this._connectNode=_638;},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},uninitialize:function(){this.close();}});dijit.Tooltip.defaultPosition=["after","before"];}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:"<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\" waiRole=\"presentation\"\n\t><div style=\"overflow:hidden;\"\n\t\t><div class=\"dijitReset dijitValidationIcon\"><br></div\n\t\t><div class=\"dijitReset dijitValidationIconText\">&Chi;</div\n\t\t><div class=\"dijitReset dijitInputField\"\n\t\t\t><input class=\"dijitReset\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${nameAttrSetting} type='${type}'\n\t\t/></div\n\t></div\n></div>\n",baseClass:"dijitTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(_639){return this.regExp;},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused);},validator:function(_63a,_63b){return (new RegExp("^(?:"+this.regExpGen(_63b)+")"+(this.required?"":"?")+"$")).test(_63a)&&(!this.required||!this._isEmpty(_63a))&&(this._isEmpty(_63a)||this.parse(_63a,_63b)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(_63c){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_63d){return /^\s*$/.test(_63d);},getErrorMessage:function(_63e){return this.invalidMessage;},getPromptMessage:function(_63f){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_640){var _641="";var _642=this.disabled||this.isValid(_640);if(_642){this._maskValidSubsetError=true;}var _643=!_642&&_640&&this._isValidSubset();var _644=this._isEmpty(this.textbox.value);this.state=(_642||(!this._hasBeenBlurred&&_644)||_643)?"":"Error";if(this.state=="Error"){this._maskValidSubsetError=false;}this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",_642?"false":"true");if(_640){if(_644){_641=this.getPromptMessage(true);}if(!_641&&(this.state=="Error"||(_643&&!this._maskValidSubsetError))){_641=this.getErrorMessage(true);}}this.displayMessage(_641);return _642;},_message:"",displayMessage:function(_645){if(this._message==_645){return;}this._message=_645;dijit.hideTooltip(this.domNode);if(_645){dijit.showTooltip(_645,this.domNode,this.tooltipPosition);}},_refreshState:function(){this.validate(this._focused);this.inherited(arguments);},constructor:function(){this.constraints={};},postMixInProperties:function(){this.inherited(arguments);this.constraints.locale=this.lang;this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage;}var p=this.regExpGen(this.constraints);this.regExp=p;var _647="";if(p!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_647+=re;break;case ")":_647+="|$)";break;default:_647+="(?:"+re+"|$)";break;}});}try{"".search(_647);}catch(e){_647=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp);}this._partialre="^(?:"+_647+")$";},_setDisabledAttr:function(_649){this.inherited(arguments);if(this.valueNode){this.valueNode.disabled=_649;}this._refreshState();},_setRequiredAttr:function(_64a){this.required=_64a;dijit.setWaiState(this.focusNode,"required",_64a);this._refreshState();},postCreate:function(){if(dojo.isIE){var s=dojo.getComputedStyle(this.focusNode);if(s){var ff=s.fontFamily;if(ff){this.focusNode.style.fontFamily=ff;}}}this.inherited(arguments);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},serialize:function(val,_64e){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.attr("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.create("input",{style:{display:"none"},type:this.type,name:this.name},this.textbox,"after");},_setDisabledAttr:function(_650){this.inherited(arguments);dojo.attr(this.valueNode,"disabled",_650);},reset:function(){this.valueNode.value="";this.inherited(arguments);}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(_651,_652){var _653="min" in _652;var _654="max" in _652;if(_653||_654){return (!_653||this.compare(_651,_652.min)>=0)&&(!_654||this.compare(_651,_652.max)<=0);}return true;},isInRange:function(_655){return this.rangeCheck(this.attr("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.attr("value");var _657=false;var _658=false;if("min" in this.constraints){var min=this.constraints.min;val=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min);_657=(typeof val=="number")&&val<0;}if("max" in this.constraints){var max=this.constraints.max;val=this.compare(val,((typeof max!="number")||max>0)?max:0);_658=(typeof val=="number")&&val>0;}return _657||_658;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_65b){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_65b));},getErrorMessage:function(_65c){if(dijit.form.RangeBoundTextBox.superclass.isValid.call(this,false)&&!this.isInRange(_65c)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},postCreate:function(){this.inherited(arguments);if(this.constraints.min!==undefined){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min);}if(this.constraints.max!==undefined){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max);}},_setValueAttr:function(_65d,_65e){dijit.setWaiState(this.focusNode,"valuenow",_65d);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.SimpleTextarea"]){dojo._hasResource["dijit.form.SimpleTextarea"]=true;dojo.provide("dijit.form.SimpleTextarea");dojo.declare("dijit.form.SimpleTextarea",dijit.form.TextBox,{baseClass:"dijitTextArea",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{rows:"textbox",cols:"textbox"}),rows:"3",cols:"20",templatePath:null,templateString:"<textarea ${nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},filter:function(_65f){if(_65f){_65f=_65f.replace(/\r/g,"");}return this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(dojo.isIE&&this.cols){dojo.addClass(this.domNode,"dijitTextAreaCols");}},_previousValue:"",_onInput:function(e){if(this.maxLength){var _661=parseInt(this.maxLength);var _662=this.textbox.value.replace(/\r/g,"");var _663=_662.length-_661;if(_663>0){dojo.stopEvent(e);var _664=this.textbox;if(_664.selectionStart){var pos=_664.selectionStart;var cr=0;if(dojo.isOpera){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_662.substring(0,pos-_663-cr)+_662.substring(pos-cr);_664.setSelectionRange(pos-_663,pos-_663);}else{if(dojo.doc.selection){_664.focus();var _667=dojo.doc.selection.createRange();_667.moveStart("character",-_663);_667.text="";_667.select();}}}this._previousValue=this.textbox.value;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",null,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:"<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\" dojoAttachPoint=\"comboNode\" waiRole=\"combobox\" tabIndex=\"-1\"\n\t><div style=\"overflow:hidden;\"\n\t\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton'\n\t\t\tdojoAttachPoint=\"downArrowNode\" waiRole=\"presentation\"\n\t\t\tdojoAttachEvent=\"onmousedown:_onArrowMouseDown,onmouseup:_onMouse,onmouseenter:_onMouse,onmouseleave:_onMouse\"\n\t\t\t><div class=\"dijitArrowButtonInner\">&thinsp;</div\n\t\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div\n\t\t></div\n\t\t><div class=\"dijitReset dijitValidationIcon\"><br></div\n\t\t><div class=\"dijitReset dijitValidationIconText\">&Chi;</div\n\t\t><div class=\"dijitReset dijitInputField\"\n\t\t\t><input ${nameAttrSetting} type=\"text\" autocomplete=\"off\" class='dijitReset'\n\t\t\tdojoAttachEvent=\"onkeypress:_onKeyPress,compositionend\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" waiRole=\"textbox\" waiState=\"haspopup-true,autocomplete-list\"\n\t\t/></div\n\t></div\n></div>\n",baseClass:"dijitComboBox",_getCaretPos:function(_668){var pos=0;if(typeof (_668.selectionStart)=="number"){pos=_668.selectionStart;}else{if(dojo.isIE){var tr=dojo.doc.selection.createRange().duplicate();var ntr=_668.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_66c,_66d){_66d=parseInt(_66d);dijit.selectInputText(_66c,_66d,_66d);},_setDisabledAttr:function(_66e){this.inherited(arguments);dijit.setWaiState(this.comboNode,"disabled",_66e);},_onKeyPress:function(evt){var key=evt.charOrCode;if(evt.altKey||(evt.ctrlKey&&(key!="x"&&key!="v"))||evt.key==dojo.keys.SHIFT){return;}var _671=false;var pw=this._popupWidget;var dk=dojo.keys;var _674=null;if(this._isShowingNow){pw.handleKey(key);_674=pw.getHighlightedOption();}switch(key){case dk.PAGE_DOWN:case dk.DOWN_ARROW:if(!this._isShowingNow||this._prev_key_esc){this._arrowPressed();_671=true;}else{if(_674){this._announceOption(_674);}}dojo.stopEvent(evt);this._prev_key_backspace=false;this._prev_key_esc=false;break;case dk.PAGE_UP:case dk.UP_ARROW:if(this._isShowingNow){this._announceOption(_674);}dojo.stopEvent(evt);this._prev_key_backspace=false;this._prev_key_esc=false;break;case dk.ENTER:if(_674){if(_674==pw.nextButton){this._nextSearch(1);dojo.stopEvent(evt);break;}else{if(_674==pw.previousButton){this._nextSearch(-1);dojo.stopEvent(evt);break;}}}else{this._setDisplayedValueAttr(this.attr("displayedValue"),true);}evt.preventDefault();case dk.TAB:var _675=this.attr("displayedValue");if(pw&&(_675==pw._messages["previousMessage"]||_675==pw._messages["nextMessage"])){break;}if(this._isShowingNow){this._prev_key_backspace=false;this._prev_key_esc=false;if(_674){pw.attr("value",{target:_674});}this._lastQuery=null;this._hideResultList();}break;case " ":this._prev_key_backspace=false;this._prev_key_esc=false;if(_674){dojo.stopEvent(evt);this._selectOption();this._hideResultList();}else{_671=true;}break;case dk.ESCAPE:this._prev_key_backspace=false;this._prev_key_esc=true;if(this._isShowingNow){dojo.stopEvent(evt);this._hideResultList();}break;case dk.DELETE:case dk.BACKSPACE:this._prev_key_esc=false;this._prev_key_backspace=true;_671=true;break;case dk.RIGHT_ARROW:case dk.LEFT_ARROW:this._prev_key_backspace=false;this._prev_key_esc=false;break;default:this._prev_key_backspace=false;this._prev_key_esc=false;_671=typeof key=="string";}if(this.searchTimer){clearTimeout(this.searchTimer);}if(_671){setTimeout(dojo.hitch(this,"_startSearchFromInput"),1);}},_autoCompleteText:function(text){var fn=this.focusNode;dijit.selectInputText(fn,fn.value.length);var _678=this.ignoreCase?"toLowerCase":"substr";if(text[_678](0).indexOf(this.focusNode.value[_678](0))==0){var cpos=this._getCaretPos(fn);if((cpos+1)>fn.value.length){fn.value=text;dijit.selectInputText(fn,cpos);}}else{fn.value=text;dijit.selectInputText(fn);}},_openResultList:function(_67a,_67b){if(this.disabled||this.readOnly||(_67b.query[this.searchAttr]!=this._lastQuery)){return;}this._popupWidget.clearResultList();if(!_67a.length){this._hideResultList();return;}this.item=null;var _67c=new String(this.store.getValue(_67a[0],this.searchAttr));if(_67c&&this.autoComplete&&!this._prev_key_backspace&&(_67b.query[this.searchAttr]!="*")){this.item=_67a[0];this._autoCompleteText(_67c);}_67b._maxOptions=this._maxOptions;this._popupWidget.createOptions(_67a,_67b,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(_67b.direction){if(1==_67b.direction){this._popupWidget.highlightFirstOption();}else{if(-1==_67b.direction){this._popupWidget.highlightLastOption();}}this._announceOption(this._popupWidget.getHighlightedOption());}},_showResultList:function(){this._hideResultList();var _67d=this._popupWidget.getItems(),_67e=Math.min(_67d.length,this.maxListLength);this._arrowPressed();this.displayMessage("");dojo.style(this._popupWidget.domNode,{width:"",height:""});var best=this.open();var _680=dojo.marginBox(this._popupWidget.domNode);this._popupWidget.domNode.style.overflow=((best.h==_680.h)&&(best.w==_680.w))?"hidden":"auto";var _681=best.w;if(best.h<this._popupWidget.domNode.scrollHeight){_681+=16;}dojo.marginBox(this._popupWidget.domNode,{h:best.h,w:Math.max(_681,this.domNode.offsetWidth)});dijit.setWaiState(this.comboNode,"expanded","true");},_hideResultList:function(){if(this._isShowingNow){dijit.popup.close(this._popupWidget);this._arrowIdle();this._isShowingNow=false;dijit.setWaiState(this.comboNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant");}},_setBlurValue:function(){var _682=this.attr("displayedValue");var pw=this._popupWidget;if(pw&&(_682==pw._messages["previousMessage"]||_682==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{this.attr("displayedValue",_682);}},_onBlur:function(){this._hideResultList();this._arrowIdle();this.inherited(arguments);},_announceOption:function(node){if(node==null){return;}var _685;if(node==this._popupWidget.nextButton||node==this._popupWidget.previousButton){_685=node.innerHTML;}else{_685=this.store.getValue(node.item,this.searchAttr);}this.focusNode.value=this.focusNode.value.substring(0,this._getCaretPos(this.focusNode));dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(node,"id"));this._autoCompleteText(_685);},_selectOption:function(evt){var tgt=null;if(!evt){evt={target:this._popupWidget.getHighlightedOption()};}if(!evt.target){this.attr("displayedValue",this.attr("displayedValue"));return;}else{tgt=evt.target;}if(!evt.noHide){this._hideResultList();this._setCaretPos(this.focusNode,this.store.getValue(tgt.item,this.searchAttr).length);}this._doSelect(tgt);},_doSelect:function(tgt){this.item=tgt.item;this.attr("value",this.store.getValue(tgt.item,this.searchAttr));},_onArrowMouseDown:function(evt){if(this.disabled||this.readOnly){return;}dojo.stopEvent(evt);this.focus();if(this._isShowingNow){this._hideResultList();}else{this._startSearch("");}},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_getQueryString:function(text){return dojo.string.substitute(this.queryExpr,[text]);},_startSearch:function(key){if(!this._popupWidget){var _68c=this.id+"_popup";this._popupWidget=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption),id:_68c});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",_68c);}this.item=null;var _68d=dojo.clone(this.query);this._lastInput=key;this._lastQuery=_68d[this.searchAttr]=this._getQueryString(key);this.searchTimer=setTimeout(dojo.hitch(this,function(_68e,_68f){var _690={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:_68e,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(_691){console.error("dijit.form.ComboBox: "+_691);dojo.hitch(_68f,"_hideResultList")();},start:0,count:this.pageSize};dojo.mixin(_690,_68f.fetchProperties);var _692=_68f.store.fetch(_690);var _693=function(_694,_695){_694.start+=_694.count*_695;_694.direction=_695;this.store.fetch(_694);};this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,_693,_692);},_68d,this),this.searchDelay);},_setMaxOptions:function(size,_697){this._maxOptions=size;},_getValueField:function(){return this.searchAttr;},_arrowPressed:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){dojo.addClass(this.downArrowNode,"dijitArrowButtonActive");}},_arrowIdle:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){dojo.removeClass(this.downArrowNode,"dojoArrowButtonPushed");}},compositionend:function(evt){this._onKeyPress({charCode:-1});},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.hasDownArrow){this.baseClass="dijitTextBox";}if(!this.store){var _699=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(_699);if(!this.value||((typeof _699.selectedIndex=="number")&&_699.selectedIndex.toString()===this.value)){var item=this.store.fetchSelectedItem();if(item){this.value=this.store.getValue(item,this._getValueField());}}}this.inherited(arguments);},postCreate:function(){var _69b=dojo.query("label[for=\""+this.id+"\"]");if(_69b.length){_69b[0].id=(this.id+"_label");var cn=this.comboNode;dijit.setWaiState(cn,"labelledby",_69b[0].id);}this.inherited(arguments);},uninitialize:function(){if(this._popupWidget){this._hideResultList();this._popupWidget.destroy();}},_getMenuLabelFromItem:function(item){var _69e=this.store.getValue(item,this.labelAttr||this.searchAttr);var _69f=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_69e=this.doHighlight(_69e,this._escapeHtml(this._lastInput));_69f="html";}return {html:_69f=="html",label:_69e};},doHighlight:function(_6a0,find){var _6a2="i"+(this.highlightMatch=="all"?"g":"");var _6a3=this._escapeHtml(_6a0);find=dojo.regexp.escapeString(find);var ret=_6a3.replace(new RegExp("(^|\\s)("+find+")",_6a2),"$1<span class=\"dijitComboBoxHighlightMatch\">$2</span>");return ret;},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},open:function(){this._isShowingNow=true;return dijit.popup.open({popup:this._popupWidget,around:this.domNode,parent:this});},reset:function(){this.item=null;this.inherited(arguments);}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' tabIndex='-1' style='overflow: \"auto\"; overflow-x: \"hidden\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' waiRole='option'></li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' waiRole='option'></li>"+"</ul>",_messages:null,postMixInProperties:function(){this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);this.inherited(arguments);},_setValueAttr:function(_6a6){this.value=_6a6;this.onChange(_6a6);},onChange:function(_6a7){},onPage:function(_6a8){},postCreate:function(){this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];this.inherited(arguments);},onClose:function(){this._blurOptionNode();},_createOption:function(item,_6aa){var _6ab=_6aa(item);var _6ac=dojo.doc.createElement("li");dijit.setWaiRole(_6ac,"option");if(_6ab.html){_6ac.innerHTML=_6ab.label;}else{_6ac.appendChild(dojo.doc.createTextNode(_6ab.label));}if(_6ac.innerHTML==""){_6ac.innerHTML="&nbsp;";}_6ac.item=item;return _6ac;},createOptions:function(_6ad,_6ae,_6af){this.previousButton.style.display=(_6ae.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(_6ad,function(item,i){var _6b2=this._createOption(item,_6af);_6b2.className="dijitReset dijitMenuItem";dojo.attr(_6b2,"id",this.id+i);this.domNode.insertBefore(_6b2,this.nextButton);},this);var _6b3=false;if(_6ae._maxOptions&&_6ae._maxOptions!=-1){if((_6ae.start+_6ae.count)<_6ae._maxOptions){_6b3=true;}else{if((_6ae.start+_6ae.count)>(_6ae._maxOptions-1)){if(_6ae.count==_6ad.length){_6b3=true;}}}}else{if(_6ae.count==_6ad.length){_6b3=true;}}this.nextButton.style.display=_6b3?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);}},getItems:function(){return this.domNode.childNodes;},getListLength:function(){return this.domNode.childNodes.length-2;},_onMouseDown:function(evt){dojo.stopEvent(evt);},_onMouseUp:function(evt){if(evt.target===this.domNode){return;}else{if(evt.target==this.previousButton){this.onPage(-1);}else{if(evt.target==this.nextButton){this.onPage(1);}else{var tgt=evt.target;while(!tgt.item){tgt=tgt.parentNode;}this._setValueAttr({target:tgt},true);}}}},_onMouseOver:function(evt){if(evt.target===this.domNode){return;}var tgt=evt.target;if(!(tgt==this.previousButton||tgt==this.nextButton)){while(!tgt.item){tgt=tgt.parentNode;}}this._focusOptionNode(tgt);},_onMouseOut:function(evt){if(evt.target===this.domNode){return;}this._blurOptionNode();},_focusOptionNode:function(node){if(this._highlighted_option!=node){this._blurOptionNode();this._highlighted_option=node;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected");}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null;}},_highlightNextOption:function(){var fc=this.domNode.firstChild;if(!this.getHighlightedOption()){this._focusOptionNode(fc.style.display=="none"?fc.nextSibling:fc);}else{var ns=this._highlighted_option.nextSibling;if(ns&&ns.style.display!="none"){this._focusOptionNode(ns);}}dijit.scrollIntoView(this._highlighted_option);},highlightFirstOption:function(){this._focusOptionNode(this.domNode.firstChild.nextSibling);dijit.scrollIntoView(this._highlighted_option);},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dijit.scrollIntoView(this._highlighted_option);},_highlightPrevOption:function(){var lc=this.domNode.lastChild;if(!this.getHighlightedOption()){this._focusOptionNode(lc.style.display=="none"?lc.previousSibling:lc);}else{var ps=this._highlighted_option.previousSibling;if(ps&&ps.style.display!="none"){this._focusOptionNode(ps);}}dijit.scrollIntoView(this._highlighted_option);},_page:function(up){var _6c0=0;var _6c1=this.domNode.scrollTop;var _6c2=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption();}while(_6c0<_6c2){if(up){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break;}this._highlightPrevOption();}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break;}this._highlightNextOption();}var _6c3=this.domNode.scrollTop;_6c0+=(_6c3-_6c1)*(up?-1:1);_6c1=_6c3;}},pageUp:function(){this._page(true);},pageDown:function(){this._page(false);},getHighlightedOption:function(){var ho=this._highlighted_option;return (ho&&ho.parentNode)?ho:null;},handleKey:function(key){switch(key){case dojo.keys.DOWN_ARROW:this._highlightNextOption();break;case dojo.keys.PAGE_DOWN:this.pageDown();break;case dojo.keys.UP_ARROW:this._highlightPrevOption();break;case dojo.keys.PAGE_UP:this.pageUp();break;}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(_6c6,_6c7){if(!_6c6){_6c6="";}dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,_6c6,_6c7);}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(root){this.root=root;dojo.query("> option",root).forEach(function(node){node.innerHTML=dojo.trim(node.innerHTML);});},getValue:function(item,_6cb,_6cc){return (_6cb=="value")?item.value:(item.innerText||item.textContent||"");},isItemLoaded:function(_6cd){return true;},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},_fetchItems:function(args,_6cf,_6d0){if(!args.query){args.query={};}if(!args.query.name){args.query.name="";}if(!args.queryOptions){args.queryOptions={};}var _6d1=dojo.data.util.filter.patternToRegExp(args.query.name,args.queryOptions.ignoreCase),_6d2=dojo.query("> option",this.root).filter(function(_6d3){return (_6d3.innerText||_6d3.textContent||"").match(_6d1);});if(args.sort){_6d2.sort(dojo.data.util.sorter.createSortFunction(args.sort,this));}_6cf(_6d2,args);},close:function(_6d4){return;},getLabel:function(item){return item.innerHTML;},getIdentity:function(item){return dojo.attr(item,"value");},fetchItemByIdentity:function(args){var item=dojo.query("option[value='"+args.identity+"']",this.root)[0];args.onItem(item);},fetchSelectedItem:function(){var root=this.root,si=root.selectedIndex;return dojo.query("> option:nth-child("+(si!=-1?si+1:1)+")",root)[0];}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dijit.form.FilteringSelect"]){dojo._hasResource["dijit.form.FilteringSelect"]=true;dojo.provide("dijit.form.FilteringSelect");dojo.declare("dijit.form.FilteringSelect",[dijit.form.MappedTextBox,dijit.form.ComboBoxMixin],{_isvalid:true,required:true,_lastDisplayedValue:"",isValid:function(){return this._isvalid||(!this.required&&this.attr("displayedValue")=="");},_callbackSetLabel:function(_6db,_6dc,_6dd){if((_6dc&&_6dc.query[this.searchAttr]!=this._lastQuery)||(!_6dc&&_6db.length&&this.store.getIdentity(_6db[0])!=this._lastQuery)){return;}if(!_6db.length){this.valueNode.value="";dijit.form.TextBox.superclass._setValueAttr.call(this,"",_6dd||(_6dd===undefined&&!this._focused));this._isvalid=false;this.validate(this._focused);this.item=null;}else{this._setValueFromItem(_6db[0],_6dd);}},_openResultList:function(_6de,_6df){if(_6df.query[this.searchAttr]!=this._lastQuery){return;}this._isvalid=_6de.length!=0;this.validate(true);dijit.form.ComboBoxMixin.prototype._openResultList.apply(this,arguments);},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValue:function(_6e0,_6e1,_6e2){this.valueNode.value=_6e0;dijit.form.FilteringSelect.superclass._setValueAttr.call(this,_6e0,_6e2,_6e1);this._lastDisplayedValue=_6e1;},_setValueAttr:function(_6e3,_6e4){if(!this._onChangeActive){_6e4=null;}this._lastQuery=_6e3;if(_6e3===null||_6e3===""){this._setDisplayedValueAttr("",_6e4);return;}var self=this;var _6e6=function(item,_6e8){if(item){if(self.store.isItemLoaded(item)){self._callbackSetLabel([item],undefined,_6e8);}else{self.store.loadItem({item:item,onItem:function(_6e9,_6ea){self._callbackSetLabel(_6e9,_6ea,_6e8);}});}}else{self._isvalid=false;self.validate(false);}};this.store.fetchItemByIdentity({identity:_6e3,onItem:function(item){_6e6(item,_6e4);}});},_setValueFromItem:function(item,_6ed){this._isvalid=true;this.item=item;this._setValue(this.store.getIdentity(item),this.labelFunc(item,this.store),_6ed);},labelFunc:function(item,_6ef){return _6ef.getValue(item,this.searchAttr);},_doSelect:function(tgt){this._setValueFromItem(tgt.item,true);},_setDisplayedValueAttr:function(_6f1,_6f2){if(!this._created){_6f2=false;}if(this.store){var _6f3=dojo.clone(this.query);this._lastQuery=_6f3[this.searchAttr]=_6f1.replace(/([\\\*\?])/g,"\\$1");this.textbox.value=_6f1;this._lastDisplayedValue=_6f1;var _6f4=this;var _6f5={query:_6f3,queryOptions:{ignoreCase:this.ignoreCase,deep:true},onComplete:function(_6f6,_6f7){dojo.hitch(_6f4,"_callbackSetLabel")(_6f6,_6f7,_6f2);},onError:function(_6f8){console.error("dijit.form.FilteringSelect: "+_6f8);dojo.hitch(_6f4,"_setValue")("",_6f1,false);}};dojo.mixin(_6f5,this.fetchProperties);this.store.fetch(_6f5);}},postMixInProperties:function(){this.inherited(arguments);this._isvalid=!this.required;},undo:function(){this.attr("displayedValue",this._lastDisplayedValue);}});}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:"<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset\" waiRole=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\">\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">\n\t\t<div dojoAttachPoint=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\">\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(_6f9){if(_6f9&&!("label" in this.params)){this.attr("label",_6f9.innerHTML);}},postCreate:function(){dojo.setSelectable(this.domNode,false);dojo.attr(this.containerNode,"id",this.id+"_text");dijit.setWaiState(this.domNode,"labelledby",this.id+"_text");},_onHover:function(){dojo.addClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemHover(this);},_onUnhover:function(){dojo.removeClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemUnhover(this);},_onClick:function(evt){this.getParent().onItemClick(this,evt);dojo.stopEvent(evt);},onClick:function(evt){},focus:function(){try{dijit.focus(this.focusNode);}catch(e){}},_onFocus:function(){this._setSelected(true);},_setSelected:function(_6fc){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",_6fc);},setLabel:function(_6fd){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",_6fd);},setDisabled:function(_6fe){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",_6fe);},_setDisabledAttr:function(_6ff){this.disabled=_6ff;dojo[_6ff?"addClass":"removeClass"](this.domNode,"dijitMenuItemDisabled");dijit.setWaiState(this.focusNode,"disabled",_6ff?"true":"false");},_setAccelKeyAttr:function(_700){this.accelKey=_700;this.accelKeyNode.style.display=_700?"":"none";this.accelKeyNode.innerHTML=_700;dojo.attr(this.containerNode,"colSpan",_700?"1":"2");}});}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var _701=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,_701[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node);}dojo.body().appendChild(this.popup.domNode);this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){this.popup.destroyRecursive();delete this.popup;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:"<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitemcheckbox\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset\" waiRole=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" dojoAttachPoint=\"iconNode\">\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">\n\t</td>\n</tr>\n",checked:false,_setCheckedAttr:function(_703){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",_703);dijit.setWaiState(this.domNode,"checked",_703);this.checked=_703;},onChange:function(_704){},_onClick:function(e){if(!this.disabled){this.attr("checked",!this.checked);this.onChange(this.checked);}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:"<tr class=\"dijitMenuSeparator\">\n\t<td colspan=\"4\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n",postCreate:function(){dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_706){_706.startup();});this.startupKeyNavChildren();this.inherited(arguments);},onExecute:function(){},onCancel:function(_707){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}else{var _709=this._getTopMenu();if(_709&&_709._isMenuBar){_709.focusNext();}}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay);}}},_onChildBlur:function(item){item._setSelected(false);dijit.popup.close(item.popup);this._stopPopupTimer();},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null;}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(item.disabled){return false;}this.focusChild(item);if(item.popup){if(!this.is_open){this._openPopup();}}else{this.onExecute();item.onClick(evt);}},_openPopup:function(){this._stopPopupTimer();var _710=this.focusedChild;var _711=_710.popup;if(_711.isShowingNow){return;}_711.parentMenu=this;var self=this;dijit.popup.open({parent:this,popup:_711,around:_710.domNode,orient:this._orient||(this.isLeftToRight()?{"TR":"TL","TL":"TR"}:{"TL":"TR","TR":"TL"}),onCancel:function(){dijit.popup.close(_711);_710.focus();self.currentPopup=null;},onExecute:dojo.hitch(this,"_onDescendantExecute")});this.currentPopup=_711;if(_711.focus){setTimeout(dojo.hitch(_711,"focus"),0);}},onOpen:function(e){this.isShowingNow=true;},onClose:function(){this._stopPopupTimer();this.parentMenu=null;this.isShowingNow=false;this.currentPopup=null;if(this.focusedChild){this._onChildBlur(this.focusedChild);this.focusedChild=null;}},_onFocus:function(){this.isActive=true;dojo.addClass(this.domNode,"dijitMenuActive");dojo.removeClass(this.domNode,"dijitMenuPassive");this.inherited(arguments);},_onBlur:function(){this.isActive=false;dojo.removeClass(this.domNode,"dijitMenuActive");dojo.addClass(this.domNode,"dijitMenuPassive");this.onClose();this.inherited(arguments);},_onDescendantExecute:function(){this.onClose();}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[];},templateString:"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" waiRole=\"menu\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress:_onKeyPress\">\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\n</table>\n",targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,_contextMenuWithMouse:false,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body());}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this);}var k=dojo.keys,l=this.isLeftToRight();this._openSubMenuKey=l?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=l?k.LEFT_ARROW:k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);dojo.stopEvent(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{dojo.stopEvent(evt);}break;}},_iframeContentWindow:function(_717){var win=dijit.getDocumentWindow(dijit.Menu._iframeContentDocument(_717))||dijit.Menu._iframeContentDocument(_717)["__parent__"]||(_717.name&&dojo.doc.frames[_717.name])||null;return win;},_iframeContentDocument:function(_719){var doc=_719.contentDocument||(_719.contentWindow&&_719.contentWindow.document)||(_719.name&&dojo.doc.frames[_719.name]&&dojo.doc.frames[_719.name].document)||null;return doc;},bindDomNode:function(node){node=dojo.byId(node);var win=dijit.getDocumentWindow(node.ownerDocument);if(node.tagName.toLowerCase()=="iframe"){win=this._iframeContentWindow(node);node=dojo.withGlobal(win,dojo.body);}var cn=(node==dojo.body()?dojo.doc:node);node[this.id]=this._bindings.push([dojo.connect(cn,(this.leftClickToOpen)?"onclick":"oncontextmenu",this,"_openMyself"),dojo.connect(cn,"onkeydown",this,"_contextKey"),dojo.connect(cn,"onmousedown",this,"_contextMouse")]);},unBindDomNode:function(_71e){var node=dojo.byId(_71e);if(node){var bid=node[this.id]-1,b=this._bindings[bid];dojo.forEach(b,dojo.disconnect);delete this._bindings[bid];}},_contextKey:function(e){this._contextMenuWithMouse=false;if(e.keyCode==dojo.keys.F10){dojo.stopEvent(e);if(e.shiftKey&&e.type=="keydown"){var _e={target:e.target,pageX:e.pageX,pageY:e.pageY};_e.preventDefault=_e.stopPropagation=function(){};window.setTimeout(dojo.hitch(this,function(){this._openMyself(_e);}),1);}}},_contextMouse:function(e){this._contextMenuWithMouse=true;},_openMyself:function(e){if(this.leftClickToOpen&&e.button>0){return;}dojo.stopEvent(e);var x,y;if(dojo.isSafari||this._contextMenuWithMouse){x=e.pageX;y=e.pageY;}else{var _728=dojo.coords(e.target,true);x=_728.x+10;y=_728.y+10;}var self=this;var _72a=dijit.getFocus(this);function _72b(){dijit.focus(_72a);dijit.popup.close(self);};dijit.popup.open({popup:this,x:x,y:y,onExecute:_72b,onCancel:_72b,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};},uninitialize:function(){dojo.forEach(this.targetNodeIds,this.unBindDomNode,this);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2handles={};this.pane2menu={};this._subscriptions=[dojo.subscribe(this.containerId+"-startup",this,"onStartup"),dojo.subscribe(this.containerId+"-addChild",this,"onAddChild"),dojo.subscribe(this.containerId+"-removeChild",this,"onRemoveChild"),dojo.subscribe(this.containerId+"-selectChild",this,"onSelectChild"),dojo.subscribe(this.containerId+"-containerKeyPress",this,"onContainerKeyPress")];},onStartup:function(info){dojo.forEach(info.children,this.onAddChild,this);this.onSelectChild(info.selected);},destroy:function(){for(var pane in this.pane2button){this.onRemoveChild(pane);}dojo.forEach(this._subscriptions,dojo.unsubscribe);this.inherited(arguments);},onAddChild:function(page,_72f){var _730=dojo.doc.createElement("span");this.domNode.appendChild(_730);var cls=dojo.getObject(this.buttonWidget);var _732=new cls({label:page.title,closeButton:page.closable},_730);this.addChild(_732,_72f);this.pane2button[page]=_732;page.controlButton=_732;var _733=[];_733.push(dojo.connect(_732,"onClick",dojo.hitch(this,"onButtonClick",page)));if(page.closable){_733.push(dojo.connect(_732,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",page)));var _734=dojo.i18n.getLocalization("dijit","common");var _735=new dijit.Menu({targetNodeIds:[_732.id],id:_732.id+"_Menu"});var _736=new dijit.MenuItem({label:_734.itemClose});_733.push(dojo.connect(_736,"onClick",dojo.hitch(this,"onCloseButtonClick",page)));_735.addChild(_736);this.pane2menu[page]=_735;}this.pane2handles[page]=_733;if(!this._currentChild){_732.focusNode.setAttribute("tabIndex","0");this._currentChild=page;}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}dojo.forEach(this.pane2handles[page],dojo.disconnect);delete this.pane2handles[page];var menu=this.pane2menu[page];if(menu){menu.destroyRecursive();delete this.pane2menu[page];}var _739=this.pane2button[page];if(_739){_739.destroy();delete this.pane2button[page];}},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _73b=this.pane2button[this._currentChild];_73b.attr("checked",false);_73b.focusNode.setAttribute("tabIndex","-1");}var _73c=this.pane2button[page];_73c.attr("checked",true);this._currentChild=page;_73c.focusNode.setAttribute("tabIndex","0");var _73d=dijit.byId(this.containerId);dijit.setWaiState(_73d.containerNode,"labelledby",_73c.id);},onButtonClick:function(page){var _73f=dijit.byId(this.containerId);_73f.selectChild(page);},onCloseButtonClick:function(page){var _741=dijit.byId(this.containerId);_741.closeChild(page);var b=this.pane2button[this._currentChild];if(b){dijit.focus(b.focusNode||b.domNode);}},adjacent:function(_743){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_743=!_743;}var _744=this.getChildren();var _745=dojo.indexOf(_744,this.pane2button[this._currentChild]);var _746=_743?1:_744.length-1;return _744[(_745+_746)%_744.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _748=null;if(e.ctrlKey||!e._djpage){var k=dojo.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_748=false;}break;case k.PAGE_UP:if(e.ctrlKey){_748=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_748=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_748=true;}break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();dojo.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);}}}}if(_748!==null){this.adjacent(_748).onClick();dojo.stopEvent(e);}}},onContainerKeyPress:function(info){info.e._djpage=info.page;this.onkeypress(info.e);}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(evt){dijit.setWaiRole((this.focusNode||this.domNode),"tab");this.inherited(arguments);},onClick:function(evt){dijit.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",_started:false,postCreate:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var _74e=this.getChildren();dojo.forEach(_74e,this._setupChild,this);if(this.persist){this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"));}else{dojo.some(_74e,function(_74f){if(_74f.selected){this.selectedChildWidget=_74f;}return _74f.selected;},this);}var _750=this.selectedChildWidget;if(!_750&&_74e[0]){_750=this.selectedChildWidget=_74e[0];_750.selected=true;}dojo.publish(this.id+"-startup",[{children:_74e,selected:_750}]);if(_750){this._showChild(_750);}this.inherited(arguments);},_setupChild:function(_751){this.inherited(arguments);dojo.removeClass(_751.domNode,"dijitVisible");dojo.addClass(_751.domNode,"dijitHidden");_751.domNode.title="";return _751;},addChild:function(_752,_753){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[_752,_753]);this.layout();if(!this.selectedChildWidget){this.selectChild(_752);}}},removeChild:function(page){this.inherited(arguments);if(this._beingDestroyed){return;}if(this._started){dojo.publish(this.id+"-removeChild",[page]);this.layout();}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _755=this.getChildren();if(_755.length){this.selectChild(_755[0]);}}}},selectChild:function(page){page=dijit.byId(page);if(this.selectedChildWidget!=page){this._transition(page,this.selectedChildWidget);this.selectedChildWidget=page;dojo.publish(this.id+"-selectChild",[page]);if(this.persist){dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id);}}},_transition:function(_757,_758){if(_758){this._hideChild(_758);}this._showChild(_757);if(this.doLayout&&_757.resize){_757.resize(this._containerContentBox||this._contentBox);}},_adjacent:function(_759){var _75a=this.getChildren();var _75b=dojo.indexOf(_75a,this.selectedChildWidget);_75b+=_759?1:_75a.length-1;return _75a[_75b%_75a.length];},forward:function(){this.selectChild(this._adjacent(true));},back:function(){this.selectChild(this._adjacent(false));},_onKeyPress:function(e){dojo.publish(this.id+"-containerKeyPress",[{e:e,page:this}]);},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._contentBox);}},_showChild:function(page){var _75e=this.getChildren();page.isFirstChild=(page==_75e[0]);page.isLastChild=(page==_75e[_75e.length-1]);page.selected=true;dojo.removeClass(page.domNode,"dijitHidden");dojo.addClass(page.domNode,"dijitVisible");if(page._onShow){page._onShow();}else{if(page.onShow){page.onShow();}}},_hideChild:function(page){page.selected=false;dojo.removeClass(page.domNode,"dijitVisible");dojo.addClass(page.domNode,"dijitHidden");if(page.onHide){page.onHide();}},closeChild:function(page){var _761=page.onClose(this,page);if(_761){this.removeChild(page);page.destroyRecursive();}},destroy:function(){this._beingDestroyed=true;this.inherited(arguments);}});dojo.extend(dijit._Widget,{title:"",selected:false,closable:false,onClose:function(){return true;}});}if(!dojo._hasResource["dijit.layout.AccordionPane"]){dojo._hasResource["dijit.layout.AccordionPane"]=true;dojo.provide("dijit.layout.AccordionPane");dojo.declare("dijit.layout.AccordionPane",dijit.layout.ContentPane,{constructor:function(){dojo.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0");},onSelected:function(){}});}if(!dojo._hasResource["dijit.layout.AccordionContainer"]){dojo._hasResource["dijit.layout.AccordionContainer"]=true;dojo.provide("dijit.layout.AccordionContainer");dojo.declare("dijit.layout.AccordionContainer",dijit.layout.StackContainer,{duration:dijit.defaultDuration,_verticalSpace:0,baseClass:"dijitAccordionContainer",postCreate:function(){this.domNode.style.overflow="hidden";this.inherited(arguments);dijit.setWaiRole(this.domNode,"tablist");},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.selectedChildWidget){var _762=this.selectedChildWidget.containerNode.style;_762.display="";_762.overflow="auto";this.selectedChildWidget._buttonWidget._setSelectedState(true);}},_getTargetHeight:function(node){var cs=dojo.getComputedStyle(node);return Math.max(this._verticalSpace-dojo._getPadBorderExtents(node,cs).h,0);},layout:function(){var _765=this.selectedChildWidget;var _766=0;dojo.forEach(this.getChildren(),function(_767){_766+=_767._buttonWidget.getTitleHeight();});var _768=this._contentBox;this._verticalSpace=_768.h-_766;this._containerContentBox={h:this._verticalSpace,w:_768.w};if(_765){_765.resize(this._containerContentBox);}},_setupChild:function(_769){_769._buttonWidget=new dijit.layout._AccordionButton({contentWidget:_769,title:_769.title,id:_769.id+"_button",parent:this});dojo.place(_769._buttonWidget.domNode,_769.domNode,"before");this.inherited(arguments);},removeChild:function(_76a){_76a._buttonWidget.destroy();this.inherited(arguments);},getChildren:function(){return dojo.filter(this.inherited(arguments),function(_76b){return _76b.declaredClass!="dijit.layout._AccordionButton";});},destroy:function(){dojo.forEach(this.getChildren(),function(_76c){_76c._buttonWidget.destroy();});this.inherited(arguments);},_transition:function(_76d,_76e){if(this._inTransition){return;}this._inTransition=true;var _76f=[];var _770=this._verticalSpace;if(_76d){_76d._buttonWidget.setSelected(true);this._showChild(_76d);if(this.doLayout&&_76d.resize){_76d.resize(this._containerContentBox);}var _771=_76d.domNode;dojo.addClass(_771,"dijitVisible");dojo.removeClass(_771,"dijitHidden");var _772=_771.style.overflow;_771.style.overflow="hidden";_76f.push(dojo.animateProperty({node:_771,duration:this.duration,properties:{height:{start:1,end:this._getTargetHeight(_771)}},onEnd:dojo.hitch(this,function(){_771.style.overflow=_772;delete this._inTransition;})}));}if(_76e){_76e._buttonWidget.setSelected(false);var _773=_76e.domNode,_774=_773.style.overflow;_773.style.overflow="hidden";_76f.push(dojo.animateProperty({node:_773,duration:this.duration,properties:{height:{start:this._getTargetHeight(_773),end:1}},onEnd:function(){dojo.addClass(_773,"dijitHidden");dojo.removeClass(_773,"dijitVisible");_773.style.overflow=_774;if(_76e.onHide){_76e.onHide();}}}));}dojo.fx.combine(_76f).play();},_onKeyPress:function(e,_776){if(this._inTransition||this.disabled||e.altKey||!(_776||e.ctrlKey)){if(this._inTransition){dojo.stopEvent(e);}return;}var k=dojo.keys,c=e.charOrCode;if((_776&&(c==k.LEFT_ARROW||c==k.UP_ARROW))||(e.ctrlKey&&c==k.PAGE_UP)){this._adjacent(false)._buttonWidget._onTitleClick();dojo.stopEvent(e);}else{if((_776&&(c==k.RIGHT_ARROW||c==k.DOWN_ARROW))||(e.ctrlKey&&(c==k.PAGE_DOWN||c==k.TAB))){this._adjacent(true)._buttonWidget._onTitleClick();dojo.stopEvent(e);}}}});dojo.declare("dijit.layout._AccordionButton",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint='titleNode,focusNode' dojoAttachEvent='ondijitclick:_onTitleClick,onkeypress:_onTitleKeyPress,onfocus:_handleFocus,onblur:_handleFocus,onmouseenter:_onTitleEnter,onmouseleave:_onTitleLeave'\n\t\tclass='dijitAccordionTitle' wairole=\"tab\" waiState=\"expanded-false\"\n\t\t><span class='dijitInline dijitAccordionArrow' waiRole=\"presentation\"></span\n\t\t><span class='arrowTextUp' waiRole=\"presentation\">+</span\n\t\t><span class='arrowTextDown' waiRole=\"presentation\">-</span\n\t\t><span waiRole=\"presentation\" dojoAttachPoint='titleTextNode' class='dijitAccordionText'></span>\n</div>\n",attributeMap:dojo.mixin(dojo.clone(dijit.layout.ContentPane.prototype.attributeMap),{title:{node:"titleTextNode",type:"innerHTML"}}),baseClass:"dijitAccordionTitle",getParent:function(){return this.parent;},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);this.setSelected(this.selected);var _779=dojo.attr(this.domNode,"id").replace(" ","_");dojo.attr(this.titleTextNode,"id",_779+"_title");dijit.setWaiState(this.focusNode,"labelledby",dojo.attr(this.titleTextNode,"id"));},getTitleHeight:function(){return dojo.marginBox(this.titleNode).h;},_onTitleClick:function(){var _77a=this.getParent();if(!_77a._inTransition){_77a.selectChild(this.contentWidget);dijit.focus(this.focusNode);}},_onTitleEnter:function(){dojo.addClass(this.focusNode,"dijitAccordionTitle-hover");},_onTitleLeave:function(){dojo.removeClass(this.focusNode,"dijitAccordionTitle-hover");},_onTitleKeyPress:function(evt){return this.getParent()._onKeyPress(evt,this.contentWidget);},_setSelectedState:function(_77c){this.selected=_77c;dojo[(_77c?"addClass":"removeClass")](this.titleNode,"dijitAccordionTitle-selected");dijit.setWaiState(this.focusNode,"expanded",_77c);dijit.setWaiState(this.focusNode,"selected",_77c);this.focusNode.setAttribute("tabIndex",_77c?"0":"-1");},_handleFocus:function(e){dojo[(e.type=="focus"?"addClass":"removeClass")](this.focusNode,"dijitAccordionFocused");},setSelected:function(_77e){this._setSelectedState(_77e);if(_77e){var cw=this.contentWidget;if(cw.onSelected){cw.onSelected();}}}});}if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",doLayout:true,buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _780=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_780=Math.max(_780,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_780+"px";}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",templateString:"<div waiRole=\"presentation\" dojoAttachEvent='onclick:onClick,onmouseenter:_onMouse,onmouseleave:_onMouse'>\n    <div waiRole=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\n        <div waiRole=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\n\t        <span dojoAttachPoint='containerNode,focusNode' class='tabLabel'>${!label}</span><img class =\"dijitTabButtonSpacer\" src=\"${_blankGif}\" />\n\t        <span class=\"closeButton\" dojoAttachPoint='closeNode'\n\t        \t\tdojoAttachEvent='onclick: onClickCloseButton, onmouseenter: _onCloseButtonEnter, onmouseleave: _onCloseButtonLeave'>\n\t        \t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint='closeIcon' class='closeImage' waiRole=\"presentation\"/>\n\t            <span dojoAttachPoint='closeText' class='closeText'>x</span>\n\t        </span>\n        </div>\n    </div>\n</div>\n",scrollOnFocus:false,postCreate:function(){if(this.closeButton){dojo.addClass(this.innerDiv,"dijitClosable");var _783=dojo.i18n.getLocalization("dijit","common");if(this.closeNode){dojo.attr(this.closeNode,"title",_783.itemClose);dojo.attr(this.closeIcon,"title",_783.itemClose);}}else{this.closeNode.style.display="none";}this.inherited(arguments);dojo.setSelectable(this.containerNode,false);},_onCloseButtonEnter:function(){dojo.addClass(this.closeNode,"closeButton-hover");},_onCloseButtonLeave:function(){dojo.removeClass(this.closeNode,"closeButton-hover");}});}if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:null,templateString:"<div class=\"dijitTabContainer\">\n\t<div dojoAttachPoint=\"tablistNode\"></div>\n\t<div dojoAttachPoint=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container\" dojoAttachPoint=\"containerNode\"></div>\n</div>\n",_controllerWidget:"dijit.layout.TabController",postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.inherited(arguments);},postCreate:function(){this.inherited(arguments);var _784=dojo.getObject(this._controllerWidget);this.tablist=new _784({id:this.id+"_tablist",tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout")},this.tablistNode);if(this.tabStrip){dojo.addClass(this.tablist.domNode,this.baseClass+"Strip");}if(!this.doLayout){dojo.addClass(this.domNode,"dijitTabContainerNoLayout");}if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.domNode,"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested");}},_setupChild:function(tab){dojo.addClass(tab.domNode,"dijitTabPane");this.inherited(arguments);return tab;},startup:function(){if(this._started){return;}this.tablist.startup();this.inherited(arguments);},layout:function(){if(!this.doLayout){return;}var _786=this.tabPosition.replace(/-h/,"");var _787=[{domNode:this.tablist.domNode,layoutAlign:_786},{domNode:this.tablistSpacer,layoutAlign:_786},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,_787);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,_787[2]);if(this.selectedChildWidget){this._showChild(this.selectedChildWidget);if(this.doLayout&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._containerContentBox);}}},destroy:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.BorderContainer"]){dojo._hasResource["dijit.layout.BorderContainer"]=true;dojo.provide("dijit.layout.BorderContainer");dojo.declare("dijit.layout.BorderContainer",dijit.layout._LayoutWidget,{design:"headline",gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:"dijit.layout._Splitter",postMixInProperties:function(){if(!this.gutters){this.baseClass+="NoGutter";}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this._splitters={};this._splitterThickness={};},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments);},_setupChild:function(_788){var _789=_788.region;if(_789){this.inherited(arguments);dojo.addClass(_788.domNode,this.baseClass+"Pane");var ltr=this.isLeftToRight();if(_789=="leading"){_789=ltr?"left":"right";}if(_789=="trailing"){_789=ltr?"right":"left";}this["_"+_789]=_788.domNode;this["_"+_789+"Widget"]=_788;if((_788.splitter||this.gutters)&&!this._splitters[_789]){var _78b=dojo.getObject(_788.splitter?this._splitterClass:"dijit.layout._Gutter");var flip={left:"right",right:"left",top:"bottom",bottom:"top",leading:"trailing",trailing:"leading"};var _78d=new _78b({container:this,child:_788,region:_789,oppNode:this["_"+flip[_788.region]],live:this.liveSplitters});_78d.isSplitter=true;this._splitters[_789]=_78d.domNode;dojo.place(this._splitters[_789],_788.domNode,"after");_78d.startup();}_788.region=_789;}},_computeSplitterThickness:function(_78e){this._splitterThickness[_78e]=this._splitterThickness[_78e]||dojo.marginBox(this._splitters[_78e])[(/top|bottom/.test(_78e)?"h":"w")];},layout:function(){for(var _78f in this._splitters){this._computeSplitterThickness(_78f);}this._layoutChildren();},addChild:function(_790,_791){this.inherited(arguments);if(this._started){this._layoutChildren();}},removeChild:function(_792){var _793=_792.region;var _794=this._splitters[_793];if(_794){dijit.byNode(_794).destroy();delete this._splitters[_793];delete this._splitterThickness[_793];}this.inherited(arguments);delete this["_"+_793];delete this["_"+_793+"Widget"];if(this._started){this._layoutChildren(_792.region);}dojo.removeClass(_792.domNode,this.baseClass+"Pane");},getChildren:function(){return dojo.filter(this.inherited(arguments),function(_795){return !_795.isSplitter;});},getSplitter:function(_796){var _797=this._splitters[_796];return _797?dijit.byNode(_797):null;},resize:function(_798,_799){if(!this.cs||!this.pe){var node=this.domNode;this.cs=dojo.getComputedStyle(node);this.pe=dojo._getPadExtents(node,this.cs);this.pe.r=dojo._toPixelValue(node,this.cs.paddingRight);this.pe.b=dojo._toPixelValue(node,this.cs.paddingBottom);dojo.style(node,"padding","0px");}this.inherited(arguments);},_layoutChildren:function(_79b){if(!this._borderBox||!this._borderBox.h){return;}var _79c=(this.design=="sidebar");var _79d=0,_79e=0,_79f=0,_7a0=0;var _7a1={},_7a2={},_7a3={},_7a4={},_7a5=(this._center&&this._center.style)||{};var _7a6=/left|right/.test(_79b);var _7a7=!_79b||(!_7a6&&!_79c);var _7a8=!_79b||(_7a6&&_79c);if(this._top){_7a1=_7a8&&this._top.style;_79d=dojo.marginBox(this._top).h;}if(this._left){_7a2=_7a7&&this._left.style;_79f=dojo.marginBox(this._left).w;}if(this._right){_7a3=_7a7&&this._right.style;_7a0=dojo.marginBox(this._right).w;}if(this._bottom){_7a4=_7a8&&this._bottom.style;_79e=dojo.marginBox(this._bottom).h;}var _7a9=this._splitters;var _7aa=_7a9.top,_7ab=_7a9.bottom,_7ac=_7a9.left,_7ad=_7a9.right;var _7ae=this._splitterThickness;var _7af=_7ae.top||0,_7b0=_7ae.left||0,_7b1=_7ae.right||0,_7b2=_7ae.bottom||0;if(_7b0>50||_7b1>50){setTimeout(dojo.hitch(this,function(){this._splitterThickness={};for(var _7b3 in this._splitters){this._computeSplitterThickness(_7b3);}this._layoutChildren();}),50);return false;}var pe=this.pe;var _7b5={left:(_79c?_79f+_7b0:0)+pe.l+"px",right:(_79c?_7a0+_7b1:0)+pe.r+"px"};if(_7aa){dojo.mixin(_7aa.style,_7b5);_7aa.style.top=_79d+pe.t+"px";}if(_7ab){dojo.mixin(_7ab.style,_7b5);_7ab.style.bottom=_79e+pe.b+"px";}_7b5={top:(_79c?0:_79d+_7af)+pe.t+"px",bottom:(_79c?0:_79e+_7b2)+pe.b+"px"};if(_7ac){dojo.mixin(_7ac.style,_7b5);_7ac.style.left=_79f+pe.l+"px";}if(_7ad){dojo.mixin(_7ad.style,_7b5);_7ad.style.right=_7a0+pe.r+"px";}dojo.mixin(_7a5,{top:pe.t+_79d+_7af+"px",left:pe.l+_79f+_7b0+"px",right:pe.r+_7a0+_7b1+"px",bottom:pe.b+_79e+_7b2+"px"});var _7b6={top:_79c?pe.t+"px":_7a5.top,bottom:_79c?pe.b+"px":_7a5.bottom};dojo.mixin(_7a2,_7b6);dojo.mixin(_7a3,_7b6);_7a2.left=pe.l+"px";_7a3.right=pe.r+"px";_7a1.top=pe.t+"px";_7a4.bottom=pe.b+"px";if(_79c){_7a1.left=_7a4.left=_79f+_7b0+pe.l+"px";_7a1.right=_7a4.right=_7a0+_7b1+pe.r+"px";}else{_7a1.left=_7a4.left=pe.l+"px";_7a1.right=_7a4.right=pe.r+"px";}var _7b7=this._borderBox.h-pe.t-pe.b,_7b8=_7b7-(_79d+_7af+_79e+_7b2),_7b9=_79c?_7b7:_7b8;var _7ba=this._borderBox.w-pe.l-pe.r,_7bb=_7ba-(_79f+_7b0+_7a0+_7b1),_7bc=_79c?_7bb:_7ba;var dim={top:{w:_7bc,h:_79d},bottom:{w:_7bc,h:_79e},left:{w:_79f,h:_7b9},right:{w:_7a0,h:_7b9},center:{h:_7b8,w:_7bb}};var _7be=dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.some(this.getChildren(),function(_7bf){return _7bf.domNode.tagName=="TEXTAREA"||_7bf.domNode.tagName=="INPUT";});if(_7be){var _7c0=function(_7c1,_7c2,_7c3){if(_7c1){(_7c1.resize?_7c1.resize(_7c2,_7c3):dojo.marginBox(_7c1.domNode,_7c2));}};if(_7ac){_7ac.style.height=_7b9;}if(_7ad){_7ad.style.height=_7b9;}_7c0(this._leftWidget,{h:_7b9},dim.left);_7c0(this._rightWidget,{h:_7b9},dim.right);if(_7aa){_7aa.style.width=_7bc;}if(_7ab){_7ab.style.width=_7bc;}_7c0(this._topWidget,{w:_7bc},dim.top);_7c0(this._bottomWidget,{w:_7bc},dim.bottom);_7c0(this._centerWidget,dim.center);}else{var _7c4={};if(_79b){_7c4[_79b]=_7c4.center=true;if(/top|bottom/.test(_79b)&&this.design!="sidebar"){_7c4.left=_7c4.right=true;}else{if(/left|right/.test(_79b)&&this.design=="sidebar"){_7c4.top=_7c4.bottom=true;}}}dojo.forEach(this.getChildren(),function(_7c5){if(_7c5.resize&&(!_79b||_7c5.region in _7c4)){_7c5.resize(null,dim[_7c5.region]);}},this);}},destroy:function(){for(var _7c6 in this._splitters){var _7c7=this._splitters[_7c6];dijit.byNode(_7c7).destroy();dojo.destroy(_7c7);}delete this._splitters;delete this._splitterThickness;this.inherited(arguments);}});dojo.extend(dijit._Widget,{region:"",splitter:false,minSize:0,maxSize:Infinity});dojo.declare("dijit.layout._Splitter",[dijit._Widget,dijit._Templated],{live:true,templateString:"<div class=\"dijitSplitter\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_startDrag\" tabIndex=\"0\" waiRole=\"separator\"><div class=\"dijitSplitterThumb\"></div></div>",postCreate:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));this._factor=/top|left/.test(this.region)?1:-1;this._minSize=this.child.minSize;this.child.domNode._recalc=true;this.connect(this.container,"resize",function(){this.child.domNode._recalc=true;});this._cookieName=this.container.id+"_"+this.region;if(this.container.persist){var _7c8=dojo.cookie(this._cookieName);if(_7c8){this.child.domNode.style[this.horizontal?"height":"width"]=_7c8;}}},_computeMaxSize:function(){var dim=this.horizontal?"h":"w",_7ca=this.container._splitterThickness[this.region];var _7cb=dojo.contentBox(this.container.domNode)[dim]-(this.oppNode?dojo.marginBox(this.oppNode)[dim]:0)-20-_7ca*2;this._maxSize=Math.min(this.child.maxSize,_7cb);},_startDrag:function(e){if(this.child.domNode._recalc){this._computeMaxSize();this.child.domNode._recalc=false;}if(!this.cover){this.cover=dojo.doc.createElement("div");dojo.addClass(this.cover,"dijitSplitterCover");dojo.place(this.cover,this.child.domNode,"after");}dojo.addClass(this.cover,"dijitSplitterCoverActive");if(this.fake){dojo.destroy(this.fake);}if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");dojo.addClass(this.domNode,"dijitSplitterShadow");dojo.place(this.fake,this.domNode,"after");}dojo.addClass(this.domNode,"dijitSplitterActive");var _7cd=this._factor,max=this._maxSize,min=this._minSize||20,_7d0=this.horizontal,axis=_7d0?"pageY":"pageX",_7d2=e[axis],_7d3=this.domNode.style,dim=_7d0?"h":"w",_7d5=dojo.marginBox(this.child.domNode)[dim],_7d6=this.region,_7d7=parseInt(this.domNode.style[_7d6],10),_7d8=this._resize,mb={},_7da=this.child.domNode,_7db=dojo.hitch(this.container,this.container._layoutChildren),de=dojo.doc.body;this._handlers=(this._handlers||[]).concat([dojo.connect(de,"onmousemove",this._drag=function(e,_7de){var _7df=e[axis]-_7d2,_7e0=_7cd*_7df+_7d5,_7e1=Math.max(Math.min(_7e0,max),min);if(_7d8||_7de){mb[dim]=_7e1;dojo.marginBox(_7da,mb);_7db(_7d6);}_7d3[_7d6]=_7cd*_7df+_7d7+(_7e1-_7e0)+"px";}),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent),dojo.connect(de,"onmouseup",this,"_stopDrag")]);dojo.stopEvent(e);},_stopDrag:function(e){try{if(this.cover){dojo.removeClass(this.cover,"dijitSplitterCoverActive");}if(this.fake){dojo.destroy(this.fake);}dojo.removeClass(this.domNode,"dijitSplitterActive");dojo.removeClass(this.domNode,"dijitSplitterShadow");this._drag(e);this._drag(e,true);}finally{this._cleanupHandlers();if(this.oppNode){this.oppNode._recalc=true;}delete this._drag;}if(this.container.persist){dojo.cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365});}},_cleanupHandlers:function(){dojo.forEach(this._handlers,dojo.disconnect);delete this._handlers;},_onKeyPress:function(e){if(this.child.domNode._recalc){this._computeMaxSize();this.child.domNode._recalc=false;}this._resize=true;var _7e4=this.horizontal;var tick=1;var dk=dojo.keys;switch(e.charOrCode){case _7e4?dk.UP_ARROW:dk.LEFT_ARROW:tick*=-1;case _7e4?dk.DOWN_ARROW:dk.RIGHT_ARROW:break;default:return;}var _7e7=dojo.marginBox(this.child.domNode)[_7e4?"h":"w"]+this._factor*tick;var mb={};mb[this.horizontal?"h":"w"]=Math.max(Math.min(_7e7,this._maxSize),this._minSize);dojo.marginBox(this.child.domNode,mb);if(this.oppNode){this.oppNode._recalc=true;}this.container._layoutChildren(this.region);dojo.stopEvent(e);},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments);}});dojo.declare("dijit.layout._Gutter",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitGutter\" waiRole=\"presentation\"></div>",postCreate:function(){this.horizontal=/top|bottom/.test(this.region);dojo.addClass(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"));}});}if(!dojo._hasResource["dijit.form.CheckBox"]){dojo._hasResource["dijit.form.CheckBox"]=true;dojo.provide("dijit.form.CheckBox");dojo.declare("dijit.form.CheckBox",dijit.form.ToggleButton,{templateString:"<div class=\"dijitReset dijitInline\" waiRole=\"presentation\"\n\t><input\n\t \t${nameAttrSetting} type=\"${type}\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdojoAttachPoint=\"focusNode\"\n\t \tdojoAttachEvent=\"onmouseover:_onMouse,onmouseout:_onMouse,onclick:_onClick\"\n/></div>\n",baseClass:"dijitCheckBox",type:"checkbox",value:"on",_setValueAttr:function(_7e9){if(typeof _7e9=="string"){this.value=_7e9;dojo.attr(this.focusNode,"value",_7e9);_7e9=true;}if(this._created){this.attr("checked",_7e9);}},_getValueAttr:function(){return (this.checked?this.value:false);},postMixInProperties:function(){if(this.value==""){this.value="on";}this.checkedAttrSetting=this.checked?"checked":"";this.inherited(arguments);},_fillContent:function(_7ea){},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false);this.value=this.params.value||"on";dojo.attr(this.focusNode,"value",this.value);},_onFocus:function(){if(this.id){dojo.query("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}},_onBlur:function(){if(this.id){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}}});dojo.declare("dijit.form.RadioButton",dijit.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_setCheckedAttr:function(_7eb){this.inherited(arguments);if(!this._created){return;}if(_7eb){var _7ec=this;dojo.query("INPUT[type=radio]",this.focusNode.form||dojo.doc).forEach(function(_7ed){if(_7ed.name==_7ec.name&&_7ed!=_7ec.focusNode&&_7ed.form==_7ec.focusNode.form){var _7ee=dijit.getEnclosingWidget(_7ed);if(_7ee&&_7ee.checked){_7ee.attr("checked",false);}}});}},_clicked:function(e){if(!this.checked){this.attr("checked",true);}}});}if(!dojo._hasResource["dijit.form.Form"]){dojo._hasResource["dijit.form.Form"]=true;dojo.provide("dijit.form.Form");dojo.declare("dijit.form.Form",[dijit._Widget,dijit._Templated,dijit.form._FormMixin],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onreset:_onReset,onsubmit:_onSubmit' ${nameAttrSetting}></form>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{action:"",method:"",encType:"","accept-charset":"",accept:"",target:""}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},execute:function(_7f0){},onExecute:function(){},_setEncTypeAttr:function(_7f1){this.encType=_7f1;dojo.attr(this.domNode,"encType",_7f1);if(dojo.isIE){this.domNode.encoding=_7f1;}},postCreate:function(){if(dojo.isIE&&this.srcNodeRef&&this.srcNodeRef.attributes){var item=this.srcNodeRef.attributes.getNamedItem("encType");if(item&&!item.specified&&(typeof item.value=="string")){this.attr("encType",item.value);}}this.inherited(arguments);},onReset:function(e){return true;},_onReset:function(e){var faux={returnValue:true,preventDefault:function(){this.returnValue=false;},stopPropagation:function(){},currentTarget:e.currentTarget,target:e.target};if(!(this.onReset(faux)===false)&&faux.returnValue){this.reset();}dojo.stopEvent(e);return false;},_onSubmit:function(e){var fp=dijit.form.Form.prototype;if(this.execute!=fp.execute||this.onExecute!=fp.onExecute){dojo.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0");this.onExecute();this.execute(this.getValues());}if(this.onSubmit(e)===false){dojo.stopEvent(e);}},onSubmit:function(e){return this.isValid();},submit:function(){if(!(this.onSubmit()===false)){this.containerNode.submit();}}});}if(!dojo._hasResource["dojox.xml.parser"]){dojo._hasResource["dojox.xml.parser"]=true;dojo.provide("dojox.xml.parser");dojox.xml.parser.parse=function(str,_7fa){var _7fb=dojo.doc;var doc;_7fa=_7fa||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _7fd=new DOMParser();doc=_7fd.parseFromString(str,_7fa);var de=doc.documentElement;var _7ff="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_7ff){var _800=de.getElementsByTagNameNS(_7ff,"sourcetext")[0];if(!_800){_800=_800.firstChild.data;}throw new Error("Error parsing text "+nativeDoc.documentElement.firstChild.data+" \n"+_800);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_7fb.implementation&&_7fb.implementation.createDocument){if(str&&dojo.trim(str)&&_7fb.createElement){var tmp=_7fb.createElement("xml");tmp.innerHTML=str;var _807=_7fb.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_808){_807.importNode(_808,true);});return _807;}else{return _7fb.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _80b=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_80b.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _80c="";if(node){dojo.forEach(node.childNodes,function(_80d){switch(_80d.nodeType){case 1:case 5:_80c+=dojox.xml.parser.textContent(_80d);break;case 3:case 2:case 4:_80c+=_80d.nodeValue;}});}return _80c;}};dojox.xml.parser.replaceChildren=function(node,_80f){var _810=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_811){_810.push(_811);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_810,dojo.destroy);if(!dojo.isArray(_80f)){node.appendChild(_80f);}else{dojo.forEach(_80f,function(_812){node.appendChild(_812);});}};dojox.xml.parser.removeChildren=function(node){var _814=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _814;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};}if(!dojo._hasResource["dojox.data.HtmlStore"]){dojo._hasResource["dojox.data.HtmlStore"]=true;dojo.provide("dojox.data.HtmlStore");dojo.declare("dojox.data.HtmlStore",null,{constructor:function(args){if(args.url){if(!args.dataId){throw new Error("dojo.data.HtmlStore: Cannot instantiate using url without an id!");}this.url=args.url;this.dataId=args.dataId;}else{if(args.dataId){this._rootNode=dojo.byId(args.dataId);this.dataId=this._rootNode.id;}else{this._rootNode=dojo.byId(this.dataId);}this._indexItems();}},url:"",dataId:"",_indexItems:function(){this._getHeadings();if(this._rootNode.rows){if(this._rootNode.tBodies&&this._rootNode.tBodies.length>0){this._rootNode=this._rootNode.tBodies[0];}var i;for(i=0;i<this._rootNode.rows.length;i++){this._rootNode.rows[i].store=this;this._rootNode.rows[i]._ident=i+1;}}else{var c=1;for(i=0;i<this._rootNode.childNodes.length;i++){if(this._rootNode.childNodes[i].nodeType===1){this._rootNode.childNodes[i].store=this;this._rootNode.childNodes[i]._ident=c;c++;}}}},_getHeadings:function(){this._headings=[];if(this._rootNode.tHead){dojo.forEach(this._rootNode.tHead.rows[0].cells,dojo.hitch(this,function(th){this._headings.push(dojox.xml.parser.textContent(th));}));}else{this._headings=["name"];}},_getAllItems:function(){var _81a=[];var i;if(this._rootNode.rows){for(i=0;i<this._rootNode.rows.length;i++){_81a.push(this._rootNode.rows[i]);}}else{for(i=0;i<this._rootNode.childNodes.length;i++){if(this._rootNode.childNodes[i].nodeType===1){_81a.push(this._rootNode.childNodes[i]);}}}return _81a;},_assertIsItem:function(item){if(!this.isItem(item)){throw new Error("dojo.data.HtmlStore: a function was passed an item argument that was not an item");}},_assertIsAttribute:function(_81d){if(typeof _81d!=="string"){throw new Error("dojo.data.HtmlStore: a function was passed an attribute argument that was not an attribute name string");return -1;}return dojo.indexOf(this._headings,_81d);},getValue:function(item,_81f,_820){var _821=this.getValues(item,_81f);return (_821.length>0)?_821[0]:_820;},getValues:function(item,_823){this._assertIsItem(item);var _824=this._assertIsAttribute(_823);if(_824>-1){if(item.cells){return [dojox.xml.parser.textContent(item.cells[_824])];}else{return [dojox.xml.parser.textContent(item)];}}return [];},getAttributes:function(item){this._assertIsItem(item);var _826=[];for(var i=0;i<this._headings.length;i++){if(this.hasAttribute(item,this._headings[i])){_826.push(this._headings[i]);}}return _826;},hasAttribute:function(item,_829){return this.getValues(item,_829).length>0;},containsValue:function(item,_82b,_82c){var _82d=undefined;if(typeof _82c==="string"){_82d=dojo.data.util.filter.patternToRegExp(_82c,false);}return this._containsValue(item,_82b,_82c,_82d);},_containsValue:function(item,_82f,_830,_831){var _832=this.getValues(item,_82f);for(var i=0;i<_832.length;++i){var _834=_832[i];if(typeof _834==="string"&&_831){return (_834.match(_831)!==null);}else{if(_830===_834){return true;}}}return false;},isItem:function(_835){if(_835&&_835.store&&_835.store===this){return true;}return false;},isItemLoaded:function(_836){return this.isItem(_836);},loadItem:function(_837){this._assertIsItem(_837.item);},_fetchItems:function(_838,_839,_83a){if(this._rootNode){this._finishFetchItems(_838,_839,_83a);}else{if(!this.url){this._rootNode=dojo.byId(this.dataId);}else{var _83b={url:this.url,handleAs:"text"};var self=this;var _83d=dojo.xhrGet(_83b);_83d.addCallback(function(data){var _83f=function(node,id){if(node.id==id){return node;}if(node.childNodes){for(var i=0;i<node.childNodes.length;i++){var _843=_83f(node.childNodes[i],id);if(_843){return _843;}}}return null;};var d=document.createElement("div");d.innerHTML=data;self._rootNode=_83f(d,self.dataId);self._indexItems();self._finishFetchItems(_838,_839,_83a);});_83d.addErrback(function(_845){_83a(_845,_838);});}}},_finishFetchItems:function(_846,_847,_848){var _849=null;var _84a=this._getAllItems();if(_846.query){var _84b=_846.queryOptions?_846.queryOptions.ignoreCase:false;_849=[];var _84c={};var key;var _84e;for(key in _846.query){_84e=_846.query[key]+"";if(typeof _84e==="string"){_84c[key]=dojo.data.util.filter.patternToRegExp(_84e,_84b);}}for(var i=0;i<_84a.length;++i){var _850=true;var _851=_84a[i];for(key in _846.query){_84e=_846.query[key]+"";if(!this._containsValue(_851,key,_84e,_84c[key])){_850=false;}}if(_850){_849.push(_851);}}_847(_849,_846);}else{if(_84a.length>0){_849=_84a.slice(0,_84a.length);}_847(_849,_846);}},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},close:function(_852){},getLabel:function(item){if(this.isItem(item)){if(item.cells){return "Item #"+this.getIdentity(item);}else{return this.getValue(item,"name");}}return undefined;},getLabelAttributes:function(item){if(item.cells){return null;}else{return ["name"];}},getIdentity:function(item){this._assertIsItem(item);if(this.hasAttribute(item,"name")){return this.getValue(item,"name");}else{return item._ident;}},getIdentityAttributes:function(item){return null;},fetchItemByIdentity:function(_857){var _858=_857.identity;var self=this;var item=null;var _85b=null;if(!this._rootNode){if(!this.url){this._rootNode=dojo.byId(this.dataId);this._indexItems();if(self._rootNode.rows){item=this._rootNode.rows[_858+1];}else{for(var i=0;i<self._rootNode.childNodes.length;i++){if(self._rootNode.childNodes[i].nodeType===1&&_858===dojox.xml.parser.textContent(self._rootNode.childNodes[i])){item=self._rootNode.childNodes[i];}}}if(_857.onItem){_85b=_857.scope?_857.scope:dojo.global;_857.onItem.call(_85b,item);}}else{var _85d={url:this.url,handleAs:"text"};var _85e=dojo.xhrGet(_85d);_85e.addCallback(function(data){var _860=function(node,id){if(node.id==id){return node;}if(node.childNodes){for(var i=0;i<node.childNodes.length;i++){var _864=_860(node.childNodes[i],id);if(_864){return _864;}}}return null;};var d=document.createElement("div");d.innerHTML=data;self._rootNode=_860(d,self.dataId);self._indexItems();if(self._rootNode.rows&&_858<=self._rootNode.rows.length){item=self._rootNode.rows[_858-1];}else{for(var i=0;i<self._rootNode.childNodes.length;i++){if(self._rootNode.childNodes[i].nodeType===1&&_858===dojox.xml.parser.textContent(self._rootNode.childNodes[i])){item=self._rootNode.childNodes[i];break;}}}if(_857.onItem){_85b=_857.scope?_857.scope:dojo.global;_857.onItem.call(_85b,item);}});_85e.addErrback(function(_867){if(_857.onError){_85b=_857.scope?_857.scope:dojo.global;_857.onError.call(_85b,_867);}});}}else{if(this._rootNode.rows[_858+1]){item=this._rootNode.rows[_858+1];if(_857.onItem){_85b=_857.scope?_857.scope:dojo.global;_857.onItem.call(_85b,item);}}}}});dojo.extend(dojox.data.HtmlStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dojox.html.metrics"]){dojo._hasResource["dojox.html.metrics"]=true;dojo.provide("dojox.html.metrics");(function(){var dhm=dojox.html.metrics;dhm.getFontMeasurements=function(){var _869={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.border="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";dojo.body().appendChild(div);for(var p in _869){ds.fontSize=p;_869[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);div=null;return _869;};var _86d=null;dhm.getCachedFontMeasurements=function(_86e){if(_86e||!_86d){_86d=dhm.getFontMeasurements();}return _86d;};var _86f=null,_870={};dhm.getTextBox=function(text,_872,_873){var m;if(!_86f){m=_86f=dojo.doc.createElement("div");m.style.position="absolute";m.style.left="-10000px";m.style.top="0";dojo.body().appendChild(m);}else{m=_86f;}m.className="";m.style.border="0";m.style.margin="0";m.style.padding="0";m.style.outline="0";if(arguments.length>1&&_872){for(var i in _872){if(i in _870){continue;}m.style[i]=_872[i];}}if(arguments.length>2&&_873){m.className=_873;}m.innerHTML=text;return dojo.marginBox(m);};var _876={w:16,h:16};dhm.getScrollbar=function(){return {w:_876.w,h:_876.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_877){var f=dhm._fontResizeNode=dojo.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";if(dojo.isIE){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");dojo.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};dojo.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(dojo.isIE&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});dojo.addOnLoad(function(){try{var n=dojo.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";dojo.body().appendChild(n);_876.w=n.offsetWidth-n.clientWidth;_876.h=n.offsetHeight-n.clientHeight;dojo.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in dojo.config&&!!dojo.config.fontSizeWatch){dhm.initOnFontResize();}});})();}if(!dojo._hasResource["dojox.grid.util"]){dojo._hasResource["dojox.grid.util"]=true;dojo.provide("dojox.grid.util");(function(){var dgu=dojox.grid.util;dgu.na="...";dgu.rowIndexTag="gridRowIndex";dgu.gridViewTag="gridView";dgu.fire=function(ob,ev,args){var fn=ob&&ev&&ob[ev];return fn&&(args?fn.apply(ob,args):ob[ev]());};dgu.setStyleHeightPx=function(_881,_882){if(_882>=0){var s=_881.style;var v=_882+"px";if(_881&&s["height"]!=v){s["height"]=v;}}};dgu.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];dgu.keyEvents=["keyup","keydown","keypress"];dgu.funnelEvents=function(_885,_886,_887,_888){var evts=(_888?_888:dgu.mouseEvents.concat(dgu.keyEvents));for(var i=0,l=evts.length;i<l;i++){_886.connect(_885,"on"+evts[i],_887);}},dgu.removeNode=function(_88c){_88c=dojo.byId(_88c);_88c&&_88c.parentNode&&_88c.parentNode.removeChild(_88c);return _88c;};dgu.arrayCompare=function(inA,inB){for(var i=0,l=inA.length;i<l;i++){if(inA[i]!=inB[i]){return false;}}return (inA.length==inB.length);};dgu.arrayInsert=function(_891,_892,_893){if(_891.length<=_892){_891[_892]=_893;}else{_891.splice(_892,0,_893);}};dgu.arrayRemove=function(_894,_895){_894.splice(_895,1);};dgu.arraySwap=function(_896,inI,inJ){var _899=_896[inI];_896[inI]=_896[inJ];_896[inJ]=_899;};})();}if(!dojo._hasResource["dojox.grid._Scroller"]){dojo._hasResource["dojox.grid._Scroller"]=true;dojo.provide("dojox.grid._Scroller");(function(){var _89a=function(_89b){var i=0,n,p=_89b.parentNode;while((n=p.childNodes[i++])){if(n==_89b){return i-1;}}return -1;};var _89f=function(_8a0){if(!_8a0){return;}var _8a1=function(inW){return inW.domNode&&dojo.isDescendant(inW.domNode,_8a0,true);};var ws=dijit.registry.filter(_8a1);for(var i=0,w;(w=ws[i]);i++){w.destroy();}delete ws;};var _8a6=function(_8a7){var node=dojo.byId(_8a7);return (node&&node.tagName?node.tagName.toLowerCase():"");};var _8a9=function(_8aa,_8ab){var _8ac=[];var i=0,n;while((n=_8aa.childNodes[i++])){if(_8a6(n)==_8ab){_8ac.push(n);}}return _8ac;};var _8af=function(_8b0){return _8a9(_8b0,"div");};dojo.declare("dojox.grid._Scroller",null,{constructor:function(_8b1){this.setContentNodes(_8b1);this.pageHeights=[];this.pageNodes=[];this.stack=[];},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(_8b2,_8b3,_8b4){switch(arguments.length){case 3:this.rowsPerPage=_8b4;case 2:this.keepRows=_8b3;case 1:this.rowCount=_8b2;}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll");}},_getPageCount:function(_8b5,_8b6){return _8b5?(Math.ceil(_8b5/_8b6)||1):0;},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode;},setKeepInfo:function(_8b7){this.keepRows=_8b7;this.keepPages=!this.keepRows?this.keepRows:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);},setContentNodes:function(_8b8){this.contentNodes=_8b8;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var i=0;i<this.colCount;i++){this.pageNodes[i]=[];}},getDefaultNodes:function(){return this.pageNodes[0]||[];},invalidate:function(){this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize();},updateRowCount:function(_8ba){this.invalidateNodes();this.rowCount=_8ba;var _8bb=this.pageCount;if(_8bb===0){this.height=1;}this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<_8bb){for(var i=_8bb-1;i>=this.pageCount;i--){this.height-=this.getPageHeight(i);delete this.pageHeights[i];}}else{if(this.pageCount>_8bb){this.height+=this.defaultPageHeight*(this.pageCount-_8bb-1)+this.calcLastPageHeight();}}this.resize();},pageExists:function(_8bd){return Boolean(this.getDefaultPageNode(_8bd));},measurePage:function(_8be){var n=this.getDefaultPageNode(_8be);return (n&&n.innerHTML)?n.offsetHeight:0;},positionPage:function(_8c0,_8c1){for(var i=0;i<this.colCount;i++){this.pageNodes[i][_8c0].style.top=_8c1+"px";}},repositionPages:function(_8c3){var _8c4=this.getDefaultNodes();var last=0;for(var i=0;i<this.stack.length;i++){last=Math.max(this.stack[i],last);}var n=_8c4[_8c3];var y=(n?this.getPageNodePosition(n)+this.getPageHeight(_8c3):0);for(var p=_8c3+1;p<=last;p++){n=_8c4[p];if(n){if(this.getPageNodePosition(n)==y){return;}this.positionPage(p,y);}y+=this.getPageHeight(p);}},installPage:function(_8ca){for(var i=0;i<this.colCount;i++){this.contentNodes[i].appendChild(this.pageNodes[i][_8ca]);}},preparePage:function(_8cc,_8cd){var p=(_8cd?this.popPage():null);for(var i=0;i<this.colCount;i++){var _8d0=this.pageNodes[i];var _8d1=(p===null?this.createPageNode():this.invalidatePageNode(p,_8d0));_8d1.pageIndex=_8cc;_8d1.id=(this._pageIdPrefix||"")+"page-"+_8cc;_8d0[_8cc]=_8d1;}},renderPage:function(_8d2){var _8d3=[];for(var i=0;i<this.colCount;i++){_8d3[i]=this.pageNodes[i][_8d2];}for(var i=0,j=_8d2*this.rowsPerPage;(i<this.rowsPerPage)&&(j<this.rowCount);i++,j++){this.renderRow(j,_8d3);}},removePage:function(_8d6){for(var i=0,j=_8d6*this.rowsPerPage;i<this.rowsPerPage;i++,j++){this.removeRow(j);}},destroyPage:function(_8d9){for(var i=0;i<this.colCount;i++){var n=this.invalidatePageNode(_8d9,this.pageNodes[i]);if(n){dojo.destroy(n);}}},pacify:function(_8dc){},pacifying:false,pacifyTicks:200,setPacifying:function(_8dd){if(this.pacifying!=_8dd){this.pacifying=_8dd;this.pacify(this.pacifying);}},startPacify:function(){this.startPacifyTicks=new Date().getTime();},doPacify:function(){var _8de=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return _8de;},endPacify:function(){this.setPacifying(false);},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight;}for(var i=0;i<this.colCount;i++){dojox.grid.util.setStyleHeightPx(this.contentNodes[i],Math.max(1,this.height));}this.needPage(this.page,this.pageTop);var _8e0=(this.page<this.pageCount-1)?this.rowsPerPage:((this.rowCount%this.rowsPerPage)||this.rowsPerPage);var _8e1=this.getPageHeight(this.page);this.averageRowHeight=(_8e1>0&&_8e0>0)?(_8e1/_8e0):0;},calcLastPageHeight:function(){if(!this.pageCount){return 0;}var _8e2=this.pageCount-1;var _8e3=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[_8e2]=_8e3;return _8e3;},updateContentHeight:function(inDh){this.height+=inDh;this.resize();},updatePageHeight:function(_8e5){if(this.pageExists(_8e5)){var oh=this.getPageHeight(_8e5);var h=(this.measurePage(_8e5))||(oh);this.pageHeights[_8e5]=h;if((h)&&(oh!=h)){this.updateContentHeight(h-oh);this.repositionPages(_8e5);}}},rowHeightChanged:function(_8e8){this.updatePageHeight(Math.floor(_8e8/this.rowsPerPage));},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage());}},createPageNode:function(){var p=document.createElement("div");dojo.attr(p,"role","presentation");p.style.position="absolute";p.style[dojo._isBodyLtr()?"left":"right"]="0";return p;},getPageHeight:function(_8ea){var ph=this.pageHeights[_8ea];return (ph!==undefined?ph:this.defaultPageHeight);},pushPage:function(_8ec){return this.stack.push(_8ec);},popPage:function(){return this.stack.shift();},findPage:function(_8ed){var i=0,h=0;for(var ph=0;i<this.pageCount;i++,h+=ph){ph=this.getPageHeight(i);if(h+ph>=_8ed){break;}}this.page=i;this.pageTop=h;},buildPage:function(_8f1,_8f2,_8f3){this.preparePage(_8f1,_8f2);this.positionPage(_8f1,_8f3);this.installPage(_8f1);this.renderPage(_8f1);this.pushPage(_8f1);},needPage:function(_8f4,_8f5){var h=this.getPageHeight(_8f4),oh=h;if(!this.pageExists(_8f4)){this.buildPage(_8f4,this.keepPages&&(this.stack.length>=this.keepPages),_8f5);h=this.measurePage(_8f4)||h;this.pageHeights[_8f4]=h;if(h&&(oh!=h)){this.updateContentHeight(h-oh);}}else{this.positionPage(_8f4,_8f5);}return h;},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop);},scroll:function(_8f8){this.grid.scrollTop=_8f8;if(this.colCount){this.startPacify();this.findPage(_8f8);var h=this.height;var b=this.getScrollBottom(_8f8);for(var p=this.page,y=this.pageTop;(p<this.pageCount)&&((b<0)||(y<b));p++){y+=this.needPage(p,y);}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,_8f8);this.lastVisibleRow=this.getLastVisibleRow(p-1,y,b);if(h!=this.height){this.repositionPages(p-1);}this.endPacify();}},getScrollBottom:function(_8fd){return (this.windowHeight>=0?_8fd+this.windowHeight:-1);},processNodeEvent:function(e,_8ff){var t=e.target;while(t&&(t!=_8ff)&&t.parentNode&&(t.parentNode.parentNode!=_8ff)){t=t.parentNode;}if(!t||!t.parentNode||(t.parentNode.parentNode!=_8ff)){return false;}var page=t.parentNode;e.topRowIndex=page.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+_89a(t);e.rowTarget=t;return true;},processEvent:function(e){return this.processNodeEvent(e,this.contentNode);},renderRow:function(_903,_904){},removeRow:function(_905){},getDefaultPageNode:function(_906){return this.getDefaultNodes()[_906];},positionPageNode:function(_907,_908){},getPageNodePosition:function(_909){return _909.offsetTop;},invalidatePageNode:function(_90a,_90b){var p=_90b[_90a];if(p){delete _90b[_90a];this.removePage(_90a,p);_89f(p);p.innerHTML="";}return p;},getPageRow:function(_90d){return _90d*this.rowsPerPage;},getLastPageRow:function(_90e){return Math.min(this.rowCount,this.getPageRow(_90e+1))-1;},getFirstVisibleRow:function(_90f,_910,_911){if(!this.pageExists(_90f)){return 0;}var row=this.getPageRow(_90f);var _913=this.getDefaultNodes();var rows=_8af(_913[_90f]);for(var i=0,l=rows.length;i<l&&_910<_911;i++,row++){_910+=rows[i].offsetHeight;}return (row?row-1:row);},getLastVisibleRow:function(_917,_918,_919){if(!this.pageExists(_917)){return 0;}var _91a=this.getDefaultNodes();var row=this.getLastPageRow(_917);var rows=_8af(_91a[_917]);for(var i=rows.length-1;i>=0&&_918>_919;i--,row--){_918-=rows[i].offsetHeight;}return row+1;},findTopRow:function(_91e){var _91f=this.getDefaultNodes();var rows=_8af(_91f[this.page]);for(var i=0,l=rows.length,t=this.pageTop,h;i<l;i++){h=rows[i].offsetHeight;t+=h;if(t>=_91e){this.offset=h-(t-_91e);return i+this.page*this.rowsPerPage;}}return -1;},findScrollTop:function(_925){var _926=Math.floor(_925/this.rowsPerPage);var t=0;for(var i=0;i<_926;i++){t+=this.getPageHeight(i);}this.pageTop=t;this.needPage(_926,this.pageTop);var _929=this.getDefaultNodes();var rows=_8af(_929[_926]);var r=_925-this.rowsPerPage*_926;for(var i=0,l=rows.length;i<l&&i<r;i++){t+=rows[i].offsetHeight;}return t;},dummy:0});})();}if(!dojo._hasResource["dojox.grid.cells._base"]){dojo._hasResource["dojox.grid.cells._base"]=true;dojo.provide("dojox.grid.cells._base");(function(){var _92d=function(_92e){try{dojox.grid.util.fire(_92e,"focus");dojox.grid.util.fire(_92e,"select");}catch(e){}};var _92f=function(){setTimeout(dojo.hitch.apply(dojo,arguments),0);};var dgc=dojox.grid.cells;dojo.declare("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,_valueProp:"value",_formatPending:false,constructor:function(_931){this._props=_931||{};dojo.mixin(this,_931);},format:function(_932,_933){var f,i=this.grid.edit.info,d=this.get?this.get(_932,_933):(this.value||this.defaultValue);d=(d&&d.replace&&this.grid.escapeHTMLInData)?d.replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||(i.rowIndex==_932&&i.cell==this))){return this.formatEditing(d,_932);}else{var v=(d!=this.defaultValue&&(f=this.formatter))?f.call(this,d,_932):d;return (typeof v=="undefined"?this.defaultValue:v);}},formatEditing:function(_938,_939){},getNode:function(_93a){return this.view.getCellNode(_93a,this.index);},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index);},getEditNode:function(_93b){return (this.getNode(_93b)||0).firstChild||0;},canResize:function(){var uw=this.unitWidth;return uw&&(uw!=="auto");},isFlex:function(){var uw=this.unitWidth;return uw&&dojo.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%");},applyEdit:function(_93e,_93f){this.grid.edit.applyCellEdit(_93e,this,_93f);},cancelEdit:function(_940){this.grid.doCancelEdit(_940);},_onEditBlur:function(_941){if(this.grid.edit.isEditCell(_941,this.index)){this.grid.edit.apply();}},registerOnBlur:function(_942,_943){if(this.commitOnBlur){dojo.connect(_942,"onblur",function(e){setTimeout(dojo.hitch(this,"_onEditBlur",_943),250);});}},needFormatNode:function(_945,_946){this._formatPending=true;_92f(this,"_formatNode",_945,_946);},cancelFormatNode:function(){this._formatPending=false;},_formatNode:function(_947,_948){if(this._formatPending){this._formatPending=false;dojo.setSelectable(this.grid.domNode,true);this.formatNode(this.getEditNode(_948),_947,_948);}},formatNode:function(_949,_94a,_94b){if(dojo.isIE){_92f(this,"focus",_94b,_949);}else{this.focus(_94b,_949);}},dispatchEvent:function(m,e){if(m in this){return this[m](e);}},getValue:function(_94e){return this.getEditNode(_94e)[this._valueProp];},setValue:function(_94f,_950){var n=this.getEditNode(_94f);if(n){n[this._valueProp]=_950;}},focus:function(_952,_953){_92d(_953||this.getEditNode(_952));},save:function(_954){this.value=this.value||this.getValue(_954);},restore:function(_955){this.setValue(_955,this.value);},_finish:function(_956){dojo.setSelectable(this.grid.domNode,false);this.cancelFormatNode();},apply:function(_957){this.applyEdit(this.getValue(_957),_957);this._finish(_957);},cancel:function(_958){this.cancelEdit(_958);this._finish(_958);}});dgc._Base.markupFactory=function(node,_95a){var d=dojo;var _95c=d.trim(d.attr(node,"formatter")||"");if(_95c){_95a.formatter=dojo.getObject(_95c);}var get=d.trim(d.attr(node,"get")||"");if(get){_95a.get=dojo.getObject(get);}var _95e=function(attr){var _960=d.trim(d.attr(node,attr)||"");return _960?!(_960.toLowerCase()=="false"):undefined;};_95a.sortDesc=_95e("sortDesc");_95a.editable=_95e("editable");_95a.alwaysEditing=_95e("alwaysEditing");_95a.noresize=_95e("noresize");var _961=d.trim(d.attr(node,"loadingText")||d.attr(node,"defaultValue")||"");if(_961){_95a.defaultValue=_961;}var _962=function(attr){return d.trim(d.attr(node,attr)||"")||undefined;};_95a.styles=_962("styles");_95a.headerStyles=_962("headerStyles");_95a.cellStyles=_962("cellStyles");_95a.classes=_962("classes");_95a.headerClasses=_962("headerClasses");_95a.cellClasses=_962("cellClasses");};dojo.declare("dojox.grid.cells.Cell",dgc._Base,{constructor:function(){this.keyFilter=this.keyFilter;},keyFilter:null,formatEditing:function(_964,_965){this.needFormatNode(_964,_965);return "<input class=\"dojoxGridInput\" type=\"text\" value=\""+_964+"\">";},formatNode:function(_966,_967,_968){this.inherited(arguments);this.registerOnBlur(_966,_968);},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1){dojo.stopEvent(e);}}},_finish:function(_96b){this.inherited(arguments);var n=this.getEditNode(_96b);try{dojox.grid.util.fire(n,"blur");}catch(e){}}});dgc.Cell.markupFactory=function(node,_96e){dgc._Base.markupFactory(node,_96e);var d=dojo;var _970=d.trim(d.attr(node,"keyFilter")||"");if(_970){_96e.keyFilter=new RegExp(_970);}};dojo.declare("dojox.grid.cells.RowIndex",dgc.Cell,{name:"Row",postscript:function(){this.editable=false;},get:function(_971){return _971+1;}});dgc.RowIndex.markupFactory=function(node,_973){dgc.Cell.markupFactory(node,_973);};dojo.declare("dojox.grid.cells.Select",dgc.Cell,{options:null,values:null,returnIndex:-1,constructor:function(_974){this.values=this.values||this.options;},formatEditing:function(_975,_976){this.needFormatNode(_975,_976);var h=["<select class=\"dojoxGridSelect\">"];for(var i=0,o,v;((o=this.options[i])!==undefined)&&((v=this.values[i])!==undefined);i++){h.push("<option",(_975==v?" selected":"")," value=\""+v+"\"",">",o,"</option>");}h.push("</select>");return h.join("");},getValue:function(_97b){var n=this.getEditNode(_97b);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML;}}});dgc.Select.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell);var d=dojo;var _982=d.trim(d.attr(node,"options")||"");if(_982){var o=_982.split(",");if(o[0]!=_982){cell.options=o;}}var _984=d.trim(d.attr(node,"values")||"");if(_984){var v=_984.split(",");if(v[0]!=_984){cell.values=v;}}};dojo.declare("dojox.grid.cells.AlwaysEdit",dgc.Cell,{alwaysEditing:true,_formatNode:function(_986,_987){this.formatNode(this.getEditNode(_987),_986,_987);},applyStaticValue:function(_988){var e=this.grid.edit;e.applyCellEdit(this.getValue(_988),this,_988);e.start(this,_988,true);}});dgc.AlwaysEdit.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.Bool",dgc.AlwaysEdit,{_valueProp:"checked",formatEditing:function(_98c,_98d){return "<input class=\"dojoxGridInput\" type=\"checkbox\""+(_98c?" checked=\"checked\"":"")+" style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.applyStaticValue(e.rowIndex);}}});dgc.Bool.markupFactory=function(node,cell){dgc.AlwaysEdit.markupFactory(node,cell);};})();}if(!dojo._hasResource["dojox.grid.cells"]){dojo._hasResource["dojox.grid.cells"]=true;dojo.provide("dojox.grid.cells");}if(!dojo._hasResource["dojox.grid._Builder"]){dojo._hasResource["dojox.grid._Builder"]=true;dojo.provide("dojox.grid._Builder");(function(){var dg=dojox.grid;var _992=function(td){return td.cellIndex>=0?td.cellIndex:dojo.indexOf(td.parentNode.cells,td);};var _994=function(tr){return tr.rowIndex>=0?tr.rowIndex:dojo.indexOf(tr.parentNode.childNodes,tr);};var _996=function(_997,_998){return _997&&((_997.rows||0)[_998]||_997.childNodes[_998]);};var _999=function(node){for(var n=node;n&&n.tagName!="TABLE";n=n.parentNode){}return n;};var _99c=function(_99d,_99e){for(var n=_99d;n&&_99e(n);n=n.parentNode){}return n;};var _9a0=function(_9a1){var name=_9a1.toUpperCase();return function(node){return node.tagName!=name;};};var _9a4=dojox.grid.util.rowIndexTag;var _9a5=dojox.grid.util.gridViewTag;dg._Builder=dojo.extend(function(view){if(view){this.view=view;this.grid=view.grid;}},{view:null,_table:"<table class=\"dojoxGridRowTable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\""+(dojo.isFF<3?"wairole:":"")+"presentation\"",getTableArray:function(){var html=[this._table];if(this.view.viewWidth){html.push([" style=\"width:",this.view.viewWidth,";\""].join(""));}html.push(">");return html;},generateCellMarkup:function(_9a8,_9a9,_9aa,_9ab){var _9ac=[],html;var _9ae=dojo.isFF<3?"wairole:":"";if(_9ab){var _9af=_9a8.index!=_9a8.grid.getSortIndex()?"":_9a8.grid.sortInfo>0?"aria-sort=\"ascending\"":"aria-sort=\"descending\"";html=["<th tabIndex=\"-1\" role=\"",_9ae,"columnheader\"",_9af];}else{html=["<td tabIndex=\"-1\" role=\"",_9ae,"gridcell\""];}_9a8.colSpan&&html.push(" colspan=\"",_9a8.colSpan,"\"");_9a8.rowSpan&&html.push(" rowspan=\"",_9a8.rowSpan,"\"");html.push(" class=\"dojoxGridCell ");_9a8.classes&&html.push(_9a8.classes," ");_9aa&&html.push(_9aa," ");_9ac.push(html.join(""));_9ac.push("");html=["\" idx=\"",_9a8.index,"\" style=\""];if(_9a9&&_9a9[_9a9.length-1]!=";"){_9a9+=";";}html.push(_9a8.styles,_9a9||"",_9a8.hidden?"display:none;":"");_9a8.unitWidth&&html.push("width:",_9a8.unitWidth,";");_9ac.push(html.join(""));_9ac.push("");html=["\""];_9a8.attrs&&html.push(" ",_9a8.attrs);html.push(">");_9ac.push(html.join(""));_9ac.push("");_9ac.push(_9ab?"</th>":"</td>");return _9ac;},isCellNode:function(_9b0){return Boolean(_9b0&&_9b0!=dojo.doc&&dojo.attr(_9b0,"idx"));},getCellNodeIndex:function(_9b1){return _9b1?Number(dojo.attr(_9b1,"idx")):-1;},getCellNode:function(_9b2,_9b3){for(var i=0,row;row=_996(_9b2.firstChild,i);i++){for(var j=0,cell;cell=row.cells[j];j++){if(this.getCellNodeIndex(cell)==_9b3){return cell;}}}},findCellTarget:function(_9b8,_9b9){var n=_9b8;while(n&&(!this.isCellNode(n)||(n.offsetParent&&_9a5 in n.offsetParent.parentNode&&n.offsetParent.parentNode[_9a5]!=this.view.id))&&(n!=_9b9)){n=n.parentNode;}return n!=_9b9?n:null;},baseDecorateEvent:function(e){e.dispatch="do"+e.type;e.grid=this.grid;e.sourceView=this.view;e.cellNode=this.findCellTarget(e.target,e.rowNode);e.cellIndex=this.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);},findTarget:function(_9bc,_9bd){var n=_9bc;while(n&&(n!=this.domNode)&&(!(_9bd in n)||(_9a5 in n&&n[_9a5]!=this.view.id))){n=n.parentNode;}return (n!=this.domNode)?n:null;},findRowTarget:function(_9bf){return this.findTarget(_9bf,_9a4);},isIntraNodeEvent:function(e){try{return (e.cellNode&&e.relatedTarget&&dojo.isDescendant(e.relatedTarget,e.cellNode));}catch(x){return false;}},isIntraRowEvent:function(e){try{var row=e.relatedTarget&&this.findRowTarget(e.relatedTarget);return !row&&(e.rowIndex==-1)||row&&(e.rowIndex==row.gridRowIndex);}catch(x){return false;}},dispatchEvent:function(e){if(e.dispatch in this){return this[e.dispatch](e);}},domouseover:function(e){if(e.cellNode&&(e.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=e.cellNode;this.grid.onMouseOver(e);}this.grid.onMouseOverRow(e);},domouseout:function(e){if(e.cellNode&&(e.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(e,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(e);if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}},domousedown:function(e){if(e.cellNode){this.grid.onMouseDown(e);}this.grid.onMouseDownRow(e);}});dg._ContentBuilder=dojo.extend(function(view){dg._Builder.call(this,view);},dg._Builder.prototype,{update:function(){this.prepareHtml();},prepareHtml:function(){var _9c8=this.grid.get,_9c9=this.view.structure.cells;for(var j=0,row;(row=_9c9[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.get=cell.get||(cell.value==undefined)&&_9c8;cell.markup=this.generateCellMarkup(cell,cell.cellStyles,cell.cellClasses,false);}}},generateHtml:function(_9ce,_9cf){var html=this.getTableArray(),v=this.view,_9d2=v.structure.cells,item=this.grid.getItem(_9cf);dojox.grid.util.fire(this.view,"onBeforeRow",[_9cf,_9d2]);for(var j=0,row;(row=_9d2[j]);j++){if(row.hidden||row.header){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,m,cc,cs;(cell=row[i]);i++){m=cell.markup,cc=cell.customClasses=[],cs=cell.customStyles=[];m[5]=cell.format(_9cf,item);m[1]=cc.join(" ");m[3]=cs.join(";");html.push.apply(html,m);}html.push("</tr>");}html.push("</table>");return html.join("");},decorateEvent:function(e){e.rowNode=this.findRowTarget(e.target);if(!e.rowNode){return false;}e.rowIndex=e.rowNode[_9a4];this.baseDecorateEvent(e);e.cell=this.grid.getCell(e.cellIndex);return true;}});dg._HeaderBuilder=dojo.extend(function(view){this.moveable=null;dg._Builder.call(this,view);},dg._Builder.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap){this.tableMap.mapRows(this.view.structure.cells);}else{this.tableMap=new dg._TableMap(this.view.structure.cells);}},generateHtml:function(_9dd,_9de){var html=this.getTableArray(),_9e0=this.view.structure.cells;dojox.grid.util.fire(this.view,"onBeforeRow",[-1,_9e0]);for(var j=0,row;(row=_9e0[j]);j++){if(row.hidden){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,_9e5;(cell=row[i]);i++){cell.customClasses=[];cell.customStyles=[];if(this.view.simpleStructure){if(cell.headerClasses){if(cell.headerClasses.indexOf("dojoDndItem")==-1){cell.headerClasses+=" dojoDndItem";}}else{cell.headerClasses="dojoDndItem";}if(cell.attrs){if(cell.attrs.indexOf("dndType='gridColumn_")==-1){cell.attrs+=" dndType='gridColumn_"+this.grid.id+"'";}}else{cell.attrs="dndType='gridColumn_"+this.grid.id+"'";}}_9e5=this.generateCellMarkup(cell,cell.headerStyles,cell.headerClasses,true);_9e5[5]=(_9de!=undefined?_9de:_9dd(cell));_9e5[3]=cell.customStyles.join(";");_9e5[1]=cell.customClasses.join(" ");html.push(_9e5.join(""));}html.push("</tr>");}html.push("</table>");return html.join("");},getCellX:function(e){var x=e.layerX;if(dojo.isMoz){var n=_99c(e.target,_9a0("th"));x-=(n&&n.offsetLeft)||0;var t=e.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()&&e.sourceView.headerNode.scrollLeft<t){x-=t;}}var n=_99c(e.target,function(){if(!n||n==e.cellNode){return false;}x+=(n.offsetLeft<0?0:n.offsetLeft);return true;});return x;},decorateEvent:function(e){this.baseDecorateEvent(e);e.rowIndex=-1;e.cellX=this.getCellX(e);return true;},prepareResize:function(e,mod){do{var i=_992(e.cellNode);e.cellNode=(i?e.cellNode.parentNode.cells[i+mod]:null);e.cellIndex=(e.cellNode?this.getCellNodeIndex(e.cellNode):-1);}while(e.cellNode&&e.cellNode.style.display=="none");return Boolean(e.cellNode);},canResize:function(e){if(!e.cellNode||e.cellNode.colSpan>1){return false;}var cell=this.grid.getCell(e.cellIndex);return !cell.noresize&&cell.canResize();},overLeftResizeArea:function(e){if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar")){return false;}}if(dojo._isBodyLtr()){return (e.cellIndex>0)&&(e.cellX<this.overResizeWidth)&&this.prepareResize(e,-1);}var t=e.cellNode&&(e.cellX<this.overResizeWidth);return t;},overRightResizeArea:function(e){if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar")){return false;}}if(dojo._isBodyLtr()){return e.cellNode&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth);}return (e.cellIndex>0)&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(e,-1);},domousemove:function(e){if(!this.moveable){var c=(this.overRightResizeArea(e)?"e-resize":(this.overLeftResizeArea(e)?"w-resize":""));if(c&&!this.canResize(e)){c="not-allowed";}if(dojo.isIE){var t=e.sourceView.headerNode.scrollLeft;e.sourceView.headerNode.style.cursor=c||"";e.sourceView.headerNode.scrollLeft=t;}else{e.sourceView.headerNode.style.cursor=c||"";}if(c){dojo.stopEvent(e);}}},domousedown:function(e){if(!this.moveable){if((this.overRightResizeArea(e)||this.overLeftResizeArea(e))&&this.canResize(e)){this.beginColumnResize(e);}else{this.grid.onMouseDown(e);this.grid.onMouseOverRow(e);}}},doclick:function(e){if(this._skipBogusClicks){dojo.stopEvent(e);return true;}},beginColumnResize:function(e){this.moverDiv=document.createElement("div");dojo.style(this.moverDiv,{position:"absolute",left:0});dojo.body().appendChild(this.moverDiv);var m=this.moveable=new dojo.dnd.Moveable(this.moverDiv);var _9fc=[],_9fd=this.tableMap.findOverlappingNodes(e.cellNode);for(var i=0,cell;(cell=_9fd[i]);i++){_9fc.push({node:cell,index:this.getCellNodeIndex(cell),width:cell.offsetWidth});}var view=e.sourceView;var adj=dojo._isBodyLtr()?1:-1;var _a02=e.grid.views.views;var _a03=[];for(var i=view.idx+adj,_a04;(_a04=_a02[i]);i=i+adj){_a03.push({node:_a04.headerNode,left:window.parseInt(_a04.headerNode.style.left)});}var _a05=view.headerContentNode.firstChild;var drag={scrollLeft:e.sourceView.headerNode.scrollLeft,view:view,node:e.cellNode,index:e.cellIndex,w:dojo.contentBox(e.cellNode).w,vw:dojo.contentBox(view.headerNode).w,table:_a05,tw:dojo.contentBox(_a05).w,spanners:_9fc,followers:_a03};m.onMove=dojo.hitch(this,"doResizeColumn",drag);dojo.connect(m,"onMoveStop",dojo.hitch(this,function(){this.endResizeColumn(drag);if(drag.node.releaseCapture){drag.node.releaseCapture();}this.moveable.destroy();delete this.moveable;this.moveable=null;}));view.convertColPctToFixed();if(e.cellNode.setCapture){e.cellNode.setCapture();}m.onMouseDown(e);},doResizeColumn:function(_a07,_a08,_a09){var _a0a=dojo._isBodyLtr();var _a0b=_a0a?_a09.l:-_a09.l;var w=_a07.w+_a0b;var vw=_a07.vw+_a0b;var tw=_a07.tw+_a0b;if(w>=this.minColWidth){for(var i=0,s,sw;(s=_a07.spanners[i]);i++){sw=s.width+_a0b;s.node.style.width=sw+"px";_a07.view.setColWidth(s.index,sw);}for(var i=0,f,fl;(f=_a07.followers[i]);i++){fl=f.left+_a0b;f.node.style.left=fl+"px";}_a07.node.style.width=w+"px";_a07.view.setColWidth(_a07.index,w);_a07.view.headerNode.style.width=vw+"px";_a07.view.setColumnsWidth(tw);if(!_a0a){_a07.view.headerNode.scrollLeft=_a07.scrollLeft+_a0b;}}if(_a07.view.flexCells&&!_a07.view.testFlexCells()){var t=_999(_a07.node);t&&(t.style.width="");}},endResizeColumn:function(_a15){dojo.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;var conn=dojo.connect(_a15.view,"update",this,function(){dojo.disconnect(conn);this._skipBogusClicks=false;});setTimeout(dojo.hitch(_a15.view,"update"),50);}});dg._TableMap=dojo.extend(function(rows){this.mapRows(rows);},{map:null,mapRows:function(_a18){var _a19=_a18.length;if(!_a19){return;}this.map=[];for(var j=0,row;(row=_a18[j]);j++){this.map[j]=[];}for(var j=0,row;(row=_a18[j]);j++){for(var i=0,x=0,cell,_a1f,_a20;(cell=row[i]);i++){while(this.map[j][x]){x++;}this.map[j][x]={c:i,r:j};_a20=cell.rowSpan||1;_a1f=cell.colSpan||1;for(var y=0;y<_a20;y++){for(var s=0;s<_a1f;s++){this.map[j+y][x+s]=this.map[j][x];}}x+=_a1f;}}},dumpMap:function(){for(var j=0,row,h="";(row=this.map[j]);j++,h=""){for(var i=0,cell;(cell=row[i]);i++){h+=cell.r+","+cell.c+"   ";}}},getMapCoords:function(_a28,_a29){for(var j=0,row;(row=this.map[j]);j++){for(var i=0,cell;(cell=row[i]);i++){if(cell.c==_a29&&cell.r==_a28){return {j:j,i:i};}}}return {j:-1,i:-1};},getNode:function(_a2e,_a2f,_a30){var row=_a2e&&_a2e.rows[_a2f];return row&&row.cells[_a30];},_findOverlappingNodes:function(_a32,_a33,_a34){var _a35=[];var m=this.getMapCoords(_a33,_a34);var row=this.map[m.j];for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue;}var rw=row[m.i];var n=(rw?this.getNode(_a32,rw.r,rw.c):null);if(n){_a35.push(n);}}return _a35;},findOverlappingNodes:function(_a3b){return this._findOverlappingNodes(_999(_a3b),_994(_a3b.parentNode),_992(_a3b));}});})();}if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(node,_a3d){this.node=dojo.byId(node);if(!_a3d){_a3d={};}this.creator=_a3d.creator||null;this.skipForm=_a3d.skipForm;this.parent=_a3d.dropParent&&dojo.byId(_a3d.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");if(!(_a3d&&_a3d._skipStartup)){this.startup();}this.events=[dojo.connect(this.node,"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")];},creator:function(){},getItem:function(key){return this.map[key];},setItem:function(key,data){this.map[key]=data;},delItem:function(key){delete this.map[key];},forInItems:function(f,o){o=o||dojo.global;var m=this.map,e=dojo.dnd._empty;for(var i in m){if(i in e){continue;}f.call(o,m[i],i,this);}return o;},clearItems:function(){this.map={};},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent);},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=item;return;}}else{node.id=dojo.dnd.getUniqueId();}var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]};},this);this.map=map;return this;},insertNodes:function(data,_a4d,_a4e){if(!this.parent.firstChild){_a4e=null;}else{if(_a4d){if(!_a4e){_a4e=this.parent.firstChild;}}else{if(_a4e){_a4e=_a4e.nextSibling;}}}if(_a4e){for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.insertBefore(t.node,_a4e);}}else{for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node);}}return this;},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null;},markupFactory:function(_a51,node){_a51._skipStartup=true;return new dojo.dnd.Container(node,_a51);},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length){this.parent=c[0];}}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync();},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node){break;}try{n=n.parentNode;}catch(x){n=null;}}if(!n){this._changeState("Container","Over");this.onOverEvent();}n=this._getChildByEvent(e);if(this.current==n){return;}if(this.current){this._removeItemClass(this.current,"Over");}if(n){this._addItemClass(n,"Over");}this.current=n;},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node){return;}try{n=n.parentNode;}catch(x){n=null;}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null;}this._changeState("Container","");this.onOutEvent();},onSelectStart:function(e){if(!this.skipForm||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,_a5a){var _a5b="dojoDnd"+type;var _a5c=type.toLowerCase()+"State";dojo.removeClass(this.node,_a5b+this[_a5c]);dojo.addClass(this.node,_a5b+_a5a);this[_a5c]=_a5a;},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);},_getChildByEvent:function(e){var node=e.target;if(node){for(var _a63=node.parentNode;_a63;node=_a63,_a63=node.parentNode){if(_a63==this.parent&&dojo.hasClass(node,"dojoDndItem")){return node;}}}return null;},_normalizedCreator:function(item,hint){var t=(this.creator||this.defaultCreator).call(this,item,hint);if(!dojo.isArray(t.type)){t.type=["text"];}if(!t.node.id){t.node.id=dojo.dnd.getUniqueId();}dojo.addClass(t.node,"dojoDndItem");return t;}});dojo.dnd._createNode=function(tag){if(!tag){return dojo.dnd._createSpan;}return function(text){return dojo.create(tag,{innerHTML:text});};};dojo.dnd._createTrTd=function(text){var tr=dojo.create("tr");dojo.create("td",{innerHTML:text},tr);return tr;};dojo.dnd._createSpan=function(text){return dojo.create("span",{innerHTML:text});};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[tag]);return function(item,hint){var _a71=item&&dojo.isObject(item),data,type,n;if(_a71&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item;}else{data=(_a71&&item.data)?item.data:item;type=(_a71&&item.type)?item.type:["text"];n=(hint=="avatar"?dojo.dnd._createSpan:c)(String(data));}n.id=dojo.dnd.getUniqueId();return {node:n,data:data,type:type};};};}if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(node,_a76){if(!_a76){_a76={};}this.singular=_a76.singular;this.autoSync=_a76.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"));},singular:false,getSelectedNodes:function(){var t=new dojo.NodeList();var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}t.push(dojo.byId(i));}return t;},selectNone:function(){return this._removeSelection()._removeAnchor();},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dojo.byId(id),"Selected");this.selection[id]=1;},this);return this._removeAnchor();},deleteSelectedNodes:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var n=dojo.byId(i);this.delItem(i);dojo.destroy(n);}this.anchor=null;this.selection={};return this;},forInSelectedItems:function(f,o){o=o||dojo.global;var s=this.selection,e=dojo.dnd._empty;for(var i in s){if(i in e){continue;}f.call(o,this.getItem(i),i,this);}},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null;}}var t=[],e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}if(!this.getItem(i)){t.push(i);}}dojo.forEach(t,function(i){delete this.selection[i];},this);return this;},insertNodes:function(_a88,data,_a8a,_a8b){var _a8c=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=_a8c.call(this,item,hint);if(_a88){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor");}else{if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected");}}this.selection[t.node.id]=1;}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor");}return t;};dojo.dnd.Selector.superclass.insertNodes.call(this,data,_a8a,_a8b);this._normalizedCreator=_a8c;return this;},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null;},markupFactory:function(_a90,node){_a90._skipStartup=true;return new dojo.dnd.Selector(node,_a90);},onMouseDown:function(e){if(this.autoSync){this.sync();}if(!this.current){return;}if(!this.singular&&!dojo.dnd.getCopyKeyState(e)&&!e.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(e.button===dojo.dnd._lmb){dojo.stopEvent(e);}return;}if(!this.singular&&e.shiftKey){if(!dojo.dnd.getCopyKeyState(e)){this._removeSelection();}var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor");}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=0;for(;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}}for(++i;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}this._addItemClass(node,"Selected");this.selection[node.id]=1;}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1;}}}else{if(this.singular){if(this.anchor==this.current){if(dojo.dnd.getCopyKeyState(e)){this.selectNone();}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}}else{if(dojo.dnd.getCopyKeyState(e)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor();}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id];}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected");}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}}dojo.stopEvent(e);},onMouseUp:function(e){if(!this.simpleSelection){return;}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}},onMouseMove:function(e){this.simpleSelection=false;},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove");},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent;},_removeSelection:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var node=dojo.byId(i);if(node){this._removeItemClass(node,"Selected");}}this.selection={};return this;},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null;}return this;}});}if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(_a9b){this.manager=_a9b;this.construct();},construct:function(){var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),b=dojo.create("tbody",null,a),tr=dojo.create("tr",null,b),td=dojo.create("td",{innerHTML:this._generateText()},tr),k=Math.min(5,this.manager.nodes.length),i=0,_aa2=this.manager.source,node;dojo.attr(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_aa2.creator){node=_aa2._normalizedCreator(_aa2.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _aa4=dojo.create("table"),_aa5=dojo.create("tbody",null,_aa4);_aa5.appendChild(node);node=_aa4;}}node.id="";tr=dojo.create("tr",null,b);td=dojo.create("td",null,tr);td.appendChild(node);dojo.attr(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){dojo.destroy(this.node);this.node=false;},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");dojo.query("tr.dojoDndAvatarHeader td",this.node).forEach(function(node){node.innerHTML=this._generateText();},this);},_generateText:function(){return this.manager.nodes.length.toString();}});}if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:16,OFFSET_Y:16,overSource:function(_aa7){if(this.avatar){this.target=(_aa7&&_aa7.targetState!="Disabled")?_aa7:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}dojo.publish("/dnd/source/over",[_aa7]);},outSource:function(_aa8){if(this.avatar){if(this.target==_aa8){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null]);}}else{dojo.publish("/dnd/source/over",[null]);}},startDrag:function(_aa9,_aaa,copy){this.source=_aa9;this.nodes=_aaa;this.copy=Boolean(copy);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[_aa9,_aaa,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];var c="dojoDnd"+(copy?"Copy":"Move");dojo.addClass(dojo.body(),c);},canDrop:function(flag){var _aae=Boolean(this.target&&flag);if(this.canDropFlag!=_aae){this.canDropFlag=_aae;this.avatar.update();}},stopDrag:function(){dojo.removeClass(dojo.body(),"dojoDndCopy");dojo.removeClass(dojo.body(),"dojoDndMove");dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new dojo.dnd.Avatar(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){dojo.dnd.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dojo.dnd.getCopyKeyState(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dojo.dnd.getCopyKeyState(e))),_ab5=[this.source,this.nodes,copy,this.target];dojo.publish("/dnd/drop/before",_ab5);dojo.publish("/dnd/drop",_ab5);}else{dojo.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case dojo.keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==dojo.keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.removeClass(dojo.body(),"dojoDnd"+(this.copy?"Move":"Copy"));dojo.addClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"));}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager){dojo.dnd._manager=new dojo.dnd.Manager();}return dojo.dnd._manager;};}if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],constructor:function(node,_abc){dojo.mixin(this,dojo.mixin({},_abc));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){dojo.addClass(this.node,"dojoDndSource");}this.targetState="";if(this.accept){dojo.addClass(this.node,"dojoDndTarget");}if(this.horizontal){dojo.addClass(this.node,"dojoDndHorizontal");}this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")];},checkAcceptance:function(_abf,_ac0){if(this==_abf){return !this.copyOnly||this.selfAccept;}for(var i=0;i<_ac0.length;++i){var type=_abf.getItem(_ac0[i].id).type;var flag=false;for(var j=0;j<type.length;++j){if(type[j] in this.accept){flag=true;break;}}if(!flag){return false;}}return true;},copyState:function(_ac5,self){if(_ac5){return true;}if(arguments.length<2){self=this==dojo.dnd.manager().target;}if(self){if(this.copyOnly){return this.selfCopy;}}else{return this.copyOnly;}return false;},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null;},markupFactory:function(_ac7,node){_ac7._skipStartup=true;return new dojo.dnd.Source(node,_ac7);},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}dojo.dnd.Source.superclass.onMouseMove.call(this,e);var m=dojo.dnd.manager();if(this.isDragging){var _acb=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox={xy:dojo.coords(this.current,true),w:this.current.offsetWidth,h:this.current.offsetHeight};}if(this.horizontal){_acb=(e.pageX-this.targetBox.xy.x)<(this.targetBox.w/2);}else{_acb=(e.pageY-this.targetBox.xy.y)<(this.targetBox.h/2);}}if(this.current!=this.targetAnchor||_acb!=this.before){this._markTargetAnchor(_acb);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection));}}else{if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var _acc=this.getSelectedNodes();if(_acc.length){m.startDrag(this,_acc,this.copyState(dojo.dnd.getCopyKeyState(e),true));}}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dojo.dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,e);}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,e);}},onDndSourceOver:function(_acf){if(this!=_acf){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor();}}else{if(this.isDragging){var m=dojo.dnd.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)));}}},onDndStart:function(_ad1,_ad2,copy){if(this.autoSync){this.sync();}if(this.isSource){this._changeState("Source",this==_ad1?(copy?"Copied":"Moved"):"");}var _ad4=this.accept&&this.checkAcceptance(_ad1,_ad2);this._changeState("Target",_ad4?"":"Disabled");if(this==_ad1){dojo.dnd.manager().overSource(this);}this.isDragging=true;},onDndDrop:function(_ad5,_ad6,copy,_ad8){if(this==_ad8){this.onDrop(_ad5,_ad6,copy);}this.onDndCancel();},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null;}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","");},onDrop:function(_ad9,_ada,copy){if(this!=_ad9){this.onDropExternal(_ad9,_ada,copy);}else{this.onDropInternal(_ada,copy);}},onDropExternal:function(_adc,_add,copy){var _adf=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(node,hint){return _adf.call(this,_adc.getItem(node.id).data,hint);};}else{if(copy){this._normalizedCreator=function(node,hint){var t=_adc.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}else{this._normalizedCreator=function(node,hint){var t=_adc.getItem(node.id);_adc.delItem(node.id);return {node:node,data:t.data,type:t.type};};}}this.selectNone();if(!copy&&!this.creator){_adc.selectNone();}this.insertNodes(true,_add,this.before,this.current);if(!copy&&this.creator){_adc.deleteSelectedNodes();}this._normalizedCreator=_adf;},onDropInternal:function(_ae9,copy){var _aeb=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return;}if(copy){if(this.creator){this._normalizedCreator=function(node,hint){return _aeb.call(this,this.getItem(node.id).data,hint);};}else{this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}}else{if(!this.current){return;}this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);return {node:node,data:t.data,type:t.type};};}this._removeSelection();this.insertNodes(true,_ae9,this.before,this.current);this._normalizedCreator=_aeb;},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver();}},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut();}},_markTargetAnchor:function(_af5){if(this.current==this.targetAnchor&&this.before==_af5){return;}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");}this.targetAnchor=this.current;this.targetBox=null;this.before=_af5;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After");}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");},_legalMouseDown:function(e){if(!dojo.dnd._isLmbPressed(e)){return false;}if(!this.withHandles){return true;}for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(dojo.hasClass(node,"dojoDndHandle")){return true;}if(dojo.hasClass(node,"dojoDndItem")){break;}}return false;}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(node,_afa){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource");},markupFactory:function(_afb,node){_afb._skipStartup=true;return new dojo.dnd.Target(node,_afb);}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(node,_afe){this.autoSync=true;},markupFactory:function(_aff,node){_aff._skipStartup=true;return new dojo.dnd.AutoSource(node,_aff);}});}if(!dojo._hasResource["dojox.grid._View"]){dojo._hasResource["dojox.grid._View"]=true;dojo.provide("dojox.grid._View");(function(){var _b01=function(_b02,_b03){return _b02.style.cssText==undefined?_b02.getAttribute("style"):_b02.style.cssText;};dojo.declare("dojox.grid._View",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:"<div class=\"dojoxGridView\" wairole=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" wairole=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:9000em\" wairole=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" wairole=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" wairole=\"presentation\" />\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" wairole=\"presentation\" />\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" wairole=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" wairole=\"presentation\"></div>\n\t</div>\n</div>\n",themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,postMixInProperties:function(){this.rowNodes=[];},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new dojox.grid._ContentBuilder(this);this.header=new dojox.grid._HeaderBuilder(this);if(!dojo._isBodyLtr()){this.headerNodeContainer.style.width="";}},destroy:function(){dojo.destroy(this.headerNode);delete this.headerNode;dojo.forEach(this.rowNodes,dojo.destroy);this.rowNodes=[];if(this.source){this.source.destroy();}this.inherited(arguments);},focus:function(){if(dojo.isWebKit||dojo.isOpera){this.hiddenFocusNode.focus();}else{this.scrollboxNode.focus();}},setStructure:function(_b04){var vs=(this.structure=_b04);if(vs.width&&!isNaN(vs.width)){this.viewWidth=vs.width+"em";}else{this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth);}this.onBeforeRow=vs.onBeforeRow;this.onAfterRow=vs.onAfterRow;this.noscroll=vs.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden";}this.simpleStructure=Boolean(vs.cells.length==1);this.testFlexCells();this.updateStructure();},testFlexCells:function(){this.flexCells=false;for(var j=0,row;(row=this.structure.cells[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.view=this;this.flexCells=this.flexCells||cell.isFlex();}}return this.flexCells;},updateStructure:function(){this.header.update();this.content.update();},getScrollbarWidth:function(){var _b0a=this.hasVScrollbar();var _b0b=dojo.style(this.scrollboxNode,"overflow");if(this.noscroll||!_b0b||_b0b=="hidden"){_b0a=false;}else{if(_b0b=="scroll"){_b0a=true;}}return (_b0a?dojox.html.metrics.getScrollbar().w:0);},getColumnsWidth:function(){return this.headerContentNode.firstChild.offsetWidth;},setColumnsWidth:function(_b0c){this.headerContentNode.firstChild.style.width=_b0c+"px";if(this.viewWidth){this.viewWidth=_b0c+"px";}},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px";},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px";},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1;}var _b0d=this.grid.layout.cells;var _b0e=dojo.hitch(this,function(node,_b10){var inc=_b10?-1:1;var idx=this.header.getCellNodeIndex(node)+inc;var cell=_b0d[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none"){idx+=inc;cell=_b0d[idx];}if(cell){return cell.getHeaderNode();}return null;});if(this.grid.columnReordering&&this.simpleStructure){if(this.source){this.source.destroy();}this.source=new dojo.dnd.Source(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,onMouseDown:dojo.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable){this.header.beginColumnResize(e);}else{if(this.grid.headerMenu){this.grid.headerMenu.onCancel(true);}if(e.button===(dojo.isIE?1:0)){dojo.dnd.Source.prototype.onMouseDown.call(this.source,e);}}}),_markTargetAnchor:dojo.hitch(this,function(_b15){var src=this.source;if(src.current==src.targetAnchor&&src.before==_b15){return;}if(src.targetAnchor&&_b0e(src.targetAnchor,src.before)){src._removeItemClass(_b0e(src.targetAnchor,src.before),src.before?"After":"Before");}dojo.dnd.Source.prototype._markTargetAnchor.call(src,_b15);if(src.targetAnchor&&_b0e(src.targetAnchor,src.before)){src._addItemClass(_b0e(src.targetAnchor,src.before),src.before?"After":"Before");}}),_unmarkTargetAnchor:dojo.hitch(this,function(){var src=this.source;if(!src.targetAnchor){return;}if(src.targetAnchor&&_b0e(src.targetAnchor,src.before)){src._removeItemClass(_b0e(src.targetAnchor,src.before),src.before?"After":"Before");}dojo.dnd.Source.prototype._unmarkTargetAnchor.call(src);}),destroy:dojo.hitch(this,function(){dojo.disconnect(this._source_conn);dojo.unsubscribe(this._source_sub);dojo.dnd.Source.prototype.destroy.call(this.source);})});this._source_conn=dojo.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=dojo.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup();}},_onDndDropBefore:function(_b18,_b19,copy){if(dojo.dnd.manager().target!==this.source){return;}this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var _b1b=this.grid.views.views;var _b1c=_b1b[_b18.viewIndex];var _b1d=_b1b[this.index];if(_b1d!=_b1c){var s=_b1c.convertColPctToFixed();var t=_b1d.convertColPctToFixed();if(s||t){setTimeout(function(){_b1c.update();_b1d.update();},50);}}},_onDndDrop:function(_b20,_b21,copy){if(dojo.dnd.manager().target!==this.source){if(dojo.dnd.manager().source===this.source){this._removingColumn=true;}return;}var _b23=function(n){return n?dojo.attr(n,"idx"):null;};var w=dojo.marginBox(_b21[0]).w;if(_b20.viewIndex!==this.index){var _b26=this.grid.views.views;var _b27=_b26[_b20.viewIndex];var _b28=_b26[this.index];if(_b27.viewWidth&&_b27.viewWidth!="auto"){_b27.setColumnsWidth(_b27.getColumnsWidth()-w);}if(_b28.viewWidth&&_b28.viewWidth!="auto"){_b28.setColumnsWidth(_b28.getColumnsWidth());}}var stn=this.source._targetNode;var stb=this.source._beforeTarget;var _b2b=this.grid.layout;var idx=this.index;delete this.source._targetNode;delete this.source._beforeTarget;window.setTimeout(function(){_b2b.moveColumn(_b20.viewIndex,idx,_b23(_b21[0]),_b23(stn),stb);},1);},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}dojox.grid.util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode]);},_getHeaderContent:function(_b2d){var n=_b2d.name||_b2d.grid.getCellName(_b2d);var ret=["<div class=\"dojoxGridSortNode"];if(_b2d.index!=_b2d.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_b2d.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_b2d.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\""+(dojo.isFF<3?"wairole:":"")+"presentation\"></div>"]);}ret=ret.concat([n,"</div>"]);return ret.join("");},resize:function(){this.adaptHeight();this.adaptWidth();},hasHScrollbar:function(_b30){if(this._hasHScroll==undefined||_b30){if(this.noscroll){this._hasHScroll=false;}else{var _b31=dojo.style(this.scrollboxNode,"overflow");if(_b31=="hidden"){this._hasHScroll=false;}else{if(_b31=="scroll"){this._hasHScroll=true;}else{this._hasHScroll=(this.scrollboxNode.offsetWidth<this.contentNode.offsetWidth);}}}}return this._hasHScroll;},hasVScrollbar:function(_b32){if(this._hasVScroll==undefined||_b32){if(this.noscroll){this._hasVScroll=false;}else{var _b33=dojo.style(this.scrollboxNode,"overflow");if(_b33=="hidden"){this._hasVScroll=false;}else{if(_b33=="scroll"){this._hasVScroll=true;}else{this._hasVScroll=(this.scrollboxNode.offsetHeight<this.contentNode.offsetHeight);}}}}return this._hasVScroll;},convertColPctToFixed:function(){var _b34=false;var _b35=dojo.query("th",this.headerContentNode);var _b36=dojo.map(_b35,function(c,vIdx){var w=c.style.width;dojo.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%"){_b34=true;}else{if(w&&w.slice(-2)=="px"){return window.parseInt(w,10);}}return dojo.contentBox(c).w;});if(_b34){dojo.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var _b3c=cell.view.getHeaderCellNode(cell.index);if(_b3c&&dojo.hasAttr(_b3c,"vIdx")){var vIdx=window.parseInt(dojo.attr(_b3c,"vIdx"));this.setColWidth(idx,_b36[vIdx]);_b35[vIdx].style.width=cell.unitWidth;dojo.removeAttr(_b3c,"vIdx");}}},this);return true;}return false;},adaptHeight:function(_b3e){if(!this.grid._autoHeight){var h=this.domNode.clientHeight;if(_b3e){h-=dojox.html.metrics.getScrollbar().h;}dojox.grid.util.setStyleHeightPx(this.scrollboxNode,h);}this.hasVScrollbar(true);},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn){w=Math.max(w,this.getColumnsWidth())+"px";}else{w=Math.min(w,this.getColumnsWidth())+"px";this._removingColumn=false;}var cn=this.contentNode;cn.style.width=w;this.hasHScrollbar(true);},setSize:function(w,h){var ds=this.domNode.style;var hs=this.headerNode.style;if(w){ds.width=w;hs.width=w;}ds.height=(h>=0?h+"px":"");},renderRow:function(_b46){var _b47=this.createRowNode(_b46);this.buildRow(_b46,_b47);this.grid.edit.restore(this,_b46);if(this._pendingUpdate){window.clearTimeout(this._pendingUpdate);}this._pendingUpdate=window.setTimeout(dojo.hitch(this,function(){window.clearTimeout(this._pendingUpdate);delete this._pendingUpdate;this.grid._resize();}),50);return _b47;},createRowNode:function(_b48){var node=document.createElement("div");node.className=this.classTag+"Row";dojo.attr(node,"role","row");node[dojox.grid.util.gridViewTag]=this.id;node[dojox.grid.util.rowIndexTag]=_b48;this.rowNodes[_b48]=node;return node;},buildRow:function(_b4a,_b4b){this.buildRowContent(_b4a,_b4b);this.styleRow(_b4a,_b4b);},buildRowContent:function(_b4c,_b4d){_b4d.innerHTML=this.content.generateHtml(_b4c,_b4c);if(this.flexCells&&this.contentWidth){_b4d.firstChild.style.width=this.contentWidth;}dojox.grid.util.fire(this,"onAfterRow",[_b4c,this.structure.cells,_b4d]);},rowRemoved:function(_b4e){this.grid.edit.save(this,_b4e);delete this.rowNodes[_b4e];},getRowNode:function(_b4f){return this.rowNodes[_b4f];},getCellNode:function(_b50,_b51){var row=this.getRowNode(_b50);if(row){return this.content.getCellNode(row,_b51);}},getHeaderCellNode:function(_b53){if(this.headerContentNode){return this.header.getCellNode(this.headerContentNode,_b53);}},styleRow:function(_b54,_b55){_b55._style=_b01(_b55);this.styleRowNode(_b54,_b55);},styleRowNode:function(_b56,_b57){if(_b57){this.doStyleRowNode(_b56,_b57);}},doStyleRowNode:function(_b58,_b59){this.grid.styleRowNode(_b58,_b59);},updateRow:function(_b5a){var _b5b=this.getRowNode(_b5a);if(_b5b){_b5b.style.height="";this.buildRow(_b5a,_b5b);}return _b5b;},updateRowStyles:function(_b5c){this.styleRowNode(_b5c,this.getRowNode(_b5c));},lastTop:0,firstScroll:0,doscroll:function(_b5d){var _b5e=dojo._isBodyLtr();if(this.firstScroll<2){if((!_b5e&&this.firstScroll==1)||(_b5e&&this.firstScroll==0)){var s=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE){this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px";}else{if(dojo.isMoz){this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=_b5e?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth;}}}this.firstScroll++;}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;if(top!=this.lastTop){this.grid.scrollTo(top);}},setScrollTop:function(_b61){this.lastTop=_b61;this.scrollboxNode.scrollTop=_b61;return this.scrollboxNode.scrollTop;},doContentEvent:function(e){if(this.content.decorateEvent(e)){this.grid.onContentEvent(e);}},doHeaderEvent:function(e){if(this.header.decorateEvent(e)){this.grid.onHeaderEvent(e);}},dispatchContentEvent:function(e){return this.content.dispatchEvent(e);},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e);},setColWidth:function(_b66,_b67){this.grid.setCellWidth(_b66,_b67+"px");},update:function(){this.content.update();this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left;this.headerNode.scrollLeft=left;}});dojo.declare("dojox.grid._GridAvatar",dojo.dnd.Avatar,{construct:function(){var dd=dojo.doc;var a=dd.createElement("table");a.cellPadding=a.cellSpacing="0";a.className="dojoxGridDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dd.createElement("tbody");var tr=dd.createElement("tr");var td=dd.createElement("td");var img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem";img.className="dojoxGridDndAvatarItemImage";img.style.width="16px";var _b6f=this.manager.source,node;if(_b6f.creator){node=_b6f._normailzedCreator(_b6f.getItem(this.manager.nodes[0].id).data,"avatar").node;}else{node=this.manager.nodes[0].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _b71=dd.createElement("table"),_b72=dd.createElement("tbody");_b72.appendChild(node);_b71.appendChild(_b72);node=_b71;}else{if(node.tagName.toLowerCase()=="th"){var _b71=dd.createElement("table"),_b72=dd.createElement("tbody"),r=dd.createElement("tr");_b71.cellPadding=_b71.cellSpacing="0";r.appendChild(node);_b72.appendChild(r);_b71.appendChild(_b72);node=_b71;}}}node.id="";td.appendChild(node);tr.appendChild(img);tr.appendChild(td);dojo.style(tr,"opacity",0.9);b.appendChild(tr);a.appendChild(b);this.node=a;var m=dojo.dnd.manager();this.oldOffsetY=m.OFFSET_Y;m.OFFSET_Y=1;},destroy:function(){dojo.dnd.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments);}});var _b75=dojo.dnd.manager().makeAvatar;dojo.dnd.manager().makeAvatar=function(){var src=this.source;if(src.viewIndex!==undefined){return new dojox.grid._GridAvatar(this);}return _b75.call(dojo.dnd.manager());};})();}if(!dojo._hasResource["dojox.grid._RowSelector"]){dojo._hasResource["dojox.grid._RowSelector"]=true;dojo.provide("dojox.grid._RowSelector");dojo.declare("dojox.grid._RowSelector",dojox.grid._View,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden";},getWidth:function(){return this.viewWidth||this.defaultWidth;},buildRowContent:function(_b77,_b78){var w=this.contentNode.offsetWidth-this.padBorderWidth;_b78.innerHTML="<table class=\"dojoxGridRowbarTable\" style=\"width:"+w+"px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\""+(dojo.isFF<3?"wairole:":"")+"presentation\"><tr><td class=\"dojoxGridRowbarInner\">&nbsp;</td></tr></table>";},renderHeader:function(){},resize:function(){this.adaptHeight();},adaptWidth:function(){},doStyleRowNode:function(_b7a,_b7b){var n=["dojoxGridRowbar"];if(this.grid.rows.isOver(_b7a)){n.push("dojoxGridRowbarOver");}if(this.grid.selection.isSelected(_b7a)){n.push("dojoxGridRowbarSelected");}_b7b.className=n.join(" ");},domouseover:function(e){this.grid.onMouseOverRow(e);},domouseout:function(e){if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}});}if(!dojo._hasResource["dojox.grid._Layout"]){dojo._hasResource["dojox.grid._Layout"]=true;dojo.provide("dojox.grid._Layout");dojo.declare("dojox.grid._Layout",null,{constructor:function(_b7f){this.grid=_b7f;},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(_b80,_b81,_b82,_b83,_b84){var _b85=this.structure[_b80].cells[0];var _b86=this.structure[_b81].cells[0];var cell=null;var _b88=0;var _b89=0;for(var i=0,c;c=_b85[i];i++){if(c.index==_b82){_b88=i;break;}}cell=_b85.splice(_b88,1)[0];cell.view=this.grid.views.views[_b81];for(i=0,c=null;c=_b86[i];i++){if(c.index==_b83){_b89=i;break;}}if(!_b84){_b89+=1;}_b86.splice(_b89,0,cell);var _b8c=this.grid.getCell(this.grid.getSortIndex());if(_b8c){_b8c._currentlySorted=this.grid.getSortAsc();}this.cells=[];var _b82=0;for(var i=0,v;v=this.structure[i];i++){for(var j=0,cs;cs=v.cells[j];j++){for(var k=0,c;c=cs[k];k++){c.index=_b82;this.cells.push(c);if("_currentlySorted" in c){var si=_b82+1;si*=c._currentlySorted?1:-1;this.grid.sortInfo=si;delete c._currentlySorted;}_b82++;}}}this.grid.setupHeaderMenu();},setColumnVisibility:function(_b92,_b93){var cell=this.cells[_b92];if(cell.hidden==_b93){cell.hidden=!_b93;var v=cell.view,w=v.viewWidth;if(w&&w!="auto"){v._togglingColumn=dojo.marginBox(cell.getHeaderNode()).w||0;}v.update();return true;}else{return false;}},addCellDef:function(_b97,_b98,_b99){var self=this;var _b9b=function(_b9c){var w=0;if(_b9c.colSpan>1){w=0;}else{w=_b9c.width||self._defaultCellProps.width||self.defaultWidth;if(!isNaN(w)){w=w+"em";}}return w;};var _b9e={grid:this.grid,subrow:_b97,layoutIndex:_b98,index:this.cells.length};if(_b99&&_b99 instanceof dojox.grid.cells._Base){var _b9f=dojo.clone(_b99);_b9e.unitWidth=_b9b(_b9f._props);_b9f=dojo.mixin(_b9f,this._defaultCellProps,_b99._props,_b9e);return _b9f;}var _ba0=_b99.type||this._defaultCellProps.type||dojox.grid.cells.Cell;_b9e.unitWidth=_b9b(_b99);return new _ba0(dojo.mixin({},this._defaultCellProps,_b99,_b9e));},addRowDef:function(_ba1,_ba2){var _ba3=[];var _ba4=0,_ba5=0,_ba6=true;for(var i=0,def,cell;(def=_ba2[i]);i++){cell=this.addCellDef(_ba1,i,def);_ba3.push(cell);this.cells.push(cell);if(_ba6&&cell.relWidth){_ba4+=cell.relWidth;}else{if(cell.width){var w=cell.width;if(typeof w=="string"&&w.slice(-1)=="%"){_ba5+=window.parseInt(w,10);}else{if(w=="auto"){_ba6=false;}}}}}if(_ba4&&_ba6){dojo.forEach(_ba3,function(cell){if(cell.relWidth){cell.width=cell.unitWidth=((cell.relWidth/_ba4)*(100-_ba5))+"%";}});}return _ba3;},addRowsDef:function(_bac){var _bad=[];if(dojo.isArray(_bac)){if(dojo.isArray(_bac[0])){for(var i=0,row;_bac&&(row=_bac[i]);i++){_bad.push(this.addRowDef(i,row));}}else{_bad.push(this.addRowDef(0,_bac));}}return _bad;},addViewDef:function(_bb0){this._defaultCellProps=_bb0.defaultCell||{};if(_bb0.width&&_bb0.width=="auto"){delete _bb0.width;}return dojo.mixin({},_bb0,{cells:this.addRowsDef(_bb0.rows||_bb0.cells)});},setStructure:function(_bb1){this.fieldIndex=0;this.cells=[];var s=this.structure=[];if(this.grid.rowSelector){var sel={type:dojox._scopeName+".grid._RowSelector"};if(dojo.isString(this.grid.rowSelector)){var _bb4=this.grid.rowSelector;if(_bb4=="false"){sel=null;}else{if(_bb4!="true"){sel["width"]=_bb4;}}}else{if(!this.grid.rowSelector){sel=null;}}if(sel){s.push(this.addViewDef(sel));}}var _bb5=function(def){return ("name" in def||"field" in def||"get" in def);};var _bb7=function(def){if(dojo.isArray(def)){if(dojo.isArray(def[0])||_bb5(def[0])){return true;}}return false;};var _bb9=function(def){return (def!=null&&dojo.isObject(def)&&("cells" in def||"rows" in def||("type" in def&&!_bb5(def))));};if(dojo.isArray(_bb1)){var _bbb=false;for(var i=0,st;(st=_bb1[i]);i++){if(_bb9(st)){_bbb=true;break;}}if(!_bbb){s.push(this.addViewDef({cells:_bb1}));}else{for(var i=0,st;(st=_bb1[i]);i++){if(_bb7(st)){s.push(this.addViewDef({cells:st}));}else{if(_bb9(st)){s.push(this.addViewDef(st));}}}}}else{if(_bb9(_bb1)){s.push(this.addViewDef(_bb1));}}this.cellCount=this.cells.length;this.grid.setupHeaderMenu();}});}if(!dojo._hasResource["dojox.grid._ViewManager"]){dojo._hasResource["dojox.grid._ViewManager"]=true;dojo.provide("dojox.grid._ViewManager");dojo.declare("dojox.grid._ViewManager",null,{constructor:function(_bbe){this.grid=_bbe;},defaultWidth:200,views:[],resize:function(){this.onEach("resize");},render:function(){this.onEach("render");},addView:function(_bbf){_bbf.idx=this.views.length;this.views.push(_bbf);},destroyViews:function(){for(var i=0,v;v=this.views[i];i++){v.destroy();}this.views=[];},getContentNodes:function(){var _bc2=[];for(var i=0,v;v=this.views[i];i++){_bc2.push(v.contentNode);}return _bc2;},forEach:function(_bc5){for(var i=0,v;v=this.views[i];i++){_bc5(v,i);}},onEach:function(_bc8,_bc9){_bc9=_bc9||[];for(var i=0,v;v=this.views[i];i++){if(_bc8 in v){v[_bc8].apply(v,_bc9);}}},normalizeHeaderNodeHeight:function(){var _bcc=[];for(var i=0,v;(v=this.views[i]);i++){if(v.headerContentNode.firstChild){_bcc.push(v.headerContentNode);}}this.normalizeRowNodeHeights(_bcc);},normalizeRowNodeHeights:function(_bcf){var h=0;for(var i=0,n,o;(n=_bcf[i]);i++){h=Math.max(h,dojo.marginBox(n.firstChild).h);}h=(h>=0?h:0);for(var i=0,n;(n=_bcf[i]);i++){dojo.marginBox(n.firstChild,{h:h});}if(_bcf&&_bcf[0]&&_bcf[0].parentNode){_bcf[0].parentNode.offsetHeight;}},resetHeaderNodeHeight:function(){for(var i=0,v,n;(v=this.views[i]);i++){n=v.headerContentNode.firstChild;if(n){n.style.height="";}}},renormalizeRow:function(_bd7){var _bd8=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(_bd7));i++){n.firstChild.style.height="";_bd8.push(n);}this.normalizeRowNodeHeights(_bd8);},getViewWidth:function(_bdc){return this.views[_bdc].getWidth()||this.defaultWidth;},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(_bdd){_bdd.headerContentNode.style.height="";});var h=0;this.forEach(function(_bdf){h=Math.max(_bdf.headerNode.offsetHeight,h);});return h;},measureContent:function(){var h=0;this.forEach(function(_be1){h=Math.max(_be1.domNode.offsetHeight,h);});return h;},findClient:function(_be2){var c=this.grid.elasticView||-1;if(c<0){for(var i=1,v;(v=this.views[i]);i++){if(v.viewWidth){for(i=1;(v=this.views[i]);i++){if(!v.viewWidth){c=i;break;}}break;}}}if(c<0){c=Math.floor(this.views.length/2);}return c;},arrange:function(l,w){var i,v,vw,len=this.views.length;var c=(w<=0?len:this.findClient());var _bed=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!dojo._isBodyLtr()){ds.right=l+"px";hs.right=l+"px";}else{ds.left=l+"px";hs.left=l+"px";}ds.top=0+"px";hs.top=0;};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_bed(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild){vw=v.getColumnsWidth()+v.getScrollbarWidth();}else{vw=v.domNode.offsetWidth;}l+=vw;}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_bed(v,r);}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_bed(v,l);}return l;},renderRow:function(_bf4,_bf5){var _bf6=[];for(var i=0,v,n,_bfa;(v=this.views[i])&&(n=_bf5[i]);i++){_bfa=v.renderRow(_bf4);n.appendChild(_bfa);_bf6.push(_bfa);}this.normalizeRowNodeHeights(_bf6);},rowRemoved:function(_bfb){this.onEach("rowRemoved",[_bfb]);},updateRow:function(_bfc){for(var i=0,v;v=this.views[i];i++){v.updateRow(_bfc);}this.renormalizeRow(_bfc);},updateRowStyles:function(_bff){this.onEach("updateRowStyles",[_bff]);},setScrollTop:function(_c00){var top=_c00;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(_c00);if(dojo.isIE&&v.headerNode&&v.scrollboxNode){v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft;}}return top;},getFirstScrollingView:function(){for(var i=0,v;(v=this.views[i]);i++){if(v.hasHScrollbar()||v.hasVScrollbar()){return v;}}}});}if(!dojo._hasResource["dojox.grid._RowManager"]){dojo._hasResource["dojox.grid._RowManager"]=true;dojo.provide("dojox.grid._RowManager");(function(){var _c06=function(_c07,_c08){if(_c07.style.cssText==undefined){_c07.setAttribute("style",_c08);}else{_c07.style.cssText=_c08;}};dojo.declare("dojox.grid._RowManager",null,{constructor:function(_c09){this.grid=_c09;},linesToEms:2,overRow:-2,prepareStylingRow:function(_c0a,_c0b){return {index:_c0a,node:_c0b,odd:Boolean(_c0a&1),selected:this.grid.selection.isSelected(_c0a),over:this.isOver(_c0a),customStyles:"",customClasses:"dojoxGridRow"};},styleRowNode:function(_c0c,_c0d){var row=this.prepareStylingRow(_c0c,_c0d);this.grid.onStyleRow(row);this.applyStyles(row);},applyStyles:function(_c0f){var i=_c0f;i.node.className=i.customClasses;var h=i.node.style.height;_c06(i.node,i.customStyles+";"+(i.node._style||""));i.node.style.height=h;},updateStyles:function(_c12){this.grid.updateRowStyles(_c12);},setOverRow:function(_c13){var last=this.overRow;this.overRow=_c13;if((last!=this.overRow)&&(last>=0)){this.updateStyles(last);}this.updateStyles(this.overRow);},isOver:function(_c15){return (this.overRow==_c15);}});})();}if(!dojo._hasResource["dojox.grid._FocusManager"]){dojo._hasResource["dojox.grid._FocusManager"]=true;dojo.provide("dojox.grid._FocusManager");dojo.declare("dojox.grid._FocusManager",null,{constructor:function(_c16){this.grid=_c16;this.cell=null;this.rowIndex=-1;this._connects=[];this._connects.push(dojo.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(dojo.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(dojo.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(dojo.connect(this.grid,"postrender",this,"_delayedHeaderFocus"));},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);delete this.grid;delete this.cell;},_colHeadNode:null,_colHeadFocusIdx:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView;this._initColumnHeaders();},isFocusCell:function(_c17,_c18){return (this.cell==_c17)&&(this.rowIndex==_c18);},isLastFocusCell:function(){if(this.cell){return (this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1);}return false;},isFirstFocusCell:function(){if(this.cell){return (this.rowIndex==0)&&(this.cell.index==0);}return false;},isNoFocusCell:function(){return (this.rowIndex<0)||!this.cell;},isNavHeader:function(){return (!!this._colHeadNode);},getHeaderIndex:function(){if(this._colHeadNode){return dojo.indexOf(this._findHeaderCells(),this._colHeadNode);}else{return -1;}},_focusifyCellNode:function(_c19){var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){dojo.toggleClass(n,this.focusClass,_c19);if(_c19){var sl=this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.util.fire(n,"focus");if(sl){this.cell.view.scrollboxNode.scrollLeft=sl;}}}catch(e){}}}},_delayedCellFocus:function(){if(this.isNavHeader()){return;}var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){try{if(!this.grid.edit.isEditing()){dojo.toggleClass(n,this.focusClass,true);dojox.grid.util.fire(n,"focus");}}catch(e){}}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();}},_initColumnHeaders:function(){this._connects.push(dojo.connect(this.grid.viewsHeaderNode,"onblur",this,"doBlurHeader"));var _c1d=this._findHeaderCells();for(var i=0;i<_c1d.length;i++){this._connects.push(dojo.connect(_c1d[i],"onfocus",this,"doColHeaderFocus"));this._connects.push(dojo.connect(_c1d[i],"onblur",this,"doColHeaderBlur"));}},_findHeaderCells:function(){var _c1f=dojo.query("th",this.grid.viewsHeaderNode);var _c20=[];for(var i=0;i<_c1f.length;i++){var _c22=_c1f[i];var _c23=dojo.hasAttr(_c22,"tabindex");var _c24=dojo.attr(_c22,"tabindex");if(_c23&&_c24<0){_c20.push(_c22);}}return _c20;},scrollIntoView:function(){var info=(this.cell?this._scrollInfo(this.cell):null);if(!info||!info.s){return null;}var rt=this.grid.scroller.findScrollTop(this.rowIndex);if(info.n&&info.sr){if(info.n.offsetLeft+info.n.offsetWidth>info.sr.l+info.sr.w){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}}}if(info.r&&info.sr){if(rt+info.r.offsetHeight>info.sr.t+info.sr.h){this.grid.setScrollTop(rt+info.r.offsetHeight-info.sr.h);}else{if(rt<info.sr.t){this.grid.setScrollTop(rt);}}}return info.s.scrollLeft;},_scrollInfo:function(cell,_c28){if(cell){var cl=cell,sbn=cl.view.scrollboxNode,sbnr={w:sbn.clientWidth,l:sbn.scrollLeft,t:sbn.scrollTop,h:sbn.clientHeight},rn=cl.view.getRowNode(this.rowIndex);return {c:cl,s:sbn,sr:sbnr,n:(_c28?_c28:cell.getNode(this.rowIndex)),r:rn};}return null;},_scrollHeader:function(_c2d){var info=null;if(this._colHeadNode){var cell=this.grid.getCell(_c2d);info=this._scrollInfo(cell,cell.getNode(0));}if(info&&info.s&&info.sr&&info.n){var _c30=info.sr.l+info.sr.w;if(info.n.offsetLeft+info.n.offsetWidth>_c30){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}else{if(dojo.isIE<=7&&cell&&cell.view.headerNode){cell.view.headerNode.scrollLeft=info.s.scrollLeft;}}}}},styleRow:function(_c31){return;},setFocusIndex:function(_c32,_c33){this.setFocusCell(this.grid.getCell(_c33),_c32);},setFocusCell:function(_c34,_c35){if(_c34&&!this.isFocusCell(_c34,_c35)){this.tabbingOut=false;this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=_c34;this.rowIndex=_c35;this._focusifyCellNode(true);}if(dojo.isOpera){setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);}else{this.grid.onCellFocus(this.cell,this.rowIndex);}},next:function(){if(this.cell){var row=this.rowIndex,col=this.cell.index+1,cc=this.grid.layout.cellCount-1,rc=this.grid.rowCount-1;if(col>cc){col=0;row++;}if(row>rc){col=cc;row=rc;}if(this.grid.edit.isEditing()){var _c3a=this.grid.getCell(col);if(!this.isLastFocusCell()&&!_c3a.editable){this.cell=_c3a;this.rowIndex=row;this.next();return;}}this.setFocusIndex(row,col);}},previous:function(){if(this.cell){var row=(this.rowIndex||0),col=(this.cell.index||0)-1;if(col<0){col=this.grid.layout.cellCount-1;row--;}if(row<0){row=0;col=0;}if(this.grid.edit.isEditing()){var _c3d=this.grid.getCell(col);if(!this.isFirstFocusCell()&&!_c3d.editable){this.cell=_c3d;this.rowIndex=row;this.previous();return;}}this.setFocusIndex(row,col);}},move:function(_c3e,_c3f){if(this.isNavHeader()){var _c40=this._findHeaderCells();var _c41=dojo.indexOf(_c40,this._colHeadNode);_c41+=_c3f;if((_c41>=0)&&(_c41<_c40.length)){this._colHeadNode=_c40[_c41];this._colHeadFocusIdx=_c41;this._scrollHeader(_c41);this._colHeadNode.focus();}}else{if(this.cell){var sc=this.grid.scroller,r=this.rowIndex,rc=this.grid.rowCount-1,row=Math.min(rc,Math.max(0,r+_c3e));if(_c3e){if(_c3e>0){if(row>sc.getLastPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(r));}}else{if(_c3e<0){if(row<=sc.getPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(row));}}}}var cc=this.grid.layout.cellCount-1,i=this.cell.index,col=Math.min(cc,Math.max(0,i+_c3f));this.setFocusIndex(row,col);if(_c3e){this.grid.updateRow(r);}}}},previousKey:function(e){if(this.grid.edit.isEditing()){dojo.stopEvent(e);this.previous();}else{if(!this.isNavHeader()){this.focusHeader();dojo.stopEvent(e);}else{this.tabOut(this.grid.domNode);}}},nextKey:function(e){var _c4b=this.grid.rowCount==0;if(e.target===this.grid.domNode){this.focusHeader();dojo.stopEvent(e);}else{if(this.isNavHeader()){this._colHeadNode=this._colHeadFocusIdx=null;if(this.isNoFocusCell()&&!_c4b){this.setFocusIndex(0,0);}else{if(this.cell&&!_c4b){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);}this.focusGrid();}else{this.tabOut(this.grid.lastFocusNode);}}}else{if(this.grid.edit.isEditing()){dojo.stopEvent(e);this.next();}else{this.tabOut(this.grid.lastFocusNode);}}}},tabOut:function(_c4c){this.tabbingOut=true;_c4c.focus();},focusGridView:function(){dojox.grid.util.fire(this.focusView,"focus");},focusGrid:function(_c4d){this.focusGridView();this._focusifyCellNode(true);},focusHeader:function(){var _c4e=this._findHeaderCells();if(!this._colHeadFocusIdx){if(this.isNoFocusCell()){this._colHeadFocusIdx=0;}else{this._colHeadFocusIdx=this.cell.index;}}this._colHeadNode=_c4e[this._colHeadFocusIdx];if(this._colHeadNode){dojox.grid.util.fire(this._colHeadNode,"focus");this._focusifyCellNode(false);}},doFocus:function(e){if(e&&e.target!=e.currentTarget){dojo.stopEvent(e);return;}if(!this.tabbingOut){this.focusHeader();}this.tabbingOut=false;dojo.stopEvent(e);},doBlur:function(e){dojo.stopEvent(e);},doBlurHeader:function(e){dojo.stopEvent(e);},doLastNodeFocus:function(e){if(this.tabbingOut){this._focusifyCellNode(false);}else{if(this.grid.rowCount>0){if(this.isNoFocusCell()){this.setFocusIndex(0,0);}this._focusifyCellNode(true);}else{this.focusHeader();}}this.tabbingOut=false;dojo.stopEvent(e);},doLastNodeBlur:function(e){dojo.stopEvent(e);},doColHeaderFocus:function(e){dojo.toggleClass(e.target,this.focusClass,true);this._scrollHeader(this.getHeaderIndex());},doColHeaderBlur:function(e){dojo.toggleClass(e.target,this.focusClass,false);}});}if(!dojo._hasResource["dojox.grid._EditManager"]){dojo._hasResource["dojox.grid._EditManager"]=true;dojo.provide("dojox.grid._EditManager");dojo.declare("dojox.grid._EditManager",null,{constructor:function(_c56){this.grid=_c56;this.connections=[];if(dojo.isIE){this.connections.push(dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus")));}},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect);},cellFocus:function(_c57,_c58){if(this.grid.singleClickEdit||this.isEditRow(_c58)){this.setEditCell(_c57,_c58);}else{this.apply();}if(this.isEditing()||(_c57&&_c57.editable&&_c57.alwaysEditing)){this._focusEditor(_c57,_c58);}},rowClick:function(e){if(this.isEditing()&&!this.isEditRow(e.rowIndex)){this.apply();}},styleRow:function(_c5a){if(_c5a.index==this.info.rowIndex){_c5a.customClasses+=" dojoxGridRowEditing";}},dispatchEvent:function(e){var c=e.cell,ed=(c&&c["editable"])?c:0;return ed&&ed.dispatchEvent(e.dispatch,e);},isEditing:function(){return this.info.rowIndex!==undefined;},isEditCell:function(_c5e,_c5f){return (this.info.rowIndex===_c5e)&&(this.info.cell.index==_c5f);},isEditRow:function(_c60){return this.info.rowIndex===_c60;},setEditCell:function(_c61,_c62){if(!this.isEditCell(_c62,_c61.index)&&this.grid.canEdit&&this.grid.canEdit(_c61,_c62)){this.start(_c61,_c62,this.isEditRow(_c62)||_c61.editable);}},_focusEditor:function(_c63,_c64){dojox.grid.util.fire(_c63,"focus",[_c64]);},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex);}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime();},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0;}},_doCatchBoomerang:function(){if(dojo.isIE){this._catchBoomerang=new Date().getTime()+this._boomerangWindow;}},start:function(_c65,_c66,_c67){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(_c66)){this.applyRowEdit();this.grid.updateRow(_c66);}if(_c67){this.info={cell:_c65,rowIndex:_c66};this.grid.doStartEdit(_c65,_c66);this.grid.updateRow(_c66);}else{this.info={};}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(_c65,_c66);this._doCatchBoomerang();},_editorDo:function(_c68){var c=this.info.cell;c&&c.editable&&c[_c68](this.info.rowIndex);},editorApply:function(){this._editorDo("apply");},editorCancel:function(){this._editorDo("cancel");},applyCellEdit:function(_c6a,_c6b,_c6c){if(this.grid.canEdit(_c6b,_c6c)){this.grid.doApplyCellEdit(_c6a,_c6c,_c6b.field);}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field);},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},save:function(_c6d,_c6e){var c=this.info.cell;if(this.isEditRow(_c6d)&&(!_c6e||c.view==_c6e)&&c.editable){c.save(c,this.info.rowIndex);}},restore:function(_c70,_c71){var c=this.info.cell;if(this.isEditRow(_c71)&&c.view==_c70&&c.editable){c.restore(c,this.info.rowIndex);}}});}if(!dojo._hasResource["dojox.grid.Selection"]){dojo._hasResource["dojox.grid.Selection"]=true;dojo.provide("dojox.grid.Selection");dojo.declare("dojox.grid.Selection",null,{constructor:function(_c73){this.grid=_c73;this.selected=[];this.setMode(_c73.selectionMode);},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(mode){if(this.selected.length){this.deselectAll();}if(mode!="extended"&&mode!="multiple"&&mode!="single"&&mode!="none"){this.mode="extended";}else{this.mode=mode;}},onCanSelect:function(_c75){return this.grid.onCanSelect(_c75);},onCanDeselect:function(_c76){return this.grid.onCanDeselect(_c76);},onSelected:function(_c77){},onDeselected:function(_c78){},onChanging:function(){},onChanged:function(){},isSelected:function(_c79){if(this.mode=="none"){return false;}return this.selected[_c79];},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return -1;}for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_c7c){if(this.mode=="none"){return -1;}for(var i=_c7c+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _c7f=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_c7f.push(i);}}return _c7f;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},_beginUpdate:function(){if(this.updating==0){this.onChanging();}this.updating++;},_endUpdate:function(){this.updating--;if(this.updating==0){this.onChanged();}},select:function(_c84){if(this.mode=="none"){return;}if(this.mode!="multiple"){this.deselectAll(_c84);this.addToSelection(_c84);}else{this.toggleSelect(_c84);}},addToSelection:function(_c85){if(this.mode=="none"){return;}_c85=Number(_c85);if(this.selected[_c85]){this.selectedIndex=_c85;}else{if(this.onCanSelect(_c85)!==false){this.selectedIndex=_c85;this._beginUpdate();this.selected[_c85]=true;this.onSelected(_c85);this._endUpdate();}}},deselect:function(_c86){if(this.mode=="none"){return;}_c86=Number(_c86);if(this.selectedIndex==_c86){this.selectedIndex=-1;}if(this.selected[_c86]){if(this.onCanDeselect(_c86)===false){return;}this._beginUpdate();delete this.selected[_c86];this.onDeselected(_c86);this._endUpdate();}},setSelected:function(_c87,_c88){this[(_c88?"addToSelection":"deselect")](_c87);},toggleSelect:function(_c89){this.setSelected(_c89,!this.selected[_c89]);},_range:function(_c8a,inTo,func){var s=(_c8a>=0?_c8a:inTo),e=inTo;if(s>e){e=s;s=inTo;}for(var i=s;i<=e;i++){func(i);}},selectRange:function(_c90,inTo){this._range(_c90,inTo,dojo.hitch(this,"addToSelection"));},deselectRange:function(_c92,inTo){this._range(_c92,inTo,dojo.hitch(this,"deselect"));},insert:function(_c94){this.selected.splice(_c94,0,false);if(this.selectedIndex>=_c94){this.selectedIndex++;}},remove:function(_c95){this.selected.splice(_c95,1);if(this.selectedIndex>=_c95){this.selectedIndex--;}},deselectAll:function(_c96){for(var i in this.selected){if((i!=_c96)&&(this.selected[i]===true)){this.deselect(i);}}},clickSelect:function(_c98,_c99,_c9a){if(this.mode=="none"){return;}this._beginUpdate();if(this.mode!="extended"){this.select(_c98);}else{var _c9b=this.selectedIndex;if(!_c99){this.deselectAll(_c98);}if(_c9a){this.selectRange(_c9b,_c98);}else{if(_c99){this.toggleSelect(_c98);}else{this.addToSelection(_c98);}}}this._endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,dojo.dnd.getCopyKeyState(e),e.shiftKey);},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate();}});}if(!dojo._hasResource["dojox.grid._Events"]){dojo._hasResource["dojox.grid._Events"]=true;dojo.provide("dojox.grid._Events");dojo.declare("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(e){this.dispatchKeyEvent(e);},onContentEvent:function(e){this.dispatchContentEvent(e);},onHeaderEvent:function(e){this.dispatchHeaderEvent(e);},onStyleRow:function(_ca0){var i=_ca0;i.customClasses+=(i.odd?" dojoxGridRowOdd":"")+(i.selected?" dojoxGridRowSelected":"")+(i.over?" dojoxGridRowOver":"");this.focus.styleRow(_ca0);this.edit.styleRow(_ca0);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var dk=dojo.keys;switch(e.keyCode){case dk.ESCAPE:this.edit.cancel();break;case dk.ENTER:if(!this.edit.isEditing()){var _ca4=this.focus.getHeaderIndex();if(_ca4>=0){this.setSortIndex(_ca4);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.dnd.getCopyKeyState(e),e.shiftKey);}dojo.stopEvent(e);}if(!e.shiftKey){var _ca5=this.edit.isEditing();this.edit.apply();if(!_ca5){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _ca6=this.focus.focusView||this.views.views[0];_ca6.content.decorateEvent(e);this.onRowClick(e);}break;case dk.SPACE:if(!this.edit.isEditing()){var _ca4=this.focus.getHeaderIndex();if(_ca4>=0){this.setSortIndex(_ca4);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.dnd.getCopyKeyState(e),e.shiftKey);}dojo.stopEvent(e);}break;case dk.TAB:this.focus[e.shiftKey?"previousKey":"nextKey"](e);break;case dk.LEFT_ARROW:case dk.RIGHT_ARROW:if(!this.edit.isEditing()){dojo.stopEvent(e);var _ca7=(e.keyCode==dk.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){_ca7*=-1;}this.focus.move(0,_ca7);}break;case dk.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!=0){dojo.stopEvent(e);this.focus.move(-1,0);}break;case dk.DOWN_ARROW:if(!this.edit.isEditing()&&this.store&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);this.focus.move(1,0);}break;case dk.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!=0){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0);}}break;case dk.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0);}}break;}},onMouseOver:function(e){e.rowIndex==-1?this.onHeaderCellMouseOver(e):this.onCellMouseOver(e);},onMouseOut:function(e){e.rowIndex==-1?this.onHeaderCellMouseOut(e):this.onCellMouseOut(e);},onMouseDown:function(e){e.rowIndex==-1?this.onHeaderCellMouseDown(e):this.onCellMouseDown(e);},onMouseOverRow:function(e){if(!this.rows.isOver(e.rowIndex)){this.rows.setOverRow(e.rowIndex);e.rowIndex==-1?this.onHeaderMouseOver(e):this.onRowMouseOver(e);}},onMouseOutRow:function(e){if(this.rows.isOver(-1)){this.onHeaderMouseOut(e);}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(e);}}},onMouseDownRow:function(e){if(e.rowIndex!=-1){this.onRowMouseDown(e);}},onCellMouseOver:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.cellOverClass);}},onCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);}},onCellMouseDown:function(e){},onCellClick:function(e){this._click[0]=this._click[1];this._click[1]=e;if(!this.edit.isEditCell(e.rowIndex,e.cellIndex)){this.focus.setFocusCell(e.cell,e.rowIndex);}this.onRowClick(e);},onCellDblClick:function(e){if(dojo.isIE){this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex);}else{if(this._click[0].rowIndex!=this._click[1].rowIndex){this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex);}else{this.edit.setEditCell(e.cell,e.rowIndex);}}this.onRowDblClick(e);},onCellContextMenu:function(e){this.onRowContextMenu(e);},onCellFocus:function(_cb4,_cb5){this.edit.cellFocus(_cb4,_cb5);},onRowClick:function(e){this.edit.rowClick(e);this.selection.clickSelectEvent(e);},onRowDblClick:function(e){},onRowMouseOver:function(e){},onRowMouseOut:function(e){},onRowMouseDown:function(e){},onRowContextMenu:function(e){dojo.stopEvent(e);},onHeaderMouseOver:function(e){},onHeaderMouseOut:function(e){},onHeaderCellMouseOver:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.cellOverClass);}},onHeaderCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);}},onHeaderCellMouseDown:function(e){},onHeaderClick:function(e){},onHeaderCellClick:function(e){this.setSortIndex(e.cell.index);this.onHeaderClick(e);},onHeaderDblClick:function(e){},onHeaderCellDblClick:function(e){this.onHeaderDblClick(e);},onHeaderCellContextMenu:function(e){this.onHeaderContextMenu(e);},onHeaderContextMenu:function(e){if(!this.headerMenu){dojo.stopEvent(e);}},onStartEdit:function(_cc7,_cc8){},onApplyCellEdit:function(_cc9,_cca,_ccb){},onCancelEdit:function(_ccc){},onApplyEdit:function(_ccd){},onCanSelect:function(_cce){return true;},onCanDeselect:function(_ccf){return true;},onSelected:function(_cd0){this.updateRowStyles(_cd0);},onDeselected:function(_cd1){this.updateRowStyles(_cd1);},onSelectionChanged:function(){}});}if(!dojo._hasResource["dojox.grid._Grid"]){dojo._hasResource["dojox.grid._Grid"]=true;dojo.provide("dojox.grid._Grid");(function(){var jobs={cancel:function(_cd3){if(_cd3){clearTimeout(_cd3);}},jobs:[],job:function(_cd4,_cd5,_cd6){jobs.cancelJob(_cd4);var job=function(){delete jobs.jobs[_cd4];_cd6();};jobs.jobs[_cd4]=setTimeout(job,_cd5);},cancelJob:function(_cd8){jobs.cancel(jobs.jobs[_cd8]);}};dojo.declare("dojox.grid._Grid",[dijit._Widget,dijit._Templated,dojox.grid._Events],{templateString:"<div class=\"dojoxGrid\" hidefocus=\"hidefocus\" wairole=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" tabindex=\"-1\" wairole=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" wairole=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n",classTag:"dojoxGrid",get:function(_cd9){},rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,autoHeight:"",autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,sortInfo:0,themeable:true,_placeholders:null,buildRendering:function(){this.inherited(arguments);if(this.get==dojox.grid._Grid.prototype.get){this.get=null;}if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0";}this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");dojox.html.metrics.initOnFontResize();this.connect(dojox.html.metrics,"onFontResize","textSizeChanged");dojox.grid.util.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.util.keyEvents);this.connect(this,"onShow","renderOnIdle");},postMixInProperties:function(){this.inherited(arguments);var _cda=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_cda);this.errorMessage=dojo.string.substitute(this.errorMessage,_cda);if(this.srcNodeRef&&this.srcNodeRef.style.height){this.height=this.srcNodeRef.style.height;}this._setAutoHeightAttr(this.autoHeight,true);},postCreate:function(){this.styleChanged=this._styleChanged;this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.scroller){this.scroller.destroy();delete this.scroller;}if(this.focus){this.focus.destroy();delete this.focus;}if(this.headerMenu&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true);});this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.inherited(arguments);},_setAutoHeightAttr:function(ah,_cdd){if(typeof ah=="string"){if(!ah||ah=="false"){ah=false;}else{if(ah=="true"){ah=true;}else{ah=window.parseInt(ah,10);}}}if(typeof ah=="number"){if(isNaN(ah)){ah=false;}if(ah<0){ah=true;}else{if(ah===0){ah=false;}}}this.autoHeight=ah;if(typeof ah=="boolean"){this._autoHeight=ah;}else{if(typeof ah=="number"){this._autoHeight=(ah>=this.attr("rowCount"));}else{this._autoHeight=false;}}if(this._started&&!_cdd){this.render();}},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount;},styleChanged:function(){this.setStyledClass(this.domNode,"");},_styleChanged:function(){this.styleChanged();this.update();},textSizeChanged:function(){setTimeout(dojo.hitch(this,"_textSizeChanged"),1);},_textSizeChanged:function(){if(this.domNode){this.views.forEach(function(v){v.content.update();});this.render();}},sizeChange:function(){jobs.job(this.id+"SizeChange",50,dojo.hitch(this,"update"));},renderOnIdle:function(){setTimeout(dojo.hitch(this,"render"),1);},createManagers:function(){this.rows=new dojox.grid._RowManager(this);this.focus=new dojox.grid._FocusManager(this);this.edit=new dojox.grid._EditManager(this);},createSelection:function(){this.selection=new dojox.grid.Selection(this);},createScroller:function(){this.scroller=new dojox.grid._Scroller();this.scroller.grid=this;this.scroller._pageIdPrefix=this.id+"-";this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved");},createLayout:function(){this.layout=new dojox.grid._Layout(this);this.connect(this.layout,"moveColumn","onMoveColumn");},onMoveColumn:function(){this.render();this._resize();},createViews:function(){this.views=new dojox.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView");},createView:function(_cdf,idx){var c=dojo.getObject(_cdf);var view=new c({grid:this,index:idx});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);return view;},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView(vs.type||dojox._scopeName+".grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},_setStructureAttr:function(_ce5){var s=_ce5;if(s&&dojo.isString(s)){dojo.deprecated("dojox.grid._Grid.attr('structure', 'objVar')","use dojox.grid._Grid.attr('structure', objVar) instead","2.0");s=dojo.getObject(s);}this.structure=s;if(!s){if(this.layout.structure){s=this.layout.structure;}else{return;}}this.views.destroyViews();if(s!==this.layout.structure){this.layout.setStructure(s);}this._structureChanged();},setStructure:function(_ce7){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.attr('structure', obj) instead.","2.0");this._setStructureAttr(_ce7);},getColumnTogglingItems:function(){return dojo.map(this.layout.cells,function(cell){if(!cell.menuItems){cell.menuItems=[];}var self=this;var item=new dijit.CheckedMenuItem({label:cell.name,checked:!cell.hidden,_gridCell:cell,onChange:function(_ceb){if(self.layout.setColumnVisibility(this._gridCell.index,_ceb)){var _cec=this._gridCell.menuItems;if(_cec.length>1){dojo.forEach(_cec,function(item){if(item!==this){item.setAttribute("checked",_ceb);}},this);}var _ceb=dojo.filter(self.layout.cells,function(c){if(c.menuItems.length>1){dojo.forEach(c.menuItems,"item.attr('disabled', false);");}else{c.menuItems[0].attr("disabled",false);}return !c.hidden;});if(_ceb.length==1){dojo.forEach(_ceb[0].menuItems,"item.attr('disabled', true);");}}},destroy:function(){var _cef=dojo.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(_cef,1);delete this._gridCell;dijit.CheckedMenuItem.prototype.destroy.apply(this,arguments);}});cell.menuItems.push(item);return item;},this);},_setHeaderMenuAttr:function(menu){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true);});this._placeholders=[];}if(this.headerMenu){this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.headerMenu=menu;if(!menu){return;}this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders){this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel);}},setHeaderMenu:function(menu){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.attr('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(menu);},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){if(p._replaced){p.unReplace(true);}p.replace(this.getColumnTogglingItems());},this);}},_fetch:function(_cf4){this.setScrollTop(0);},getItem:function(_cf5){return null;},showMessage:function(_cf6){if(_cf6){this.messagesNode.innerHTML=_cf6;this.messagesNode.style.display="";}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none";}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started){this.render();}},hasLayout:function(){return this.layout.cells.length;},resize:function(_cf7,_cf8){this._resize(_cf7,_cf8);this.sizeChange();},_getPadBorder:function(){this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode);return this._padBorder;},_getHeaderHeight:function(){var vns=this.viewsHeaderNode.style,t=vns.display=="none"?0:this.views.measureHeader();vns.height=t+"px";this.views.normalizeHeaderNodeHeight();return t;},_resize:function(_cfb,_cfc){var pn=this.domNode.parentNode;if(!pn||pn.nodeType!=1||!this.hasLayout()||pn.style.visibility=="hidden"||pn.style.display=="none"){return;}var _cfe=this._getPadBorder();var hh=0;if(this._autoHeight){this.domNode.style.height="auto";this.viewsNode.style.height="";}else{if(typeof this.autoHeight=="number"){var h=hh=this._getHeaderHeight();h+=(this.scroller.averageRowHeight*this.autoHeight);this.domNode.style.height=h+"px";}else{if(this.flex>0){}else{if(this.domNode.clientHeight<=_cfe.h){if(pn==document.body){this.domNode.style.height=this.defaultHeight;}else{if(this.height){this.domNode.style.height=this.height;}else{this.fitTo="parent";}}}}}}if(_cfc){_cfb=_cfc;}if(_cfb){dojo.marginBox(this.domNode,_cfb);this.height=this.domNode.style.height;delete this.fitTo;}else{if(this.fitTo=="parent"){var h=dojo._getContentBox(pn).h;dojo.marginBox(this.domNode,{h:Math.max(0,h)});}}var h=dojo._getContentBox(this.domNode).h;if(h==0&&!this._autoHeight){this.viewsHeaderNode.style.display="none";}else{this.viewsHeaderNode.style.display="block";hh=this._getHeaderHeight();}this.adaptWidth();this.adaptHeight(hh);this.postresize();},adaptWidth:function(){var w=this.autoWidth?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w),vw=this.views.arrange(1,w);this.views.onEach("adaptWidth");if(this.autoWidth){this.domNode.style.width=vw+"px";}},adaptHeight:function(_d03){var t=_d03||this._getHeaderHeight();var h=(this._autoHeight?-1:Math.max(this.domNode.clientHeight-t,0)||0);this.views.onEach("setSize",[0,h]);this.views.onEach("adaptHeight");if(!this._autoHeight){var _d06=0,_d07=0;var _d08=dojo.filter(this.views.views,function(v){var has=v.hasHScrollbar();if(has){_d06++;}else{_d07++;}return (!has);});if(_d06>0&&_d07>0){dojo.forEach(_d08,function(v){v.adaptHeight(true);});}}if(this.autoHeight===true||h!=-1||(typeof this.autoHeight=="number"&&this.autoHeight>=this.attr("rowCount"))){this.scroller.windowHeight=h;}else{this.scroller.windowHeight=Math.max(this.domNode.clientHeight-t,0);}},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.autoRender){this.render();}},render:function(){if(!this.domNode){return;}if(!this._started){return;}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return;}this.update=this.defaultUpdate;this._render();},_render:function(){this.scroller.init(this.attr("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender();},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize();},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,this.selectable);},postresize:function(){if(this._autoHeight){var size=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=size;}},renderRow:function(_d0d,_d0e){this.views.renderRow(_d0d,_d0e);},rowRemoved:function(_d0f){this.views.rowRemoved(_d0f);},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true;},endUpdate:function(){this.updating=false;var i=this.invalidated,r;if(i.all){this.update();}else{if(i.rowCount!=undefined){this.updateRowCount(i.rowCount);}else{for(r in i){this.updateRow(Number(r));}}}this.invalidated=null;},defaultUpdate:function(){if(!this.domNode){return;}if(this.updating){this.invalidated.all=true;return;}var _d12=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(_d12);this.postrender();},update:function(){this.render();},updateRow:function(_d13){_d13=Number(_d13);if(this.updating){this.invalidated[_d13]=true;}else{this.views.updateRow(_d13);this.scroller.rowHeightChanged(_d13);}},updateRows:function(_d14,_d15){_d14=Number(_d14);_d15=Number(_d15);if(this.updating){for(var i=0;i<_d15;i++){this.invalidated[i+_d14]=true;}}else{for(var i=0;i<_d15;i++){this.views.updateRow(i+_d14);}this.scroller.rowHeightChanged(_d14);}},updateRowCount:function(_d17){if(this.updating){this.invalidated.rowCount=_d17;}else{this.rowCount=_d17;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(_d17);}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop);}}},updateRowStyles:function(_d18){this.views.updateRowStyles(_d18);},rowHeightChanged:function(_d19){this.views.renormalizeRow(_d19);this.scroller.rowHeightChanged(_d19);},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(dojo.isIE?100:50),scrollTo:function(_d1a){if(!this.fastScroll){this.setScrollTop(_d1a);return;}var _d1b=Math.abs(this.lastScrollTop-_d1a);this.lastScrollTop=_d1a;if(_d1b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=_d1a;this.views.setScrollTop(_d1a);jobs.job("dojoxGridScroll",200,dojo.hitch(this,"finishScrollJob"));}else{this.setScrollTop(_d1a);}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop);},setScrollTop:function(_d1c){this.scroller.scroll(this.views.setScrollTop(_d1c));},scrollToRow:function(_d1d){this.setScrollTop(this.scroller.findScrollTop(_d1d)+1);},styleRowNode:function(_d1e,_d1f){if(_d1f){this.rows.styleRowNode(_d1e,_d1f);}},_mouseOut:function(e){this.rows.setOverRow(-2);},getCell:function(_d21){return this.layout.cells[_d21];},setCellWidth:function(_d22,_d23){this.getCell(_d22).unitWidth=_d23;},getCellName:function(_d24){return "Cell "+_d24.index;},canSort:function(_d25){},sort:function(){},getSortAsc:function(_d26){_d26=_d26==undefined?this.sortInfo:_d26;return Boolean(_d26>0);},getSortIndex:function(_d27){_d27=_d27==undefined?this.sortInfo:_d27;return Math.abs(_d27)-1;},setSortIndex:function(_d28,_d29){var si=_d28+1;if(_d29!=undefined){si*=(_d29?1:-1);}else{if(this.getSortIndex()==_d28){si=-this.sortInfo;}}this.setSortInfo(si);},setSortInfo:function(_d2b){if(this.canSort(_d2b)){this.sortInfo=_d2b;this.sort();this.update();}},doKeyEvent:function(e){e.dispatch="do"+e.type;this.onKeyEvent(e);},_dispatch:function(m,e){if(m in this){return this[m](e);}},dispatchKeyEvent:function(e){this._dispatch(e.dispatch,e);},dispatchContentEvent:function(e){this.edit.dispatchEvent(e)||e.sourceView.dispatchContentEvent(e)||this._dispatch(e.dispatch,e);},dispatchHeaderEvent:function(e){e.sourceView.dispatchHeaderEvent(e)||this._dispatch("doheader"+e.type,e);},dokeydown:function(e){this.onKeyDown(e);},doclick:function(e){if(e.cellNode){this.onCellClick(e);}else{this.onRowClick(e);}},dodblclick:function(e){if(e.cellNode){this.onCellDblClick(e);}else{this.onRowDblClick(e);}},docontextmenu:function(e){if(e.cellNode){this.onCellContextMenu(e);}else{this.onRowContextMenu(e);}},doheaderclick:function(e){if(e.cellNode){this.onHeaderCellClick(e);}else{this.onHeaderClick(e);}},doheaderdblclick:function(e){if(e.cellNode){this.onHeaderCellDblClick(e);}else{this.onHeaderDblClick(e);}},doheadercontextmenu:function(e){if(e.cellNode){this.onHeaderCellContextMenu(e);}else{this.onHeaderContextMenu(e);}},doStartEdit:function(_d39,_d3a){this.onStartEdit(_d39,_d3a);},doApplyCellEdit:function(_d3b,_d3c,_d3d){this.onApplyCellEdit(_d3b,_d3c,_d3d);},doCancelEdit:function(_d3e){this.onCancelEdit(_d3e);},doApplyEdit:function(_d3f){this.onApplyEdit(_d3f);},addRow:function(){this.updateRowCount(this.attr("rowCount")+1);},removeSelectedRows:function(){this.updateRowCount(Math.max(0,this.attr("rowCount")-this.selection.getSelected().length));this.selection.clear();}});dojox.grid._Grid.markupFactory=function(_d40,node,ctor,_d43){var d=dojo;var _d45=function(n){var w=d.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w)+"px";}return w;};if(!_d40.structure&&node.nodeName.toLowerCase()=="table"){_d40.structure=d.query("> colgroup",node).map(function(cg){var sv=d.attr(cg,"span");var v={noscroll:(d.attr(cg,"noscroll")=="true")?true:false,__span:(!!sv?parseInt(sv):1),cells:[]};if(d.hasAttr(cg,"width")){v.width=_d45(cg);}return v;});if(!_d40.structure.length){_d40.structure.push({__span:Infinity,cells:[]});}d.query("thead > tr",node).forEach(function(tr,_d4c){var _d4d=0;var _d4e=0;var _d4f;var _d50=null;d.query("> th",tr).map(function(th){if(!_d50){_d4f=0;_d50=_d40.structure[0];}else{if(_d4d>=(_d4f+_d50.__span)){_d4e++;_d4f+=_d50.__span;var _d52=_d50;_d50=_d40.structure[_d4e];}}var cell={name:d.trim(d.attr(th,"name")||th.innerHTML),colSpan:parseInt(d.attr(th,"colspan")||1,10),type:d.trim(d.attr(th,"cellType")||"")};_d4d+=cell.colSpan;var _d54=d.attr(th,"rowspan");if(_d54){cell.rowSpan=_d54;}if(d.hasAttr(th,"width")){cell.width=_d45(th);}if(d.hasAttr(th,"relWidth")){cell.relWidth=window.parseInt(dojo.attr(th,"relWidth"),10);}if(d.hasAttr(th,"hidden")){cell.hidden=d.attr(th,"hidden")=="true";}if(_d43){_d43(th,cell);}cell.type=cell.type?dojo.getObject(cell.type):dojox.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(th,cell);}if(!_d50.cells[_d4c]){_d50.cells[_d4c]=[];}_d50.cells[_d4c].push(cell);});});}return new ctor(_d40,node);};})();}if(!dojo._hasResource["dojox.grid.DataSelection"]){dojo._hasResource["dojox.grid.DataSelection"]=true;dojo.provide("dojox.grid.DataSelection");dojo.declare("dojox.grid.DataSelection",dojox.grid.Selection,{getFirstSelected:function(){var idx=dojox.grid.Selection.prototype.getFirstSelected.call(this);if(idx==-1){return null;}return this.grid.getItem(idx);},getNextSelected:function(_d56){var _d57=this.grid.getItemIndex(_d56);var idx=dojox.grid.Selection.prototype.getNextSelected.call(this,_d57);if(idx==-1){return null;}return this.grid.getItem(idx);},getSelected:function(){var _d59=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_d59.push(this.grid.getItem(i));}}return _d59;},addToSelection:function(_d5c){if(this.mode=="none"){return;}var idx=null;if(typeof _d5c=="number"||typeof _d5c=="string"){idx=_d5c;}else{idx=this.grid.getItemIndex(_d5c);}dojox.grid.Selection.prototype.addToSelection.call(this,idx);},deselect:function(_d5e){if(this.mode=="none"){return;}var idx=null;if(typeof _d5e=="number"||typeof _d5e=="string"){idx=_d5e;}else{idx=this.grid.getItemIndex(_d5e);}dojox.grid.Selection.prototype.deselect.call(this,idx);},deselectAll:function(_d60){var idx=null;if(_d60||typeof _d60=="number"){if(typeof _d60=="number"||typeof _d60=="string"){idx=_d60;}else{idx=this.grid.getItemIndex(_d60);}dojox.grid.Selection.prototype.deselectAll.call(this,idx);}else{this.inherited(arguments);}}});}if(!dojo._hasResource["dojox.grid.DataGrid"]){dojo._hasResource["dojox.grid.DataGrid"]=true;dojo.provide("dojox.grid.DataGrid");dojo.declare("dojox.grid.DataGrid",dojox.grid._Grid,{store:null,query:null,queryOptions:null,fetchText:"...",items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments);},createSelection:function(){this.selection=new dojox.grid.DataSelection(this);},get:function(_d62,_d63){return (!_d63?this.defaultValue:(!this.field?this.value:this.grid.store.getValue(_d63,this.field)));},_onSet:function(item,_d65,_d66,_d67){var idx=this.getItemIndex(item);if(idx>-1){this.updateRow(idx);}},_addItem:function(item,_d6a,_d6b){var idty=this._hasIdentity?this.store.getIdentity(item):dojo.toJson(this.query)+":idx:"+_d6a+":sort:"+dojo.toJson(this.getSortProps());var o={idty:idty,item:item};this._by_idty[idty]=this._by_idx[_d6a]=o;if(!_d6b){this.updateRow(_d6a);}},_onNew:function(item,_d6f){var _d70=this.attr("rowCount");this._addingItem=true;this.updateRowCount(_d70+1);this._addingItem=false;this._addItem(item,_d70);this.showMessage();},_onDelete:function(item){var idx=this._getItemIndex(item,true);if(idx>=0){var o=this._by_idx[idx];this._by_idx.splice(idx,1);delete this._by_idty[o.idty];this.updateRowCount(this.attr("rowCount")-1);if(this.attr("rowCount")===0){this.showMessage(this.noDataMessage);}}},_onRevert:function(){this._refresh();},setStore:function(_d74,_d75,_d76){this._setQuery(_d75,_d76);this._setStore(_d74);this._refresh(true);},setQuery:function(_d77,_d78){this._setQuery(_d77,_d78);this._refresh(true);},setItems:function(_d79){this.items=_d79;this._setStore(this.store);this._refresh(true);},_setQuery:function(_d7a,_d7b){this.query=_d7a;this.queryOptions=_d7b||this.queryOptions;},_setStore:function(_d7c){if(this.store&&this._store_connects){dojo.forEach(this._store_connects,function(arr){dojo.forEach(arr,dojo.disconnect);});}this.store=_d7c;if(this.store){var f=this.store.getFeatures();var h=[];this._canEdit=!!f["dojo.data.api.Write"]&&!!f["dojo.data.api.Identity"];this._hasIdentity=!!f["dojo.data.api.Identity"];if(!!f["dojo.data.api.Notification"]&&!this.items){h.push(this.connect(this.store,"onSet","_onSet"));h.push(this.connect(this.store,"onNew","_onNew"));h.push(this.connect(this.store,"onDelete","_onDelete"));}if(this._canEdit){h.push(this.connect(this.store,"revert","_onRevert"));}this._store_connects=h;}},_onFetchBegin:function(size,req){if(this.rowCount!=size){if(req.isRender){this.scroller.init(size,this.keepRows,this.rowsPerPage);this.rowCount=size;this._setAutoHeightAttr(this.autoHeight,true);this.prerender();}else{this.updateRowCount(size);}}},_onFetchComplete:function(_d82,req){if(_d82&&_d82.length>0){dojo.forEach(_d82,function(item,idx){this._addItem(item,req.start+idx,true);},this);this.updateRows(req.start,_d82.length);if(req.isRender){this.setScrollTop(0);this.postrender();}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop);}}}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;if(!_d82||!_d82.length){this.showMessage(this.noDataMessage);this.focus.initFocusView();}else{this.showMessage();}}this._pending_requests[req.start]=false;},_onFetchError:function(err,req){console.log(err);delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage);}this.onFetchError(err,req);},onFetchError:function(err,req){},_fetch:function(_d8a,_d8b){var _d8a=_d8a||0;if(this.store&&!this._pending_requests[_d8a]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_d8a]=true;try{if(this.items){var _d8c=this.items;var _d8d=this.store;this.rowsPerPage=_d8c.length;var req={start:_d8a,count:this.rowsPerPage,isRender:_d8b};this._onFetchBegin(_d8c.length,req);var _d8f=0;dojo.forEach(_d8c,function(i){if(!_d8d.isItemLoaded(i)){_d8f++;}});if(_d8f===0){this._onFetchComplete(_d8c,req);}else{var _d91=function(item){_d8f--;if(_d8f===0){this._onFetchComplete(_d8c,req);}};dojo.forEach(_d8c,function(i){if(!_d8d.isItemLoaded(i)){_d8d.loadItem({item:i,onItem:_d91,scope:this});}},this);}}else{this.store.fetch({start:_d8a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_d8b,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")});}}catch(e){this._onFetchError(e);}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false;},getItem:function(idx){var data=this._by_idx[idx];if(!data||(data&&!data.item)){this._preparePage(idx);return null;}return data.item;},getItemIndex:function(item){return this._getItemIndex(item,false);},_getItemIndex:function(item,_d98){if(!_d98&&!this.store.isItem(item)){return -1;}var idty=this._hasIdentity?this.store.getIdentity(item):null;for(var i=0,l=this._by_idx.length;i<l;i++){var d=this._by_idx[i];if(d&&((idty&&d.idty==idty)||(d.item===item))){return i;}}return -1;},filter:function(_d9d,_d9e){this.query=_d9d;if(_d9e){this._clearData();}this._fetch();},_getItemAttr:function(idx,attr){var item=this.getItem(idx);return (!item?this.fetchText:this.store.getValue(item,attr));},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.attr("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true);}},_requestsPending:function(_da2){return this._pending_requests[_da2];},_rowToPage:function(_da3){return (this.rowsPerPage?Math.floor(_da3/this.rowsPerPage):_da3);},_pageToRow:function(_da4){return (this.rowsPerPage?this.rowsPerPage*_da4:_da4);},_preparePage:function(_da5){if((_da5<this._bop||_da5>=this._eop)&&!this._addingItem){var _da6=this._rowToPage(_da5);this._needPage(_da6);this._bop=_da6*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.attr("rowCount"));}},_needPage:function(_da7){if(!this._pages[_da7]){this._pages[_da7]=true;this._requestPage(_da7);}},_requestPage:function(_da8){var row=this._pageToRow(_da8);var _daa=Math.min(this.rowsPerPage,this.attr("rowCount")-row);if(_daa>0){this._requests++;if(!this._requestsPending(row)){setTimeout(dojo.hitch(this,"_fetch",row,false),1);}}},getCellName:function(_dab){return _dab.field;},_refresh:function(_dac){this._clearData();this._fetch(0,_dac);},sort:function(){this._lastScrollTop=this.scrollTop;this._refresh();},canSort:function(){return (!this._isLoading);},getSortProps:function(){var c=this.getCell(this.getSortIndex());if(!c){return null;}else{var desc=c["sortDesc"];var si=!(this.sortInfo>0);if(typeof desc=="undefined"){desc=si;}else{desc=si?!desc:desc;}return [{attribute:c.field,descending:desc}];}},styleRowState:function(_db0){if(this.store&&this.store.getState){var _db1=this.store.getState(_db0.index),c="";for(var i=0,ss=["inflight","error","inserting"],s;s=ss[i];i++){if(_db1[s]){c=" dojoxGridRow-"+s;break;}}_db0.customClasses+=c;}},onStyleRow:function(_db6){this.styleRowState(_db6);this.inherited(arguments);},canEdit:function(_db7,_db8){return this._canEdit;},_copyAttr:function(idx,attr){var row={};var _dbc={};var src=this.getItem(idx);return this.store.getValue(src,attr);},doStartEdit:function(_dbe,_dbf){if(!this._cache[_dbf]){this._cache[_dbf]=this._copyAttr(_dbf,_dbe.field);}this.onStartEdit(_dbe,_dbf);},doApplyCellEdit:function(_dc0,_dc1,_dc2){this.store.fetchItemByIdentity({identity:this._by_idx[_dc1].idty,onItem:dojo.hitch(this,function(item){var _dc4=this.store.getValue(item,_dc2);if(typeof _dc4=="number"){_dc0=isNaN(_dc0)?_dc0:parseFloat(_dc0);}else{if(typeof _dc4=="boolean"){_dc0=_dc0=="true"?true:_dc0=="false"?false:_dc0;}else{if(_dc4 instanceof Date){var _dc5=new Date(_dc0);_dc0=isNaN(_dc5.getTime())?_dc0:_dc5;}}}this.store.setValue(item,_dc2,_dc0);this.onApplyCellEdit(_dc0,_dc1,_dc2);})});},doCancelEdit:function(_dc6){var _dc7=this._cache[_dc6];if(_dc7){this.updateRow(_dc6);delete this._cache[_dc6];}this.onCancelEdit.apply(this,arguments);},doApplyEdit:function(_dc8,_dc9){var _dca=this._cache[_dc8];this.onApplyEdit(_dc8);},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var _dcb=this.selection.getSelected();if(_dcb.length){dojo.forEach(_dcb,this.store.deleteItem,this.store);this.selection.clear();}}}});dojox.grid.DataGrid.markupFactory=function(_dcc,node,ctor,_dcf){return dojox.grid._Grid.markupFactory(_dcc,node,ctor,function(node,_dd1){var _dd2=dojo.trim(dojo.attr(node,"field")||"");if(_dd2){_dd1.field=_dd2;}_dd1.field=_dd1.field||_dd1.name;if(_dcf){_dcf(node,_dd1);}});};}if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.io.iframe={create:function(_dd3,_dd4,uri){if(window[_dd3]){return window[_dd3];}if(window.frames[_dd3]){return window.frames[_dd3];}var _dd6=null;var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||dojo.moduleUrl("dojo","resources/blank.html"));}var _dd8=dojo.isIE?"<iframe name=\""+_dd3+"\" src=\""+turi+"\" onload=\""+_dd4+"\">":"iframe";_dd6=dojo.doc.createElement(_dd8);with(_dd6){name=_dd3;setAttribute("name",_dd3);id=_dd3;}dojo.body().appendChild(_dd6);window[_dd3]=_dd6;with(_dd6.style){if(!(dojo.isSafari<3)){position="absolute";}left=top="1px";height=width="1px";visibility="hidden";}if(!dojo.isIE){this.setSrc(_dd6,turi,true);_dd6.onload=new Function(_dd4);}return _dd6;},setSrc:function(_dd9,src,_ddb){try{if(!_ddb){if(dojo.isWebKit){_dd9.location=src;}else{frames[_dd9.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit>521){idoc=_dd9.contentWindow.document;}else{if(dojo.isSafari){idoc=_dd9.document;}else{idoc=_dd9.contentWindow;}}if(!idoc){_dd9.location=src;return;}else{idoc.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_ddd){var doc=_ddd.contentDocument||(((_ddd.name)&&(_ddd.document)&&(document.getElementsByTagName("iframe")[_ddd.name].contentWindow)&&(document.getElementsByTagName("iframe")[_ddd.name].contentWindow.document)))||((_ddd.name)&&(document.frames[_ddd.name])&&(document.frames[_ddd.name].document))||null;return doc;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _de3=null;try{var _de4=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _de7=_de4.handleAs;_de3=ifd;if(_de7!="html"){if(_de7=="xml"){if(dojo.isIE){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _de8=(dii._frame.contentWindow.document).documentElement.innerText;_de8=_de8.replace(/>\s+</g,"><");_de8=dojo.trim(_de8);var _de9={responseText:_de8};_de3=dojo._contentHandlers["xml"](_de9);}}else{_de3=ifd.getElementsByTagName("textarea")[0].value;if(_de7=="json"){_de3=dojo.fromJson(_de3);}else{if(_de7=="javascript"){_de3=dojo.eval(_de3);}}}}}catch(e){_de3=e;}finally{_de4._callNext();}return _de3;},function(_dea,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _dea;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}var dfd=this._currentDfd=this._dfdQueue.shift();var _df0=dfd.ioArgs;var args=_df0.args;_df0._contentToClean=[];var fn=dojo.byId(args["form"]);var _df3=args["content"]||{};if(fn){if(_df3){var _df4=function(name,_df6){var tn;if(dojo.isIE){tn=dojo.doc.createElement("<input type='hidden' name='"+name+"'>");}else{tn=dojo.doc.createElement("input");tn.type="hidden";tn.name=name;}tn.value=_df6;fn.appendChild(tn);_df0._contentToClean.push(name);};for(var x in _df3){var val=_df3[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_df4(x,val[i]);}}else{if(!fn[x]){_df4(x,val);}else{fn[x].value=val;}}}}var _dfb=fn.getAttributeNode("action");var _dfc=fn.getAttributeNode("method");var _dfd=fn.getAttributeNode("target");if(args["url"]){_df0._originalAction=_dfb?_dfb.value:null;if(_dfb){_dfb.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_dfc||!_dfc.value){if(_dfc){_dfc.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_df0._originalTarget=_dfd?_dfd.value:null;if(_dfd){_dfd.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;fn.submit();}else{var _dfe=args.url+(args.url.indexOf("?")>-1?"&":"?")+_df0.query;this.setSrc(this._frame,_dfe,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _e00=dfd.ioArgs;var args=_e00.args;var _e02=dojo.byId(args.form);if(_e02){var _e03=_e00._contentToClean;for(var i=0;i<_e03.length;i++){var key=_e03[i];for(var j=0;j<_e02.childNodes.length;j++){var _e07=_e02.childNodes[j];if(_e07.name==key){dojo.destroy(_e07);break;}}}if(_e00["_originalAction"]){_e02.setAttribute("action",_e00._originalAction);}if(_e00["_originalTarget"]){_e02.setAttribute("target",_e00._originalTarget);_e02.target=_e00._originalTarget;}}_e00._finished=true;}};}if(!dojo._hasResource["dojo.back"]){dojo._hasResource["dojo.back"]=true;dojo.provide("dojo.back");(function(){var back=dojo.back;function _e09(){var h=window.location.hash;if(h.charAt(0)=="#"){h=h.substring(1);}return dojo.isMozilla?h:decodeURIComponent(h);};function _e0b(h){if(!h){h="";}window.location.hash=encodeURIComponent(h);_e0d=history.length;};if(dojo.exists("tests.back-hash")){back.getHash=_e09;back.setHash=_e0b;}var _e0e=(typeof (window)!=="undefined")?window.location.href:"";var _e0f=(typeof (window)!=="undefined")?_e09():"";var _e10=null;var _e11=null;var _e12=null;var _e13=null;var _e14=[];var _e15=[];var _e16=false;var _e17=false;var _e0d;function _e18(){var _e19=_e15.pop();if(!_e19){return;}var last=_e15[_e15.length-1];if(!last&&_e15.length==0){last=_e10;}if(last){if(last.kwArgs["back"]){last.kwArgs["back"]();}else{if(last.kwArgs["backButton"]){last.kwArgs["backButton"]();}else{if(last.kwArgs["handle"]){last.kwArgs.handle("back");}}}}_e14.push(_e19);};back.goBack=_e18;function _e1b(){var last=_e14.pop();if(!last){return;}if(last.kwArgs["forward"]){last.kwArgs.forward();}else{if(last.kwArgs["forwardButton"]){last.kwArgs.forwardButton();}else{if(last.kwArgs["handle"]){last.kwArgs.handle("forward");}}}_e15.push(last);};back.goForward=_e1b;function _e1d(url,args,hash){return {"url":url,"kwArgs":args,"urlHash":hash};};function _e21(url){var _e23=url.split("?");if(_e23.length<2){return null;}else{return _e23[1];}};function _e24(){var url=(dojo.config["dojoIframeHistoryUrl"]||dojo.moduleUrl("dojo","resources/iframe_history.html"))+"?"+(new Date()).getTime();_e16=true;if(_e13){dojo.isWebKit?_e13.location=url:window.frames[_e13.name].location=url;}else{}return url;};function _e26(){if(!_e17){var hsl=_e15.length;var hash=_e09();if((hash===_e0f||window.location.href==_e0e)&&(hsl==1)){_e18();return;}if(_e14.length>0){if(_e14[_e14.length-1].urlHash===hash){_e1b();return;}}if((hsl>=2)&&(_e15[hsl-2])){if(_e15[hsl-2].urlHash===hash){_e18();return;}}if(dojo.isSafari&&dojo.isSafari<3){var _e29=history.length;if(_e29>_e0d){_e1b();}else{if(_e29<_e0d){_e18();}}_e0d=_e29;}}};back.init=function(){if(dojo.byId("dj_history")){return;}var src=dojo.config["dojoIframeHistoryUrl"]||dojo.moduleUrl("dojo","resources/iframe_history.html");document.write("<iframe style=\"border:0;width:1px;height:1px;position:absolute;visibility:hidden;bottom:0;right:0;\" name=\"dj_history\" id=\"dj_history\" src=\""+src+"\"></iframe>");};back.setInitialState=function(args){_e10=_e1d(_e0e,args,_e0f);};back.addToHistory=function(args){_e14=[];var hash=null;var url=null;if(!_e13){if(dojo.config["useXDomain"]&&!dojo.config["dojoIframeHistoryUrl"]){console.warn("dojo.back: When using cross-domain Dojo builds,"+" please save iframe_history.html to your domain and set djConfig.dojoIframeHistoryUrl"+" to the path on your domain to iframe_history.html");}_e13=window.frames["dj_history"];}if(!_e12){_e12=dojo.create("a",{style:{display:"none"}},dojo.body());}if(args["changeUrl"]){hash=""+((args["changeUrl"]!==true)?args["changeUrl"]:(new Date()).getTime());if(_e15.length==0&&_e10.urlHash==hash){_e10=_e1d(url,args,hash);return;}else{if(_e15.length>0&&_e15[_e15.length-1].urlHash==hash){_e15[_e15.length-1]=_e1d(url,args,hash);return;}}_e17=true;setTimeout(function(){_e0b(hash);_e17=false;},1);_e12.href=hash;if(dojo.isIE){url=_e24();var _e2f=args["back"]||args["backButton"]||args["handle"];var tcb=function(_e31){if(_e09()!=""){setTimeout(function(){_e0b(hash);},1);}_e2f.apply(this,[_e31]);};if(args["back"]){args.back=tcb;}else{if(args["backButton"]){args.backButton=tcb;}else{if(args["handle"]){args.handle=tcb;}}}var _e32=args["forward"]||args["forwardButton"]||args["handle"];var tfw=function(_e34){if(_e09()!=""){_e0b(hash);}if(_e32){_e32.apply(this,[_e34]);}};if(args["forward"]){args.forward=tfw;}else{if(args["forwardButton"]){args.forwardButton=tfw;}else{if(args["handle"]){args.handle=tfw;}}}}else{if(!dojo.isIE){if(!_e11){_e11=setInterval(_e26,200);}}}}else{url=_e24();}_e15.push(_e1d(url,args,hash));};back._iframeLoaded=function(evt,_e36){var _e37=_e21(_e36.href);if(_e37==null){if(_e15.length==1){_e18();}return;}if(_e16){_e16=false;return;}if(_e15.length>=2&&_e37==_e21(_e15[_e15.length-2].url)){_e18();}else{if(_e14.length>0&&_e37==_e21(_e14[_e14.length-1].url)){_e1b();}}};})();}if(!dojo._hasResource["dojo.behavior"]){dojo._hasResource["dojo.behavior"]=true;dojo.provide("dojo.behavior");dojo.behavior=new function(){function _e38(obj,name){if(!obj[name]){obj[name]=[];}return obj[name];};var _inc=0;function _e3c(obj,_e3e,func){var _e40={};for(var x in obj){if(typeof _e40[x]=="undefined"){if(!func){_e3e(obj[x],x);}else{func.call(_e3e,obj[x],x);}}}};this._behaviors={};this.add=function(_e42){var _e43={};_e3c(_e42,this,function(_e44,name){var _e46=_e38(this._behaviors,name);if(typeof _e46["id"]!="number"){_e46.id=_inc++;}var _e47=[];_e46.push(_e47);if((dojo.isString(_e44))||(dojo.isFunction(_e44))){_e44={found:_e44};}_e3c(_e44,function(rule,_e49){_e38(_e47,_e49).push(rule);});});};var _e4a=function(node,_e4c,_e4d){if(dojo.isString(_e4c)){if(_e4d=="found"){dojo.publish(_e4c,[node]);}else{dojo.connect(node,_e4d,function(){dojo.publish(_e4c,arguments);});}}else{if(dojo.isFunction(_e4c)){if(_e4d=="found"){_e4c(node);}else{dojo.connect(node,_e4d,_e4c);}}}};this.apply=function(){_e3c(this._behaviors,function(_e4e,id){dojo.query(id).forEach(function(elem){var _e51=0;var bid="_dj_behavior_"+_e4e.id;if(typeof elem[bid]=="number"){_e51=elem[bid];if(_e51==(_e4e.length)){return;}}for(var x=_e51,tver;tver=_e4e[x];x++){_e3c(tver,function(_e55,_e56){if(dojo.isArray(_e55)){dojo.forEach(_e55,function(_e57){_e4a(elem,_e57,_e56);});}});}elem[bid]=_e4e.length;});});};};dojo.addOnLoad(dojo.behavior,"apply");}if(!dojo._hasResource["dijit.InlineEditBox"]){dojo._hasResource["dijit.InlineEditBox"]=true;dojo.provide("dijit.InlineEditBox");dojo.declare("dijit.InlineEditBox",dijit._Widget,{editing:false,autoSave:true,buttonSave:"",buttonCancel:"",renderAsHtml:false,editor:"dijit.form.TextBox",editorParams:{},onChange:function(_e58){},onCancel:function(){},width:"100%",value:"",noValueIndicator:"<span style='font-family: wingdings; text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>",constructor:function(){this.editorParams={};},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;var _e59={ondijitclick:"_onClick",onmouseover:"_onMouseOver",onmouseout:"_onMouseOut",onfocus:"_onMouseOver",onblur:"_onMouseOut"};for(var name in _e59){this.connect(this.displayNode,name,_e59[name]);}dijit.setWaiRole(this.displayNode,"button");if(!this.displayNode.getAttribute("tabIndex")){this.displayNode.setAttribute("tabIndex",0);}this.attr("value",this.value||this.displayNode.innerHTML);},setDisabled:function(_e5b){dojo.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",_e5b);},_setDisabledAttr:function(_e5c){this.disabled=_e5c;dijit.setWaiState(this.domNode,"disabled",_e5c);},_onMouseOver:function(){dojo.addClass(this.displayNode,this.disabled?"dijitDisabledClickableRegion":"dijitClickableRegion");},_onMouseOut:function(){dojo.removeClass(this.displayNode,this.disabled?"dijitDisabledClickableRegion":"dijitClickableRegion");},_onClick:function(e){if(this.disabled){return;}if(e){dojo.stopEvent(e);}this._onMouseOut();setTimeout(dojo.hitch(this,"edit"),0);},edit:function(){if(this.disabled||this.editing){return;}this.editing=true;var _e5e=(this.renderAsHtml?this.value:this.value.replace(/\s*\r?\n\s*/g,"").replace(/<br\/?>/gi,"\n").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quot;/g,"\""));var _e5f=dojo.create("span",null,this.domNode,"before");var ew=this.editWidget=new dijit._InlineEditor({value:dojo.trim(_e5e),autoSave:this.autoSave,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,renderAsHtml:this.renderAsHtml,editor:this.editor,editorParams:this.editorParams,sourceStyle:dojo.getComputedStyle(this.displayNode),save:dojo.hitch(this,"save"),cancel:dojo.hitch(this,"cancel"),width:this.width},_e5f);var ews=ew.domNode.style;this.displayNode.style.display="none";ews.position="static";ews.visibility="visible";this.domNode=ew.domNode;setTimeout(function(){ew.focus();ew._resetValue=ew.getValue();},100);},_showText:function(_e62){this.displayNode.style.display="";var ew=this.editWidget;var ews=ew.domNode.style;ews.position="absolute";ews.visibility="hidden";this.domNode=this.displayNode;if(_e62){dijit.focus(this.displayNode);}ews.display="none";setTimeout(function(){ew.destroy();delete ew;if(dojo.isIE){dijit.focus(dijit.getFocus());}},1000);},save:function(_e65){if(this.disabled||!this.editing){return;}this.editing=false;var _e66=this.editWidget.getValue()+"";this.attr("value",this.renderAsHtml?_e66:_e66.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/\n/g,"<br>"));this.onChange(_e66);this._showText(_e65);},setValue:function(val){dojo.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use attr('value', ...) instead.","","2.0");return this.attr("value",val);},_setValueAttr:function(val){this.value=val;this.displayNode.innerHTML=dojo.trim(val)||this.noValueIndicator;},getValue:function(){dojo.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use attr('value') instead.","","2.0");return this.attr("value");},cancel:function(_e69){this.editing=false;this.onCancel();this._showText(_e69);}});dojo.declare("dijit._InlineEditor",[dijit._Widget,dijit._Templated],{templateString:"<span dojoAttachPoint=\"editNode\" waiRole=\"presentation\" style=\"position: absolute; visibility:hidden\" class=\"dijitReset dijitInline\"\n\tdojoAttachEvent=\"onkeypress: _onKeyPress\" \n\t><span dojoAttachPoint=\"editorPlaceholder\"></span\n\t><span dojoAttachPoint=\"buttonContainer\"\n\t\t><button class='saveButton' dojoAttachPoint=\"saveButton\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:save\" disabled=\"true\" label=\"${buttonSave}\"></button\n\t\t><button class='cancelButton' dojoAttachPoint=\"cancelButton\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:cancel\" label=\"${buttonCancel}\"></button\n\t></span\n></span>\n",widgetsInTemplate:true,postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit","common",this.lang);dojo.forEach(["buttonSave","buttonCancel"],function(prop){if(!this[prop]){this[prop]=this.messages[prop];}},this);},postCreate:function(){var cls=dojo.getObject(this.editor);var _e6c=this.sourceStyle;var _e6d="line-height:"+_e6c.lineHeight+";";dojo.forEach(["Weight","Family","Size","Style"],function(prop){_e6d+="font-"+prop+":"+_e6c["font"+prop]+";";},this);dojo.forEach(["marginTop","marginBottom","marginLeft","marginRight"],function(prop){this.domNode.style[prop]=_e6c[prop];},this);if(this.width=="100%"){_e6d+="width:100%;";this.domNode.style.display="block";}else{_e6d+="width:"+(this.width+(Number(this.width)==this.width?"px":""))+";";}this.editorParams.style=_e6d;this.editorParams["displayedValue" in cls.prototype?"displayedValue":"value"]=this.value;var ew=this.editWidget=new cls(this.editorParams,this.editorPlaceholder);this.connect(ew,"onChange","_onChange");this.connect(ew,"onKeyPress","_onKeyPress");this.connect(ew,"onKeyUp","_onKeyPress");if(this.autoSave){this.buttonContainer.style.display="none";}},destroy:function(){this.editWidget.destroy();this.inherited(arguments);},getValue:function(){var ew=this.editWidget;return ew.attr("displayedValue" in ew?"displayedValue":"value");},_onKeyPress:function(e){if(this._exitInProgress){return;}if(this.autoSave){if(e.altKey||e.ctrlKey){return;}if(e.charOrCode==dojo.keys.ESCAPE){dojo.stopEvent(e);this._exitInProgress=true;this.cancel(true);}else{if(e.charOrCode==dojo.keys.ENTER&&this.editWidget.focusNode.tagName=="INPUT"){dojo.stopEvent(e);this._exitInProgress=true;this.save(true);}else{if(e.charOrCode===dojo.keys.TAB){this._exitInProgress=true;setTimeout(dojo.hitch(this,"save",false),0);}}}}else{var _e73=this;setTimeout(function(){_e73._onChange();},100);}},_onBlur:function(){this.inherited(arguments);if(this._exitInProgress){return;}if(this.autoSave){this._exitInProgress=true;if(this.getValue()==this._resetValue){this.cancel(false);}else{this.save(false);}}},_onChange:function(){if(this._exitInProgress){return;}if(this.autoSave){this._exitInProgress=true;this.save(true);}else{this.saveButton.attr("disabled",(this.getValue()==this._resetValue)||!this.enableSave());}},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():true;},focus:function(){this.editWidget.focus();dijit.selectInputText(this.editWidget.focusNode);}});}if(!dojo._hasResource["dojox.data.ServiceStore"]){dojo._hasResource["dojox.data.ServiceStore"]=true;dojo.provide("dojox.data.ServiceStore");dojo.declare("dojox.data.ServiceStore",dojox.data.ClientFilter,{constructor:function(_e74){this.byId=this.fetchItemByIdentity;this._index={};if(_e74){dojo.mixin(this,_e74);}this.idAttribute=(_e74&&_e74.idAttribute)||(this.schema&&this.schema._idAttr);this.labelAttribute=this.labelAttribute||"label";},schema:null,idAttribute:"id",syncMode:false,estimateCountFactor:1,getSchema:function(){return this.schema;},loadLazyValues:true,getValue:function(item,_e76,_e77){var _e78=item[_e76];return _e78||(_e76 in item?_e78:item._loadObject?(dojox.rpc._sync=true)&&arguments.callee.call(this,dojox.data.ServiceStore.prototype.loadItem({item:item})||{},_e76,_e77):_e77);},getValues:function(item,_e7a){var val=this.getValue(item,_e7a);return val instanceof Array?val:val===undefined?[]:[val];},getAttributes:function(item){var res=[];for(var i in item){if(item.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")){res.push(i);}}return res;},hasAttribute:function(item,_e80){return _e80 in item;},containsValue:function(item,_e82,_e83){return dojo.indexOf(this.getValues(item,_e82),_e83)>-1;},isItem:function(item){return (typeof item=="object")&&item&&!(item instanceof Date);},isItemLoaded:function(item){return item&&!item._loadObject;},loadItem:function(args){var item;if(args.item._loadObject){args.item._loadObject(function(_e88){item=_e88;delete item._loadObject;var func=_e88 instanceof Error?args.onError:args.onItem;if(func){func.call(args.scope,_e88);}});}else{if(args.onItem){args.onItem.call(args.scope,args.item);}}return item;},_currentId:0,_processResults:function(_e8a,_e8b){if(_e8a&&typeof _e8a=="object"){var id=_e8a.__id;if(!id){if(this.idAttribute){id=_e8a[this.idAttribute];}else{id=this._currentId++;}if(id!==undefined){var _e8d=this._index[id];if(_e8d){for(var j in _e8d){delete _e8d[j];}_e8a=dojo.mixin(_e8d,_e8a);}_e8a.__id=id;this._index[id]=_e8a;}}for(var i in _e8a){_e8a[i]=this._processResults(_e8a[i],_e8b).items;}}var _e90=_e8a.length;return {totalCount:_e8b.request.count==_e90?(_e8b.request.start||0)+_e90*this.estimateCountFactor:_e90,items:_e8a};},close:function(_e91){return _e91&&_e91.abort&&_e91.abort();},fetch:function(args){args=args||{};if("syncMode" in args?args.syncMode:this.syncMode){dojox.rpc._sync=true;}var self=this;var _e94=args.scope||self;var _e95=this.cachingFetch?this.cachingFetch(args):this._doQuery(args);_e95.request=args;_e95.addCallback(function(_e96){if(args.clientFetch){_e96=self.clientSideFetch({query:args.clientFetch,sort:args.sort,start:args.start,count:args.count},_e96);}var _e97=self._processResults(_e96,_e95);_e96=args.results=_e97.items;if(args.onBegin){args.onBegin.call(_e94,_e97.totalCount,args);}if(args.onItem){for(var i=0;i<_e96.length;i++){args.onItem.call(_e94,_e96[i],args);}}if(args.onComplete){args.onComplete.call(_e94,args.onItem?null:_e96,args);}return _e96;});_e95.addErrback(args.onError&&dojo.hitch(_e94,args.onError));args.abort=function(){_e95.ioArgs.xhr.abort();};args.store=this;return args;},_doQuery:function(args){var _e9a=typeof args.queryStr=="string"?args.queryStr:args.query;return this.service(_e9a);},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true,"dojo.data.api.Schema":this.schema};},getLabel:function(item){return this.getValue(item,this.labelAttribute);},getLabelAttributes:function(item){return [this.labelAttribute];},getIdentity:function(item){return item.__id;},getIdentityAttributes:function(item){return [this.idAttribute];},fetchItemByIdentity:function(args){var item=this._index[(args._prefix||"")+args.identity];if(item&&args.onItem){args.onItem.call(args.scope,item);}else{return this.fetch({query:args.identity,onComplete:args.onItem,onError:args.onError,scope:args.scope}).results;}return item;}});}if(!dojo._hasResource["dojox.json.ref"]){dojo._hasResource["dojox.json.ref"]=true;dojo.provide("dojox.json.ref");dojox.json.ref={resolveJson:function(root,args){args=args||{};var _ea3=args.idAttribute||"id";var _ea4=args.idPrefix||"";var _ea5=args.assignAbsoluteIds;var _ea6=args.index||{};var _ea7=args.timeStamps;var ref,_ea9=[];var _eaa=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/;var _eab=this._addProp;var F=function(){};function walk(it,stop,_eb0,_eb1,_eb2){var _eb3,val,id=_ea3 in it?it[_ea3]:_eb0;if(id!==undefined){id=(_ea4+id).replace(_eaa,"$2$3");}var _eb6=_eb2||it;if(id!==undefined){if(_ea5){it.__id=id;}if(args.schemas&&(!(it instanceof Array))&&(val=id.match(/^(.+\/)[^\.\[]*$/))){_eb1=args.schemas[val[1]];}if(_ea6[id]&&((it instanceof Array)==(_ea6[id] instanceof Array))){_eb6=_ea6[id];delete _eb6.$ref;_eb3=true;}else{var _eb7=_eb1&&_eb1.prototype;if(_eb7){F.prototype=_eb7;_eb6=new F();}}_ea6[id]=_eb6;if(_ea7){_ea7[id]=args.time;}}var _eb8=_eb1&&_eb1.properties;var _eb9=it.length;for(var i in it){if(i==_eb9){break;}if(it.hasOwnProperty(i)){val=it[i];var _ebb=_eb8&&_eb8[i];if(_ebb&&_ebb.format=="date-time"&&typeof val=="string"){val=dojo.date.stamp.fromISOString(val);}else{if((typeof val=="object")&&val&&!(val instanceof Date)){ref=val.$ref;if(ref){delete it[i];var path=ref.replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/);if((ref=(path[1]=="$"||path[1]=="this"||path[1]=="")?root:_ea6[(_ea4+path[1]).replace(_eaa,"$2$3")])){if(path[3]){path[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(t,a,b,c,d){ref=ref&&ref[b?b.replace(/[\"\'\\]/,""):d];});}}if(ref){val=ref;}else{if(!stop){var _ec2;if(!_ec2){_ea9.push(_eb6);}_ec2=true;}else{val=walk(val,false,val.$ref,_ebb);val._loadObject=args.loader;}}}else{if(!stop){val=walk(val,_ea9==it,(val instanceof Array)?undefined:(id&&_eab(id,i)),_ebb,_eb6!=it&&typeof _eb6[i]=="object"&&!(val instanceof Array)&&_eb6[i]);}}}}it[i]=val;if(_eb6!=it&&!_eb6.__isDirty){var old=_eb6[i];_eb6[i]=val;if(_eb3&&val!==old&&!_eb6._loadObject&&!(val instanceof Date&&old instanceof Date&&val.getTime()==old.getTime())&&!(typeof val=="function"&&typeof old=="function"&&val.toString()==old.toString())&&_ea6.onUpdate){_ea6.onUpdate(_eb6,i,old,val);}}}}if(_eb3){for(i in _eb6){if(!_eb6.__isDirty&&_eb6.hasOwnProperty(i)&&!it.hasOwnProperty(i)&&i!="__id"&&i!="__clientId"&&!(_eb6 instanceof Array&&isNaN(i))){if(_ea6.onUpdate&&i!="_loadObject"&&i!="_idAttr"){_ea6.onUpdate(_eb6,i,_eb6[i],undefined);}delete _eb6[i];while(_eb6 instanceof Array&&_eb6.length&&_eb6[_eb6.length-1]===undefined){_eb6.length--;}}}}else{if(_ea6.onLoad){_ea6.onLoad(_eb6);}}return _eb6;};if(root&&typeof root=="object"){root=walk(root,false,args.defaultId);walk(_ea9,false);}return root;},fromJson:function(str,args){function ref(_ec7){return {$ref:_ec7};};try{var root=eval("("+str+")");}catch(e){throw new SyntaxError("Invalid JSON string: "+e.message+" parsing: "+str);}if(root){return this.resolveJson(root,args);}return root;},toJson:function(it,_eca,_ecb,_ecc){var _ecd=this._useRefs;var _ece=this._addProp;_ecb=_ecb||"";var _ecf={};var _ed0={};function _ed1(it,path,_ed4){if(typeof it=="object"&&it){var _ed5;if(it instanceof Date){return "\""+dojo.date.stamp.toISOString(it,{zulu:true})+"\"";}var id=it.__id;if(id){if(path!="#"&&((_ecd&&!id.match(/#/))||_ecf[id])){var ref=id;if(id.charAt(0)!="#"){if(it.__clientId==id){ref="cid:"+id;}else{if(id.substring(0,_ecb.length)==_ecb){ref=id.substring(_ecb.length);}else{ref=id;}}}return _ed1({$ref:ref},"#");}path=id;}else{it.__id=path;_ed0[path]=it;}_ecf[path]=it;_ed4=_ed4||"";var _ed8=_eca?_ed4+dojo.toJsonIndentStr:"";var _ed9=_eca?"\n":"";var sep=_eca?" ":"";if(it instanceof Array){var res=dojo.map(it,function(obj,i){var val=_ed1(obj,_ece(path,i),_ed8);if(typeof val!="string"){val="undefined";}return _ed9+_ed8+val;});return "["+res.join(","+sep)+_ed9+_ed4+"]";}var _edf=[];for(var i in it){if(it.hasOwnProperty(i)){var _ee1;if(typeof i=="number"){_ee1="\""+i+"\"";}else{if(typeof i=="string"&&(i.charAt(0)!="_"||i.charAt(1)!="_")){_ee1=dojo._escapeString(i);}else{continue;}}var val=_ed1(it[i],_ece(path,i),_ed8);if(typeof val!="string"){continue;}_edf.push(_ed9+_ed8+_ee1+":"+sep+val);}}return "{"+_edf.join(","+sep)+_ed9+_ed4+"}";}else{if(typeof it=="function"&&dojox.json.ref.serializeFunctions){return it.toString();}}return dojo.toJson(it);};var json=_ed1(it,"#","");if(!_ecc){for(var i in _ed0){delete _ed0[i].__id;}}return json;},_addProp:function(id,prop){return id+(id.match(/#/)?id.length==1?"":".":"#")+prop;},_useRefs:false,serializeFunctions:false};}if(!dojo._hasResource["dojox.rpc.Rest"]){dojo._hasResource["dojox.rpc.Rest"]=true;dojo.provide("dojox.rpc.Rest");(function(){if(dojox.rpc&&dojox.rpc.transportRegistry){dojox.rpc.transportRegistry.register("REST",function(str){return str=="REST";},{getExecutor:function(func,_ee9,svc){return new dojox.rpc.Rest(_ee9.name,(_ee9.contentType||svc._smd.contentType||"").match(/json|javascript/),null,function(id,args){var _eed=svc._getRequest(_ee9,[id]);_eed.url=_eed.target+(_eed.data?"?"+_eed.data:"");return _eed;});}});}var drr;function _eef(_ef0,_ef1,_ef2,id){_ef0.addCallback(function(_ef4){if(_ef2){_ef2=_ef0.ioArgs.xhr&&_ef0.ioArgs.xhr.getResponseHeader("Content-Range");_ef0.fullLength=_ef2&&(_ef2=_ef2.match(/\/(.*)/))&&parseInt(_ef2[1]);}return _ef4;});return _ef0;};drr=dojox.rpc.Rest=function(path,_ef6,_ef7,_ef8){var _ef9;path=path.match(/\/$/)?path:(path+"/");_ef9=function(id,args){return drr._get(_ef9,id,args);};_ef9.isJson=_ef6;_ef9._schema=_ef7;_ef9.cache={serialize:_ef6?((dojox.json&&dojox.json.ref)||dojo).toJson:function(_efc){return _efc;}};_ef9._getRequest=_ef8||function(id,args){var _eff={url:path+(dojo.isObject(id)?"?"+dojo.objectToQuery(id):id==null?"":id),handleAs:_ef6?"json":"text",contentType:_ef6?"application/json":"text/plain",sync:dojox.rpc._sync,headers:{Accept:_ef6?"application/json,application/javascript":"*/*"}};if(args&&(args.start>=0||args.count>=0)){_eff.headers.Range="items="+(args.start||"0")+"-"+((args.count&&args.count!=Infinity&&(args.count+(args.start||0)-1))||"");}dojox.rpc._sync=false;return _eff;};function _f00(name){_ef9[name]=function(id,_f03){return drr._change(name,_ef9,id,_f03);};};_f00("put");_f00("post");_f00("delete");_ef9.servicePath=path;return _ef9;};drr._index={};drr._timeStamps={};drr._change=function(_f04,_f05,id,_f07){var _f08=_f05._getRequest(id);_f08[_f04+"Data"]=_f07;return _eef(dojo.xhr(_f04.toUpperCase(),_f08,true),_f05);};drr._get=function(_f09,id,args){args=args||{};return _eef(dojo.xhrGet(_f09._getRequest(id,args)),_f09,(args.start>=0||args.count>=0),id);};})();}if(!dojo._hasResource["dojox.rpc.JsonRest"]){dojo._hasResource["dojox.rpc.JsonRest"]=true;dojo.provide("dojox.rpc.JsonRest");(function(){var _f0c=[];var Rest=dojox.rpc.Rest;var jr;function _f0f(_f10,_f11,_f12,_f13){var _f14=_f11.ioArgs&&_f11.ioArgs.xhr&&_f11.ioArgs.xhr.getResponseHeader("Last-Modified");if(_f14&&Rest._timeStamps){Rest._timeStamps[_f13]=_f14;}return _f12&&dojox.json.ref.resolveJson(_f12,{defaultId:_f13,index:Rest._index,timeStamps:_f14&&Rest._timeStamps,time:_f14,idPrefix:_f10.servicePath,idAttribute:jr.getIdAttribute(_f10),schemas:jr.schemas,loader:jr._loader,assignAbsoluteIds:true});};jr=dojox.rpc.JsonRest={conflictDateHeader:"If-Unmodified-Since",commit:function(_f15){_f15=_f15||{};var _f16=[];var _f17={};var _f18=[];for(var i=0;i<_f0c.length;i++){var _f1a=_f0c[i];var _f1b=_f1a.object;var old=_f1a.old;var _f1d=false;if(!(_f15.service&&(_f1b||old)&&(_f1b||old).__id.indexOf(_f15.service.servicePath))&&_f1a.save){delete _f1b.__isDirty;if(_f1b){if(old){var _f1e;if((_f1e=_f1b.__id.match(/(.*)#.*/))){_f1b=Rest._index[_f1e[1]];}if(!(_f1b.__id in _f17)){_f17[_f1b.__id]=_f1b;_f16.push({method:"put",target:_f1b,content:_f1b});}}else{_f16.push({method:"post",target:{__id:jr.getServiceAndId(_f1b.__id).service.servicePath},content:_f1b});}}else{if(old){_f16.push({method:"delete",target:old});}}_f18.push(_f1a);_f0c.splice(i--,1);}}dojo.connect(_f15,"onError",function(){var _f1f=_f0c;_f0c=_f18;var _f20=0;jr.revert();_f0c=_f1f;});jr.sendToServer(_f16,_f15);return _f16;},sendToServer:function(_f21,_f22){var _f23;var _f24=dojo.xhr;var left=_f21.length;var i,_f27;var _f28;var _f29=this.conflictDateHeader;dojo.xhr=function(_f2a,args){args.headers=args.headers||{};args.headers["Transaction"]=_f21.length-1==i?"commit":"open";if(_f29&&_f28){args.headers[_f29]=_f28;}if(_f27){args.headers["Content-ID"]="<"+_f27+">";}return _f24.apply(dojo,arguments);};for(i=0;i<_f21.length;i++){var _f2c=_f21[i];dojox.rpc.JsonRest._contentId=_f2c.content&&_f2c.content.__id;var _f2d=_f2c.method=="post";_f28=_f2c.method=="put"&&Rest._timeStamps[_f2c.content.__id];if(_f28){Rest._timeStamps[_f2c.content.__id]=(new Date())+"";}_f27=_f2d&&dojox.rpc.JsonRest._contentId;var _f2e=jr.getServiceAndId(_f2c.target.__id);var _f2f=_f2e.service;var dfd=_f2c.deferred=_f2f[_f2c.method](_f2e.id.replace(/#/,""),dojox.json.ref.toJson(_f2c.content,false,_f2f.servicePath,true));(function(_f31,dfd,_f33){dfd.addCallback(function(_f34){try{var _f35=dfd.ioArgs.xhr&&dfd.ioArgs.xhr.getResponseHeader("Location");if(_f35){var _f36=_f35.match(/(^\w+:\/\/)/)&&_f35.indexOf(_f33.servicePath);_f35=_f36>0?_f35.substring(_f36):(_f33.servicePath+_f35).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3");_f31.__id=_f35;Rest._index[_f35]=_f31;}_f34=_f0f(_f33,dfd,_f34,_f31&&_f31.__id);}catch(e){}if(!(--left)){if(_f22.onComplete){_f22.onComplete.call(_f22.scope);}}return _f34;});})(_f2c.content,dfd,_f2f);dfd.addErrback(function(_f37){left=-1;_f22.onError.call(_f22.scope,_f37);});}dojo.xhr=_f24;},getDirtyObjects:function(){return _f0c;},revert:function(_f38){for(var i=_f0c.length;i>0;){i--;var _f3a=_f0c[i];var _f3b=_f3a.object;var old=_f3a.old;if(!(_f38&&(_f3b||old)&&(_f3b||old).__id.indexOf(_f38.servicePath))){if(_f3b&&old){for(var j in old){if(old.hasOwnProperty(j)){_f3b[j]=old[j];}}for(j in _f3b){if(!old.hasOwnProperty(j)){delete _f3b[j];}}}_f0c.splice(i,1);}}},changing:function(_f3e,_f3f){if(!_f3e.__id){return;}_f3e.__isDirty=true;for(var i=0;i<_f0c.length;i++){var _f41=_f0c[i];if(_f3e==_f41.object){if(_f3f){_f41.object=false;if(!this._saveNotNeeded){_f41.save=true;}}return;}}var old=_f3e instanceof Array?[]:{};for(i in _f3e){if(_f3e.hasOwnProperty(i)){old[i]=_f3e[i];}}_f0c.push({object:!_f3f&&_f3e,old:old,save:!this._saveNotNeeded});},deleteObject:function(_f43){this.changing(_f43,true);},getConstructor:function(_f44,_f45){if(typeof _f44=="string"){var _f46=_f44;_f44=new dojox.rpc.Rest(_f44,true);this.registerService(_f44,_f46,_f45);}if(_f44._constructor){return _f44._constructor;}_f44._constructor=function(data){var self=this;var args=arguments;var _f4a;function _f4b(_f4c){if(_f4c){_f4b(_f4c["extends"]);_f4a=_f4c.properties;for(var i in _f4a){var _f4e=_f4a[i];if(_f4e&&(typeof _f4e=="object")&&("default" in _f4e)){self[i]=_f4e["default"];}}}if(data){dojo.mixin(self,data);}if(_f4c&&_f4c.prototype&&_f4c.prototype.initialize){_f4c.prototype.initialize.apply(self,args);}};_f4b(_f44._schema);var _f4f=jr.getIdAttribute(_f44);Rest._index[this.__id=this.__clientId=_f44.servicePath+(this[_f4f]||Math.random().toString(16).substring(2,14)+"@"+((dojox.rpc.Client&&dojox.rpc.Client.clientId)||"client"))]=this;if(dojox.json.schema&&_f4a){dojox.json.schema.mustBeValid(dojox.json.schema.validate(this,_f44._schema));}_f0c.push({object:this,save:true});};return dojo.mixin(_f44._constructor,_f44._schema,{load:_f44});},fetch:function(_f50){var _f51=jr.getServiceAndId(_f50);return this.byId(_f51.service,_f51.id);},getIdAttribute:function(_f52){var _f53=_f52._schema;var _f54;if(_f53){if(!(_f54=_f53._idAttr)){for(var i in _f53.properties){if(_f53.properties[i].identity){_f53._idAttr=_f54=i;}}}}return _f54||"id";},getServiceAndId:function(_f56){var _f57=_f56.match(/^(.*\/)([^\/]*)$/);var svc=jr.services[_f57[1]]||new dojox.rpc.Rest(_f57[1],true);return {service:svc,id:_f57[2]};},services:{},schemas:{},registerService:function(_f59,_f5a,_f5b){_f5a=_f5a||_f59.servicePath;_f5a=_f59.servicePath=_f5a.match(/\/$/)?_f5a:(_f5a+"/");_f59._schema=jr.schemas[_f5a]=_f5b||_f59._schema||{};jr.services[_f5a]=_f59;},byId:function(_f5c,id){var _f5e,_f5f=Rest._index[(_f5c.servicePath||"")+id];if(_f5f&&!_f5f._loadObject){_f5e=new dojo.Deferred();_f5e.callback(_f5f);return _f5e;}return this.query(_f5c,id);},query:function(_f60,id,args){var _f63=_f60(id,args);_f63.addCallback(function(_f64){if(_f64.nodeType&&_f64.cloneNode){return _f64;}return _f0f(_f60,_f63,_f64,typeof id!="string"||(args&&(args.start||args.count))?undefined:id);});return _f63;},_loader:function(_f65){var _f66=jr.getServiceAndId(this.__id);var self=this;jr.query(_f66.service,_f66.id).addBoth(function(_f68){if(_f68==self){delete _f68.$ref;delete _f68._loadObject;}else{self._loadObject=function(_f69){_f69(_f68);};}_f65(_f68);});},isDirty:function(item){if(!item){return !!_f0c.length;}return item.__isDirty;}};})();}if(!dojo._hasResource["dojox.data.JsonRestStore"]){dojo._hasResource["dojox.data.JsonRestStore"]=true;dojo.provide("dojox.data.JsonRestStore");dojo.declare("dojox.data.JsonRestStore",dojox.data.ServiceStore,{constructor:function(_f6b){dojo.connect(dojox.rpc.Rest._index,"onUpdate",this,function(obj,_f6d,_f6e,_f6f){var _f70=this.service.servicePath;if(!obj.__id){console.log("no id on updated object ",obj);}else{if(obj.__id.substring(0,_f70.length)==_f70){this.onSet(obj,_f6d,_f6e,_f6f);}}});this.idAttribute=this.idAttribute||"id";if(typeof _f6b.target=="string"&&!this.service){this.service=dojox.rpc.Rest(this.target,true);}dojox.rpc.JsonRest.registerService(this.service,_f6b.target,this.schema);this.schema=this.service._schema=this.schema||this.service._schema||{};this.service._store=this;this.schema._idAttr=this.idAttribute;var _f71=dojox.rpc.JsonRest.getConstructor(this.service);var self=this;this._constructor=function(data){_f71.call(this,data);self.onNew(this);};this._constructor.prototype=_f71.prototype;this._index=dojox.rpc.Rest._index;},referenceIntegrity:true,target:"",newItem:function(data,_f75){data=new this._constructor(data);if(_f75){var _f76=this.getValue(_f75.parent,_f75.attribute,[]);this.setValue(_f75.parent,_f75.attribute,_f76.concat([data]));}return data;},deleteItem:function(item){var _f78=[];var _f79=dojox.data._getStoreForItem(item)||this;if(this.referenceIntegrity){dojox.rpc.JsonRest._saveNotNeeded=true;var _f7a=dojox.rpc.Rest._index;var _f7b=function(_f7c){var _f7d;_f78.push(_f7c);_f7c.__checked=1;for(var i in _f7c){var _f7f=_f7c[i];if(_f7f==item){if(_f7c!=_f7a){if(_f7c instanceof Array){(_f7d=_f7d||[]).push(i);}else{(dojox.data._getStoreForItem(_f7c)||_f79).unsetAttribute(_f7c,i);}}}else{if((typeof _f7f=="object")&&_f7f){if(!_f7f.__checked){_f7b(_f7f);}if(typeof _f7f.__checked=="object"&&_f7c!=_f7a){(dojox.data._getStoreForItem(_f7c)||_f79).setValue(_f7c,i,_f7f.__checked);}}}}if(_f7d){i=_f7d.length;_f7c=_f7c.__checked=_f7c.concat();while(i--){_f7c.splice(_f7d[i],1);}return _f7c;}return null;};_f7b(_f7a);dojox.rpc.JsonRest._saveNotNeeded=false;var i=0;while(_f78[i]){delete _f78[i++].__checked;}}dojox.rpc.JsonRest.deleteObject(item);_f79.onDelete(item);},changing:function(item,_f82){dojox.rpc.JsonRest.changing(item,_f82);},setValue:function(item,_f84,_f85){var old=item[_f84];var _f87=item.__id?dojox.data._getStoreForItem(item):this;if(dojox.json.schema&&_f87.schema&&_f87.schema.properties){dojox.json.schema.mustBeValid(dojox.json.schema.checkPropertyChange(_f85,_f87.schema.properties[_f84]));}if(_f84==_f87.idAttribute){throw new Error("Can not change the identity attribute for an item");}_f87.changing(item);item[_f84]=_f85;_f87.onSet(item,_f84,old,_f85);},setValues:function(item,_f89,_f8a){if(!dojo.isArray(_f8a)){throw new Error("setValues expects to be passed an Array object as its value");}this.setValue(item,_f89,_f8a);},unsetAttribute:function(item,_f8c){this.changing(item);var old=item[_f8c];delete item[_f8c];this.onSet(item,_f8c,old,undefined);},save:function(_f8e){if(!(_f8e&&_f8e.global)){(_f8e=_f8e||{}).service=this.service;}var _f8f=dojox.rpc.JsonRest.commit(_f8e);this.serverVersion=this._updates&&this._updates.length;return _f8f;},revert:function(_f90){var _f91=dojox.rpc.JsonRest.getDirtyObjects().concat([]);while(_f91.length>0){var d=_f91.pop();var _f93=dojox.data._getStoreForItem(d.object||d.old);if(!d.object){_f93.onNew(d.old);}else{if(!d.old){_f93.onDelete(d.object);}else{for(var i in d.object){if(d.object[i]!=d.old[i]){_f93.onSet(d.object,i,d.object[i],d.old[i]);}}}}}dojox.rpc.JsonRest.revert(_f90&&_f90.global&&this.service);},isDirty:function(item){return dojox.rpc.JsonRest.isDirty(item);},isItem:function(item,_f97){return item&&item.__id&&(_f97||this.service==dojox.rpc.JsonRest.getServiceAndId(item.__id).service);},_doQuery:function(args){var _f99=typeof args.queryStr=="string"?args.queryStr:args.query;return dojox.rpc.JsonRest.query(this.service,_f99,args);},_processResults:function(_f9a,_f9b){var _f9c=_f9a.length;return {totalCount:_f9b.fullLength||(_f9b.request.count==_f9c?(_f9b.request.start||0)+_f9c*2:_f9c),items:_f9a};},getConstructor:function(){return this._constructor;},getIdentity:function(item){var id=item.__clientId||item.__id;if(!id){return id;}var _f9f=this.service.servicePath;return id.substring(0,_f9f.length)!=_f9f?id:id.substring(_f9f.length);},fetchItemByIdentity:function(args){var id=args.identity;var _fa2=this;if(id.toString().match(/^(\w*:)?\//)){var _fa3=dojox.rpc.JsonRest.getServiceAndId(id);_fa2=_fa3.service._store;args.identity=_fa3.id;}args._prefix=_fa2.service.servicePath;return _fa2.inherited(arguments);},onSet:function(){},onNew:function(){},onDelete:function(){},getFeatures:function(){var _fa4=this.inherited(arguments);_fa4["dojo.data.api.Write"]=true;_fa4["dojo.data.api.Notification"]=true;return _fa4;}});dojox.data._getStoreForItem=function(item){if(item.__id){var _fa6=item.__id.toString().match(/.*\//)[0];var _fa7=dojox.rpc.JsonRest.services[_fa6];return _fa7?_fa7._store:new dojox.data.JsonRestStore({target:_fa6});}return null;};dojox.json.ref._useRefs=true;}if(!dojo._hasResource["dojox.rpc.Client"]){dojo._hasResource["dojox.rpc.Client"]=true;dojo.provide("dojox.rpc.Client");(function(){dojo._defaultXhr=dojo.xhr;dojo.xhr=function(_fa8,args){var _faa=args.headers=args.headers||{};_faa["Client-Id"]=dojox.rpc.Client.clientId;_faa["Seq-Id"]=dojox._reqSeqId=(dojox._reqSeqId||0)+1;return dojo._defaultXhr.apply(dojo,arguments);};})();dojox.rpc.Client.clientId=(Math.random()+"").substring(2,14);}if(!dojo._hasResource["dojox.cometd.RestChannels"]){dojo._hasResource["dojox.cometd.RestChannels"]=true;dojo.provide("dojox.cometd.RestChannels");dojo.requireIf(dojox.data&&!!dojox.data.JsonRestStore,"dojox.data.restListener");(function(){dojo.declare("dojox.cometd.RestChannels",null,{constructor:function(_fab){dojo.mixin(this,_fab);if(dojox.rpc.Rest&&this.autoSubscribeRoot){var _fac=dojox.rpc.Rest._get;var self=this;dojox.rpc.Rest._get=function(_fae,id){var _fb0=dojo.xhrGet;dojo.xhrGet=function(r){var _fb2=self.autoSubscribeRoot;return (_fb2&&r.url.substring(0,_fb2.length)==_fb2)?self.get(r.url,r):_fb0(r);};var _fb3=_fac.apply(this,arguments);dojo.xhrGet=_fb0;return _fb3;};}if(dojox.data&&dojox.data.restListener){this.receive=dojox.data.restListener;}},absoluteUrl:function(_fb4,_fb5){return new dojo._Url(_fb4,_fb5)+"";},acceptType:"application/rest+json,application/http;q=0.9,*/*;q=0.7",subscriptions:{},subCallbacks:{},autoReconnectTime:3000,xhrTimeout:60000,reloadDataOnReconnect:true,sendAsJson:false,url:"/channels",autoSubscribeRoot:"/",open:function(){this.started=true;if(!this.connected){this.connectionId=dojox.rpc.Client.clientId;var _fb6=this.createdClientId?"Client-Id":"Create-Client-Id";this.createdClientId=true;var _fb7={Accept:this.acceptType};_fb7[_fb6]=this.connectionId;var dfd=dojo.xhrPost({headers:_fb7,url:this.url,noStatus:true,timeout:this.xhrTimeout});var self=this;this.lastIndex=0;var _fba,_fbb=function(data){if(typeof dojo=="undefined"){return null;}if(xhr&&xhr.status>400){return _fba(true);}if(typeof data=="string"){data=data.substring(self.lastIndex);}var _fbe=xhr&&(xhr.contentType||xhr.getResponseHeader("Content-Type"))||(typeof data!="string"&&"already json");var _fbf=self.onprogress(xhr,data,_fbe);if(_fbf){if(_fba()){return new Error(_fbf);}}if(!xhr||xhr.readyState==4){xhr=null;if(self.connected){self.connected=false;self.open();}}return data;};_fba=function(_fc0){try{if(xhr&&xhr.status&&false){console.log("multiple tabs/windows open, polling");self.disconnected();return null;}}catch(e){}self.createdClientId=false;self.disconnected();return _fc0;};dfd.addCallbacks(_fbb,_fba);var xhr=dfd.ioArgs.xhr;if(xhr){xhr.onreadystatechange=function(){var _fc1;try{if(xhr.readyState==3){self.readyState=3;_fc1=xhr.responseText;}}catch(e){}if(typeof _fc1=="string"){_fbb(_fc1);}};}if(window.attachEvent){window.attachEvent("onunload",function(){self.connected=false;if(xhr){xhr.abort();}});}this.connected=true;}},_send:function(_fc2,args,data){if(this.sendAsJson){args.postBody=dojo.toJson({target:args.url,method:_fc2,content:data,params:args.content,subscribe:args.headers["Subscribe"]});args.url=this.url;_fc2="POST";}else{args.postData=dojo.toJson(data);}return dojo.xhr(_fc2,args,args.postBody);},subscribe:function(_fc5,args){args=args||{};args.url=this.absoluteUrl(this.url,_fc5);if(args.headers){delete args.headers.Range;}var _fc7=this.subscriptions[_fc5];var _fc8=args.method||"HEAD";var _fc9=args.since;var _fca=args.callback;var _fcb=args.headers||(args.headers={});this.subscriptions[_fc5]=_fc9||_fc7||0;var _fcc=this.subCallbacks[_fc5];if(_fca){this.subCallbacks[_fc5]=_fcc?function(m){_fcc(m);_fca(m);}:_fca;}if(!this.connected){this.open();}if(_fc7===undefined||_fc7!=_fc9){_fcb["Cache-Control"]="max-age=0";_fc9=typeof _fc9=="number"?new Date(_fc9).toUTCString():_fc9;if(_fc9){_fcb["Subscribe-Since"]=_fc9;}_fcb["Subscribe"]=args.unsubscribe?"none":"*";var dfd=this._send(_fc8,args);var self=this;dfd.addBoth(function(_fd0){var xhr=dfd.ioArgs.xhr;if(!(_fd0 instanceof Error)){if(args.confirmation){args.confirmation();}}if(xhr&&xhr.getResponseHeader("Subscribed")=="OK"){var _fd2=xhr.getResponseHeader("Last-Modified");if(xhr.responseText){self.subscriptions[_fc5]=_fd2||new Date().toUTCString();}else{return null;}}else{if(xhr&&!(_fd0 instanceof Error)){delete self.subscriptions[_fc5];}}if(!(_fd0 instanceof Error)){var _fd3={responseText:xhr&&xhr.responseText,channel:_fc5,getResponseHeader:function(name){return xhr.getResponseHeader(name);},getAllResponseHeaders:function(){return xhr.getAllResponseHeaders();},result:_fd0};if(self.subCallbacks[_fc5]){self.subCallbacks[_fc5](_fd3);}}else{if(self.subCallbacks[_fc5]){self.subCallbacks[_fc5](xhr);}}return _fd0;});return dfd;}return null;},publish:function(_fd5,data){return this._send("POST",{url:_fd5,contentType:"application/json"},data);},_processMessage:function(_fd7){_fd7.event=_fd7.event||_fd7.getResponseHeader("Event");if(_fd7.event=="connection-conflict"){return "conflict";}try{_fd7.result=_fd7.result||dojo.fromJson(_fd7.responseText);}catch(e){}var self=this;var loc=_fd7.channel=new dojo._Url(this.url,_fd7.source||_fd7.getResponseHeader("Content-Location"))+"";if(loc in this.subscriptions&&_fd7.getResponseHeader){this.subscriptions[loc]=_fd7.getResponseHeader("Last-Modified");}if(this.subCallbacks[loc]){setTimeout(function(){self.subCallbacks[loc](_fd7);},0);}this.receive(_fd7);return null;},onprogress:function(xhr,data,_fdc){if(!_fdc||_fdc.match(/application\/rest\+json/)){var size=data.length;data=data.replace(/^\s*[,\[]?/,"[").replace(/[,\]]?\s*$/,"]");try{var xhrs=dojo.fromJson(data);this.lastIndex+=size;}catch(e){}}else{if(dojox.io&&dojox.io.httpParse&&_fdc.match(/application\/http/)){var _fdf="";if(xhr&&xhr.getAllResponseHeaders){_fdf=xhr.getAllResponseHeaders();}xhrs=dojox.io.httpParse(data,_fdf,xhr.readyState!=4);}else{if(typeof data=="object"){xhrs=data;}}}if(xhrs){for(var i=0;i<xhrs.length;i++){if(this._processMessage(xhrs[i])){return "conflict";}}return null;}if(!xhr){return "error";}if(xhr.readyState!=4){return null;}if(xhr.__proto__){xhr={channel:"channel",__proto__:xhr};}return this._processMessage(xhr);},get:function(_fe1,args){(args=args||{}).method="GET";return this.subscribe(_fe1,args);},receive:function(_fe3){},disconnected:function(){var self=this;if(this.connected){this.connected=false;if(this.started){setTimeout(function(){var _fe5=self.subscriptions;self.subscriptions={};for(var i in _fe5){if(self.reloadDataOnReconnect&&dojox.rpc.JsonRest){delete dojox.rpc.Rest._index[i];dojox.rpc.JsonRest.fetch(i);}else{self.subscribe(i,{since:_fe5[i]});}}self.open();},this.autoReconnectTime);}}},unsubscribe:function(_fe7,args){args=args||{};args.unsubscribe=true;this.subscribe(_fe7,args);},disconnect:function(){this.started=false;this.xhr.abort();}});var _fe9=dojox.cometd.RestChannels.defaultInstance=new dojox.cometd.RestChannels();if(dojox.cometd.connectionTypes){_fe9.startup=function(data){_fe9.open();this._cometd._deliver({channel:"/meta/connect",successful:true});};_fe9.check=function(_feb,_fec,_fed){for(var i=0;i<_feb.length;i++){if(_feb[i]=="rest-channels"){return !_fed;}}return false;};_fe9.deliver=function(_fef){};dojo.connect(this,"receive",null,function(_ff0){_ff0.data=_ff0.result;this._cometd._deliver(_ff0);});_fe9.sendMessages=function(_ff1){for(var i=0;i<_ff1.length;i++){var _ff3=_ff1[i];var _ff4=_ff3.channel;var _ff5=this._cometd;var args={confirmation:function(){_ff5._deliver({channel:_ff4,successful:true});}};if(_ff4=="/meta/subscribe"){this.subscribe(_ff3.subscription,args);}else{if(_ff4=="/meta/unsubscribe"){this.unsubscribe(_ff3.subscription,args);}else{if(_ff4=="/meta/connect"){args.confirmation();}else{if(_ff4=="/meta/disconnect"){_fe9.disconnect();args.confirmation();}else{if(_ff4.substring(0,6)!="/meta/"){this.publish(_ff4,_ff3.data);}}}}}}};dojox.cometd.connectionTypes.register("rest-channels",_fe9.check,_fe9,false,true);}})();}if(!dojo._hasResource["nox.ext.apps.vmanui.util"]){dojo._hasResource["nox.ext.apps.vmanui.util"]=true;dojo.provide("nox.ext.apps.vmanui.util");nox.ext.apps.vmanui.util.arrayUnion=function(){var o={},a=[];dojo.forEach(arguments,function(arga){dojo.forEach(arga,function(item){o[item]=true;});});for(var item in o){a.push(item);}o=null;return a;};nox.ext.apps.vmanui.util.arrayIntersect=function(){var a=[];if(arguments.length>1){var a0=arguments[0];var _ffe=arguments;dojo.forEach(a0,function(item){var _1000=false;for(var i=1;i<_ffe.length;i++){var an=_ffe[i];if(dojo.indexOf(an,item)==-1){_1000=true;}}if(!_1000){a.push(item);}});}else{return arguments[0];}return a;};nox.ext.apps.vmanui.util.keys=function(o){if(dojo.isObject(o)){var keys=[];for(var key in o){keys.push(key);}return keys;}throw Error("Argument to keys() is not an object");};nox.ext.apps.vmanui.util.entityReference=function(_1006){var e=dojo.doc.createElement("div");e.innerHTML="&"+_1006+";";return e.innerHTML;};nox.ext.apps.vmanui.util.toLowerFirst=function(_1008){return _1008.replace(/^([A-Za-z])/,function(_1009){return _1009.toLowerCase();});};nox.ext.apps.vmanui.util.toUpperFirst=function(_100a){return _100a.replace(/^([A-Za-z])/,function(_100b){return _100b.toUpperCase();});};nox.ext.apps.vmanui.util.toTitleCase=function(_100c){return _100c.replace(/\b([A-Za-z])/g,function(_100d){return _100d.toUpperCase();});};nox.ext.apps.vmanui.util.escapeMarkup=function(sOld){var sNew=sOld;sNew=sNew.replace(/&/g,"&amp;");sNew=sNew.replace(/</g,"&lt;");sNew=sNew.replace(/>/g,"&gt;");return sNew;};nox.ext.apps.vmanui.util.unescapeMarkup=function(sOld){var sNew=sOld;sNew=sNew.replace(/&lt;/g,"<");sNew=sNew.replace(/&gt;/g,">");sNew=sNew.replace(/&amp;/g,"&");return sNew;};nox.ext.apps.vmanui.util.findAncestorNodeByClass=function(_1012,_1013){var _1014=_1012.parentNode;if(_1014&&dojo.hasClass(_1014,_1013)){return _1014;}return _1014&&this.findAncestorNodeByClass(_1014,_1013);};nox.ext.apps.vmanui.util.cond_ellipsis=function(str,_1016){if(!dojo.isString(str)){return "";}str=str||"";if(!str){return "";}_1016=(_1016==null)?60:_1016;var _1017=str.split(/\s+/);if(_1017.length>1){return str;}str=str.substr(0,_1016)+"...";return str;};}if(!dojo._hasResource["nox.ext.apps.vmanui.XhrDecorator"]){dojo._hasResource["nox.ext.apps.vmanui.XhrDecorator"]=true;dojo.provide("nox.ext.apps.vmanui.XhrDecorator");dojo.declare("nox.ext.apps.vmanui.RequestTracker",null,{_tracked:null,constructor:function(){this._tracked={};},add:function(_1018){if(!parseInt(this._tracked[_1018.id])){this._tracked[_1018.id]=0;}this._tracked[_1018.id]=_1018;dojo.publish("/nox/ext/apps/vmanui/RequestTracker/add",[this]);dojo.publish("/nox/ext/apps/vmanui/RequestTracker/change",[this]);},remove:function(_1019){delete this._tracked[_1019.id];dojo.publish("/nox/ext/apps/vmanui/RequestTracker/remove",[this]);dojo.publish("/nox/ext/apps/vmanui/RequestTracker/change",[this]);},hasActiveRequests:function(){for(var _101a in this._tracked){return true;}return false;},poke:function(){dojo.publish("/nox/ext/apps/vmanui/RequestTracker/change",[this]);}});nox.ext.apps.vmanui.RequestTracker._instance=null;nox.ext.apps.vmanui.RequestTracker.instance=function(){if(!nox.ext.apps.vmanui.RequestTracker._instance){nox.ext.apps.vmanui.RequestTracker._instance=new nox.ext.apps.vmanui.RequestTracker();}return nox.ext.apps.vmanui.RequestTracker._instance;};dojo.forEach(["xhr","xhrGet","xhrPut","xhrPost","xhrDelete","rawXhrPost","rawXhrPut"],function(_101b){nox.ext.apps.vmanui[_101b]=function(){var _101c=dojo[_101b].apply(dojo,arguments);nox.ext.apps.vmanui.RequestTracker.instance().add(_101c);_101c.addBoth(function(_101d,_101e){nox.ext.apps.vmanui.RequestTracker.instance().remove(_101c);});return _101c;};});}if(!dojo._hasResource["nox.ext.apps.vmanui.GlobalXhrIndicator"]){dojo._hasResource["nox.ext.apps.vmanui.GlobalXhrIndicator"]=true;dojo.provide("nox.ext.apps.vmanui.GlobalXhrIndicator");dojo.declare("nox.ext.apps.vmanui.GlobalXhrIndicator",[dijit._Widget,dijit._Templated],{templateString:"<span class=\"global_xhr_indicator\" dojoAttachPoint=\"global_xhr_indicator\"></span>",fadeOutAnimation:null,fadeInAnimation:null,postCreate:function(){dojo.subscribe("/nox/ext/apps/vmanui/RequestTracker/change",this,"trackerChanged");this.fadeOutAnimation=dojo.fadeOut({node:this.global_xhr_indicator,duration:1000});this.fadeInAnimation=dojo.fadeIn({node:this.global_xhr_indicator,duration:10});},trackerChanged:function(_101f){if(_101f.hasActiveRequests()){if(this.fadeInAnimation.status()=="stopped"){this.fadeOutAnimation.stop();this.fadeInAnimation.play();}}else{if(this.fadeOutAnimation.status()=="stopped"){this.fadeInAnimation.stop();this.fadeOutAnimation.play();}}}});}if(!dojo._hasResource["dojox.gfx.matrix"]){dojo._hasResource["dojox.gfx.matrix"]=true;dojo.provide("dojox.gfx.matrix");(function(){var m=dojox.gfx.matrix;var _1021={};m._degToRad=function(_1022){return _1021[_1022]||(_1021[_1022]=(Math.PI*_1022/180));};m._radToDeg=function(_1023){return _1023/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _1025=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_1025,r=dojox.gfx.matrix.normalize(arg[i]);_1025=new m.Matrix2D();_1025.xx=l.xx*r.xx+l.xy*r.yx;_1025.xy=l.xx*r.xy+l.xy*r.yy;_1025.yx=l.yx*r.xx+l.yy*r.yx;_1025.yy=l.yx*r.xy+l.yy*r.yy;_1025.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_1025.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}dojo.mixin(this,_1025);}}else{dojo.mixin(this,arg);}}}};dojo.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});dojo.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(angle){var c=Math.cos(angle);var s=Math.sin(angle);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_1030){return m.rotate(m._degToRad(_1030));},skewX:function(angle){return new m.Matrix2D({xy:Math.tan(angle)});},skewXg:function(_1032){return m.skewX(m._degToRad(_1032));},skewY:function(angle){return new m.Matrix2D({yx:Math.tan(angle)});},skewYg:function(_1034){return m.skewY(m._degToRad(_1034));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_1041){return (_1041 instanceof m.Matrix2D)?_1041:new m.Matrix2D(_1041);},clone:function(_1042){var obj=new m.Matrix2D();for(var i in _1042){if(typeof (_1042[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_1042[i]){obj[i]=_1042[i];}}return obj;},invert:function(_1045){var M=m.normalize(_1045),D=M.xx*M.yy-M.xy*M.yx,M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_1048,x,y){return {x:_1048.xx*x+_1048.xy*y+_1048.dx,y:_1048.yx*x+_1048.yy*y+_1048.dy};},multiplyPoint:function(_104b,a,b){var M=m.normalize(_104b);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiply:function(_104f){var M=m.normalize(_104f);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_1054,x,y){return m.multiply(m.translate(x,y),_1054,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(angle,a,b){if(arguments.length>2){return m._sandwich(m.rotate(angle),a,b);}return m._sandwich(m.rotate(angle),a.x,a.y);},rotategAt:function(_105e,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_105e),a,b);}return m._sandwich(m.rotateg(_105e),a.x,a.y);},skewXAt:function(angle,a,b){if(arguments.length>2){return m._sandwich(m.skewX(angle),a,b);}return m._sandwich(m.skewX(angle),a.x,a.y);},skewXgAt:function(_1064,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_1064),a,b);}return m._sandwich(m.skewXg(_1064),a.x,a.y);},skewYAt:function(angle,a,b){if(arguments.length>2){return m._sandwich(m.skewY(angle),a,b);}return m._sandwich(m.skewY(angle),a.x,a.y);},skewYgAt:function(_106a,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_106a),a,b);}return m._sandwich(m.skewYg(_106a),a.x,a.y);}});})();dojox.gfx.Matrix2D=dojox.gfx.matrix.Matrix2D;}if(!dojo._hasResource["dojox.gfx._base"]){dojo._hasResource["dojox.gfx._base"]=true;dojo.provide("dojox.gfx._base");(function(){var g=dojox.gfx,b=g._base;g._hasClass=function(node,_1070){var cls=node.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_1070+" ")>=0;};g._addClass=function(node,_1073){var cls=node.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_1073+" ")<0){node.setAttribute("className",cls+(cls?" ":"")+_1073);}};g._removeClass=function(node,_1076){var cls=node.getAttribute("className");if(cls){node.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_1076+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _1078={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.doc.createElement("div");var s=div.style;s.position="absolute";s.left="-100px";s.top="0px";s.width="30px";s.height="1000em";s.border="0px";s.margin="0px";s.padding="0px";s.outline="none";s.lineHeight="1";s.overflow="hidden";dojo.body().appendChild(div);for(var p in _1078){div.style.fontSize=p;_1078[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);div=null;return _1078;};var _107c=null;b._getCachedFontMeasurements=function(_107d){if(_107d||!_107c){_107c=b._getFontMeasurements();}return _107c;};var _107e=null,empty={};b._getTextBox=function(text,style,_1082){var m,s;if(!_107e){m=_107e=dojo.doc.createElement("div");s=m.style;s.position="absolute";s.left="-10000px";s.top="0";dojo.body().appendChild(m);}else{m=_107e;s=m.style;}m.className="";s.border="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&style){for(var i in style){if(i in empty){continue;}s[i]=style[i];}}if(arguments.length>2&&_1082){m.className=_1082;}m.innerHTML=text;return dojo.marginBox(m);};var _1086=0;b._getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++_1086);}while(dojo.byId(id));return id;};})();dojo.mixin(dojox.gfx,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _1088={};return function(type){var t=_1088[type];if(t){return new t();}t=_1088[type]=function(){};t.prototype=dojox.gfx["default"+type];return new t();};})(),normalizeColor:function(color){return (color instanceof dojo.Color)?color:new dojo.Color(color);},normalizeParameters:function(_108c,_108d){if(_108d){var empty={};for(var x in _108c){if(x in _108d&&!(x in empty)){_108c[x]=_108d[x];}}}return _108c;},makeParameters:function(_1090,_1091){if(!_1091){return dojo.delegate(_1090);}var _1092={};for(var i in _1090){if(!(i in _1092)){_1092[i]=dojo.clone((i in _1091)?_1091[i]:_1090[i]);}}return _1092;},formatNumber:function(x,_1095){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var point=val.indexOf(".");if(point>=0&&val.length-point>5){val=x.toFixed(4);}}if(x<0){return val;}return _1095?" "+val:val;},makeFontString:function(font){return font.style+" "+font.variant+" "+font.weight+" "+font.size+" "+font.family;},splitFontString:function(str){var font=dojox.gfx.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}font.style=t[0];font.varian=t[1];font.weight=t[2];var i=t[3].indexOf("/");font.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;break;}if(t[4].substr(0,1)=="/"){j=5;break;}}if(j+3>t.length){break;}font.size=t[j];font.family=t[j+1];}while(false);return font;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return dojox.gfx._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*dojox.gfx.px_in_pt();},px2pt:function(len){return len/dojox.gfx.px_in_pt();},normalizedLength:function(len){if(len.length==0){return 0;}if(len.length>2){var _10a1=dojox.gfx.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_10a1;case "in":return val*72*_10a1;case "pc":return val*12*_10a1;case "mm":return val*dojox.gfx.mm_in_pt*_10a1;case "cm":return val*dojox.gfx.cm_in_pt*_10a1;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a==b;}});}if(!dojo._hasResource["dojox.gfx"]){dojo._hasResource["dojox.gfx"]=true;dojo.provide("dojox.gfx");dojo.loadInit(function(){var gfx=dojo.getObject("dojox.gfx",true),sl,flag,match;if(!gfx.renderer){var _10a9=(typeof dojo.config.gfxRenderer=="string"?dojo.config.gfxRenderer:"svg,vml,silverlight,canvas").split(",");var ua=navigator.userAgent,_10ab=0,_10ac=0;if(dojo.isSafari>=3){if(ua.indexOf("iPhone")>=0||ua.indexOf("iPod")>=0){match=ua.match(/Version\/(\d(\.\d)?(\.\d)?)\sMobile\/([^\s]*)\s?/);if(match){_10ab=parseInt(match[4].substr(0,3),16);}}}if(dojo.isWebKit){if(!_10ab){match=ua.match(/Android\s+(\d+\.\d+)/);if(match){_10ac=parseFloat(match[1]);}}}for(var i=0;i<_10a9.length;++i){switch(_10a9[i]){case "svg":if(!dojo.isIE&&(!_10ab||_10ab>=1521)&&!_10ac&&!dojo.isAIR){dojox.gfx.renderer="svg";}break;case "vml":if(dojo.isIE){dojox.gfx.renderer="vml";}break;case "silverlight":try{if(dojo.isIE){sl=new ActiveXObject("AgControl.AgControl");if(sl&&sl.IsVersionSupported("1.0")){flag=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){flag=true;}}}catch(e){flag=false;}finally{sl=null;}if(flag){dojox.gfx.renderer="silverlight";}break;case "canvas":if(!dojo.isIE){dojox.gfx.renderer="canvas";}break;}if(dojox.gfx.renderer){break;}}if(dojo.config.isDebug){console.log("gfx renderer = "+dojox.gfx.renderer);}}});dojo.requireIf(dojox.gfx.renderer=="svg","dojox.gfx.svg");dojo.requireIf(dojox.gfx.renderer=="vml","dojox.gfx.vml");dojo.requireIf(dojox.gfx.renderer=="silverlight","dojox.gfx.silverlight");dojo.requireIf(dojox.gfx.renderer=="canvas","dojox.gfx.canvas");}if(!dojo._hasResource["dojox.lang.functional.lambda"]){dojo._hasResource["dojox.lang.functional.lambda"]=true;dojo.provide("dojox.lang.functional.lambda");(function(){var df=dojox.lang.functional,_10af={};var split="ab".split(/a*/).length>1?String.prototype.split:function(sep){var r=this.split.call(this,sep),m=sep.exec(this);if(m&&m.index==0){r.unshift("");}return r;};var _10b4=function(s){var args=[],sects=split.call(s,/\s*->\s*/m);if(sects.length>1){while(sects.length){s=sects.pop();args=sects.pop().split(/\s*,\s*|\s+/m);if(sects.length){sects.push("(function("+args+"){return ("+s+")})");}}}else{if(s.match(/\b_\b/)){args=["_"];}else{var l=s.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),r=s.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(l||r){if(l){args.push("$1");s="$1"+s;}if(r){args.push("$2");s=s+"$2";}}else{var vars=s.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],t={};dojo.forEach(vars,function(v){if(!(v in t)){args.push(v);t[v]=1;}});}}}return {args:args,body:s};};var _10bd=function(a){return a.length?function(){var i=a.length-1,x=df.lambda(a[i]).apply(this,arguments);for(--i;i>=0;--i){x=df.lambda(a[i]).call(this,x);}return x;}:function(x){return x;};};dojo.mixin(df,{rawLambda:function(s){return _10b4(s);},buildLambda:function(s){s=_10b4(s);return "function("+s.args.join(",")+"){return ("+s.body+");}";},lambda:function(s){if(typeof s=="function"){return s;}if(s instanceof Array){return _10bd(s);}if(s in _10af){return _10af[s];}s=_10b4(s);return _10af[s]=new Function(s.args,"return ("+s.body+");");},clearLambdaCache:function(){_10af={};}});})();}if(!dojo._hasResource["dojox.lang.functional.array"]){dojo._hasResource["dojox.lang.functional.array"]=true;dojo.provide("dojox.lang.functional.array");(function(){var d=dojo,df=dojox.lang.functional,empty={};d.mixin(df,{filter:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t=[],v,i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){v=a.next();if(f.call(o,v,i++,a)){t.push(v);}}}else{for(i in a){if(!(i in empty)){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}}}return t;},forEach:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();f.call(o,a.next(),i++,a)){}}else{for(i in a){if(!(i in empty)){f.call(o,a[i],i,a);}}}}return o;},map:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array(n=a.length);for(i=0;i<n;t[i]=f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[];for(i=0;a.hasNext();t.push(f.call(o,a.next(),i++,a))){}}else{t=[];for(i in a){if(!(i in empty)){t.push(f.call(o,a[i],i,a));}}}}return t;},every:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){if(!f.call(o,a[i],i,a)){return false;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(!f.call(o,a.next(),i++,a)){return false;}}}else{for(i in a){if(!(i in empty)){if(!f.call(o,a[i],i,a)){return false;}}}}}return true;},some:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){if(f.call(o,a[i],i,a)){return true;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(f.call(o,a.next(),i++,a)){return true;}}}else{for(i in a){if(!(i in empty)){if(f.call(o,a[i],i,a)){return true;}}}}}return false;}});})();}if(!dojo._hasResource["dojox.lang.functional.object"]){dojo._hasResource["dojox.lang.functional.object"]=true;dojo.provide("dojox.lang.functional.object");(function(){var d=dojo,df=dojox.lang.functional,empty={};d.mixin(df,{keys:function(obj){var t=[];for(var i in obj){if(!(i in empty)){t.push(i);}}return t;},values:function(obj){var t=[];for(var i in obj){if(!(i in empty)){t.push(obj[i]);}}return t;},filterIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);var t={},v,i;for(i in obj){if(!(i in empty)){v=obj[i];if(f.call(o,v,i,obj)){t[i]=v;}}}return t;},forIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);for(var i in obj){if(!(i in empty)){f.call(o,obj[i],i,obj);}}return o;},mapIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);var t={},i;for(i in obj){if(!(i in empty)){t[i]=f.call(o,obj[i],i,obj);}}return t;}});})();}if(!dojo._hasResource["dojox.lang.functional"]){dojo._hasResource["dojox.lang.functional"]=true;dojo.provide("dojox.lang.functional");}if(!dojo._hasResource["dojox.lang.functional.fold"]){dojo._hasResource["dojox.lang.functional.fold"]=true;dojo.provide("dojox.lang.functional.fold");(function(){var d=dojo,df=dojox.lang.functional,empty={};d.mixin(df,{foldl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}else{for(i in a){if(!(i in empty)){z=f.call(o,z,a[i],i,a);}}}}return z;},foldl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var z,i,n;if(d.isArray(a)){z=a[0];for(i=1,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){z=a.next();for(i=1;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}}else{var first=true;for(i in a){if(!(i in empty)){if(first){z=a[i];first=false;}else{z=f.call(o,z,a[i],i,a);}}}}}return z;},foldr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},foldr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,z=a[n-1],i=n-1;for(;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},reduce:function(a,f,z){return arguments.length<3?df.foldl1(a,f):df.foldl(a,f,z);},reduceRight:function(a,f,z){return arguments.length<3?df.foldr1(a,f):df.foldr(a,f,z);},unfold:function(pr,f,g,z,o){o=o||d.global;f=df.lambda(f);g=df.lambda(g);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(f.call(o,z)),z=g.call(o,z)){}return t;}});})();}if(!dojo._hasResource["dojox.lang.functional.reversed"]){dojo._hasResource["dojox.lang.functional.reversed"]=true;dojo.provide("dojox.lang.functional.reversed");(function(){var d=dojo,df=dojox.lang.functional;d.mixin(df,{filterRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t=[],v,i=a.length-1;for(;i>=0;--i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}return t;},forEachRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;f.call(o,a[i],i,a),--i){}},mapRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),i=n-1,j=0;for(;i>=0;t[j++]=f.call(o,a[i],i,a),--i){}return t;},everyRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(!f.call(o,a[i],i,a)){return false;}}return true;},someRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(f.call(o,a[i],i,a)){return true;}}return false;}});})();}if(!dojo._hasResource["dojo.colors"]){dojo._hasResource["dojo.colors"]=true;dojo.provide("dojo.colors");(function(){var _113e=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=function(color,obj){var m=color.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=dojo.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}return dojo.colorFromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_113e(m1,m2,H+1/3)*256,_113e(m1,m2,H)*256,_113e(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}}return null;};var _1151=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};dojo.Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_1151(t.r,0,255));t.g=Math.round(_1151(t.g,0,255));t.b=Math.round(_1151(t.b,0,255));t.a=_1151(t.a,0,1);return this;};})();dojo.colors.makeGrey=function(g,a){return dojo.colorFromArray([g,g,g,a]);};dojo.mixin(dojo.Color.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],transparent:[0,0,0,0],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});}if(!dojo._hasResource["dojox.color._base"]){dojo._hasResource["dojox.color._base"]=true;dojo.provide("dojox.color._base");dojox.color.Color=dojo.Color;dojox.color.blend=dojo.blendColors;dojox.color.fromRgb=dojo.colorFromRgb;dojox.color.fromHex=dojo.colorFromHex;dojox.color.fromArray=dojo.colorFromArray;dojox.color.fromString=dojo.colorFromString;dojox.color.greyscale=dojo.colors.makeGrey;dojo.mixin(dojox.color,{fromCmy:function(cyan,_1159,_115a){if(dojo.isArray(cyan)){_1159=cyan[1],_115a=cyan[2],cyan=cyan[0];}else{if(dojo.isObject(cyan)){_1159=cyan.m,_115a=cyan.y,cyan=cyan.c;}}cyan/=100,_1159/=100,_115a/=100;var r=1-cyan,g=1-_1159,b=1-_115a;return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_115f,_1160,black){if(dojo.isArray(cyan)){_115f=cyan[1],_1160=cyan[2],black=cyan[3],cyan=cyan[0];}else{if(dojo.isObject(cyan)){_115f=cyan.m,_1160=cyan.y,black=cyan.b,cyan=cyan.c;}}cyan/=100,_115f/=100,_1160/=100,black/=100;var r,g,b;r=1-Math.min(1,cyan*(1-black)+black);g=1-Math.min(1,_115f*(1-black)+black);b=1-Math.min(1,_1160*(1-black)+black);return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_1166,_1167){if(dojo.isArray(hue)){_1166=hue[1],_1167=hue[2],hue=hue[0];}else{if(dojo.isObject(hue)){_1166=hue.s,_1167=hue.l,hue=hue.h;}}_1166/=100;_1167/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_1166*Math.min(r,1)+(1-_1166);g=2*_1166*Math.min(g,1)+(1-_1166);b=2*_1166*Math.min(b,1)+(1-_1166);if(_1167<0.5){r*=_1167,g*=_1167,b*=_1167;}else{r=(1-_1167)*r+2*_1167-1;g=(1-_1167)*g+2*_1167-1;b=(1-_1167)*b+2*_1167-1;}return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsv:function(hue,_116c,value){if(dojo.isArray(hue)){_116c=hue[1],value=hue[2],hue=hue[0];}else{if(dojo.isObject(hue)){_116c=hue.s,value=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_116c/=100;value/=100;var r,g,b;if(_116c==0){r=value,b=value,g=value;}else{var hTemp=hue/60,i=Math.floor(hTemp),f=hTemp-i;var p=value*(1-_116c);var q=value*(1-(_116c*f));var t=value*(1-(_116c*(1-f)));switch(i){case 0:r=value,g=t,b=p;break;case 1:r=q,g=value,b=p;break;case 2:r=p,g=value,b=t;break;case 3:r=p,g=q,b=value;break;case 4:r=t,g=p,b=value;break;case 5:r=value,g=p,b=q;break;}}return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});dojo.extend(dojox.color.Color,{toCmy:function(){var cyan=1-(this.r/255),_1178=1-(this.g/255),_1179=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_1178*100),y:Math.round(_1179*100)};},toCmyk:function(){var cyan,_117b,_117c,black;var r=this.r/255,g=this.g/255,b=this.b/255;black=Math.min(1-r,1-g,1-b);cyan=(1-r-black)/(1-black);_117b=(1-g-black)/(1-black);_117c=(1-b-black)/(1-black);return {c:Math.round(cyan*100),m:Math.round(_117b*100),y:Math.round(_117c*100),b:Math.round(black*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var delta=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=delta/((l<0.5)?(2*l):(2-2*l));}if(delta>0){if(max==r&&max!=g){h+=(g-b)/delta;}if(max==g&&max!=b){h+=(2+(b-r)/delta);}if(max==b&&max!=r){h+=(4+(r-g)/delta);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var delta=max-min;var h=null,s=(max==0)?0:(delta/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/delta;}else{if(g==max){h=120+60*(b-r)/delta;}else{h=240+60*(r-g)/delta;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});}if(!dojo._hasResource["dojox.color"]){dojo._hasResource["dojox.color"]=true;dojo.provide("dojox.color");}if(!dojo._hasResource["dojox.color.Palette"]){dojo._hasResource["dojox.color.Palette"]=true;dojo.provide("dojox.color.Palette");(function(){var dxc=dojox.color;dxc.Palette=function(base){this.colors=[];if(base instanceof dojox.color.Palette){this.colors=base.colors.slice(0);}else{if(base instanceof dojox.color.Color){this.colors=[null,null,base,null,null];}else{if(dojo.isArray(base)){this.colors=dojo.map(base.slice(0),function(item){if(dojo.isString(item)){return new dojox.color.Color(item);}return item;});}else{if(dojo.isString(base)){this.colors=[null,null,new dojox.color.Color(base),null,null];}}}}};function tRGBA(p,param,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var r=(param=="dr")?item.r+val:item.r,g=(param=="dg")?item.g+val:item.g,b=(param=="db")?item.b+val:item.b,a=(param=="da")?item.a+val:item.a;ret.colors.push(new dojox.color.Color({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,b)),a:Math.min(1,Math.max(0,a))}));});console.log("The return colors are ",ret.colors," from the original colors ",p.colors);return ret;};function tCMY(p,param,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toCmy(),c=(param=="dc")?o.c+val:o.c,m=(param=="dm")?o.m+val:o.m,y=(param=="dy")?o.y+val:o.y;ret.colors.push(dojox.color.fromCmy(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y))));});return ret;};function tCMYK(p,param,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toCmyk(),c=(param=="dc")?o.c+val:o.c,m=(param=="dm")?o.m+val:o.m,y=(param=="dy")?o.y+val:o.y,k=(param=="dk")?o.b+val:o.b;ret.colors.push(dojox.color.fromCmyk(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y)),Math.min(100,Math.max(0,k))));});return ret;};function tHSL(p,param,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toHsl(),h=(param=="dh")?o.h+val:o.h,s=(param=="ds")?o.s+val:o.s,l=(param=="dl")?o.l+val:o.l;ret.colors.push(dojox.color.fromHsl(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,l))));});return ret;};function tHSV(p,param,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toHsv(),h=(param=="dh")?o.h+val:o.h,s=(param=="ds")?o.s+val:o.s,v=(param=="dv")?o.v+val:o.v;ret.colors.push(dojox.color.fromHsv(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,v))));});return ret;};function _11c8(val,low,high){return high-((high-val)*((high-low)/high));};dojo.extend(dxc.Palette,{transform:function(_11cc){var fn=tRGBA;if(_11cc.use){var use=_11cc.use.toLowerCase();if(use.indexOf("hs")==0){if(use.charAt(2)=="l"){fn=tHSL;}else{fn=tHSV;}}else{if(use.indexOf("cmy")==0){if(use.charAt(3)=="k"){fn=tCMYK;}else{fn=tCMY;}}}}else{if("dc" in _11cc||"dm" in _11cc||"dy" in _11cc){if("dk" in _11cc){fn=tCMYK;}else{fn=tCMY;}}else{if("dh" in _11cc||"ds" in _11cc){if("dv" in _11cc){fn=tHSV;}else{fn=tHSL;}}}}var _11cf=this;for(var p in _11cc){if(p=="use"){continue;}_11cf=fn(_11cf,p,_11cc[p]);}return _11cf;},clone:function(){return new dxc.Palette(this);}});dojo.mixin(dxc.Palette,{generators:{analogous:function(args){var high=args.high||60,low=args.low||18,base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h=[(hsv.h+low+360)%360,(hsv.h+Math.round(low/2)+360)%360,hsv.h,(hsv.h-Math.round(high/2)+360)%360,(hsv.h-high+360)%360];var s1=Math.max(10,(hsv.s<=95)?hsv.s+5:(100-(hsv.s-95))),s2=(hsv.s>1)?hsv.s-1:21-hsv.s,v1=(hsv.v>=92)?hsv.v-9:Math.max(hsv.v+9,20),v2=(hsv.v<=90)?Math.max(hsv.v+5,20):(95+Math.ceil((hsv.v-90)/2)),s=[s1,s2,hsv.s,s1,s1],v=[v1,v2,hsv.v,v1,v2];return new dxc.Palette(dojo.map(h,function(hue,i){return dojox.color.fromHsv(hue,s[i],v[i]);}));},monochromatic:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var s1=(hsv.s-30>9)?hsv.s-30:hsv.s+30,s2=hsv.s,v1=_11c8(hsv.v,20,100),v2=(hsv.v-20>20)?hsv.v-20:hsv.v+60,v3=(hsv.v-50>20)?hsv.v-50:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(hsv.h,s1,v1),dojox.color.fromHsv(hsv.h,s2,v3),base,dojox.color.fromHsv(hsv.h,s1,v3),dojox.color.fromHsv(hsv.h,s2,v2)]);},triadic:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h1=(hsv.h+57+360)%360,h2=(hsv.h-157+360)%360,s1=(hsv.s>20)?hsv.s-10:hsv.s+10,s2=(hsv.s>90)?hsv.s-10:hsv.s+10,s3=(hsv.s>95)?hsv.s-5:hsv.s+5,v1=(hsv.v-20>20)?hsv.v-20:hsv.v+20,v2=(hsv.v-30>20)?hsv.v-30:hsv.v+30,v3=(hsv.v-30>70)?hsv.v-30:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(h1,s1,hsv.v),dojox.color.fromHsv(hsv.h,s2,v2),base,dojox.color.fromHsv(h2,s2,v1),dojox.color.fromHsv(h2,s3,v3)]);},complementary:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,s1=Math.max(hsv.s-10,0),s2=_11c8(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(hsv.h,s1,v1),dojox.color.fromHsv(hsv.h,s2,v2),base,dojox.color.fromHsv(h1,s3,v2),dojox.color.fromHsv(h1,hsv.s,hsv.v)]);},splitComplementary:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,_11fd=args.da||30,hsv=base.toHsv();var baseh=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,h1=(baseh-_11fd+360)%360,h2=(baseh+_11fd)%360,s1=Math.max(hsv.s-10,0),s2=_11c8(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(h1,s1,v1),dojox.color.fromHsv(h1,s2,v2),base,dojox.color.fromHsv(h2,s3,v2),dojox.color.fromHsv(h2,hsv.s,hsv.v)]);},compound:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+18<360)?(hsv.h*2)+18:Math.floor(hsv.h/2)-18,h2=((hsv.h*2)+120<360)?(hsv.h*2)+120:Math.floor(hsv.h/2)-120,h3=((hsv.h*2)+99<360)?(hsv.h*2)+99:Math.floor(hsv.h/2)-99,s1=(hsv.s-40>10)?hsv.s-40:hsv.s+40,s2=(hsv.s-10>80)?hsv.s-10:hsv.s+10,s3=(hsv.s-25>10)?hsv.s-25:hsv.s+25,v1=(hsv.v-40>10)?hsv.v-40:hsv.v+40,v2=(hsv.v-20>80)?hsv.v-20:hsv.v+20,v3=Math.max(hsv.v,20);return new dxc.Palette([dojox.color.fromHsv(h1,s1,v1),dojox.color.fromHsv(h1,s2,v2),base,dojox.color.fromHsv(h2,s3,v3),dojox.color.fromHsv(h3,s2,v2)]);},shades:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var s=(hsv.s==100&&hsv.v==0)?0:hsv.s,v1=(hsv.v-50>20)?hsv.v-50:hsv.v+30,v2=(hsv.v-25>=20)?hsv.v-25:hsv.v+55,v3=(hsv.v-75>=20)?hsv.v-75:hsv.v+5,v4=Math.max(hsv.v-10,20);return new dxc.Palette([new dojox.color.fromHsv(hsv.h,s,v1),new dojox.color.fromHsv(hsv.h,s,v2),base,new dojox.color.fromHsv(hsv.h,s,v3),new dojox.color.fromHsv(hsv.h,s,v4)]);}},generate:function(base,type){if(dojo.isFunction(type)){return type({base:base});}else{if(dxc.Palette.generators[type]){return dxc.Palette.generators[type]({base:base});}}throw new Error("dojox.color.Palette.generate: the specified generator ('"+type+"') does not exist.");}});})();}if(!dojo._hasResource["dojox.charting.Theme"]){dojo._hasResource["dojox.charting.Theme"]=true;dojo.provide("dojox.charting.Theme");(function(){var dxc=dojox.charting;dxc.Theme=function(_121e){_121e=_121e||{};var def=dxc.Theme._def;dojo.forEach(["chart","plotarea","axis","series","marker"],function(n){this[n]=dojo.delegate(def[n],_121e[n]||{});},this);this.markers=dojo.delegate(dxc.Theme.Markers,_121e.markers||{});this.colors=[];this.antiAlias=("antiAlias" in _121e)?_121e.antiAlias:true;this.assignColors=("assignColors" in _121e)?_121e.assignColors:true;this.assignMarkers=("assignMarkers" in _121e)?_121e.assignMarkers:true;_121e.colors=_121e.colors||def.colors;dojo.forEach(_121e.colors,function(item){this.colors.push(item);},this);this._current={color:0,marker:0};this._markers=[];this._buildMarkerArray();};dxc.Theme.Markers={CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"};dxc.Theme._def={chart:{stroke:null,fill:"white"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},majorTick:{color:"#666",width:1,length:6,position:"center"},minorTick:{color:"#666",width:0.8,length:3,position:"center"},font:"normal normal normal 7pt Tahoma",fontColor:"#333"},series:{outline:{width:0.1,color:"#ccc"},stroke:{width:1.5,color:"#333"},fill:"#ccc",font:"normal normal normal 7pt Tahoma",fontColor:"#000"},marker:{stroke:{width:1},fill:"#333",font:"normal normal normal 7pt Tahoma",fontColor:"#000"},colors:["#54544c","#858e94","#6e767a","#948585","#474747"]};dojo.extend(dxc.Theme,{defineColors:function(obj){var _1223=obj||{};var c=[],n=_1223.num||5;if(_1223.colors){var l=_1223.colors.length;for(var i=0;i<n;i++){c.push(_1223.colors[i%l]);}this.colors=c;}else{if(_1223.hue){var s=_1223.saturation||100;var st=_1223.low||30;var end=_1223.high||90;var l=(end+st)/2;this.colors=dojox.color.Palette.generate(dojox.color.fromHsv(_1223.hue,s,l),"monochromatic").colors;}else{if(_1223.generator){this.colors=dojox.color.Palette.generate(_1223.base,_1223.generator).colors;}}}},_buildMarkerArray:function(){this._markers=[];for(var p in this.markers){this._markers.push(this.markers[p]);}this._current.marker=0;},_clone:function(){return new dxc.Theme({chart:this.chart,plotarea:this.plotarea,axis:this.axis,series:this.series,marker:this.marker,antiAlias:this.antiAlias,assignColors:this.assignColors,assignMarkers:this.assigneMarkers,colors:dojo.delegate(this.colors)});},addMarker:function(name,_122d){this.markers[name]=_122d;this._buildMarkerArray();},setMarkers:function(obj){this.markers=obj;this._buildMarkerArray();},next:function(type){if(type=="marker"){return this._markers[this._current.marker++%this._markers.length];}else{return this.colors[this._current.color++%this.colors.length];}},clear:function(){this._current={color:0,marker:0};}});})();}if(!dojo._hasResource["dojox.charting.Element"]){dojo._hasResource["dojox.charting.Element"]=true;dojo.provide("dojox.charting.Element");dojo.declare("dojox.charting.Element",null,{constructor:function(chart){this.chart=chart;this.group=null;this.htmlElements=[];this.dirty=true;},createGroup:function(_1231){if(!_1231){_1231=this.chart.surface;}if(!this.group){this.group=_1231.createGroup();}return this;},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.group.clear();this.group.removeShape();this.group=null;}this.dirty=true;return this;},cleanGroup:function(_1232){this.destroyHtmlElements();if(!_1232){_1232=this.chart.surface;}if(this.group){this.group.clear();}else{this.group=_1232.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){dojo.forEach(this.htmlElements,dojo.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();}});}if(!dojo._hasResource["dojox.charting.Series"]){dojo._hasResource["dojox.charting.Series"]=true;dojo.provide("dojox.charting.Series");dojo.declare("dojox.charting.Series",dojox.charting.Element,{constructor:function(chart,data,_1235){dojo.mixin(this,_1235);if(typeof this.plot!="string"){this.plot="default";}this.data=data;this.dirty=true;this.clear();},clear:function(){this.dyn={};}});}if(!dojo._hasResource["dojox.charting.scaler.common"]){dojo._hasResource["dojox.charting.scaler.common"]=true;dojo.provide("dojox.charting.scaler.common");(function(){var eq=function(a,b){return Math.abs(a-b)<=0.000001*(Math.abs(a)+Math.abs(b));};dojo.mixin(dojox.charting.scaler.common,{findString:function(val,text){val=val.toLowerCase();for(var i=0;i<text.length;++i){if(val==text[i]){return true;}}return false;},getNumericLabel:function(_123c,_123d,_123e){var def=_123e.fixed?_123c.toFixed(_123d<0?-_123d:0):_123c.toString();if(_123e.labelFunc){var r=_123e.labelFunc(def,_123c,_123d);if(r){return r;}}if(_123e.labels){var l=_123e.labels,lo=0,hi=l.length;while(lo<hi){var mid=Math.floor((lo+hi)/2),val=l[mid].value;if(val<_123c){lo=mid+1;}else{hi=mid;}}if(lo<l.length&&eq(l[lo].value,_123c)){return l[lo].text;}--lo;if(lo>=0&&lo<l.length&&eq(l[lo].value,_123c)){return l[lo].text;}lo+=2;if(lo<l.length&&eq(l[lo].value,_123c)){return l[lo].text;}}return def;}});})();}if(!dojo._hasResource["dojox.charting.scaler.linear"]){dojo._hasResource["dojox.charting.scaler.linear"]=true;dojo.provide("dojox.charting.scaler.linear");(function(){var _1246=3,dc=dojox.charting,dcs=dc.scaler,dcsc=dcs.common,_124a=dcsc.findString,_124b=dcsc.getNumericLabel;var _124c=function(min,max,_124f,_1250,_1251,_1252,span){_124f=dojo.delegate(_124f);if(!_1250){if(_124f.fixUpper=="major"){_124f.fixUpper="minor";}if(_124f.fixLower=="major"){_124f.fixLower="minor";}}if(!_1251){if(_124f.fixUpper=="minor"){_124f.fixUpper="micro";}if(_124f.fixLower=="minor"){_124f.fixLower="micro";}}if(!_1252){if(_124f.fixUpper=="micro"){_124f.fixUpper="none";}if(_124f.fixLower=="micro"){_124f.fixLower="none";}}var _1254=_124a(_124f.fixLower,["major"])?Math.floor(_124f.min/_1250)*_1250:_124a(_124f.fixLower,["minor"])?Math.floor(_124f.min/_1251)*_1251:_124a(_124f.fixLower,["micro"])?Math.floor(_124f.min/_1252)*_1252:_124f.min,_1255=_124a(_124f.fixUpper,["major"])?Math.ceil(_124f.max/_1250)*_1250:_124a(_124f.fixUpper,["minor"])?Math.ceil(_124f.max/_1251)*_1251:_124a(_124f.fixUpper,["micro"])?Math.ceil(_124f.max/_1252)*_1252:_124f.max;if(_124f.useMin){min=_1254;}if(_124f.useMax){max=_1255;}var _1256=(!_1250||_124f.useMin&&_124a(_124f.fixLower,["major"]))?min:Math.ceil(min/_1250)*_1250,_1257=(!_1251||_124f.useMin&&_124a(_124f.fixLower,["major","minor"]))?min:Math.ceil(min/_1251)*_1251,_1258=(!_1252||_124f.useMin&&_124a(_124f.fixLower,["major","minor","micro"]))?min:Math.ceil(min/_1252)*_1252,_1259=!_1250?0:(_124f.useMax&&_124a(_124f.fixUpper,["major"])?Math.round((max-_1256)/_1250):Math.floor((max-_1256)/_1250))+1,_125a=!_1251?0:(_124f.useMax&&_124a(_124f.fixUpper,["major","minor"])?Math.round((max-_1257)/_1251):Math.floor((max-_1257)/_1251))+1,_125b=!_1252?0:(_124f.useMax&&_124a(_124f.fixUpper,["major","minor","micro"])?Math.round((max-_1258)/_1252):Math.floor((max-_1258)/_1252))+1,_125c=_1251?Math.round(_1250/_1251):0,_125d=_1252?Math.round(_1251/_1252):0,_125e=_1250?Math.floor(Math.log(_1250)/Math.LN10):0,_125f=_1251?Math.floor(Math.log(_1251)/Math.LN10):0,scale=span/(max-min);if(!isFinite(scale)){scale=1;}return {bounds:{lower:_1254,upper:_1255,from:min,to:max,scale:scale,span:span},major:{tick:_1250,start:_1256,count:_1259,prec:_125e},minor:{tick:_1251,start:_1257,count:_125a,prec:_125f},micro:{tick:_1252,start:_1258,count:_125b,prec:0},minorPerMajor:_125c,microPerMinor:_125d,scaler:dcs.linear};};dojo.mixin(dojox.charting.scaler.linear,{buildScaler:function(min,max,span,_1264){var h={fixUpper:"none",fixLower:"none",natural:false};if(_1264){if("fixUpper" in _1264){h.fixUpper=String(_1264.fixUpper);}if("fixLower" in _1264){h.fixLower=String(_1264.fixLower);}if("natural" in _1264){h.natural=Boolean(_1264.natural);}}if("min" in _1264){min=_1264.min;}if("max" in _1264){max=_1264.max;}if(_1264.includeZero){if(min>0){min=0;}if(max<0){max=0;}}h.min=min;h.useMin=true;h.max=max;h.useMax=true;if("from" in _1264){min=_1264.from;h.useMin=false;}if("to" in _1264){max=_1264.to;h.useMax=false;}if(max<=min){return _124c(min,max,h,0,0,0,span);}var mag=Math.floor(Math.log(max-min)/Math.LN10),major=_1264&&("majorTickStep" in _1264)?_1264.majorTickStep:Math.pow(10,mag),minor=0,micro=0,ticks;if(_1264&&("minorTickStep" in _1264)){minor=_1264.minorTickStep;}else{do{minor=major/10;if(!h.natural||minor>0.9){ticks=_124c(min,max,h,major,minor,0,span);if(ticks.bounds.scale*ticks.minor.tick>_1246){break;}}minor=major/5;if(!h.natural||minor>0.9){ticks=_124c(min,max,h,major,minor,0,span);if(ticks.bounds.scale*ticks.minor.tick>_1246){break;}}minor=major/2;if(!h.natural||minor>0.9){ticks=_124c(min,max,h,major,minor,0,span);if(ticks.bounds.scale*ticks.minor.tick>_1246){break;}}return _124c(min,max,h,major,0,0,span);}while(false);}if(_1264&&("microTickStep" in _1264)){micro=_1264.microTickStep;ticks=_124c(min,max,h,major,minor,micro,span);}else{do{micro=minor/10;if(!h.natural||micro>0.9){ticks=_124c(min,max,h,major,minor,micro,span);if(ticks.bounds.scale*ticks.micro.tick>_1246){break;}}micro=minor/5;if(!h.natural||micro>0.9){ticks=_124c(min,max,h,major,minor,micro,span);if(ticks.bounds.scale*ticks.micro.tick>_1246){break;}}micro=minor/2;if(!h.natural||micro>0.9){ticks=_124c(min,max,h,major,minor,micro,span);if(ticks.bounds.scale*ticks.micro.tick>_1246){break;}}micro=0;}while(false);}return micro?ticks:_124c(min,max,h,major,minor,0,span);},buildTicks:function(_126b,_126c){var step,next,tick,_1270=_126b.major.start,_1271=_126b.minor.start,_1272=_126b.micro.start;if(_126c.microTicks&&_126b.micro.tick){step=_126b.micro.tick,next=_1272;}else{if(_126c.minorTicks&&_126b.minor.tick){step=_126b.minor.tick,next=_1271;}else{if(_126b.major.tick){step=_126b.major.tick,next=_1270;}else{return null;}}}var _1273=1/_126b.bounds.scale;if(_126b.bounds.to<=_126b.bounds.from||isNaN(_1273)||!isFinite(_1273)||step<=0||isNaN(step)||!isFinite(step)){return null;}var _1274=[],_1275=[],_1276=[];while(next<=_126b.bounds.to+_1273){if(Math.abs(_1270-next)<step/2){tick={value:_1270};if(_126c.majorLabels){tick.label=_124b(_1270,_126b.major.prec,_126c);}_1274.push(tick);_1270+=_126b.major.tick;_1271+=_126b.minor.tick;_1272+=_126b.micro.tick;}else{if(Math.abs(_1271-next)<step/2){if(_126c.minorTicks){tick={value:_1271};if(_126c.minorLabels&&(_126b.minMinorStep<=_126b.minor.tick*_126b.bounds.scale)){tick.label=_124b(_1271,_126b.minor.prec,_126c);}_1275.push(tick);}_1271+=_126b.minor.tick;_1272+=_126b.micro.tick;}else{if(_126c.microTicks){_1276.push({value:_1272});}_1272+=_126b.micro.tick;}}next+=step;}return {major:_1274,minor:_1275,micro:_1276};},getTransformerFromModel:function(_1277){var _1278=_1277.bounds.from,scale=_1277.bounds.scale;return function(x){return (x-_1278)*scale;};},getTransformerFromPlot:function(_127b){var _127c=_127b.bounds.from,scale=_127b.bounds.scale;return function(x){return x/scale+_127c;};}});})();}if(!dojo._hasResource["dojox.charting.axis2d.common"]){dojo._hasResource["dojox.charting.axis2d.common"]=true;dojo.provide("dojox.charting.axis2d.common");(function(){var g=dojox.gfx;function _1280(s){s.marginLeft="0px";s.marginTop="0px";s.marginRight="0px";s.marginBottom="0px";s.paddingLeft="0px";s.paddingTop="0px";s.paddingRight="0px";s.paddingBottom="0px";s.borderLeftWidth="0px";s.borderTopWidth="0px";s.borderRightWidth="0px";s.borderBottomWidth="0px";};dojo.mixin(dojox.charting.axis2d.common,{createText:{gfx:function(chart,_1283,x,y,align,text,font,_1289){return _1283.createText({x:x,y:y,text:text,align:align}).setFont(font).setFill(_1289);},html:function(chart,_128b,x,y,align,text,font,_1291){var p=dojo.doc.createElement("div"),s=p.style;_1280(s);s.font=font;p.innerHTML=String(text).replace(/\s/g,"&nbsp;");s.color=_1291;s.position="absolute";s.left="-10000px";dojo.body().appendChild(p);var size=g.normalizedLength(g.splitFontString(font).size),box=dojo.marginBox(p);dojo.body().removeChild(p);s.position="relative";switch(align){case "middle":s.left=Math.floor(x-box.w/2)+"px";break;case "end":s.left=Math.floor(x-box.w)+"px";break;default:s.left=Math.floor(x)+"px";break;}s.top=Math.floor(y-size)+"px";var wrap=dojo.doc.createElement("div"),w=wrap.style;_1280(w);w.width="0px";w.height="0px";wrap.appendChild(p);chart.node.insertBefore(wrap,chart.node.firstChild);return wrap;}}});})();}if(!dojo._hasResource["dojox.charting.axis2d.Base"]){dojo._hasResource["dojox.charting.axis2d.Base"]=true;dojo.provide("dojox.charting.axis2d.Base");dojo.declare("dojox.charting.axis2d.Base",dojox.charting.Element,{constructor:function(chart,_1299){this.vertical=_1299&&_1299.vertical;},clear:function(){return this;},initialized:function(){return false;},calculate:function(min,max,span){return this;},getScaler:function(){return null;},getTicks:function(){return null;},getOffsets:function(){return {l:0,r:0,t:0,b:0};},render:function(dim,_129e){return this;}});}if(!dojo._hasResource["dojox.lang.utils"]){dojo._hasResource["dojox.lang.utils"]=true;dojo.provide("dojox.lang.utils");(function(){var empty={},du=dojox.lang.utils;var clone=function(o){if(dojo.isArray(o)){return dojo._toArray(o);}if(!dojo.isObject(o)||dojo.isFunction(o)){return o;}return dojo.delegate(o);};dojo.mixin(du,{coerceType:function(_12a3,_12a4){switch(typeof _12a3){case "number":return Number(eval("("+_12a4+")"));case "string":return String(_12a4);case "boolean":return Boolean(eval("("+_12a4+")"));}return eval("("+_12a4+")");},updateWithObject:function(_12a5,_12a6,conv){if(!_12a6){return _12a5;}for(var x in _12a5){if(x in _12a6&&!(x in empty)){var t=_12a5[x];if(t&&typeof t=="object"){du.updateWithObject(t,_12a6[x],conv);}else{_12a5[x]=conv?du.coerceType(t,_12a6[x]):clone(_12a6[x]);}}}return _12a5;},updateWithPattern:function(_12aa,_12ab,_12ac,conv){if(!_12ab||!_12ac){return _12aa;}for(var x in _12ac){if(x in _12ab&&!(x in empty)){_12aa[x]=conv?du.coerceType(_12ac[x],_12ab[x]):clone(_12ab[x]);}}return _12aa;}});})();}if(!dojo._hasResource["dojox.charting.axis2d.Default"]){dojo._hasResource["dojox.charting.axis2d.Default"]=true;dojo.provide("dojox.charting.axis2d.Default");(function(){var dc=dojox.charting,df=dojox.lang.functional,du=dojox.lang.utils,g=dojox.gfx,lin=dc.scaler.linear,_12b4=4;dojo.declare("dojox.charting.axis2d.Default",dojox.charting.axis2d.Base,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,htmlLabels:true},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,stroke:{},majorTick:{},minorTick:{},microTick:{},font:"",fontColor:""},constructor:function(chart,_12b6){this.opt=dojo.delegate(this.defaultParams,_12b6);du.updateWithPattern(this.opt,_12b6,this.optionalParams);},dependOnData:function(){return !("min" in this.opt)||!("max" in this.opt);},clear:function(){delete this.scaler;delete this.ticks;this.dirty=true;return this;},initialized:function(){return "scaler" in this&&!(this.dirty&&this.dependOnData());},setWindow:function(scale,_12b8){this.scale=scale;this.offset=_12b8;return this.clear();},getWindowScale:function(){return "scale" in this?this.scale:1;},getWindowOffset:function(){return "offset" in this?this.offset:0;},calculate:function(min,max,span,_12bc){if(this.initialized()){return this;}this.labels="labels" in this.opt?this.opt.labels:_12bc;this.scaler=lin.buildScaler(min,max,span,this.opt);if("scale" in this){this.opt.from=this.scaler.bounds.lower+this.offset;this.opt.to=(this.scaler.bounds.upper-this.scaler.bounds.lower)/this.scale+this.opt.from;if(!isFinite(this.opt.from)||isNaN(this.opt.from)||!isFinite(this.opt.to)||isNaN(this.opt.to)||this.opt.to-this.opt.from>=this.scaler.bounds.upper-this.scaler.bounds.lower){delete this.opt.from;delete this.opt.to;delete this.scale;delete this.offset;}else{if(this.opt.from<this.scaler.bounds.lower){this.opt.to+=this.scaler.bounds.lower-this.opt.from;this.opt.from=this.scaler.bounds.lower;}else{if(this.opt.to>this.scaler.bounds.upper){this.opt.from+=this.scaler.bounds.upper-this.opt.to;this.opt.to=this.scaler.bounds.upper;}}this.offset=this.opt.from-this.scaler.bounds.lower;}this.scaler=lin.buildScaler(min,max,span,this.opt);if(this.scale==1&&this.offset==0){delete this.scale;delete this.offset;}}var _12bd=0,ta=this.chart.theme.axis,_12bf="font" in this.opt?this.opt.font:ta.font,size=_12bf?g.normalizedLength(g.splitFontString(_12bf).size):0;if(this.vertical){if(size){_12bd=size+_12b4;}}else{if(size){var _12c1,i;if(this.opt.labelFunc&&this.opt.maxLabelSize){_12c1=this.opt.maxLabelSize;}else{if(this.labels){_12c1=df.foldl(df.map(this.labels,function(label){return dojox.gfx._base._getTextBox(label.text,{font:_12bf}).w;}),"Math.max(a, b)",0);}else{var _12c4=Math.ceil(Math.log(Math.max(Math.abs(this.scaler.bounds.from),Math.abs(this.scaler.bounds.to)))/Math.LN10),t=[];if(this.scaler.bounds.from<0||this.scaler.bounds.to<0){t.push("-");}t.push(dojo.string.rep("9",_12c4));var _12c6=Math.floor(Math.log(this.scaler.bounds.to-this.scaler.bounds.from)/Math.LN10);if(_12c6>0){t.push(".");for(i=0;i<_12c6;++i){t.push("9");}}_12c1=dojox.gfx._base._getTextBox(t.join(""),{font:_12bf}).w;}}_12bd=_12c1+_12b4;}}this.scaler.minMinorStep=_12bd;this.ticks=lin.buildTicks(this.scaler,this.opt);return this;},getScaler:function(){return this.scaler;},getTicks:function(){return this.ticks;},getOffsets:function(){var _12c7={l:0,r:0,t:0,b:0},_12c8,a,b,c,d,gtb=dojox.gfx._base._getTextBox,gl=dc.scaler.common.getNumericLabel,_12cf=0,ta=this.chart.theme.axis,_12d1="font" in this.opt?this.opt.font:ta.font,_12d2="majorTick" in this.opt?this.opt.majorTick:ta.majorTick,_12d3="minorTick" in this.opt?this.opt.minorTick:ta.minorTick,size=_12d1?g.normalizedLength(g.splitFontString(_12d1).size):0,s=this.scaler;if(!s){return _12c7;}if(this.vertical){if(size){if(this.opt.labelFunc&&this.opt.maxLabelSize){_12c8=this.opt.maxLabelSize;}else{if(this.labels){_12c8=df.foldl(df.map(this.labels,function(label){return dojox.gfx._base._getTextBox(label.text,{font:_12d1}).w;}),"Math.max(a, b)",0);}else{a=gtb(gl(s.major.start,s.major.prec,this.opt),{font:_12d1}).w;b=gtb(gl(s.major.start+s.major.count*s.major.tick,s.major.prec,this.opt),{font:_12d1}).w;c=gtb(gl(s.minor.start,s.minor.prec,this.opt),{font:_12d1}).w;d=gtb(gl(s.minor.start+s.minor.count*s.minor.tick,s.minor.prec,this.opt),{font:_12d1}).w;_12c8=Math.max(a,b,c,d);}}_12cf=_12c8+_12b4;}_12cf+=_12b4+Math.max(_12d2.length,_12d3.length);_12c7[this.opt.leftBottom?"l":"r"]=_12cf;_12c7.t=_12c7.b=size/2;}else{if(size){_12cf=size+_12b4;}_12cf+=_12b4+Math.max(_12d2.length,_12d3.length);_12c7[this.opt.leftBottom?"b":"t"]=_12cf;if(size){if(this.opt.labelFunc&&this.opt.maxLabelSize){_12c8=this.opt.maxLabelSize;}else{if(this.labels){_12c8=df.foldl(df.map(this.labels,function(label){return dojox.gfx._base._getTextBox(label.text,{font:_12d1}).w;}),"Math.max(a, b)",0);}else{a=gtb(gl(s.major.start,s.major.prec,this.opt),{font:_12d1}).w;b=gtb(gl(s.major.start+s.major.count*s.major.tick,s.major.prec,this.opt),{font:_12d1}).w;c=gtb(gl(s.minor.start,s.minor.prec,this.opt),{font:_12d1}).w;d=gtb(gl(s.minor.start+s.minor.count*s.minor.tick,s.minor.prec,this.opt),{font:_12d1}).w;_12c8=Math.max(a,b,c,d);}}_12c7.l=_12c7.r=_12c8/2;}}return _12c7;},render:function(dim,_12d9){if(!this.dirty){return this;}var start,stop,_12dc,_12dd,_12de,_12df,ta=this.chart.theme.axis,_12e1="stroke" in this.opt?this.opt.stroke:ta.stroke,_12e2="majorTick" in this.opt?this.opt.majorTick:ta.majorTick,_12e3="minorTick" in this.opt?this.opt.minorTick:ta.minorTick,_12e4="microTick" in this.opt?this.opt.microTick:ta.minorTick,_12e5="font" in this.opt?this.opt.font:ta.font,_12e6="fontColor" in this.opt?this.opt.fontColor:ta.fontColor,_12e7=Math.max(_12e2.length,_12e3.length),size=_12e5?g.normalizedLength(g.splitFontString(_12e5).size):0;if(this.vertical){start={y:dim.height-_12d9.b};stop={y:_12d9.t};_12dc={x:0,y:-1};if(this.opt.leftBottom){start.x=stop.x=_12d9.l;_12dd={x:-1,y:0};_12df="end";}else{start.x=stop.x=dim.width-_12d9.r;_12dd={x:1,y:0};_12df="start";}_12de={x:_12dd.x*(_12e7+_12b4),y:size*0.4};}else{start={x:_12d9.l};stop={x:dim.width-_12d9.r};_12dc={x:1,y:0};_12df="middle";if(this.opt.leftBottom){start.y=stop.y=dim.height-_12d9.b;_12dd={x:0,y:1};_12de={y:_12e7+_12b4+size};}else{start.y=stop.y=_12d9.t;_12dd={x:0,y:-1};_12de={y:-_12e7-_12b4};}_12de.x=0;}this.cleanGroup();try{var s=this.group,c=this.scaler,t=this.ticks,_12ec,f=lin.getTransformerFromModel(this.scaler),_12ee=dojox.gfx.renderer=="canvas",_12ef=_12ee||this.opt.htmlLabels&&!dojo.isIE&&!dojo.isOpera?"html":"gfx",dx=_12dd.x*_12e2.length,dy=_12dd.y*_12e2.length;s.createLine({x1:start.x,y1:start.y,x2:stop.x,y2:stop.y}).setStroke(_12e1);dojo.forEach(t.major,function(tick){var _12f3=f(tick.value),elem,x=start.x+_12dc.x*_12f3,y=start.y+_12dc.y*_12f3;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_12e2);if(tick.label){elem=dc.axis2d.common.createText[_12ef](this.chart,s,x+_12de.x,y+_12de.y,_12df,tick.label,_12e5,_12e6);if(_12ef=="html"){this.htmlElements.push(elem);}}},this);dx=_12dd.x*_12e3.length;dy=_12dd.y*_12e3.length;_12ec=c.minMinorStep<=c.minor.tick*c.bounds.scale;dojo.forEach(t.minor,function(tick){var _12f8=f(tick.value),elem,x=start.x+_12dc.x*_12f8,y=start.y+_12dc.y*_12f8;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_12e3);if(_12ec&&tick.label){elem=dc.axis2d.common.createText[_12ef](this.chart,s,x+_12de.x,y+_12de.y,_12df,tick.label,_12e5,_12e6);if(_12ef=="html"){this.htmlElements.push(elem);}}},this);dx=_12dd.x*_12e4.length;dy=_12dd.y*_12e4.length;dojo.forEach(t.micro,function(tick){var _12fd=f(tick.value),elem,x=start.x+_12dc.x*_12fd,y=start.y+_12dc.y*_12fd;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_12e4);},this);}catch(e){}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.common"]){dojo._hasResource["dojox.charting.plot2d.common"]=true;dojo.provide("dojox.charting.plot2d.common");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common;dojo.mixin(dojox.charting.plot2d.common,{makeStroke:function(_1303){if(!_1303){return _1303;}if(typeof _1303=="string"||_1303 instanceof dojo.Color){_1303={color:_1303};}return dojox.gfx.makeParameters(dojox.gfx.defaultStroke,_1303);},augmentColor:function(_1304,color){var t=new dojo.Color(_1304),c=new dojo.Color(color);c.a=t.a;return c;},augmentStroke:function(_1308,color){var s=dc.makeStroke(_1308);if(s){s.color=dc.augmentColor(s.color,color);}return s;},augmentFill:function(fill,color){var fc,c=new dojo.Color(color);if(typeof fill=="string"||fill instanceof dojo.Color){return dc.augmentColor(fill,color);}return fill;},defaultStats:{hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY,vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(_130f){var stats=dojo.clone(dc.defaultStats);for(var i=0;i<_130f.length;++i){var run=_130f[i];if(!run.data.length){continue;}if(typeof run.data[0]=="number"){var _1313=stats.vmin,_1314=stats.vmax;if(!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,i){var x=i+1,y=val;if(isNaN(y)){y=0;}stats.hmin=Math.min(stats.hmin,x);stats.hmax=Math.max(stats.hmax,x);stats.vmin=Math.min(stats.vmin,y);stats.vmax=Math.max(stats.vmax,y);});}if("ymin" in run){stats.vmin=Math.min(_1313,run.ymin);}if("ymax" in run){stats.vmax=Math.max(_1314,run.ymax);}}else{var _1319=stats.hmin,_131a=stats.hmax,_1313=stats.vmin,_1314=stats.vmax;if(!("xmin" in run)||!("xmax" in run)||!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,i){var x=val.x,y=val.y;if(isNaN(x)){x=0;}if(isNaN(y)){y=0;}stats.hmin=Math.min(stats.hmin,x);stats.hmax=Math.max(stats.hmax,x);stats.vmin=Math.min(stats.vmin,y);stats.vmax=Math.max(stats.vmax,y);});}if("xmin" in run){stats.hmin=Math.min(_1319,run.xmin);}if("xmax" in run){stats.hmax=Math.max(_131a,run.xmax);}if("ymin" in run){stats.vmin=Math.min(_1313,run.ymin);}if("ymax" in run){stats.vmax=Math.max(_1314,run.ymax);}}}return stats;},calculateBarSize:function(_131f,opt,_1321){if(!_1321){_1321=1;}var gap=opt.gap,size=(_131f-2*gap)/_1321;if("minBarSize" in opt){size=Math.max(size,opt.minBarSize);}if("maxBarSize" in opt){size=Math.min(size,opt.maxBarSize);}size=Math.max(size,1);gap=(_131f-size*_1321)/2;return {size:size,gap:gap};},collectStackedStats:function(_1324){var stats=dojo.clone(dc.defaultStats);if(_1324.length){stats.hmin=Math.min(stats.hmin,1);stats.hmax=df.foldl(_1324,"seed, run -> Math.max(seed, run.data.length)",stats.hmax);for(var i=0;i<stats.hmax;++i){var v=_1324[0].data[i];if(isNaN(v)){v=0;}stats.vmin=Math.min(stats.vmin,v);for(var j=1;j<_1324.length;++j){var t=_1324[j].data[i];if(isNaN(t)){t=0;}v+=t;}stats.vmax=Math.max(stats.vmax,v);}}return stats;},curve:function(a,_132b){var arr=a.slice(0);if(_132b=="x"){arr[arr.length]=arr[0];}var p=dojo.map(arr,function(item,i){if(i==0){return "M"+item.x+","+item.y;}if(!isNaN(_132b)){var dx=item.x-arr[i-1].x,dy=arr[i-1].y;return "C"+(item.x-(_132b-1)*(dx/_132b))+","+dy+" "+(item.x-(dx/_132b))+","+item.y+" "+item.x+","+item.y;}else{if(_132b=="X"||_132b=="x"||_132b=="S"){var p0,p1=arr[i-1],p2=arr[i],p3;var bz1x,bz1y,bz2x,bz2y;var f=1/6;if(i==1){if(_132b=="x"){p0=arr[arr.length-2];}else{p0=p1;}f=1/3;}else{p0=arr[i-2];}if(i==(arr.length-1)){if(_132b=="x"){p3=arr[1];}else{p3=p2;}f=1/3;}else{p3=arr[i+1];}var p1p2=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));var p0p2=Math.sqrt((p2.x-p0.x)*(p2.x-p0.x)+(p2.y-p0.y)*(p2.y-p0.y));var p1p3=Math.sqrt((p3.x-p1.x)*(p3.x-p1.x)+(p3.y-p1.y)*(p3.y-p1.y));var p0p2f=p0p2*f;var p1p3f=p1p3*f;if(p0p2f>p1p2/2&&p1p3f>p1p2/2){p0p2f=p1p2/2;p1p3f=p1p2/2;}else{if(p0p2f>p1p2/2){p0p2f=p1p2/2;p1p3f=p1p2/2*p1p3/p0p2;}else{if(p1p3f>p1p2/2){p1p3f=p1p2/2;p0p2f=p1p2/2*p0p2/p1p3;}}}if(_132b=="S"){if(p0==p1){p0p2f=0;}if(p2==p3){p1p3f=0;}}bz1x=p1.x+p0p2f*(p2.x-p0.x)/p0p2;bz1y=p1.y+p0p2f*(p2.y-p0.y)/p0p2;bz2x=p2.x-p1p3f*(p3.x-p1.x)/p1p3;bz2y=p2.y-p1p3f*(p3.y-p1.y)/p1p3;}}return "C"+(bz1x+","+bz1y+" "+bz2x+","+bz2y+" "+p2.x+","+p2.y);});return p.join(" ");}});})();}if(!dojo._hasResource["dojox.charting.scaler.primitive"]){dojo._hasResource["dojox.charting.scaler.primitive"]=true;dojo.provide("dojox.charting.scaler.primitive");dojox.charting.scaler.primitive={buildScaler:function(min,max,span,_1343){return {bounds:{lower:min,upper:max,from:min,to:max,scale:span/(max-min),span:span},scaler:dojox.charting.scaler.primitive};},buildTicks:function(_1344,_1345){return {major:[],minor:[],micro:[]};},getTransformerFromModel:function(_1346){var _1347=_1346.bounds.from,scale=_1346.bounds.scale;return function(x){return (x-_1347)*scale;};},getTransformerFromPlot:function(_134a){var _134b=_134a.bounds.from,scale=_134a.bounds.scale;return function(x){return x/scale+_134b;};}};}if(!dojo._hasResource["dojox.charting.plot2d.Base"]){dojo._hasResource["dojox.charting.plot2d.Base"]=true;dojo.provide("dojox.charting.plot2d.Base");dojo.declare("dojox.charting.plot2d.Base",dojox.charting.Element,{destroy:function(){this.resetEvents();this.inherited(arguments);},clear:function(){this.series=[];this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){this.series.push(run);return this;},calculateAxes:function(dim){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},render:function(dim,_1352){return this;},getRequiredColors:function(){return this.series.length;},plotEvent:function(o){},connect:function(_1354,_1355){this.dirty=true;return dojo.connect(this,"plotEvent",_1354,_1355);},events:function(){var ls=this.plotEvent._listeners;if(!ls||!ls.length){return false;}for(var i in ls){if(!(i in Array.prototype)){return true;}}return false;},resetEvents:function(){this.plotEvent({type:"onplotreset",plot:this});},_calc:function(dim,stats){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(stats.hmin,stats.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=dojox.charting.scaler.primitive.buildScaler(stats.hmin,stats.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(stats.vmin,stats.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=dojox.charting.scaler.primitive.buildScaler(stats.vmin,stats.vmax,dim.height);}},_connectEvents:function(shape,o){shape.connect("onmouseover",this,function(e){o.type="onmouseover";o.event=e;this.plotEvent(o);});shape.connect("onmouseout",this,function(e){o.type="onmouseout";o.event=e;this.plotEvent(o);});shape.connect("onclick",this,function(e){o.type="onclick";o.event=e;this.plotEvent(o);});}});}if(!dojo._hasResource["dojox.charting.plot2d.Default"]){dojo._hasResource["dojox.charting.plot2d.Default"]=true;dojo.provide("dojox.charting.plot2d.Default");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_1362=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Default",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,shadows:0,tension:0},optionalParams:{},constructor:function(chart,_1364){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_1364);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},calculateAxes:function(dim){this._calc(dim,dc.collectSimpleStats(this.series));return this;},render:function(dim,_1367){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_1362);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_136b,_136c,color,_136e,_136f=this.events();this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;continue;}var s=run.group,lpoly,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){lpoly=dojo.map(run.data,function(v,i){return {x:ht(i+1)+_1367.l,y:dim.height-_1367.b-vt(v)};},this);}else{lpoly=dojo.map(run.data,function(v,i){return {x:ht(v.x)+_1367.l,y:dim.height-_1367.b-vt(v.y)};},this);}if(!run.fill||!run.stroke){color=run.dyn.color=new dojo.Color(t.next("color"));}var lpath=this.opt.tension?dc.curve(lpoly,this.opt.tension):"";if(this.opt.areas){var fill=run.fill?run.fill:dc.augmentFill(t.series.fill,color);var apoly=dojo.clone(lpoly);if(this.opt.tension){var apath="L"+apoly[apoly.length-1].x+","+(dim.height-_1367.b)+" L"+apoly[0].x+","+(dim.height-_1367.b)+" L"+apoly[0].x+","+apoly[0].y;run.dyn.fill=s.createPath(lpath+" "+apath).setFill(fill).getFill();}else{apoly.push({x:lpoly[lpoly.length-1].x,y:dim.height-_1367.b});apoly.push({x:lpoly[0].x,y:dim.height-_1367.b});apoly.push(lpoly[0]);run.dyn.fill=s.createPolyline(apoly).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_136b=run.stroke?dc.makeStroke(run.stroke):dc.augmentStroke(t.series.stroke,color);if(run.outline||t.series.outline){_136c=dc.makeStroke(run.outline?run.outline:t.series.outline);_136c.width=2*_136c.width+_136b.width;}}if(this.opt.markers){_136e=run.dyn.marker=run.marker?run.marker:t.next("marker");}var _137d=null,_137e=null,_137f=null;if(this.opt.shadows&&_136b){var sh=this.opt.shadows,_1381=new dojo.Color([0,0,0,0.3]),spoly=dojo.map(lpoly,function(c){return {x:c.x+sh.dx,y:c.y+sh.dy};}),_1384=dojo.clone(_136c?_136c:_136b);_1384.color=_1381;_1384.width+=sh.dw?sh.dw:0;if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(spoly,this.opt.tension)).setStroke(_1384).getStroke();}else{run.dyn.shadow=s.createPolyline(spoly).setStroke(_1384).getStroke();}}if(this.opt.markers){_137f=dojo.map(spoly,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_136e).setStroke(_1384).setFill(_1381);},this);}}if(this.opt.lines){if(_136c){if(this.opt.tension){run.dyn.outline=s.createPath(lpath).setStroke(_136c).getStroke();}else{run.dyn.outline=s.createPolyline(lpoly).setStroke(_136c).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(lpath).setStroke(_136b).getStroke();}else{run.dyn.stroke=s.createPolyline(lpoly).setStroke(_136b).getStroke();}}if(this.opt.markers){_137d=new Array(lpoly.length);_137e=new Array(lpoly.length);dojo.forEach(lpoly,function(c,i){var path="M"+c.x+" "+c.y+" "+_136e;if(_136c){_137e[i]=s.createPath(path).setStroke(_136c);}_137d[i]=s.createPath(path).setStroke(_136b).setFill(_136b.color);},this);if(_136f){dojo.forEach(_137d,function(s,i){var o={element:"marker",index:i,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:s,outline:_137e[i]||null,shadow:_137f&&_137f[i]||null,cx:lpoly[i].x,cy:lpoly[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(s,o);},this);}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Lines"]){dojo._hasResource["dojox.charting.plot2d.Lines"]=true;dojo.provide("dojox.charting.plot2d.Lines");dojo.declare("dojox.charting.plot2d.Lines",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Areas"]){dojo._hasResource["dojox.charting.plot2d.Areas"]=true;dojo.provide("dojox.charting.plot2d.Areas");dojo.declare("dojox.charting.plot2d.Areas",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Markers"]){dojo._hasResource["dojox.charting.plot2d.Markers"]=true;dojo.provide("dojox.charting.plot2d.Markers");dojo.declare("dojox.charting.plot2d.Markers",dojox.charting.plot2d.Default,{constructor:function(){this.opt.markers=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.MarkersOnly"]){dojo._hasResource["dojox.charting.plot2d.MarkersOnly"]=true;dojo.provide("dojox.charting.plot2d.MarkersOnly");dojo.declare("dojox.charting.plot2d.MarkersOnly",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Scatter"]){dojo._hasResource["dojox.charting.plot2d.Scatter"]=true;dojo.provide("dojox.charting.plot2d.Scatter");dojo.declare("dojox.charting.plot2d.Scatter",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});}if(!dojo._hasResource["dojox.lang.functional.sequence"]){dojo._hasResource["dojox.lang.functional.sequence"]=true;dojo.provide("dojox.lang.functional.sequence");(function(){var d=dojo,df=dojox.lang.functional;d.mixin(df,{repeat:function(n,f,z,o){o=o||d.global;f=df.lambda(f);var t=new Array(n),i=1;t[0]=z;for(;i<n;t[i]=z=f.call(o,z),++i){}return t;},until:function(pr,f,z,o){o=o||d.global;f=df.lambda(f);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(z),z=f.call(o,z)){}return t;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Stacked"]){dojo._hasResource["dojox.charting.plot2d.Stacked"]=true;dojo.provide("dojox.charting.plot2d.Stacked");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_139b=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Stacked",dojox.charting.plot2d.Default,{calculateAxes:function(dim){var stats=dc.collectStackedStats(this.series);this._maxRunLength=stats.hmax;this._calc(dim,stats);return this;},render:function(dim,_139f){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(isNaN(v)){v=0;}acc[j]+=v;}}this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_139b);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_13a8,_13a9,color,_13ab,_13ac=this.events(),ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group,lpoly=dojo.map(acc,function(v,i){return {x:ht(i+1)+_139f.l,y:dim.height-_139f.b-vt(v)};},this);if(!run.fill||!run.stroke){color=new dojo.Color(t.next("color"));}var lpath=this.opt.tension?dc.curve(lpoly,this.opt.tension):"";if(this.opt.areas){var apoly=dojo.clone(lpoly);var fill=run.fill?run.fill:dc.augmentFill(t.series.fill,color);if(this.opt.tension){var p=dc.curve(apoly,this.opt.tension);p+=" L"+lpoly[lpoly.length-1].x+","+(dim.height-_139f.b)+" L"+lpoly[0].x+","+(dim.height-_139f.b)+" L"+lpoly[0].x+","+lpoly[0].y;run.dyn.fill=s.createPath(p).setFill(fill).getFill();}else{apoly.push({x:lpoly[lpoly.length-1].x,y:dim.height-_139f.b});apoly.push({x:lpoly[0].x,y:dim.height-_139f.b});apoly.push(lpoly[0]);run.dyn.fill=s.createPolyline(apoly).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_13a8=run.stroke?dc.makeStroke(run.stroke):dc.augmentStroke(t.series.stroke,color);if(run.outline||t.series.outline){_13a9=dc.makeStroke(run.outline?run.outline:t.series.outline);_13a9.width=2*_13a9.width+_13a8.width;}}if(this.opt.markers){_13ab=run.dyn.marker=run.marker?run.marker:t.next("marker");}var _13b6,_13b7,_13b8;if(this.opt.shadows&&_13a8){var sh=this.opt.shadows,_13ba=new dojo.Color([0,0,0,0.3]),spoly=dojo.map(lpoly,function(c){return {x:c.x+sh.dx,y:c.y+sh.dy};}),_13bd=dojo.clone(_13a9?_13a9:_13a8);_13bd.color=_13ba;_13bd.width+=sh.dw?sh.dw:0;if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(spoly,this.opt.tension)).setStroke(_13bd).getStroke();}else{run.dyn.shadow=s.createPolyline(spoly).setStroke(_13bd).getStroke();}}if(this.opt.markers){_13b8=dojo.map(spoly,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_13ab).setStroke(_13bd).setFill(_13ba);},this);}}if(this.opt.lines){if(_13a9){if(this.opt.tension){run.dyn.outline=s.createPath(lpath).setStroke(_13a9).getStroke();}else{run.dyn.outline=s.createPolyline(lpoly).setStroke(_13a9).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(lpath).setStroke(_13a8).getStroke();}else{run.dyn.stroke=s.createPolyline(lpoly).setStroke(_13a8).getStroke();}}if(this.opt.markers){_13b6=new Array(lpoly.length);_13b7=new Array(lpoly.length);dojo.forEach(lpoly,function(c,i){var path="M"+c.x+" "+c.y+" "+_13ab;if(_13a9){_13b7[i]=s.createPath(path).setStroke(_13a9);}_13b6[i]=s.createPath(path).setStroke(_13a8).setFill(_13a8.color);},this);if(_13ac){dojo.forEach(_13b6,function(s,i){var o={element:"marker",index:i,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:s,outline:_13b7[i]||null,shadow:_13b8&&_13b8[i]||null,cx:lpoly[i].x,cy:lpoly[i].y,x:i+1,y:run.data[i]};this._connectEvents(s,o);},this);}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(isNaN(v)){v=0;}acc[j]-=v;}}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.StackedLines"]){dojo._hasResource["dojox.charting.plot2d.StackedLines"]=true;dojo.provide("dojox.charting.plot2d.StackedLines");dojo.declare("dojox.charting.plot2d.StackedLines",dojox.charting.plot2d.Stacked,{constructor:function(){this.opt.lines=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.StackedAreas"]){dojo._hasResource["dojox.charting.plot2d.StackedAreas"]=true;dojo.provide("dojox.charting.plot2d.StackedAreas");dojo.declare("dojox.charting.plot2d.StackedAreas",dojox.charting.plot2d.Stacked,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Columns"]){dojo._hasResource["dojox.charting.plot2d.Columns"]=true;dojo.provide("dojox.charting.plot2d.Columns");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_13c8=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Columns",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,shadows:null},optionalParams:{minBarSize:1,maxBarSize:1},constructor:function(chart,_13ca){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_13ca);du.updateWithPattern(this.opt,_13ca,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},calculateAxes:function(dim){var stats=dc.collectSimpleStats(this.series);stats.hmin-=0.5;stats.hmax+=0.5;this._calc(dim,stats);return this;},render:function(dim,_13ce){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_13c8);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,color,_13d3,fill,f,gap,width,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_13da=Math.max(0,this._vScaler.bounds.lower),_13db=vt(_13da),_13dc=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;width=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){color=run.dyn.color=new dojo.Color(t.next("color"));}_13d3=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,color);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,color);for(var j=0;j<run.data.length;++j){var v=run.data[j],vv=vt(v),_13e2=vv-_13db,h=Math.abs(_13e2);if(width>=1&&h>=1){var rect={x:_13ce.l+ht(j+0.5)+gap,y:dim.height-_13ce.b-(v>_13da?vv:_13db),width:width,height:h},shape=s.createRect(rect).setFill(fill).setStroke(_13d3);run.dyn.fill=shape.getFill();run.dyn.stroke=shape.getStroke();if(_13dc){var o={element:"column",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:shape,x:j+0.5,y:v};this._connectEvents(shape,o);}}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.StackedColumns"]){dojo._hasResource["dojox.charting.plot2d.StackedColumns"]=true;dojo.provide("dojox.charting.plot2d.StackedColumns");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_13e9=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.StackedColumns",dojox.charting.plot2d.Columns,{calculateAxes:function(dim){var stats=dc.collectStackedStats(this.series);this._maxRunLength=stats.hmax;stats.hmin-=0.5;stats.hmax+=0.5;this._calc(dim,stats);return this;},render:function(dim,_13ed){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(isNaN(v)){v=0;}acc[j]+=v;}}this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_13e9);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,color,_13f7,fill,f,gap,width,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_13fe=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;width=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){color=run.dyn.color=new dojo.Color(t.next("color"));}_13f7=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,color);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,color);for(var j=0;j<acc.length;++j){var v=acc[j],_13ff=vt(v);if(width>=1&&_13ff>=1){var shape=s.createRect({x:_13ed.l+ht(j+0.5)+gap,y:dim.height-_13ed.b-vt(v),width:width,height:_13ff}).setFill(fill).setStroke(_13f7);run.dyn.fill=shape.getFill();run.dyn.stroke=shape.getStroke();if(_13fe){var o={element:"column",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:shape,x:j+0.5,y:v};this._connectEvents(shape,o);}}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(isNaN(v)){v=0;}acc[j]-=v;}}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.ClusteredColumns"]){dojo._hasResource["dojox.charting.plot2d.ClusteredColumns"]=true;dojo.provide("dojox.charting.plot2d.ClusteredColumns");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_1404=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.ClusteredColumns",dojox.charting.plot2d.Columns,{render:function(dim,_1406){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_1404);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,color,_140b,fill,f,gap,width,_1410,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_1413=Math.max(0,this._vScaler.bounds.lower),_1414=vt(_1413),_1415=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;width=_1410=f.size;this.resetEvents();for(var i=0;i<this.series.length;++i){var run=this.series[i],shift=_1410*i;if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){color=run.dyn.color=new dojo.Color(t.next("color"));}_140b=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,color);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,color);for(var j=0;j<run.data.length;++j){var v=run.data[j],vv=vt(v),_141c=vv-_1414,h=Math.abs(_141c);if(width>=1&&h>=1){var shape=s.createRect({x:_1406.l+ht(j+0.5)+gap+shift,y:dim.height-_1406.b-(v>_1413?vv:_1414),width:width,height:h}).setFill(fill).setStroke(_140b);run.dyn.fill=shape.getFill();run.dyn.stroke=shape.getStroke();if(_1415){var o={element:"column",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:shape,x:j+0.5,y:v};this._connectEvents(shape,o);}}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Bars"]){dojo._hasResource["dojox.charting.plot2d.Bars"]=true;dojo.provide("dojox.charting.plot2d.Bars");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_1423=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Bars",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,shadows:null},optionalParams:{minBarSize:1,maxBarSize:1},constructor:function(chart,_1425){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_1425);du.updateWithPattern(this.opt,_1425,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},calculateAxes:function(dim){var stats=dc.collectSimpleStats(this.series),t;stats.hmin-=0.5;stats.hmax+=0.5;t=stats.hmin,stats.hmin=stats.vmin,stats.vmin=t;t=stats.hmax,stats.hmax=stats.vmax,stats.vmax=t;this._calc(dim,stats);return this;},render:function(dim,_142a){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_1423);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,color,_142f,fill,f,gap,_1433,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_1436=Math.max(0,this._hScaler.bounds.lower),_1437=ht(_1436),_1438=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_1433=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){color=run.dyn.color=new dojo.Color(t.next("color"));}_142f=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,color);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,color);for(var j=0;j<run.data.length;++j){var v=run.data[j],hv=ht(v),width=hv-_1437,w=Math.abs(width);if(w>=1&&_1433>=1){var shape=s.createRect({x:_142a.l+(v<_1436?hv:_1437),y:dim.height-_142a.b-vt(j+1.5)+gap,width:w,height:_1433}).setFill(fill).setStroke(_142f);run.dyn.fill=shape.getFill();run.dyn.stroke=shape.getStroke();if(_1438){var o={element:"bar",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:shape,x:v,y:j+1.5};this._connectEvents(shape,o);}}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.StackedBars"]){dojo._hasResource["dojox.charting.plot2d.StackedBars"]=true;dojo.provide("dojox.charting.plot2d.StackedBars");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_1444=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.StackedBars",dojox.charting.plot2d.Bars,{calculateAxes:function(dim){var stats=dc.collectStackedStats(this.series),t;this._maxRunLength=stats.hmax;stats.hmin-=0.5;stats.hmax+=0.5;t=stats.hmin,stats.hmin=stats.vmin,stats.vmin=t;t=stats.hmax,stats.hmax=stats.vmax,stats.vmax=t;this._calc(dim,stats);return this;},render:function(dim,_1449){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(isNaN(v)){v=0;}acc[j]+=v;}}this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_1444);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,color,_1453,fill,f,gap,_1457,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_145a=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_1457=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){color=run.dyn.color=new dojo.Color(t.next("color"));}_1453=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,color);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,color);for(var j=0;j<acc.length;++j){var v=acc[j],width=ht(v);if(width>=1&&_1457>=1){var shape=s.createRect({x:_1449.l,y:dim.height-_1449.b-vt(j+1.5)+gap,width:width,height:_1457}).setFill(fill).setStroke(_1453);run.dyn.fill=shape.getFill();run.dyn.stroke=shape.getStroke();if(_145a){var o={element:"bar",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:shape,x:v,y:j+1.5};this._connectEvents(shape,o);}}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(isNaN(v)){v=0;}acc[j]-=v;}}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.ClusteredBars"]){dojo._hasResource["dojox.charting.plot2d.ClusteredBars"]=true;dojo.provide("dojox.charting.plot2d.ClusteredBars");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_1460=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.ClusteredBars",dojox.charting.plot2d.Bars,{render:function(dim,_1462){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_1460);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,color,_1467,fill,f,gap,_146b,_146c,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_146f=Math.max(0,this._hScaler.bounds.lower),_1470=ht(_146f),_1471=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_146b=_146c=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i],shift=_146c*(this.series.length-i-1);if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){color=run.dyn.color=new dojo.Color(t.next("color"));}_1467=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,color);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,color);for(var j=0;j<run.data.length;++j){var v=run.data[j],hv=ht(v),width=hv-_1470,w=Math.abs(width);if(w>=1&&_146b>=1){var shape=s.createRect({x:_1462.l+(v<_146f?hv:_1470),y:dim.height-_1462.b-vt(j+1.5)+gap+shift,width:w,height:_146b}).setFill(fill).setStroke(_1467);run.dyn.fill=shape.getFill();run.dyn.stroke=shape.getStroke();if(_1471){var o={element:"bar",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:shape,x:v,y:j+1.5};this._connectEvents(shape,o);}}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Grid"]){dojo._hasResource["dojox.charting.plot2d.Grid"]=true;dojo.provide("dojox.charting.plot2d.Grid");(function(){var du=dojox.lang.utils;dojo.declare("dojox.charting.plot2d.Grid",dojox.charting.Element,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:true,hMinorLines:false,vMajorLines:true,vMinorLines:false,hStripes:"none",vStripes:"none"},optionalParams:{},constructor:function(chart,_147e){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_147e);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.dirty=true;},clear:function(){this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){return this;},calculateAxes:function(dim){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},getRequiredColors:function(){return 0;},render:function(dim,_1483){this.dirty=this.isDirty();if(!this.dirty){return this;}this.cleanGroup();var s=this.group,ta=this.chart.theme.axis;try{var _1486=this._vAxis.getScaler(),vt=_1486.scaler.getTransformerFromModel(_1486),ticks=this._vAxis.getTicks();if(this.opt.hMinorLines){dojo.forEach(ticks.minor,function(tick){var y=dim.height-_1483.b-vt(tick.value);s.createLine({x1:_1483.l,y1:y,x2:dim.width-_1483.r,y2:y}).setStroke(ta.minorTick);});}if(this.opt.hMajorLines){dojo.forEach(ticks.major,function(tick){var y=dim.height-_1483.b-vt(tick.value);s.createLine({x1:_1483.l,y1:y,x2:dim.width-_1483.r,y2:y}).setStroke(ta.majorTick);});}}catch(e){}try{var _148d=this._hAxis.getScaler(),ht=_148d.scaler.getTransformerFromModel(_148d),ticks=this._hAxis.getTicks();if(ticks&&this.opt.vMinorLines){dojo.forEach(ticks.minor,function(tick){var x=_1483.l+ht(tick.value);s.createLine({x1:x,y1:_1483.t,x2:x,y2:dim.height-_1483.b}).setStroke(ta.minorTick);});}if(ticks&&this.opt.vMajorLines){dojo.forEach(ticks.major,function(tick){var x=_1483.l+ht(tick.value);s.createLine({x1:x,y1:_1483.t,x2:x,y2:dim.height-_1483.b}).setStroke(ta.majorTick);});}}catch(e){}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Pie"]){dojo._hasResource["dojox.charting.plot2d.Pie"]=true;dojo.provide("dojox.charting.plot2d.Pie");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,da=dojox.charting.axis2d.common,g=dojox.gfx;dojo.declare("dojox.charting.plot2d.Pie",dojox.charting.Element,{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:true},optionalParams:{font:"",fontColor:"",radius:0},constructor:function(chart,_1499){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_1499);du.updateWithPattern(this.opt,_1499,this.optionalParams);this.run=null;this.dyn=[];},destroy:function(){this.resetEvents();this.inherited(arguments);},clear:function(){this.dirty=true;this.dyn=[];this.run=null;return this;},setAxis:function(axis){return this;},addSeries:function(run){this.run=run;return this;},calculateAxes:function(dim){return this;},getRequiredColors:function(){return this.run?this.run.data.length:0;},plotEvent:function(o){},connect:function(_149e,_149f){this.dirty=true;return dojo.connect(this,"plotEvent",_149e,_149f);},events:function(){var ls=this.plotEvent._listeners;if(!ls||!ls.length){return false;}for(var i in ls){if(!(i in Array.prototype)){return true;}}return false;},resetEvents:function(){this.plotEvent({type:"onplotreset",plot:this});},_connectEvents:function(shape,o){shape.connect("onmouseover",this,function(e){o.type="onmouseover";o.event=e;this.plotEvent(o);});shape.connect("onmouseout",this,function(e){o.type="onmouseout";o.event=e;this.plotEvent(o);});shape.connect("onclick",this,function(e){o.type="onclick";o.event=e;this.plotEvent(o);});},render:function(dim,_14a8){if(!this.dirty){return this;}this.dirty=false;this.cleanGroup();var s=this.group,color,t=this.chart.theme;this.resetEvents();if(!this.run||!this.run.data.length){return this;}var rx=(dim.width-_14a8.l-_14a8.r)/2,ry=(dim.height-_14a8.t-_14a8.b)/2,r=Math.min(rx,ry),_14af="font" in this.opt?this.opt.font:t.axis.font,size=_14af?g.normalizedLength(g.splitFontString(_14af).size):0,_14b1="fontColor" in this.opt?this.opt.fontColor:t.axis.fontColor,start=0,step,_14b4,_14b5,_14b6,shift,_14b8,run=this.run.data,_14ba=this.events();if(typeof run[0]=="number"){_14b4=df.map(run,"Math.max(x, 0)");if(df.every(_14b4,"<= 0")){return this;}_14b5=df.map(_14b4,"/this",df.foldl(_14b4,"+",0));if(this.opt.labels){_14b6=dojo.map(_14b5,function(x){return x>0?this._getLabel(x*100)+"%":"";},this);}}else{_14b4=df.map(run,"Math.max(x.y, 0)");if(df.every(_14b4,"<= 0")){return this;}_14b5=df.map(_14b4,"/this",df.foldl(_14b4,"+",0));if(this.opt.labels){_14b6=dojo.map(_14b5,function(x,i){if(x<=0){return "";}var v=run[i];return "text" in v?v.text:this._getLabel(x*100)+"%";},this);}}if(this.opt.labels){shift=df.foldl1(df.map(_14b6,function(label){return dojox.gfx._base._getTextBox(label,{font:_14af}).w;},this),"Math.max(a, b)")/2;if(this.opt.labelOffset<0){r=Math.min(rx-2*shift,ry-size)+this.opt.labelOffset;}_14b8=r-this.opt.labelOffset;}if("radius" in this.opt){r=this.opt.radius;_14b8=r-this.opt.labelOffset;}var _14c0={cx:_14a8.l+rx,cy:_14a8.t+ry,r:r};this.dyn=[];dojo.some(_14b5,function(slice,i){if(slice<=0){return false;}var v=run[i];if(slice>=1){var color,fill,_14c6;if(typeof v=="object"){color="color" in v?v.color:new dojo.Color(t.next("color"));fill="fill" in v?v.fill:dc.augmentFill(t.series.fill,color);_14c6="stroke" in v?v.stroke:dc.augmentStroke(t.series.stroke,color);}else{color=new dojo.Color(t.next("color"));fill=dc.augmentFill(t.series.fill,color);_14c6=dc.augmentStroke(t.series.stroke,color);}var shape=s.createCircle(_14c0).setFill(fill).setStroke(_14c6);this.dyn.push({color:color,fill:fill,stroke:_14c6});if(_14ba){var o={element:"slice",index:i,run:this.run,plot:this,shape:shape,x:i,y:typeof v=="number"?v:v.y,cx:_14c0.cx,cy:_14c0.cy,cr:r};this._connectEvents(shape,o);}return true;}var end=start+slice*2*Math.PI;if(i+1==_14b5.length){end=2*Math.PI;}var step=end-start,x1=_14c0.cx+r*Math.cos(start),y1=_14c0.cy+r*Math.sin(start),x2=_14c0.cx+r*Math.cos(end),y2=_14c0.cy+r*Math.sin(end);var color,fill,_14c6;if(typeof v=="object"){color="color" in v?v.color:new dojo.Color(t.next("color"));fill="fill" in v?v.fill:dc.augmentFill(t.series.fill,color);_14c6="stroke" in v?v.stroke:dc.augmentStroke(t.series.stroke,color);}else{color=new dojo.Color(t.next("color"));fill=dc.augmentFill(t.series.fill,color);_14c6=dc.augmentStroke(t.series.stroke,color);}var shape=s.createPath({}).moveTo(_14c0.cx,_14c0.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_14c0.cx,_14c0.cy).closePath().setFill(fill).setStroke(_14c6);this.dyn.push({color:color,fill:fill,stroke:_14c6});if(_14ba){var o={element:"slice",index:i,run:this.run,plot:this,shape:shape,x:i,y:typeof v=="number"?v:v.y,cx:_14c0.cx,cy:_14c0.cy,cr:r};this._connectEvents(shape,o);}start=end;return false;},this);if(this.opt.labels){start=0;dojo.some(_14b5,function(slice,i){if(slice<=0){return false;}if(slice>=1){var v=run[i],elem=da.createText[this.opt.htmlLabels&&dojox.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,_14c0.cx,_14c0.cy+size/2,"middle",_14b6[i],_14af,(typeof v=="object"&&"fontColor" in v)?v.fontColor:_14b1);if(this.opt.htmlLabels){this.htmlElements.push(elem);}return true;}var end=start+slice*2*Math.PI,v=run[i];if(i+1==_14b5.length){end=2*Math.PI;}var _14d4=(start+end)/2,x=_14c0.cx+_14b8*Math.cos(_14d4),y=_14c0.cy+_14b8*Math.sin(_14d4)+size/2;var elem=da.createText[this.opt.htmlLabels&&dojox.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,x,y,"middle",_14b6[i],_14af,(typeof v=="object"&&"fontColor" in v)?v.fontColor:_14b1);if(this.opt.htmlLabels){this.htmlElements.push(elem);}start=end;return false;},this);}return this;},_getLabel:function(_14d7){return this.opt.fixed?_14d7.toFixed(this.opt.precision):_14d7.toString();}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Bubble"]){dojo._hasResource["dojox.charting.plot2d.Bubble"]=true;dojo.provide("dojox.charting.plot2d.Bubble");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_14db=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Bubble",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y"},optionalParams:{},constructor:function(chart,_14dd){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_14dd);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},calculateAxes:function(dim){this._calc(dim,dc.collectSimpleStats(this.series));return this;},render:function(dim,_14e0){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_14db);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_14e4,_14e5,color,_14e7,_14e8,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_14eb=this.events();this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var s=run.group,_14ee=dojo.map(run.data,function(v,i){return {x:ht(v.x)+_14e0.l,y:dim.height-_14e0.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)};},this);if(run.fill){color=run.fill;}else{if(run.stroke){color=run.stroke;}else{color=run.dyn.color=new dojo.Color(t.next("color"));}}run.dyn.fill=color;_14e4=run.dyn.stroke=run.stroke?dc.makeStroke(run.stroke):dc.augmentStroke(t.series.stroke,color);var _14f1=null,_14f2=null,_14f3=null;if(this.opt.shadows&&_14e4){var sh=this.opt.shadows,_14e8=new dojo.Color([0,0,0,0.2]),_14e7=dojo.clone(_14e5?_14e5:_14e4);_14e7.color=_14e8;_14e7.width+=sh.dw?sh.dw:0;run.dyn.shadow=_14e7;var _14f5=dojo.map(_14ee,function(item){var sh=this.opt.shadows;return s.createCircle({cx:item.x+sh.dx,cy:item.y+sh.dy,r:item.radius}).setStroke(_14e7).setFill(_14e8);},this);}if(run.outline||t.series.outline){_14e5=dc.makeStroke(run.outline?run.outline:t.series.outline);_14e5.width=2*_14e5.width+_14e4.width;run.dyn.outline=_14e5;_14f2=dojo.map(_14ee,function(item){s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_14e5);},this);}_14f1=dojo.map(_14ee,function(item){return s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_14e4).setFill(color);},this);if(_14eb){dojo.forEach(_14f1,function(s,i){var o={element:"circle",index:i,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:s,outline:_14f2&&_14f2[i]||null,shadow:_14f3&&_14f3[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_14ee[i].x,cy:_14ee[i].y,cr:_14ee[i].radius};this._connectEvents(s,o);},this);}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.Chart2D"]){dojo._hasResource["dojox.charting.Chart2D"]=true;dojo.provide("dojox.charting.Chart2D");(function(){var df=dojox.lang.functional,dc=dojox.charting,clear=df.lambda("item.clear()"),purge=df.lambda("item.purgeGroup()"),_1501=df.lambda("item.destroy()"),_1502=df.lambda("item.dirty = false"),_1503=df.lambda("item.dirty = true");dojo.declare("dojox.charting.Chart2D",null,{constructor:function(node,_1505){if(!_1505){_1505={};}this.margins=_1505.margins?_1505.margins:{l:10,t:10,r:10,b:10};this.stroke=_1505.stroke;this.fill=_1505.fill;this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=true;this.coords=null;this.node=dojo.byId(node);var box=dojo.marginBox(node);this.surface=dojox.gfx.createSurface(this.node,box.w,box.h);},destroy:function(){dojo.forEach(this.series,_1501);dojo.forEach(this.stack,_1501);df.forIn(this.axes,_1501);this.surface.destroy();},getCoords:function(){if(!this.coords){this.coords=dojo.coords(this.node,true);}return this.coords;},setTheme:function(theme){this.theme=theme._clone();this.dirty=true;return this;},addAxis:function(name,_1509){var axis;if(!_1509||!("type" in _1509)){axis=new dc.axis2d.Default(this,_1509);}else{axis=typeof _1509.type=="string"?new dc.axis2d[_1509.type](this,_1509):new _1509.type(this,_1509);}axis.name=name;axis.dirty=true;if(name in this.axes){this.axes[name].destroy();}this.axes[name]=axis;this.dirty=true;return this;},getAxis:function(name){return this.axes[name];},removeAxis:function(name){if(name in this.axes){this.axes[name].destroy();delete this.axes[name];this.dirty=true;}return this;},addPlot:function(name,_150e){var plot;if(!_150e||!("type" in _150e)){plot=new dc.plot2d.Default(this,_150e);}else{plot=typeof _150e.type=="string"?new dc.plot2d[_150e.type](this,_150e):new _150e.type(this,_150e);}plot.name=name;plot.dirty=true;if(name in this.plots){this.stack[this.plots[name]].destroy();this.stack[this.plots[name]]=plot;}else{this.plots[name]=this.stack.length;this.stack.push(plot);}this.dirty=true;return this;},removePlot:function(name){if(name in this.plots){var index=this.plots[name];delete this.plots[name];this.stack[index].destroy();this.stack.splice(index,1);df.forIn(this.plots,function(idx,name,plots){if(idx>index){plots[name]=idx-1;}});this.dirty=true;}return this;},addSeries:function(name,data,_1517){var run=new dc.Series(this,data,_1517);if(name in this.runs){this.series[this.runs[name]].destroy();this.series[this.runs[name]]=run;}else{this.runs[name]=this.series.length;this.series.push(run);}run.name=name;this.dirty=true;if(!("ymin" in run)&&"min" in run){run.ymin=run.min;}if(!("ymax" in run)&&"max" in run){run.ymax=run.max;}return this;},removeSeries:function(name){if(name in this.runs){var index=this.runs[name],_151b=this.series[index].plot;delete this.runs[name];this.series[index].destroy();this.series.splice(index,1);df.forIn(this.runs,function(idx,name,runs){if(idx>index){runs[name]=idx-1;}});this.dirty=true;}return this;},updateSeries:function(name,data){if(name in this.runs){var run=this.series[this.runs[name]];run.data=data;run.dirty=true;this._invalidateDependentPlots(run.plot,false);this._invalidateDependentPlots(run.plot,true);}return this;},resize:function(width,_1523){var box;switch(arguments.length){case 0:box=dojo.marginBox(this.node);break;case 1:box=width;break;default:box={w:width,h:_1523};break;}dojo.marginBox(this.node,box);this.surface.setDimensions(box.w,box.h);this.dirty=true;this.coords=null;return this.render();},getGeometry:function(){var ret={};df.forIn(this.axes,function(axis){if(axis.initialized()){ret[axis.name]={name:axis.name,vertical:axis.vertical,scaler:axis.scaler,ticks:axis.ticks};}});return ret;},setAxisWindow:function(name,scale,_1529){var axis=this.axes[name];if(axis){axis.setWindow(scale,_1529);}return this;},setWindow:function(sx,sy,dx,dy){if(!("plotArea" in this)){this.calculateGeometry();}df.forIn(this.axes,function(axis){var scale,_1531,_1532=axis.getScaler().bounds,s=_1532.span/(_1532.upper-_1532.lower);if(axis.vertical){scale=sy;_1531=dy/s/scale;}else{scale=sx;_1531=dx/s/scale;}axis.setWindow(scale,_1531);});return this;},calculateGeometry:function(){if(this.dirty){return this.fullGeometry();}dojo.forEach(this.stack,function(plot){if(plot.dirty||(plot.hAxis&&this.axes[plot.hAxis].dirty)||(plot.vAxis&&this.axes[plot.vAxis].dirty)){plot.calculateAxes(this.plotArea);}},this);return this;},fullGeometry:function(){this._makeDirty();dojo.forEach(this.stack,clear);if(!this.theme){this.setTheme(new dojox.charting.Theme(dojox.charting._def));}dojo.forEach(this.series,function(run){if(!(run.plot in this.plots)){var plot=new dc.plot2d.Default(this,{});plot.name=run.plot;this.plots[run.plot]=this.stack.length;this.stack.push(plot);}this.stack[this.plots[run.plot]].addSeries(run);},this);dojo.forEach(this.stack,function(plot){if(plot.hAxis){plot.setAxis(this.axes[plot.hAxis]);}if(plot.vAxis){plot.setAxis(this.axes[plot.vAxis]);}},this);var dim=this.dim=this.surface.getDimensions();dim.width=dojox.gfx.normalizedLength(dim.width);dim.height=dojox.gfx.normalizedLength(dim.height);df.forIn(this.axes,clear);dojo.forEach(this.stack,function(plot){plot.calculateAxes(dim);});var _153a=this.offsets={l:0,r:0,t:0,b:0};df.forIn(this.axes,function(axis){df.forIn(axis.getOffsets(),function(o,i){_153a[i]+=o;});});df.forIn(this.margins,function(o,i){_153a[i]+=o;});this.plotArea={width:dim.width-_153a.l-_153a.r,height:dim.height-_153a.t-_153a.b};df.forIn(this.axes,clear);dojo.forEach(this.stack,function(plot){plot.calculateAxes(this.plotArea);},this);return this;},render:function(){if(this.theme){this.theme.clear();}if(this.dirty){return this.fullRender();}this.calculateGeometry();df.forEachRev(this.stack,function(plot){plot.render(this.dim,this.offsets);},this);df.forIn(this.axes,function(axis){axis.render(this.dim,this.offsets);},this);this._makeClean();if(this.surface.render){this.surface.render();}return this;},fullRender:function(){this.fullGeometry();var _1543=this.offsets,dim=this.dim;var _1545=df.foldl(this.stack,"z + plot.getRequiredColors()",0);this.theme.defineColors({num:_1545,cache:false});dojo.forEach(this.series,purge);df.forIn(this.axes,purge);dojo.forEach(this.stack,purge);this.surface.clear();var t=this.theme,fill=t.plotarea&&t.plotarea.fill,_1548=t.plotarea&&t.plotarea.stroke;if(fill){this.surface.createRect({x:_1543.l,y:_1543.t,width:dim.width-_1543.l-_1543.r,height:dim.height-_1543.t-_1543.b}).setFill(fill);}if(_1548){this.surface.createRect({x:_1543.l,y:_1543.t,width:dim.width-_1543.l-_1543.r-1,height:dim.height-_1543.t-_1543.b-1}).setStroke(_1548);}df.foldr(this.stack,function(z,plot){return plot.render(dim,_1543),0;},0);fill=this.fill?this.fill:(t.chart&&t.chart.fill);_1548=this.stroke?this.stroke:(t.chart&&t.chart.stroke);if(fill=="inherit"){var node=this.node,fill=new dojo.Color(dojo.style(node,"backgroundColor"));while(fill.a==0&&node!=document.documentElement){fill=new dojo.Color(dojo.style(node,"backgroundColor"));node=node.parentNode;}}if(fill){if(_1543.l){this.surface.createRect({width:_1543.l,height:dim.height+1}).setFill(fill);}if(_1543.r){this.surface.createRect({x:dim.width-_1543.r,width:_1543.r+1,height:dim.height+1}).setFill(fill);}if(_1543.t){this.surface.createRect({width:dim.width+1,height:_1543.t}).setFill(fill);}if(_1543.b){this.surface.createRect({y:dim.height-_1543.b,width:dim.width+1,height:_1543.b+2}).setFill(fill);}}if(_1548){this.surface.createRect({width:dim.width-1,height:dim.height-1}).setStroke(_1548);}df.forIn(this.axes,function(axis){axis.render(dim,_1543);});this._makeClean();if(this.surface.render){this.surface.render();}return this;},connectToPlot:function(name,_154e,_154f){return name in this.plots?this.stack[this.plots[name]].connect(_154e,_154f):null;},_makeClean:function(){dojo.forEach(this.axes,_1502);dojo.forEach(this.stack,_1502);dojo.forEach(this.series,_1502);this.dirty=false;},_makeDirty:function(){dojo.forEach(this.axes,_1503);dojo.forEach(this.stack,_1503);dojo.forEach(this.series,_1503);this.dirty=true;},_invalidateDependentPlots:function(_1550,_1551){if(_1550 in this.plots){var plot=this.stack[this.plots[_1550]],axis,_1554=_1551?"vAxis":"hAxis";if(plot[_1554]){axis=this.axes[plot[_1554]];if(axis.dependOnData()){axis.dirty=true;dojo.forEach(this.stack,function(p){if(p[_1554]&&p[_1554]==plot[_1554]){p.dirty=true;}});}}else{plot.dirty=true;}}}});})();}if(!dojo._hasResource["dojox.charting.widget.Legend"]){dojo._hasResource["dojox.charting.widget.Legend"]=true;dojo.provide("dojox.charting.widget.Legend");dojo.declare("dojox.charting.widget.Legend",[dijit._Widget,dijit._Templated],{chartRef:"",horizontal:true,templateString:"<table dojoAttachPoint='legendNode' class='dojoxLegendNode'><tbody dojoAttachPoint='legendBody'></tbody></table>",legendNode:null,legendBody:null,postCreate:function(){if(!this.chart){if(!this.chartRef){return;}this.chart=dijit.byId(this.chartRef);if(!this.chart){var node=dojo.byId(this.chartRef);if(node){this.chart=dijit.byNode(node);}else{console.log("Could not find chart instance with id: "+this.chartRef);return;}}this.series=this.chart.chart.series;}else{this.series=this.chart.series;}this.refresh();},refresh:function(){var df=dojox.lang.functional;if(this._surfaces){dojo.forEach(this._surfaces,function(_1558){_1558.destroy();});}this._surfaces=[];while(this.legendBody.lastChild){dojo.destroy(this.legendBody.lastChild);}if(this.horizontal){dojo.addClass(this.legendNode,"dojoxLegendHorizontal");this._tr=dojo.doc.createElement("tr");this.legendBody.appendChild(this._tr);}var s=this.series;if(s.length==0){return;}if(s[0].chart.stack[0].declaredClass=="dojox.charting.plot2d.Pie"){var t=s[0].chart.stack[0];if(typeof t.run.data[0]=="number"){var _155b=df.map(t.run.data,"Math.max(x, 0)");if(df.every(_155b,"<= 0")){return;}var _155c=df.map(_155b,"/this",df.foldl(_155b,"+",0));dojo.forEach(_155c,function(x,i){this._addLabel(t.dyn[i],t._getLabel(x*100)+"%");},this);}else{dojo.forEach(t.run.data,function(x,i){this._addLabel(t.dyn[i],x.legend||x.text||x.y);},this);}}else{dojo.forEach(s,function(x){this._addLabel(x.dyn,x.legend||x.name);},this);}},_addLabel:function(dyn,label){var icon=dojo.doc.createElement("td"),text=dojo.doc.createElement("td"),div=dojo.doc.createElement("div");dojo.addClass(icon,"dojoxLegendIcon");dojo.addClass(text,"dojoxLegendText");div.style.width="20px";div.style.height="20px";icon.appendChild(div);if(this._tr){this._tr.appendChild(icon);this._tr.appendChild(text);}else{var tr=dojo.doc.createElement("tr");this.legendBody.appendChild(tr);tr.appendChild(icon);tr.appendChild(text);}this._makeIcon(div,dyn);text.innerHTML=String(label);},_makeIcon:function(div,dyn){var mb={h:14,w:14};var _156b=dojox.gfx.createSurface(div,mb.w,mb.h);this._surfaces.push(_156b);if(dyn.fill){_156b.createRect({x:2,y:2,width:mb.w-4,height:mb.h-4}).setFill(dyn.fill).setStroke(dyn.stroke);}else{if(dyn.stroke||dyn.marker){var line={x1:0,y1:mb.h/2,x2:mb.w,y2:mb.h/2};if(dyn.stroke){_156b.createLine(line).setStroke(dyn.stroke);}if(dyn.marker){var c={x:mb.w/2,y:mb.h/2};if(dyn.stroke){_156b.createPath({path:"M"+c.x+" "+c.y+" "+dyn.marker}).setFill(dyn.stroke.color).setStroke(dyn.stroke);}else{_156b.createPath({path:"M"+c.x+" "+c.y+" "+dyn.marker}).setFill(dyn.color).setStroke(dyn.color);}}}else{_156b.createRect({x:2,y:2,width:mb.w-4,height:mb.h-4}).setStroke("black");_156b.createLine({x1:2,y1:2,x2:mb.w-2,y2:mb.h-2}).setStroke("black");_156b.createLine({x1:2,y1:mb.h-2,x2:mb.w-2,y2:2}).setStroke("black");}}}});}if(!dojo._hasResource["nox.ext.apps.vmanui.patches.dojo.gfx._base"]){dojo._hasResource["nox.ext.apps.vmanui.patches.dojo.gfx._base"]=true;dojo.provide("nox.ext.apps.vmanui.patches.dojo.gfx._base");if(dojox&&dojox.gfx&&dojox.gfx._base&&dojox.gfx._base._getTextBox){var measuringNode=null,empty={};dojox.gfx._base._getTextBox=function(text,style,_1570){var m,s;if(!measuringNode){m=measuringNode=dojo.doc.createElement("div");s=m.style;s.position="absolute";s.left="-10000px";s.top="0";dojo.body().appendChild(m);}else{m=measuringNode;s=m.style;}if(m.className){m.className="";}if(dojo.isWebKit){dojo.forEach(["border","marging","padding","outline"],function(sProp){if(s[sProp]&&s[Prop]!="0px"){s[Prop]="0";}});}else{s.border="0";s.margin="0";s.padding="0";s.outline="0";}if(arguments.length>1&&style){for(var i in style){if(i in empty){continue;}s[i]=style[i];}}if(arguments.length>2&&_1570){m.className=_1570;}m.innerHTML=text;return dojo.marginBox(m);};}}if(!dojo._hasResource["nox.ext.apps.vmanui.RangeArea"]){dojo._hasResource["nox.ext.apps.vmanui.RangeArea"]=true;dojo.provide("nox.ext.apps.vmanui.RangeArea");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_1577=df.lambda("item.purgeGroup()");dojo.declare("nox.ext.apps.vmanui.RangeArea",dojox.charting.plot2d.Default,{calculateAxes:function(dim){var stats=dojo.clone(dc.defaultStats);var _157a={};var i,j,s;for(var i=0,l=this.series.length;i<l;i++){s=this.series[i];for(j=0,jl=s.data.length;j<jl;j++){var point=s.data[j];if(!_157a[point.x]){_157a[point.x]={min:0,max:0};}stats.hmin=Math.min(stats.hmin,point.x);stats.hmax=Math.max(stats.hmax,point.x);_157a[point.x].min+=point.low;_157a[point.x].max+=point.high;}}this._maxRunLength=stats.hmax;for(var x in _157a){stats.vmin=Math.min(stats.vmin,_157a[x].min);stats.vmax=Math.max(stats.vmax,_157a[x].max);}this._calc(dim,stats);return this;},render:function(dim,_1582){var i;if(this._maxRunLength<=0){return this;}if(this.opt.tension&&isNaN(this.opt.tension)){this.opt.tension=2.5;}var _1584={};for(i=0;i<this.series.length;i++){for(j=0;j<this.series[i].data.length;j++){if(!_1584[this.series[i].data[j].x]){_1584[this.series[i].data[j].x]={high:0,low:0};}var datum=this.series[i].data[j];_1584[datum.x].high+=datum.high;_1584[datum.x].low+=datum.low;}}var _1586=[];for(var p in _1584){_1586.push(p);}_1586.sort();var _1588=dojo.map(_1586,function(item){return _1584[item].high;});var _158a=dojo.map(_1586,function(item){return _1584[item].low;});this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_1577);this.cleanGroup();s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var _158d,_158e,color,_1590;var t=this.chart.theme,_1592=this.events(),ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);this.resetEvents();for(i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();s=run.group;var lpoly=dojo.map(_1588,function(v,idx){return {x:ht(_1586[idx])+_1582.l,y:dim.height-_1582.b-vt(v)};}),_1599=dojo.map(_158a,function(v,idx){return {x:ht(_1586[idx])+_1582.l,y:dim.height-_1582.b-vt(v)};});if(_1588.length&&_1588[0]!=0){lpoly.splice(0,0,{x:ht(_1586[0])+_1582.l,y:dim.height-_1582.b-vt(0)});}if(_158a.length&&_158a[0]!=0){_1599.splice(0,0,{x:ht(_1586[0])+_1582.l,y:dim.height-_1582.b-vt(0)});}if(_1588.length&&_1588[_1588.length-1]!=0){lpoly.push({x:ht(_1586[_1586.length-1])+_1582.l,y:dim.height-_1582.b-vt(0)});}if(_158a.length&&_158a[_158a.length-1]!=0){_1599.push({x:ht(_1586[_1586.length-1])+_1582.l,y:dim.height-_1582.b-vt(0)});}if(!run.fill||!run.stroke){color=new dojo.Color(t.next("color"));}var lpath=this.opt.tension?dc.curve(lpoly,this.opt.tension):"",_159d=this.opt.tension?dc.curve(_1599,this.opt.tension):"";var apoly=dojo.clone(lpoly),_159f=dojo.clone(_1599);var fill=run.fill?run.fill:dc.augmentFill(t.series.fill,color);if(this.opt.tension){var pp=dc.curve(apoly,this.opt.tension)+"L"+dc.curve(_1599,this.opt.tension).substr(1)+"Z";run.dyn.fill=s.createPath(pp).setFill(fill).getFill();}else{apoly=apoly.concat(_159f);apoly.push(lpoly[0]);run.dyn.fill=s.createPolyline(apoly).setFill(fill).getFill();}if(this.opt.lines||this.opt.markers){_158d=run.stroke?dc.makeStroke(run.stroke):dc.augmentStroke(t.series.stroke,color);if(false&&(run.outline||t.series.outline)){_158e=dc.makeStroke(run.outline?run.outline:t.series.outline);_158e.width=2*_158e.width+_158d.width;}}if(this.opt.markers){_1590=run.dyn.marker=run.marker?run.marker:t.next("marker");}var _15a2,_15a3,_15a4;if(this.opt.shadows&&_158d){var sh=this.opt.shadows,_15a6=new dojo.Color([0,0,0,0.3]),spoly=dojo.map(lpoly,function(c){return {x:c.x+sh.dx,y:c.y+sh.dy};}),_15a9=dojo.clone(_158e?_158e:_158d);_15a9.color=_15a6;_15a9.width+=sh.dw?sh.dw:0;if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(spoly,this.opt.tension)).setStroke(_15a9).getStroke();}else{run.dyn.shadow=s.createPolyline(spoly).setStroke(_15a9).getStroke();}}if(this.opt.markers){_15a4=dojo.map(spoly,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_1590).setStroke(_15a9).setFill(_15a6);},this);}}if(this.opt.lines){if(false&&_158e){if(this.opt.tension){run.dyn.outline=s.createPath(lpath).setStroke(_158e).getStroke();}else{run.dyn.outline=s.createPolyline(lpoly).setStroke(_158e).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(lpath).setStroke(_158d).getStroke();}else{run.dyn.stroke=s.createPolyline(lpoly).setStroke(_158d).getStroke();}}if(this.opt.markers){_15a2=new Array(lpoly.length);_15a3=new Array(lpoly.length);dojo.forEach(lpoly,function(c,i){var path="M"+c.x+" "+c.y+" "+_1590;if(false&&_158e){_15a3[i]=s.createPath(path).setStroke(_158e);}_15a2[i]=s.createPath(path).setStroke(_158d).setFill(_158d.color);},this);if(_1592){dojo.forEach(_15a2,function(s,i){var o={element:"marker",index:i,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:s,outline:_15a3[i]||null,shadow:_15a4&&_15a4[i]||null,cx:lpoly[i].x,cy:lpoly[i].y,x:i+1,y:run.data[i]};this._connectEvents(s,o);},this);}}run.dirty=false;for(j=0;j<run.data.length;j++){var v=run.data[j];_1584[v.x].high-=v.high;_1584[v.x].low-=v.low;_1588=dojo.map(_1586,function(item){return _1584[item].high;});_158a=dojo.map(_1586,function(item){return _1584[item].low;});}}this.dirty=false;return this;}});dojo.declare("nox.ext.apps.vmanui.RangeAreaVerticalAxis",dojox.charting.axis2d.Default,{getOffsets:function(){var _15b4=this.inherited(arguments);_15b4.l=Math.max(_15b4.l,60);return _15b4;},scale:function(num){if(num){var abs=Math.abs(num);var neg=num/abs;var _15b8=Math.ceil(Math.log(abs)/Math.LN10);var order=Math.pow(10,_15b8);var _15ba=abs/order;if(_15ba>0.8){return order*neg;}}return num;},calculate:function(min,max,span,_15be){this._min=min;this._max=max;min=this.scale(min);max=this.scale(max);return this.inherited(arguments,[min,max,span,_15be]);},render:function(dim,_15c0){var _15c1=this.dirty;this.inherited(arguments);if(_15c1){try{var dc=dojox.charting,dcac=dc.axis2d.common,s=this.group,g=dojox.gfx,lin=dc.scaler.linear;var ta=this.chart.theme.axis,_15c8="stroke" in this.opt?this.opt.stroke:ta.stroke,_15c9="majorTick" in this.opt?this.opt.majorTick:ta.majorTick,_15ca="minorTick" in this.opt?this.opt.minorTick:ta.minorTick,_15cb="microTick" in this.opt?this.opt.microTick:ta.minorTick,_15cc="font" in this.opt?this.opt.font:ta.font,_15cd="fontColor" in this.opt?this.opt.fontColor:ta.fontColor,_15ce=Math.max(_15c9.length,_15ca.length),size=_15cc?g.normalizedLength(g.splitFontString(_15cc).size):0,_15d0=dojox.gfx.renderer=="canvas",_15d1=_15d0||this.opt.htmlLabels&&!dojo.isIE&&!dojo.isOpera?"html":"gfx";if(this.vertical&&this.ticks){var _15d2={x:-1,y:0};var _15ce=Math.max(_15c9.length,_15ca.length);var _15d3=4;var _15d4={x:_15d2.x*(_15ce+_15d3),y:size*0.4};if(this._min<0){var _15d5=dcac.createText[_15d1](this.chart,s,_15c0.l+4*_15d4.x,dim.height-30+_15d4.y,"end","Outbound",_15cc,_15cd);if(_15d1=="html"){this.htmlElements.push(_15d5);}}if(this._max>0){var _15d6=dcac.createText[_15d1](this.chart,s,_15c0.l+4*_15d4.x,7+_15d4.y,"end","Inbound",_15cc,_15cd);if(_15d1=="html"){this.htmlElements.push(_15d6);}}}}catch(e){console.log(e);}}return this;}});dojo.declare("nox.ext.apps.vmanui.DashboardRangeAreaVerticalAxis",nox.ext.apps.vmanui.RangeAreaVerticalAxis,{scale:function(num){if(num){var abs=Math.abs(num);var neg=num/abs;var _15da=Math.ceil(Math.log(abs)/Math.LN10);var order=Math.pow(10,_15da);return order*neg;}return num;}});})();}if(!dojo._hasResource["nox.ext.apps.vmanui.charting.themes.nicira"]){dojo._hasResource["nox.ext.apps.vmanui.charting.themes.nicira"]=true;dojo.provide("nox.ext.apps.vmanui.charting.themes.nicira");(function(){var dxc=dojox.charting;nox.ext.apps.vmanui.charting.themes.nicira=new dxc.Theme({axis:{font:"normal normal normal 7pt Arial",fontColor:"#000000"},colors:["#A6CE39","#760E12","#6DCFF6","#7D530D","#B2B2B2","#36677B","#ED1C24","#4C4C4C","#FAA61A","#53671C"]});})();}if(!dojo._hasResource["nox.ext.apps.vmanui.charting.themes.niciraDashboard"]){dojo._hasResource["nox.ext.apps.vmanui.charting.themes.niciraDashboard"]=true;dojo.provide("nox.ext.apps.vmanui.charting.themes.niciraDashboard");(function(){var dxc=dojox.charting;nox.ext.apps.vmanui.charting.themes.niciraDashboard=new dxc.Theme({axis:{font:"normal normal normal 7pt Arial",fontColor:"#000000"},colors:["#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C","#53671C"]});})();}if(!dojo._hasResource["nox.ext.apps.vmanui.plotUtil"]){dojo._hasResource["nox.ext.apps.vmanui.plotUtil"]=true;dojo.provide("nox.ext.apps.vmanui.plotUtil");(function(){var _15de=nox.ext.apps.vmanui.plotUtil;_15de.plotNetFlow=function(_15df,_15e0,_15e1,_15e2,theme){dojo.byId(_15df).innerHTML="";var _15e4=nox.ext.apps.vmanui.RangeAreaVerticalAxis;if(theme=="dashboard"){_15e4=nox.ext.apps.vmanui.DashboardRangeAreaVerticalAxis;}var _15e5={type:nox.ext.apps.vmanui.RangeArea,tension:"X"};var chart=new dojox.charting.Chart2D(_15df).addPlot("default",_15e5).addAxis("x",{htmlLabels:true,labels:_15e1}).addAxis("y",{type:_15e4,vertical:true,htmlLabels:true,maxLabelSize:40,labelFunc:function(label,num,_15e9){return dojo.number.format(Math.abs(num));}});if(theme=="dashboard"){chart.setTheme(nox.ext.apps.vmanui.charting.themes.niciraDashboard);}else{chart.setTheme(nox.ext.apps.vmanui.charting.themes.nicira);}_15de.setChartSeries(chart,_15e2,_15e0,_15e1);return chart;};_15de.setChartSeries=function(chart,_15eb,_15ec,_15ed){for(var name in chart.runs){chart.removeSeries(name);}chart.addAxis("x",{htmlLabels:true,labels:_15ed});try{if(_15eb){dojo.forEach(_15eb.reverse(),function(p){if(_15ec[p]){chart.addSeries(p,_15ec[p]["data"]);}});}else{for(p in _15ec){chart.addSeries(p,_15ec[p]["data"]);}}chart.render();}catch(e){console.log("Render Error:",e);}};_15de.fillTableLegendColors=function(chart,aRows){var _15f2={};for(var i=0;i<chart.series.length;i++){var oRun=chart.series[i];_15f2[oRun.name]=oRun.dyn.fill.toHex().toUpperCase();}for(var i=0;i<aRows.length;i++){var oRow=aRows[i];var sId=oRow.series_id;if(sId&&_15f2[sId]){oRow.fillLegendColor(_15f2[sId]);}}};})();}if(!dojo._hasResource["nox.ext.apps.vmanui.dashboard"]){dojo._hasResource["nox.ext.apps.vmanui.dashboard"]=true;dojo.provide("nox.ext.apps.vmanui.dashboard");(function(){var _15f7=nox.ext.apps.vmanui;var _15f8=_15f7.main;var _15f9=_15f7.dashboard;var _15fa=_15f7.vac_visibility;_15f9.charts={};_15f9.chartRotation=0;_15f9.chartsNeeded=[];_15f9.chart_metadata=[{plotId:"dashboardBitsPlot",binType:"host",countType:"bits"},{plotId:"dashboardFlowsPlot",binType:"host",countType:"flows"},{plotId:"dashboardPacketsPlot",binType:"host",countType:"packets"}];_15f9.dashboard_init=function(_15fb,_15fc){nox.ext.apps.vmanui.main.set_document_subtitle("Dashboard");_15f9.update_server_stats();_15f9.update_network_stats();_15f9.update_network_events(_15fc);_15f9.update_admin_events(_15fc);var dm=_15f9;if(_15fa==undefined){_15fa=_15f7.vac_visibility;}_15f9.chartsNeeded=[];dojo.forEach(_15f9.chart_metadata,function(_15fe){var _15ff=_15fe.plotId;if(!_15f9.charts[_15ff]){_15f9.chartsNeeded.push(_15fe);}});if(_15f9.chartsNeeded.length==0){var _1600=_15f9.chart_metadata.length;_15f9.chartRotation=(_15f9.chartRotation+1)%_1600;var _1601=_15f9.chart_metadata[_15f9.chartRotation];_15f9.chartsNeeded.push(_1601);}if(_15f9.chartsNeeded.length){if(dojo.isIE){_15f8.pause_clicked(false);}}_15f9.create_needed_chart();return false;};_15f9.create_needed_chart=function(){if(_15f9.chartsNeeded.length){var _1602=_15f9.chartsNeeded.shift();_15f9._update_dashboard_plot(_1602.plotId,_1602.binType,_1602.countType);}else{if(dojo.isIE){nox.ext.apps.vmanui.main.play_clicked(false);}}};_15f9.update_server_stats=function(){_15f9.update_server_uptime();_15f9.update_server_cpu_load();};_15f9.update_server_cpu_load=function(){var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/nox/cpu/stat",timeout:5000,handleAs:"json",preventCache:true,load:function(r){dojo.byId("server_cpu_load").innerHTML=parseInt(r.user)+" %";}});};_15f9.__get_uptime_string=function(_1605){var _1606=24*60;var iMin=parseInt(_1605/60);var iDays=parseInt(iMin/_1606);if(iDays>0){iMin=parseInt(iMin%(iDays*_1606));}var _1609=parseInt(iMin/60);if(_1609>0){iMin=parseInt(iMin%(_1609*60));}if(iDays>0){return iDays+" days, "+_1609+" hrs, "+iMin+" min";}else{if(_1609>0){return _1609+" hrs, "+iMin+" min";}else{return iMin+" min";}}};_15f9.update_server_uptime=function(){var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/nox/uptime",timeout:5000,handleAs:"json",preventCache:true,load:function(r){dojo.byId("server_uptime").innerHTML=_15f9.__get_uptime_string(r);}});};_15f9.net_events_label_map={"resource_pools_net_stats":"Resource Pools","xenservers_net_stats":"XenServers","networks_net_stats":"Networks","vms_net_stats":"VMs"};_15f9.update_network_stats=function(){var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/xen/entity_counts",timeout:5000,handleAs:"json",preventCache:true,load:function(r){for(var id in _15f9.net_events_label_map){var label=_15f9.net_events_label_map[id];var _1610=r[label];dojo.byId(id).innerHTML=[_1610.managed,_1610.active,_1610.total].join(" / ");}}});};_15f9.update_network_events=function(_1611){var _1612=dijit.byId("net_events_pane");if(_1611||!_1612.pauseRefresh){_1612.refresh(true);}};_15f9.update_admin_events=function(_1613){var _1614=dijit.byId("admin_events_pane");if(_1613||!_1614.pauserefresh){_1614.refresh(true);}};_15f9._update_dashboard_plot=function(_1615,_1616,_1617){var oNow=new Date();var iEnd=oNow.getTime();var _161a=iEnd-60*60*1000;var _161b={plotChartContainerId:_1615,chartTab:"dashboard",interval:60*60};var oArgs={tz:(new Date()).getTimezoneOffset()*-1,direction:"bidir",bintype:_1616,counttype:_1617,start_epoch:parseInt(_161a/1000),end_epoch:parseInt(iEnd/1000),reverse:1,count:5,tree_uid:1};var _161d=new nox.ext.apps.vmanui.flowStatsManager(oArgs,_161b,_15f9.charts[_1615]);var d=_161d.draw();d.addCallback(function(_161f){if(!_15f9.charts[_1615]&&_161f.chart){_15f9.charts[_1615]=_161f.chart;}});d.addCallback(_15f9.create_needed_chart);d.addCallback(function(){_161d=null;});return d;};_15f9._display_error=function(e){console.log("Dashboard Plot Display Error:",e);};_15f9.on_dashboard_load=function(){_15f7.main.set_section_container_display("block");_15f9.dashboard_init();};})();}if(!dojo._hasResource["nox.ext.apps.vmanui.vac"]){dojo._hasResource["nox.ext.apps.vmanui.vac"]=true;dojo.provide("nox.ext.apps.vmanui.vac");(function(){var _1621=nox.ext.apps.vmanui;var _1622=nox.ext.apps.vmanui.vac;_1622.on_vac_load=function(){_1621.main.set_section_container_display("block");dijit.byId(_1621.main.current_tabs["vac"]).refresh();dijit.byId("vacTabContainer").selectChild(dijit.byId(_1621.main.current_tabs["vac"]));_1622.load_nav_tree();_1622.initialize_shared_dialogs();dojo.query(".dijitTabContent").forEach(function(_1623){var _1624=_1623.onclick;_1623.onclick=function(e){if(!_1621.main.check_warn_on_nav()){dojo.stopEvent(e);}else{if(_1624){_1624(e);}}};});dojo.subscribe("vacTabContainer-selectChild",function(child){_1621.main.current_tabs["vac"]=child.id;dojo.style(child.id,{display:"block"});_1621.main.update_history();_1621.main.refresh_current(true,true);});dojo.connect(dijit.byId("visibility"),"onLoad",_1622.__loadVisibility);dojo.connect(dijit.byId("policy"),"onLoad",_1622.__loadPolicy);dojo.connect(dijit.byId("port"),"onLoad",_1622.__loadPort);dojo.connect(dijit.byId("status"),"onLoad",_1621.vac_status.status_init);dojo.connect(dijit.byId("status"),"onUnload",_1621.vac_status.status_unload);_1622.channel_disconnect=function(){if(_1621.main.channel_is_disconnected){return;}_1621.main.channel_is_disconnected=true;if(dijit.byId("tree")){dijit.byId("tree").destroy();_1622.treemodel.destroy();}_1622.clear_rest_index();_1621.main.run_connectivity_test();var h=dojo.connect(_1621.main,"onConnectSuccess",function(){_1621.main.channel_is_disconnected=false;dojo.disconnect(h);_1622.load_nav_tree();});};dojo.connect(dojox.cometd.RestChannels.defaultInstance,"disconnected",_1622.channel_disconnect);};_1622.__loadVisibility=function(){return _1621.vac_visibility.visibility_init(false,true);};_1622.__loadPort=function(){dojo.style(dojo.byId("port"),{display:"block"});};_1622.__loadPolicy=function(){dojo.style(dojo.byId("policy"),{display:"block"});};_1622.node_types={ALL_POOLS:1,POOL:2,NETWORKS:3,NETWORK:4,NETWORK_VM:5,NETWORK_VIF:6,SERVERS:7,SERVER:8,SERVER_NETWORKS:9,SERVER_NETWORK:10,SERVER_NETWORK_VM:11,SERVER_NETWORK_VIF:12,SERVER_VM:13,SERVER_VIF:14,VMS:15,VM:16,VM_VIF:17,ADMIN_NETWORKS:18,ADMIN_NET_GROUP:19,ADMIN_NET:20,ADMIN_GROUPS:21,ADMIN_GROUP:22,ADMIN_VM:23,ADMIN_VIF:24,ADMIN_CHILD_NET_GROUP:25,ADMIN_CHILD_NET:26,ADMIN_CHILD_GROUP:27,ADMIN_CHILD_VM:28,ADMIN_CHILD_VIF:29};var nt=_1622.node_types;_1622.parent_types={};var pt=_1622.parent_types;pt[nt.ALL_POOLS]=null;pt[nt.POOL]=nt.ALL_POOLS;pt[nt.NETWORKS]=nt.POOL;pt[nt.NETWORK]=nt.NETWORKS;pt[nt.NETWORK_VM]=nt.NETWORK;pt[nt.NETWORK_VIF]=nt.NETWORK_VM;pt[nt.SERVERS]=nt.POOL;pt[nt.SERVER]=nt.SERVERS;pt[nt.SERVER_NETWORKS]=nt.SERVER;pt[nt.SERVER_NETWORK]=nt.SERVER_NETWORKS;pt[nt.SERVER_NETWORK_VM]=nt.SERVER_NETWORK;pt[nt.SERVER_NETWORK_VIF]=nt.SERVER_NETWORK_VM;pt[nt.SERVER_VM]=nt.SERVER;pt[nt.SERVER_VIF]=nt.SERVER_VM;pt[nt.VMS]=nt.POOL;pt[nt.VM]=nt.VMS;pt[nt.VM_VIF]=nt.VM;pt[nt.ADMIN_NETWORKS]=null;pt[nt.ADMIN_NET_GROUP]=nt.ADMIN_NETWORKS;pt[nt.ADMIN_NET]=nt.ADMIN_NET_GROUP;pt[nt.ADMIN_GROUPS]=null;pt[nt.ADMIN_GROUP]=nt.ADMIN_GROUPS;pt[nt.ADMIN_VM]=nt.ADMIN_GROUP;pt[nt.ADMIN_VIF]=nt.ADMIN_VM;pt[nt.ADMIN_CHILD_NET_GROUP]=nt.ADMIN_NET_GROUP;pt[nt.ADMIN_CHILD_NET]=nt.ADMIN_CHILD_NET_GROUP;pt[nt.ADMIN_CHILD_GROUP]=nt.ADMIN_GROUP;pt[nt.ADMIN_CHILD_VM]=nt.ADMIN_CHILD_GROUP;pt[nt.ADMIN_CHILD_VIF]=nt.ADMIN_CHILD_VM;_1622.get_vac_path_for_item=function(tab,item){var uid,type;if(item.node_type==_1622.node_types.ADMIN_NET){uid=_1622.treestore.getValue(item,"group_uid");type=_1622.node_types.ADMIN_NET_GROUP;}else{if(item.node_type==_1622.node_types.SERVER_NETWORKS){uid=_1622.treestore.getValue(item,"server_uid");type=_1622.treestore.getValue(item,"node_type");}else{uid=_1622.treestore.getValue(item,"uid");type=_1622.treestore.getValue(item,"node_type");}}var _162e=_1622.treestore.getValue(item,"pool_uid");var _162f=_1622.treestore.getValue(item,"tree_uid");return "/vmanui/"+tab+"?&node_type="+type+"&pool_uid="+_162e+"&uid="+uid+"&tree_uid="+_162f;};_1622.clear_rest_index=function(){var ch=dojox.cometd.RestChannels.defaultInstance,s=ch.subscriptions,_1632="/ws.v1/tree/node/",a=[],i;for(i in dojox.rpc.Rest._index){if(i.substring(0,_1632.length)==_1632){a.push(i);}}for(i in a){delete dojox.rpc.Rest._index[a[i]];delete s[a[i]];}};_1622.__get_item_status=function(item){if(item.active==9){return "Alert";}else{if(item.active){return (item.managed)?"On":"Alert";}}return "Off";};_1622.__get_item_pool_status=function(item){if(item.active===0){return (item.managed)?"On":"Alert";}else{if(item.active==9){return "Alert";}}return "Off";};_1622.__getIconClass=function(item){var t=_1622.node_types;switch(item.node_type){case t.ALL_POOLS:return "MultiplePoolsTreeIcon";case t.POOL:return "PoolTreeIcon"+_1622.__get_item_pool_status(item);case t.NETWORKS:case t.SERVER_NETWORKS:return "MultipleNetworksTreeIcon";case t.NETWORK:case t.SERVER_NETWORK:return "NetworkTreeIcon"+_1622.__get_item_status(item);case t.VMS:case t.ADMIN_GROUP:return "MultipleVMsTreeIcon";case t.VM:case t.NETWORK_VM:case t.SERVER_VM:case t.SERVER_NETWORK_VM:case t.ADMIN_VM:return "VMTreeIcon"+_1622.__get_item_status(item);case t.NETWORK_VIF:case t.SERVER_VIF:case t.VM_VIF:case t.ADMIN_VIF:case t.SERVER_NETWORK_VIF:return "VIFTreeIcon"+_1622.__get_item_status(item);case t.SERVERS:return "MultiplePhysicalServersTreeIcon";case t.SERVER:return "PhysicalServerTreeIcon"+_1622.__get_item_status(item);case t.ADMIN_NETWORKS:return "MultipleNetworkGroupsTreeIcon";case t.ADMIN_NET_GROUP:return "NetworkGroupTreeIcon";case t.ADMIN_NET:return "NetworkMemberTreeIcon";case t.ADMIN_GROUPS:return "MultipleHostGroupsTreeIcon";default:return "";}};_1622.__doubleClickTreeDomNode=function(evt){var tnode=dijit.getEnclosingWidget(evt.target);if(tnode&&tnode.isExpandable){if(tnode.isExpanded){_1622.tree._collapseNode(tnode);}else{_1622.tree._expandNode(tnode);}}};_1622.__clickTreeNode=function(item,node,_163d){if(!_163d&&!_1621.main.check_warn_on_nav()){return;}dojo.query(".currentTreeNode").removeClass("currentTreeNode");dojo.addClass(node.rowNode,"currentTreeNode");_1621.main.current_tree_item=item;_1622.select_current_item();var _163e=_163d?function(){_1622.tree.focusNode(node);}:null;_1621.main.refresh_current(true,!_163d,_163e,10);};_1622.get_all_pool_nodes=function(_163f){if(!_163f){return [];}var _1640=function(_1641){var kids=_1641.children;var _1643=[];dojo.forEach(kids,function(kid){var uid=kid["$ref"];_1643.push(_1621.xhrGet({url:"/ws.v1/tree/node/"+uid,preventCache:true,timeout:30000,handleAs:"json"}));});var dl=new dojo.DeferredList(_1643);dl.addCallback(_163f);};var _1647=_1621.xhrGet({url:"/ws.v1/tree/node/"+_1622.node_types.ALL_POOLS,preventCache:true,timeout:30000,handleAs:"json",load:_1640,error:function(_1648){}});};_1622.load_nav_tree=function(){var _1649=dojo.byId("treewrapper");if(_1649===null){return;}if(dijit.byId("tree")){dijit.byId("tree").destroy();_1622.treemodel.destroy();}_1622.clear_rest_index();var _164a=dijit.byId("searchBox").searchString.getValue();if(_164a.length>0){if(_164a.indexOf("*")===-1&&_164a.indexOf("?")===-1){_164a="*"+_164a+"*";}query={search:_164a};}else{query={};}var _164b={target:"/ws.v1/tree/node/",idAttribute:"tree_uid"};_1622.treestore=new dojox.data.JsonRestStore(_164b);dojo.connect(_1622.treestore,"onSet",function(item){try{if((_1621.main.current_tabs["vac"]=="status")&&!_1621.main.is_paused){_1622.try_tree_update_refresh();}}catch(e){_1621.main.console_log("error with tree auto refresh",e);}});var _164d={store:_1622.treestore,rootId:"troot",childrenAttr:"children",labelAttr:"name",query:query,identifierAttr:"tree_uid"};_1622.treemodel=new dijit.tree.ForestStoreModel(_164d);_1622.treemodel._onNewItem=function(item,_164f){try{if(item!==null&&item.top!==undefined){this._requeryTop();}dijit.tree.TreeStoreModel.prototype._onNewItem.apply(this,arguments);}catch(e){_1621.main.console_log("new tree item error",e);}};var _1650={id:"tree",model:_1622.treemodel,showRoot:false};_1622.tree=new dijit.Tree(_1650,document.createElement("div"));_1622.tree.getIconClass=_1622.__getIconClass;dojo.connect(_1622.tree,"onClick",_1622.__clickTreeNode);dojo.connect(_1622.tree.domNode,"ondblclick",_1622.__doubleClickTreeDomNode);dojo.place(_1622.tree.domNode,_1649,"only");var b_uid=_1621.main.bookmark_tree_uid;var _1652=_1621.main.current_tree_item;if(b_uid!==undefined&&b_uid!==null){_1622.expandTreeToNode(b_uid);_1621.main.bookmark_tree_uid=null;}else{if(_1652!==undefined&&_1652!==null){_1622.expandTreeToNode(_1652.tree_uid);}else{_1622.expandTreeToNode(""+_1622.node_types.ALL_POOLS);}}var _1653=dijit.byId("emptymenu");_1653.bindDomNode(_1622.tree.domNode);dojo.connect(_1653,"_openMyself",_1622.__openEmptyMenu);};_1622.__openEmptyMenu=function(evt){var item=dijit.getEnclosingWidget(evt.target).item;if(!item){return;}var m_id=null;var _1657=null;switch(item.node_type){case nt.ALL_POOLS:m_id="all_pools_menu";_1657="edit-datasource";break;case nt.POOL:if(item.active==10){m_id="pool_menu_no_refresh";}else{m_id="pool_menu";}_1657="edit-datasource";break;case nt.ADMIN_NETWORKS:m_id="all_net_groups_menu";_1657="edit-groups";break;case nt.ADMIN_NET_GROUP:m_id="net_group_menu";_1657="edit-groups";break;case nt.ADMIN_GROUPS:m_id="all_host_groups_menu";_1657="edit-groups";break;case nt.ADMIN_GROUP:m_id="host_group_menu";_1657="edit-groups";break;case nt.ADMIN_VM:m_id="host_member_menu";_1657="edit-groups";break;case nt.ADMIN_NET:m_id="nwaddr_member_menu";_1657="edit-groups";break;}if(m_id===null){return;}if(nox.ext.apps.vmanui.User.hasCapability(_1657)){var m=dijit.byId(m_id);if(m){m.cur_item=item;m._openMyself(evt);}}};_1622.show_vac_tab=function(_1659,_165a){if(_1622.treestore){_1622.expandTreeToNode(_165a);}else{_1621.main.bookmark_tree_uid=_165a;}_1621.main.current_tabs.vac=_1659;_1621.main.show_section("vac");_1621.main.update_history();};_1622._get_parent_tree_uid=function(_165b){var arr=_165b.split("_");pnode_type=_1622.parent_types[arr[0]];if(pnode_type===null){return null;}arr[0]=pnode_type;arr.pop();return arr.join("_");};_1622.expandTreeToNode=function(_165d){var tree=_1622.tree;if(!tree){console.log("tree has value in expandTreeToNode()",tree,arguments.callee.caller);}var model=_1622.treemodel;var rn=tree.rootNode;if(!rn.isExpandable){_1621.main.console_log("Root node is not expandable!");return;}var _1661=[_165d];var _1662=_165d;while(true){_1662=_1622._get_parent_tree_uid(_1662);if(_1662===null){break;}_1661.unshift(_1662);}_1661.unshift(model.getIdentity(rn.item));var _1663=null;function _1664(_1665,node){var _1667=model.getIdentity(_1665);if(_1667!=_1661[0]){return;}_1661.shift();var next=tree._itemNodeMap[_1661[0]];if(next!==undefined){if(_1661.length==1){dojo.disconnect(_1663);_1622.selectTreeNode(next);return;}else{if(next.isExpandable){tree._expandNode(next);return;}else{dojo.disconnect(_1663);_1622.selectTreeNode(next);return;}}}_1621.main.console_log("Parent loaded but child not: "+_1667+" "+_1661[0]);dojo.disconnect(_1663);_1622.selectTreeNode(node);};_1663=dojo.connect(tree,"onOpen",_1664);tree._expandNode(rn);};_1622.selectTreeNode=function(node){var tree=_1622.tree;if(!tree){console.log("tree has value in selectTreeNode()",tree,arguments.callee.caller);}tree.onClick(node.item,node,true);};dijit.tree.TreeStoreModel.prototype.mayHaveChildren=function(item){return dojo.some(this.childrenAttrs,function(attr){return item[attr]&&item[attr].length;},this);};_1622.select_current_item=function(){var id=_1622.treestore.getValue(_1621.main.current_tree_item,"tree_uid");_1622.select_tree_node(id);};_1622.select_tree_node=function(_166e){var node=_1622.tree._itemNodeMap[_166e];if(node){_1622.tree._onNodeFocus(node);}};_1622.initialize_shared_dialogs=function(){_1622._init_allgroup_dialog();};_1622.clear_allgroup_dialog=function(){dijit.byId("addGroupDialogName").setValue("");dijit.byId("addGroupDialogDescription").setValue("");dijit.byId("addGroupDialogType").setValue("");dijit.byId("addGroupDialogUID").setValue("");};_1622._init_allgroup_dialog=function(){dojo.connect(dijit.byId("addGroupDialogName"),"onKeyUp",function(){var valid=dijit.byId("addGroupDialogName").isValid();dijit.byId("add_group").attr("disabled",!valid);});dojo.connect(dijit.byId("add_group"),"onClick",function(){var _1671=dijit.byId("addGroupDialogName");if(!_1671.isValid()){return;}var name=_1671.getValue();var _1673=dijit.byId("addGroupDialogDescription").getValue();var type=dijit.byId("addGroupDialogType").getValue();var uid=dijit.byId("addGroupDialogUID").getValue();frag.status.groups.addGroupDialog.closeDialog();var _1676=uid.length===0;var d=_1676?_1621.vac_status.create_empty_group(type,name,_1673):_1621.vac_status.modify_group_name(uid,type,name,_1673);d.addCallback(function(group){_1622.clear_allgroup_dialog();if(_1676){setTimeout(function(){var _1679=(type=="nwaddr")?nt.ADMIN_NET_GROUP:nt.ADMIN_GROUP;var _167a=_1679+"_"+group.uid;_1621.vac.show_vac_tab("status",_167a);},1000);}else{_1621.main.refresh_current(false);}});escaped_name=_1621.util.escapeMarkup(name);d.addErrback(function(){_1622.clear_allgroup_dialog();_1621.main.vmanui_error("Failed to add new group '"+escaped_name+"'");});});};_1622.show_addgroup_dialog=function(type){dijit.byId("addGroupDialogType").setValue(type);frag.status.groups.addGroupDialog.openDialog();var _167c=(type=="host")?" VM ":"Address";frag.status.groups.addGroupDialog.attr("title","Create "+_167c+" Group");dijit.byId("add_group").attr("label","Create Group");};_1622.show_modifygroup_dialog=function(uid,type){_1621.vac_status.get_group(uid,type).addCallback(function(g){frag.status.groups.addGroupDialog.openDialog();var _1680=(type=="host")?" VM ":"Address";frag.status.groups.addGroupDialog.attr("title","Modify "+_1680+" Group");dijit.byId("addGroupDialogType").setValue(type);dijit.byId("addGroupDialogUID").setValue(uid);dijit.byId("addGroupDialogName").setValue(g.name);dijit.byId("addGroupDialogDescription").setValue(g.description);dijit.byId("add_group").attr("disabled",false);dijit.byId("add_group").attr("label","Modify Group");});};_1622.last_tree_refresh_ms=0;_1622.min_ms_between_tree_refresh=10000;_1622.waiting_on_delayed_refresh=false;_1622.do_status_refresh=function(){if((!_1621.main.is_paused)&&_1621.main.current_section=="vac"&&_1621.main.current_tabs.vac=="status"){var _1681=(new Date()).getTime();_1621.main.refresh_current(false,false);_1622.last_tree_refresh_ms=_1681;}};_1622.try_tree_update_refresh=function(){var _1682=(new Date()).getTime();var _1683=_1682-_1622.last_tree_refresh_ms;if(_1683>_1622.min_ms_between_tree_refresh){_1622.do_status_refresh();}else{if(!_1622.waiting_on_delayed_refresh){_1622.waiting_on_delayed_refresh=true;setTimeout(function(){_1622.do_status_refresh();_1622.waiting_on_delayed_refresh=false;},_1622.min_ms_between_tree_refresh-100);}}};})();}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(_1684){var month=_1684.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(month==1&&dojo.date.isLeapYear(_1684)){return 29;}return days[month];};dojo.date.isLeapYear=function(_1687){var year=_1687.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_1689){var str=_1689.toString();var tz="";var match;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((match=str.match(pat))){tz=match[1];}else{str=_1689.toLocaleString();pat=/ ([A-Z\/]+)$/;if((match=str.match(pat))){tz=match[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(date1,date2,_1691){date1=new Date(Number(date1));date2=new Date(Number(date2||new Date()));if(_1691!=="undefined"){if(_1691=="date"){date1.setHours(0,0,0,0);date2.setHours(0,0,0,0);}else{if(_1691=="time"){date1.setFullYear(0,0,0);date2.setFullYear(0,0,0);}}}if(date1>date2){return 1;}if(date1<date2){return -1;}return 0;};dojo.date.add=function(date,_1693,_1694){var sum=new Date(Number(date));var _1696=false;var _1697="Date";switch(_1693){case "day":break;case "weekday":var days,weeks;var mod=_1694%5;if(!mod){days=(_1694>0)?5:-5;weeks=(_1694>0)?((_1694-5)/5):((_1694+5)/5);}else{days=mod;weeks=parseInt(_1694/5);}var strt=date.getDay();var adj=0;if(strt==6&&_1694>0){adj=1;}else{if(strt==0&&_1694<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_1694>0)?2:-2;}_1694=(7*weeks)+days+adj;break;case "year":_1697="FullYear";_1696=true;break;case "week":_1694*=7;break;case "quarter":_1694*=3;case "month":_1696=true;_1697="Month";break;case "hour":case "minute":case "second":case "millisecond":_1697="UTC"+_1693.charAt(0).toUpperCase()+_1693.substring(1)+"s";}if(_1697){sum["set"+_1697](sum["get"+_1697]()+_1694);}if(_1696&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(date1,date2,_16a0){date2=date2||new Date();_16a0=_16a0||"day";var _16a1=date2.getFullYear()-date1.getFullYear();var delta=1;switch(_16a0){case "quarter":var m1=date1.getMonth();var m2=date2.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_16a1*4);delta=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(date1,date2,"day"));var weeks=parseInt(dojo.date.difference(date1,date2,"week"));var mod=days%7;if(mod==0){days=weeks*5;}else{var adj=0;var aDay=date1.getDay();var bDay=date2.getDay();weeks=parseInt(days/7);mod=days%7;var _16ad=new Date(date1);_16ad.setDate(_16ad.getDate()+(weeks*7));var _16ae=_16ad.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_16ae+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_16ae+mod)<0:adj=2;}}}days+=adj;days-=(weeks*2);}delta=days;break;case "year":delta=_16a1;break;case "month":delta=(date2.getMonth()-date1.getMonth())+(_16a1*12);break;case "week":delta=parseInt(dojo.date.difference(date1,date2,"day")/7);break;case "day":delta/=24;case "hour":delta/=60;case "minute":delta/=60;case "second":delta/=1000;case "millisecond":delta*=date2.getTime()-date1.getTime();}return Math.round(delta);};}if(!dojo._hasResource["nox.ext.apps.vmanui.strftime"]){dojo._hasResource["nox.ext.apps.vmanui.strftime"]=true;dojo.provide("nox.ext.apps.vmanui.strftime");Date.prototype.strftime=function(_16af){function _16b0(c,month,day,hours,_16b5,d){function pad(num){return dojo.string.pad(num,2,"0");};switch(c){case "a":return ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][day];case "A":return ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][day];case "b":return ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][month];case "B":return ["January","February","March","April","May","June","July","August","September","October","November","December"][month];case "c":return d.toString();case "d":return d.getDate();case "D":return pad(d.getDate());case "H":return pad(hours);case "i":return (hours===12||hours===0)?12:(hours+12)%12;case "I":return pad((hours===12||hours===0)?12:(hours+12)%12);case "m":return pad(month+1);case "M":return pad(_16b5);case "p":return hours>11?"PM":"AM";case "S":return pad(d.getSeconds());case "w":return day;case "y":return pad(d.getFullYear()%100);case "Y":return d.getFullYear().toString();case "Z":var _16b9=d.getTimezoneOffset()/60*-100;var sign=_16b9/Math.abs(_16b9)<0?"-":"+";return sign+dojo.string.pad(Math.abs(_16b9),4,"0");case "z":return dojo.date.getTimezoneName(d);default:return c;}};var day=this.getDay(),month=this.getMonth();var hours=this.getHours(),_16be=this.getMinutes();var _16bf="";var len=_16af.length;for(var i=0;i<len;i++){var c=_16af.charAt(i);if(c=="%"&&(++i)<len){_16bf+=_16b0(_16af.charAt(i),month,day,hours,_16be,this);}else{_16bf+=c;}}return _16bf;};}if(!dojo._hasResource["nox.ext.apps.vmanui.settings"]){dojo._hasResource["nox.ext.apps.vmanui.settings"]=true;dojo.provide("nox.ext.apps.vmanui.settings");(function(){var _16c3=nox.ext.apps.vmanui;var _16c4=nox.ext.apps.vmanui.settings;var util=nox.ext.apps.vmanui.util;_16c4.MAX_NAME_LENGTH=32;_16c4.menuManager=null;_16c4.on_settings_load=function(){_16c4.set_document_title();_16c3.main.set_section_container_display("block");_16c3.main.make_current_viewable();if(!_16c4.menuManager){_16c4.menuManager=new nox.ext.apps.vmanui.settingsMenus();}_16c4.menuManager.createMenus();dojo.subscribe("settingsContainer-selectChild",function(child){_16c3.main.current_tabs["settings"]=child.id;dojo.style(child.id,{display:"block"});_16c4.set_document_title();_16c3.main.update_history();_16c3.main.update_help();});var d=new Date();dojo.byId("js_time_cell").innerHTML=d.strftime("%m/%D/%y %H:%M:%S GMT%Z");function _16c8(){var _16c9=!dijit.byId("network_access_proxy").checked;dojo.forEach(["proxy_address","proxy_port","proxy_username","proxy_password"],function(name){dijit.byId(name).setDisabled(_16c9);});};dojo.connect(dijit.byId("network_access_proxy"),"onClick",_16c8);dojo.connect(dijit.byId("network_access_direct"),"onClick",_16c8);_16c8();};_16c4.set_document_title=function(){var id=_16c3.main.current_tabs["settings"];var pane=dijit.byId(id);var _16cd=pane.title.replace(/<.*?>/g,"");nox.ext.apps.vmanui.main.set_document_subtitle(_16cd);};_16c4.refresh_settings_section=function(){dijit.byId("settings").refresh();var h=dojo.connect(dijit.byId("settings"),"onDownloadEnd",function(){_16c3.main.make_current_viewable();dojo.disconnect(h);});};_16c4.show_any_message_dialog=function(html,_16d0,_16d1){if(_16c4.show_any_message_dialog.onclick_handle){dojo.disconnect(_16c4.show_any_message_dialog.onclick_handle);_16c4.show_any_message_dialog.onclick_handle=null;}if(_16d0){_16c4.show_any_message_dialog.onclick_handle=dojo.connect(dijit.byId("any_message_close_btn"),"onClick",_16d0);dojo.style(dijit.byId("any_message_close_btn").domNode,"display","");}else{dojo.style(dijit.byId("any_message_close_btn").domNode,"display","none");}dojo.byId("any_message_text").innerHTML=html;var title=_16d1?_16d1:"";dijit.byId("any_message_dialog").attr("title",title);dijit.byId("any_message_dialog").show();};_16c4.hide_any_message_dialog=function(){dijit.byId("any_message_dialog").hide();};_16c4.show_change_cred_dialog=function(_16d3){dijit.byId("change_cred_name").setValue(_16d3);dijit.byId("change_cred_dialog").show();};_16c4.show_change_privileges_dialog=function(_16d4){nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/adminuser/"+encodeURIComponent(_16d4),timeout:30000,handleAs:"json",error:function(r){_16c3.main.vmanui_error(r);},load:function(r){if(r){dijit.byId("change_privileges_name").setValue(_16d4);dijit.byId("change_priv").setValue(r.priv);dijit.byId("change_privileges_dialog").show();}else{throw Error("Couldn't find account '"+_16d4+"' to modify");}}});};_16c4.show_add_user_dialog=function(){dijit.byId("add_user_dialog").show();};_16c4.show_add_ntp_dialog=function(){dijit.byId("add_ntp_dialog").show();};_16c4.show_add_snapshot_dialog=function(){dijit.byId("add_snapshot_dialog").show();};_16c4.show_delete_snapshot_dialog=function(_16d7){var _16d8=_16c4.get_snapshot(_16d7);var _16d9=dojo.byId("delete_snapshot_desc");var _16da=dijit.byId("delete_snapshot_id");var sDesc="(no description)";if(_16d8){sDesc=util.escapeMarkup(_16d8.description)||sDesc;}_16da.attr("value",_16d7);_16d9.innerHTML=util.cond_ellipsis(sDesc);dijit.byId("delete_snapshot_dialog").show();};_16c4.show_upload_snapshot_dialog=function(){dijit.byId("upload_snapshot_dialog").show();};_16c4.on_password_change=function(_16dc,_16dd,_16de,_16df){var oPass=dijit.byId(_16dc);var _16e1=dijit.byId(_16dd);var pass=oPass.attr("value");var _16e3=_16e1.attr("value");var valid=oPass.isValid()&&_16e1.isValid()&&pass==_16e3;if(valid&&_16de){valid=dijit.byId(_16de).isValid();}var _16e5=dijit.byId(_16df);_16e5.setAttribute("disabled",!valid);};_16c4.verify_password=function(_16e6,_16e7){if(_16e6!=_16e7){return "Passwords don't match";}else{if(!_16e6.length){return "Password cannot be empty string";}}if(_16e6.length>_16c4.MAX_NAME_LENGTH){return "Passwords must contain "+_16c4.MAX_NAME_LENGTH+" or fewer characters";}return "";};_16c4.verify_username=function(sName){if(sName==""){return "Empty user names not allowed";}if(/\s/.test(sName)){return "User names cannot contain whitespace";}if(sName.length>_16c4.MAX_NAME_LENGTH){return "User names must contain "+_16c4.MAX_NAME_LENGTH+" or fewer characters";}return "";};_16c4.submit_add_user=function(){var oName=dijit.byId("new_user");var oPriv=dijit.byId("priv");var _16eb=dijit.byId("new_user_cred1");var _16ec=dijit.byId("new_user_cred2");var _16ed=dijit.byId("csrf_token_s");if(!(oName.isValid()&&oPriv.isValid()&&_16eb.isValid()&&_16ec.isValid())){return;}dijit.byId("add_user_dialog").hide();var name=nox.ext.apps.vmanui.util.escapeMarkup(oName.attr("value"));var priv=oPriv.attr("value");var cred1=_16eb.attr("value");var cred2=_16ec.attr("value");var _16f2=_16ed.attr("value");var _16f3=_16c4.verify_password(cred1,cred2);var _16f4=_16c4.verify_username(name);if(_16f4){_16c4.cancel_user_add();_16c3.main.vmanui_error(_16f4);return;}if(_16f3){_16c4.cancel_user_add();_16c3.main.vmanui_error(_16f3);return;}nox.ext.apps.vmanui.rawXhrPost({url:"ws.v1/adminuser",headers:{"content-type":"application/json","X-CSRF-Token":_16f2},timeout:30000,postData:dojo.toJson({"name":name,"priv":priv,"cred":cred1,"csrf_token":_16f2}),load:function(_16f5,_16f6){_16c4.refresh_settings_section();},error:function(_16f7,_16f8){_16c4.cancel_user_add();_16c3.main.vmanui_error("Failed to add user '"+name+"'");}});};_16c4.submit_change_cred=function(){var _16f9=dijit.byId("new_cred").getValue();var _16fa=dijit.byId("confirm_cred").getValue();var _16fb=dijit.byId("change_cred_name").getValue();var _16fc=dijit.byId("csrf_token_s").getValue();_16c4.cancel_change_cred();var _16fd=_16c4.verify_password(_16f9,_16fa);if(_16fd){_16c3.main.vmanui_error("Invalid Password: "+_16fd);return;}nox.ext.apps.vmanui.rawXhrPut({url:"ws.v1/adminuser/"+encodeURIComponent(_16fb)+"/password",timeout:30000,headers:{"content-type":"application/json","X-CSRF-Token":_16fc},putData:dojo.toJson({"cred":_16f9,"csrf_token":_16fc}),load:function(_16fe,_16ff){},error:function(_1700,_1701){_16c3.main.vmanui_error("Failed to change password for: '"+_16fb+"'");}});};_16c4.submit_change_privileges=function(){var _1702=dijit.byId("change_privileges_name").getValue();var priv=dijit.byId("change_priv").getValue();var _1704=dijit.byId("csrf_token_s").getValue();_16c4.cancel_change_privileges();nox.ext.apps.vmanui.rawXhrPut({url:"ws.v1/adminuser/"+encodeURIComponent(_1702),timeout:30000,handleAs:"json",headers:{"content-type":"application/json","X-CSRF-Token":_1704},putData:dojo.toJson({"priv":priv,"csrf_token":_1704}),load:function(_1705,_1706){var title=_1702;title=title.replace(/'/,"&apos;");title=title.replace(/"/,"&quot;");var cell=dojo.query("tr[title=\""+_1702+"\"] td.account_privileges")[0];if(cell){dojo.fadeOut({node:cell,duration:1000,onEnd:function(){cell.innerHTML=_1705;dojo.fadeIn({node:cell,duration:1000}).play();}}).play();}},error:function(_1709,_170a){_16c3.main.vmanui_error("Failed to change privileges for: '"+_1702+"'");}});};_16c4.modify_ntp_servers=function(_170b,_170c){var _170d=dijit.byId("csrf_token_s").getValue();nox.ext.apps.vmanui.rawXhrPut({url:"ws.v1/ntp_daemon/"+_170c+"_server",timeout:30000,headers:{"content-type":"application/json","X-CSRF-Token":_170d},putData:dojo.toJson({"server":_170b,"csrf_token":_170d}),load:function(_170e,_170f){_16c4.refresh_settings_section();},error:function(_1710,_1711){_16c3.main.vmanui_error("Failed to "+_170c+" NTP server '"+_170b+"'");}});};_16c4.restart_ntp=function(){var _1712=dijit.byId("csrf_token_s").getValue();nox.ext.apps.vmanui.rawXhrPut({url:"ws.v1/ntp_daemon/restart",headers:{"content-type":"application/json","X-CSRF-Token":_1712},timeout:30000,putData:dojo.toJson({"csrf_token":_1712}),load:function(_1713,_1714){setTimeout(function(){_16c4.refresh_settings_section();},3000);},error:function(_1715,_1716){_16c3.main.vmanui_error("Failed to restart NTP daemon");}});};_16c4.force_sync_ntp=function(){var _1717=dijit.byId("csrf_token_s").getValue();nox.ext.apps.vmanui.rawXhrPost({url:"ws.v1/ntp_daemon/stop",headers:{"content-type":"application/json","X-CSRF-Token":_1717},timeout:30000,putData:dojo.toJson({"csrf_token":_1717}),load:function(_1718,_1719){setTimeout(function(){_16c4.refresh_settings_section();},3000);},error:function(_171a,_171b){_16c3.main.vmanui_error("Failed to restart NTP daemon");}});};_16c4.submit_add_ntp=function(){var _171c=dijit.byId("ntp_server").getValue();_16c4.cancel_ntp_add();_16c4.modify_ntp_servers(_171c,"add");};_16c4.submit_add_snapshot=function(){var desc=dijit.byId("snapshot_desc").getValue();var _171e=dijit.byId("csrf_token_s").getValue();_16c4.cancel_snapshot_add();nox.ext.apps.vmanui.rawXhrPost({url:"ws.v1/nox/snapshot",timeout:30000,headers:{"content-type":"application/json","X-CSRF-Token":_171e},postData:dojo.toJson({"desc":desc,"csrf_token":_171e}),load:function(_171f,_1720){_16c4.refresh_settings_section();},error:function(_1721,_1722){_16c3.main.vmanui_error("Failed to create snapshot");}});};_16c4.submit_delete_snapshot=function(){var _1723=dijit.byId("delete_snapshot_id");var id=encodeURIComponent(_1723.attr("value"));var _1725=dijit.byId("csrf_token_s").getValue();_16c4.cancel_snapshot_delete();nox.ext.apps.vmanui.xhrDelete({url:"/ws.v1/nox/snapshot/"+id,timeout:30000,headers:{"content-type":"application/json","X-CSRF-Token":_1725},handleAs:"json",load:function(){setTimeout(_16c4.refresh_settings_section,500);},error:function(r){_16c3.main.vmanui_error("Error deleting snapshot: "+r);}});};_16c4.cancel_change_cred=function(){dijit.byId("new_cred").setValue("");dijit.byId("confirm_cred").setValue("");dijit.byId("change_cred_name").setValue("");dijit.byId("change_cred_dialog").hide();};_16c4.cancel_change_privileges=function(){dijit.byId("change_privileges_name").setValue("");dijit.byId("change_privileges_dialog").hide();};_16c4.cancel_user_add=function(){dijit.byId("new_user").reset();dijit.byId("new_user_cred1").reset();dijit.byId("new_user_cred2").reset();dijit.byId("priv").setValue("Admin");dijit.byId("add_user_dialog").hide();};_16c4.cancel_ntp_add=function(){dijit.byId("ntp_server").setValue("");dijit.byId("add_ntp_dialog").hide();};_16c4.cancel_snapshot_add=function(){dijit.byId("snapshot_desc").setValue("");dijit.byId("add_snapshot_dialog").hide();};_16c4.cancel_snapshot_delete=function(){dijit.byId("delete_snapshot_dialog").hide();};_16c4.cancel_snapshot_upload=function(){dijit.byId("upload_snapshot_dialog").hide();};_16c4.remove_user=function(_1727){var _1728=dijit.byId("csrf_token_s").getValue();nox.ext.apps.vmanui.xhr("DELETE",{url:"ws.v1/adminuser/"+encodeURIComponent(_1727),timeout:30000,headers:{"content-type":"application/json","X-CSRF-Token":_1728},load:function(_1729,_172a){_16c4.refresh_settings_section();},error:function(_172b,_172c){_16c3.main.vmanui_error("Failed to remove user : '"+_1727+"'");}});};_16c4.remove_ntp=function(_172d){_16c4.modify_ntp_servers(_172d,"remove");};_16c4.cancel_download_snapshot=function(id){dijit.byId("download_snapshot_dialog").hide();};_16c4.get_snapshot=function(id){var sId=encodeURIComponent(id);var _1731=null;dojo.xhrGet({url:"/ws.v1/nox/snapshot/"+sId,sync:true,handleAs:"json",load:function(r){_1731=r;}});return _1731;};_16c4.download_snapshot=function(id){var _1734=_16c4.get_snapshot(id);var sDesc=_1734?util.escapeMarkup(_1734.description):"unknown";if(!sDesc){sDesc="(no description)";}var sId=encodeURIComponent(id);var _1737=dijit.byId("download_snapshot_dialog");dojo.query("a#download_snapshot_link",_1737.domNode).forEach(function(oNode){oNode.href="/ws.v1/nox/snapshot/"+sId+"/export";setTimeout(function(){oNode.blur();},500);});dojo.query("span#download_snapshot_description",_1737.domNode).forEach(function(oNode){oNode.innerHTML=util.cond_ellipsis(sDesc);});_1737.show();};_16c4.show_restore_snapshot_dialog=function(id){dijit.byId("snapshot_id").setValue(id);dijit.byId("restore_snapshot_dialog").show();};_16c4.cancel_restore_snapshot=function(){dijit.byId("restore_snapshot_dialog").hide();dijit.byId("snapshot_id").setValue("");};_16c4.submit_restore_snapshot=function(){_16c3.main.disable_connection_testing();dijit.byId("restore_snapshot_dialog").hide();dijit.byId("restore_snapshot_progress").show();var id=dijit.byId("snapshot_id").getValue();var _173c=dijit.byId("csrf_token_s").getValue();nox.ext.apps.vmanui.rawXhrPut({url:"ws.v1/nox/snapshot/"+encodeURIComponent(id),headers:{"content-type":"application/json","X-CSRF-Token":_173c},postData:dojo.toJson({"csrf-token":_173c}),timeout:30000,load:function(_173d,_173e){_16c4.cancel_restore_snapshot();dijit.byId("restore_snapshot_progress").show();var _173f=function(){dijit.byId("restore_snapshot_progress").hide();_16c3.main.vmanui_error(_16c3.main.app_name_short+" failed to restart after snapshot restore",_16c3.main.reenable_connection_testing);};_16c4.restart_poll(60,500,false,_173f);},error:function(_1740,_1741){dijit.byId("restore_snapshot_progress").hide();_16c3.main.vmanui_error("Failed to restore to snapshot",_16c3.main.reenable_connection_testing);}});};_16c4.dump_poll_handle_response=function(_1742){if(_16c4.dump_canceled){return;}var title="Log Collection Failed";var msg="An error occurred and the downloadable file couldn't be prepared.";if(_1742=="complete"){var title="Log Collection Complete";msg="Process complete!  Download the archive by clicking <a href=\"/ws.v1/nox/dump/dump.tar.gz\">here</a>";}else{if(_1742=="dumping"){var title="Collecting Logs";msg="Preparing a file to be downloaded. Please wait a moment since this may take several minutes.";setTimeout(_16c4.dump_poll_request,1000);}}_16c4.show_any_message_dialog(msg,function(){_16c4.hide_any_message_dialog();_16c4.dump_canceled=true;},title);};_16c4.dump_poll_request=function(){nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/nox/dump/status",load:_16c4.dump_poll_handle_response,timeout:30000,handleAs:"json",preventCache:true,error:function(_1745){_16c4.dump_poll_handle_response("error");}});};_16c4.dump_initiate=function(){var _1746=dijit.byId("csrf_token_s").getValue();_16c4.dump_canceled=false;_16c4.dump_initiate.deferred=nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/nox/dump/status",headers:{"content-type":"application/json","X-CSRF-Token":_1746},putData:dojo.toJson("initiate"),handleAs:"json",timeout:1000000,load:function(_1747){_16c4.dump_poll_handle_response(_1747);},error:function(_1748){_16c4.dump_poll_handle_response("error");}});};_16c4.restart_vnetmanager=function(){_16c3.main.disable_connection_testing();var _1749=dijit.byId("csrf_token_s").getValue();nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/nox/local_config/shutdown",headers:{"content-type":"application/json","X-CSRF-Token":_1749},putData:dojo.toJson("process"),timeout:30000,handleAs:"json",load:dojo.hitch(this,function(_174a){_16c4.show_any_message_dialog("Please wait while the "+_16c3.main.app_name_short+" UI restarts.",null,"Restarting "+_16c3.main.app_name_short);setTimeout(function(){_16c4.restart_poll(15,500,false,null);},2000);}),error:function(){vmanui_error("Failure while requesting a "+_16c3.main.app_name_short+" restart.");}});};_16c4.restart_poll=function(count,wait,_174d,_174e){if(count===0){_16c4.hide_any_message_dialog();if(_174e){_174e();}else{_16c3.main.vmanui_error("Unable to restart "+_16c3.main.app_name_short,function(){window.location.reload();});}if(!_174d){_16c3.main.reenable_connection_testing();}return;}dojo.xhrGet({url:"/ws.v1/nox/up",timeout:3000,preventCache:true,load:function(_174f){if(_174d){_16c4.hide_any_message_dialog();window.location.reload();}else{setTimeout(function(){_16c4.restart_poll(count-1,wait,false,_174e);},wait);}},error:function(_1750){if(_1750.status==401){_16c4.hide_any_message_dialog();window.location="/login?last_page=/";}else{setTimeout(function(){_16c4.restart_poll(count-1,wait,true,_174e);},wait);}}});};_16c4._build_ssl_form=function(name){var form=document.createElement("form");form.setAttribute("id",name+"_form");form.setAttribute("method","post");form.setAttribute("enctype","multipart/form-data");var input=document.createElement("input");input.setAttribute("type","file");input.setAttribute("name",name);form.appendChild(input);return form;};_16c4.submit_update_cert=function(_1754){var _1755;var _1756=true;if(_1754=="ovs"){_1755="ovscert_form";var _1757=dojo.byId(_1755);var cert=_1757.ssl_certificate.value;var pkey=_1757.ssl_privatekey.value;var _175a=_1757.ssl_ca_certificate.value;if(cert.length==0||pkey.length==0||_175a.length==0){_16c3.main.vmanui_error("Please specify a certificate file, a private key file and a CA certificate file.");_1756=false;}}else{_1755="httpscert_form";var _1757=dojo.byId(_1755);var cert=_1757.ssl_certificate.value;var pkey=_1757.ssl_privatekey.value;if(cert.length===0||pkey.length===0){_16c3.main.vmanui_error("Please specify both a certificate and private key file.");_1756=false;}}if(!_1756){return;}var _175b=function(){_16c4.cancel_update_cert(_1754);var _175c=_1754.toUpperCase();_16c3.main.vmanui_error("Error updating "+_175c+" certificate/key file",function(){_16c4.cancel_update_cert(_1754);});};var url,_175e;if(_1754=="ovs"){url="/ws.v1/ovscert";}else{url="/ws.v1/httpscert";}var _175f=dijit.byId("csrf_token_s").getValue();url=url+"?csrf_token="+_175f;dojo.io.iframe.send({url:url,method:"post",handleAs:"html",form:_1757,load:function(_1760,_1761){_16c4.cancel_update_cert(_1754);if(_1754=="https"){dijit.byId("view_https_cert_dialog_contentpane").refresh();title="Restart Required";msg="Please restart your browser to access the "+_16c3.main.app_name_short+" UI using the the new certificate.";if(_1760.body.innerHTML.search("success")==-1){title="Update Failed";msg="Unable to update the HTTPS certificate.";}_16c4.show_any_message_dialog(msg,function(){_16c4.hide_any_message_dialog();},title);}else{dijit.byId("view_ovs_cert_dialog_contentpane").refresh();title="Restart Required";msg="OVS certificate and key have been updated, "+"please restart the "+_16c3.main.app_name_short+".";if(_1760.body.innerHTML.search("success")==-1){title="Update Failed";msg="Unable to update the OVS certificate.";}_16c4.show_any_message_dialog(msg,function(){_16c4.hide_any_message_dialog();},title);}return _1760;},error:function(_1762,_1763){_175b();return _1762;}});};_16c4.cancel_update_cert=function(_1764){if(_1764=="ovs"){dijit.byId("update_ovs_cert_dialog").hide();dojo.byId("ovscert_form").ssl_certificate.value="";dojo.byId("ovscert_form").ssl_privatekey.value="";dojo.byId("ovscert_form").ssl_ca_certificate.value="";}else{dijit.byId("update_cert_dialog").hide();dojo.byId("httpscert_form").ssl_certificate.value="";dojo.byId("httpscert_form").ssl_privatekey.value="";}};_16c4.show_add_syslog_dialog=function(){dijit.byId("syslog_server").setValue("");dijit.byId("syslog_add_dialog").show();};_16c4.submit_add_syslog=function(){var _1765=dijit.byId("syslog_server").getValue();var _1766=dijit.byId("syslog_str").getValue();if(_1766.length===0){_16c4.update_syslog_settings(_1765);}else{var _1767=_16c4.is_syslog_string_unique(_1765,_1766);if(_1767){var _1768=_1765+","+_1766;_16c4.update_syslog_settings(_1768);}else{_16c3.main.vmanui_error("\""+_1765+"\" is already configured for syslog.");}}};_16c4.is_syslog_string_unique=function(_1769,_176a){var aOld=_176a.split(",");if(dojo.indexOf(aOld,_1769)==-1){return true;}return false;};_16c4.remove_syslog=function(_176c){var _176d=dijit.byId("syslog_str").getValue().split(",");var _176e=dojo.filter(_176d,function(item){return item.length>0&&item!=_176c;});_16c4.update_syslog_settings(_176e.join(","));};_16c4.update_syslog_settings=function(_1770){var _1771=dijit.byId("csrf_token_s").getValue();var data={"destination.1.name":"Syslog","destination.1.type":"Syslog","destination.1.facility":"LOCAL7","destination.1.priority":"INFO","destination.1.host":_1770,"rule.1.destination":"Syslog","csrf_token":_1771};nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/config/notifier_config",headers:{"content-type":"application/json","X-CSRF-Token":_1771},putData:dojo.toJson(data),timeout:1000000,load:dojo.hitch(this,function(){_16c4.refresh_settings_section();}),error:function(_1773){_16c3.main.vmanui_error("Unable to update Syslog settings.");}});};_16c4.show_update_settings_dialog=function(){dijit.byId("update_settings_dialog").show();};_16c4.submit_update_settings=function(){var _1774=dijit.byId("csrf_token_s").getValue();var _1775={"csrf_token":_1774};_1775["network-access"]=dijit.byId("network_access_proxy").checked?"proxy":"direct";_1775["auto-update"]=dijit.byId("auto_update").checked?1:0;dojo.forEach(["proxy_address","proxy_port","proxy_username","proxy_password"],function(field){_1775[field]=dijit.byId(field).getValue();});nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/nox/update_settings",headers:{"content-type":"application/json","X-CSRF-Token":_1774},timeout:1000000,putData:dojo.toJson(_1775),load:dojo.hitch(this,function(){_16c4.refresh_settings_section();}),error:function(_1777){_16c3.main.vmanui_error("Unable to modify update settings.");}});};_16c4.check_for_updates=function(){var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/nox/check_for_updates",timeout:15000,preventCache:true,load:function(_1779){_16c4.refresh_settings_section();},error:function(_177a){_16c4.show_any_message_dialog("Error while checking updates.",function(){_16c4.hide_any_message_dialog();},"Update Error");}});_16c4.show_any_message_dialog("Checking for updates...",function(){_16c4.hide_any_message_dialog();d.cancel();},"Updates");};_16c4.cancel_update_from_file=function(){dojo.byId("update_file_form").update_file.value="";dijit.byId("update_from_file_dialog").hide();};_16c4.redirect_to_emergency_webserver=function(){window.location="http://"+window.location.hostname;};_16c4.update_timeout_sec=20;_16c4.submit_upload_snapshot=function(){var _177b=dojo.byId("upload_snapshot_file").value;var _177c=dijit.byId("csrf_token_s").getValue();if(!_177b){_16c3.main.vmanui_error("Please specify a file to upload");return;}var d=dojo.io.iframe.send({url:"/ws.v1/nox/snapshot?csrf_token="+_177c,method:"POST",handleAs:"json",timeout:15000,form:"upload_snapshot_form",contentType:"multipart/form-data",handle:function(r,args){if(r.error){_16c3.main.vmanui_error(r.message);}else{_16c4.refresh_settings_section();}return r;}});_16c4.cancel_snapshot_upload();};_16c4.submit_update_from_file=function(){var fname=dojo.byId("update_file_form").update_file.value;if(fname.length===0){_16c3.main.vmanui_error("Please specify a file to upload");return;}dijit.byId("upload_sw_dialog").show();var _1781=dijit.byId("csrf_token_s").getValue();dojo.io.iframe.send({url:"/ws.v1/nox/update_from_file?csrf_token="+_1781,method:"post",handleAs:"html",form:"update_file_form",contentType:"multipart/form-data",load:function(_1782,_1783){dijit.byId("upload_sw_dialog").hide();_16c3.main.disable_connection_testing();_16c4.show_any_message_dialog("Please wait while "+_16c3.main.app_name_short+" is upgraded and restarted.",null,"Upload Succeeded");var cb=dojo.hitch(dojo.global,_16c4.restart_poll,_16c4.update_timeout_sec,1000,false,_16c4.redirect_to_emergency_webserver);setTimeout(cb,2000);return _1782;},error:function(_1785,_1786){dijit.byId("upload_sw_dialog").hide();_16c3.main.vmanui_error("Error uploading update package.");}});_16c4.cancel_update_from_file();};_16c4.submit_update_from_network=function(){var _1787=dijit.byId("update_version").getValue();dijit.byId("confirm_update_from_network_dialog").hide();var _1788=dijit.byId("csrf_token_s").getValue();nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/nox/update_from_net",headers:{"content-type":"application/json","X-CSRF-Token":_1788},putData:dojo.toJson(_1787),handleAs:"json",timeout:1000000,load:function(_1789){_16c4.download_poll_handle_response(_1789);},error:function(_178a){_16c4.download_poll_handle_response("error");}});};_16c4.download_poll_handle_response=function(_178b){var title="Update Error";var msg="An error occurred while downloading the update";var _178e=function(){_16c4.hide_any_message_dialog();};if(_178b=="downloading"){title="Downloading Update";msg="Downloading update file...";setTimeout(_16c4.download_poll_request,1000);_178e=null;}else{if(_178b=="complete"){title="Download Complete";msg="Please wait while "+_16c3.main.app_name_short+" is upgraded and restarted.";var cb=dojo.hitch(dojo.global,_16c4.restart_poll,_16c4.update_timeout_sec,1000,false,_16c4.redirect_to_emergency_webserver);setTimeout(cb,2000);_178e=null;}}_16c4.show_any_message_dialog(msg,_178e,title);};_16c4.download_poll_request=function(){nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/nox/update_from_net",preventCache:true,timeout:30000,handleAs:"json",load:_16c4.download_poll_handle_response,error:function(_1790){_16c4.download_poll_handle_response("error");}});};_16c4.controller_iface_name="eth0";_16c4.get_controller_interface_obj=function(){return nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/nox/local_config/interface/configured",preventCache:true,handleAs:"json"});};_16c4.save_controller_interface_obj=function(_1791){var _1792=dijit.byId("csrf_token_s").getValue();nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/nox/local_config/interface/configured/"+_16c4.controller_iface_name,headers:{"content-type":"application/json","X-CSRF-Token":_1792},timeout:3000,putData:dojo.toJson(_1791),load:function(_1793){var _1794=window.location.hostname;if(_1794!="localhost"&&_1794!="127.0.0.1"){_16c4.show_any_message_dialog("Please use the browser's URL bar to navigate to the new "+_16c3.main.app_name_short+" URL",null,"Configuration Updated");}else{_16c4.show_any_message_dialog("Please wait while the interface is reconfigured",null,"Updating Configuration");setTimeout(function(){_16c3.main.refresh_current(false,false);_16c4.hide_any_message_dialog();},5000);}},error:function(err){_16c3.main.vmanui_error("Failed to save interface settings.");}});};_16c4.save_controller_hostname=function(_1796,_1797){var _1798=dijit.byId("csrf_token_s").getValue();var d=nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/nox/local_config/hostname",headers:{"content-type":"application/json","X-CSRF-Token":_1798},timeout:30000,putData:dojo.toJson({"hostname":_1796,"domain":_1797,"csrf_token":_1798})});d.addCallback(function(){nox.ext.apps.vmanui.main.refresh_current(false,false);});};_16c4.get_controller_hostname=function(){var dh=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/nox/local_config/hostname",handleAs:"json",preventCache:true});var dd=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/nox/local_config/domain",handleAs:"json",preventCache:true});return new dojo.DeferredList([dh,dd]);};_16c4.show_controller_hostname_edit_dialog=function(){var d=_16c4.get_controller_hostname();d.addCallback(function(r){var _179e=new nox.ext.apps.vmanui.dialog.controller_hostname_edit({hostname:r[0][1],domain:r[1][1]});dojo.connect(_179e,"onSave",_16c4.save_controller_hostname);_179e.show();});};_16c4.show_controller_interface_edit_dialog=function(){var d=_16c4.get_controller_interface_obj();d.addCallback(function(_17a0){var _17a1=null;dojo.forEach(_17a0,function(iface){if(iface.name!=_16c4.controller_iface_name){return;}_17a1=new nox.ext.apps.vmanui.dialog.controller_addr_edit({addr_obj:iface});dojo.connect(_17a1,"onSave",_16c4.save_controller_interface_obj);_17a1.show();});if(!_17a1){_16c3.main.vmanui_error("No configuration data found for interface '"+_16c4.controller_iface_name+"'.");}});d.addErrback(function(){_16c3.main.console_log("error fetching controller interface settings: ",arguments);_16c3.main.vmanui_error("Unable to load Controller interface settings.");});};})();dojo.declare("nox.ext.apps.vmanui.settingsMenus",null,{constructor:function(){this.settingsMenus={};this.menusFactory=nox.ext.apps.vmanui.menu_creator.creator;},createMenus:function(){this.createNTPServerMenus();this.createSnapshotLocalMenus();this.createAdminMenus();this.createSyslogMenus();},trackMenu:function(oMenu,sId,sType){if(this.settingsMenus[sType]==undefined){this.settingsMenus[sType]={};}var _17a6=this.settingsMenus[sType];if(_17a6[sId]){this.destroyMenu(sId);}_17a6[sId]=oMenu;},destroyMenusOfType:function(sType){var _17a8=this.settingsMenus[sType];if(_17a8){for(var sId in _17a8){this.destroyMenu(sId,sType);}}},destroyMenu:function(sId,sType){var _17ac=this.settingsMenus[sType];if(_17ac&&_17ac[sId]){_17ac[sId].destroy();delete _17ac[sId];}},getMenu:function(sId){for(var sType in this.settingsMenus){var _17af=this.settingsMenus[sType];if(_17af[sId]){return _17af[sId];}}},createMenu:function(_17b0,sType,oNode,_17b3,_17b4,aArgs){if(aArgs==undefined){aArgs=[oNode];}var _17b6=dojo.hitch(this,function(){this.destroyMenu(_17b0);var _17b7=this.menusFactory;var oMenu=_17b7[_17b3].apply(_17b7,aArgs);dojo.removeClass(oNode,"settings_menu_button");if(oMenu){this.trackMenu(oMenu,_17b0,sType);dojo.addClass(oNode,"settings_menu_button");}return oMenu;});if(_17b4){dojo.removeClass(oNode,"settings_menu_button");dojo.addClass(oNode,"settings_menu_button");dojo.connect(oNode,"onclick",function(e){var oMenu=_17b6();oMenu._openMyself(e);});}else{_17b6();}},createMenuFromRow:function(oRow,_17bc,_17bd,sType,_17bf,_17c0){var aArgs=[];var oNode=dojo.query(_17bd,oRow)[0];var sId;if(dojo.isFunction(_17bc)){sId=_17bc.call(null,oRow);aArgs=[oNode,sId];}else{sId=oRow.id.replace(_17bc,"");aArgs=[oNode,sId];}if(sId){this.createMenu(sId,sType,oNode,_17bf,_17c0,aArgs);}},checkCapabilities:function(qCap){var _17c5=true,aCaps=[];if(qCap!=undefined&&qCap!=null){if(dojo.isString(qCap)){aCaps=[qCap];}else{if(dojo.isArray(qCap)){aCaps=qCap;}}}if(aCaps.length){dojo.forEach(aCaps,function(sCap){if(!nox.ext.apps.vmanui.User.hasCapability(sCap)){_17c5=false;}});}return _17c5;},createMenusFromRows:function(sType,_17c9,_17ca,_17cb,_17cc,_17cd,_17ce){this.destroyMenusOfType(sType);if(this.checkCapabilities(_17cd)){dojo.query(_17c9).forEach(function(oRow){this.createMenuFromRow(oRow,_17ca,_17cb,sType,_17cc,_17ce);},this);}},createNTPServerMenus:function(){this.createMenusFromRows("ntp_server_local",".SettingsNTP table#NTPServers tr.ntp_server_row","ntp_server_row_","td.menu div.menu","create_ntp_server_menu","edit-ntp-servers");},createSnapshotLocalMenus:function(){this.createMenusFromRows("snapshot_local",".SettingsSnapshots table#Snapshots tr.snapshot_row","snapshot_row_","td.menu div.menu","create_snapshot_menu",null,true);},createAdminMenus:function(){this.createMenusFromRows("admin_account_local",".SettingsAccounts table#Accounts tr.account_row",function(oRow){return oRow.title;},"td.menu div.menu","create_admin_account_menu");},createSyslogMenus:function(){this.createMenusFromRows("syslog_local",".SettingsSyslog table#Syslog tr.syslog_row","syslog_row_","td.menu div.menu","create_syslog_menu","edit-notifier-config");}});}if(!dojo._hasResource["nox.ext.apps.vmanui.protoUtil"]){dojo._hasResource["nox.ext.apps.vmanui.protoUtil"]=true;dojo.provide("nox.ext.apps.vmanui.protoUtil");(function(){var pu=nox.ext.apps.vmanui.protoUtil;pu.__codeSuffix=function(code){if(code){return " (code="+cd+")";}return "";};pu.__ICMP_STRINGS={0:function(cd){return "ICMP Echo Reply"+pu.__codeSuffix(cd);},3:function(cd){return {0:"ICMP Network Unreachable",1:"ICMP Host Unreachable",2:"ICMP Protocol Unreachable",3:"ICMP Port Unreachable",4:"ICMP Fragment Needed and DF set",5:"ICMP Source Route Failed",6:"ICMP Destination Network Unknown",7:"ICMP Destination Host Unknown",8:"ICMP Source Host Isolated",9:"ICMP Network Prohibited",10:"ICMP Host Prohibited",11:"ICMP Network Unreachable for TOS",12:"ICMP Host Unreachable for TOS",13:"ICMP Communication Prohibited"}[cd]||"ICMP Destination Unreachable"+pu.__codeSuffix(cd);},4:function(cd){return "ICMP Source Quench"+pu.__codeSuffix(cd);},5:function(cd){return {0:"ICMP Network Datagram Redirect",1:"ICMP Host Datagram Redirect",2:"ICMP TOS & Network Datagram Redirect",3:"ICMP TOS & Host Datagram Redirect"}[cd]||"ICMP Redirect"+pu.__codeSuffix(cd);},8:function(cd){return "ICMP Echo Request"+pu.__codeSuffix(cd);},9:function(cd){return "ICMP Router Advertisement"+pu.__codeSuffix(cd);},10:function(cd){return "ICMP Router Selection"+pu.__codeSuffix(cd);},11:function(cd){return {0:"ICMP Time Exceeded in Transit",1:"ICMP Fragment Reassembly Time Exceeded"}[cd]||"ICMP Time Exceeded"+pu.__codeSuffix(cd);},12:function(cd){return {0:"ICMP Parameter Problem (error pointer)",1:"ICMP Parameter Problem (missing option)",2:"ICMP Parameter Problem (bad length)"}[cd]||"ICMP Parameter Problem"+pu.__codeSuffix(cd);},13:function(cd){return "ICMP Timestamp"+pu.__codeSuffix(cd);},14:function(cd){return "ICMP Timestamp Reply"+pu.__codeSuffix(cd);},15:function(cd){return "ICMP Information Request"+pu.__codeSuffix(cd);},16:function(cd){return "ICMP Information Reply"+pu.__codeSuffix(cd);},17:function(cd){return "ICMP Address Mask Request"+pu.__codeSuffix(cd);},18:function(cd){return "ICMP Address Mask Reply"+pu.__codeSuffix(cd);},30:function(cd){return "ICMP Traceroute"+pu.__codeSuffix(cd);}};pu.__PROTO_STRINGS={1:function(tpcd){tpcd=tpcd||0;var _17e4=tpcd>>8;var fx=pu.__ICMP_STRINGS[_17e4]||function(dp){return "ICMP ("+_17e4+","+dp+")";};return fx(tpcd&255);},2:function(dp){return "IGMP";},6:function(dp){return "TCP"+(dp==null?"":":"+dp);},9:function(dp){return "IGRP";},17:function(dp){return "UDP"+(dp==null?"":":"+dp);},47:function(dp){return "GRE";},50:function(dp){return "ESP";},51:function(dp){return "AH";},88:function(dp){return "EIGRP";},89:function(dp){return "OSPF";},115:function(dp){return "L2TP";}};pu.l3_str=function(_17f1){if(_17f1==1){return "ICMP";}var fx=pu.__PROTO_STRINGS[_17f1]||function(ign){return "IP PROTO:"+_17f1;};return fx(null);};pu.l4_str=function(_17f4,_17f5){var fx=pu.__PROTO_STRINGS[_17f4]||function(ign){return "IP PROTO:"+_17f4;};return fx(_17f5);};})();}if(!dojo._hasResource["dojo.DeferredList"]){dojo._hasResource["dojo.DeferredList"]=true;dojo.provide("dojo.DeferredList");dojo.declare("dojo.DeferredList",dojo.Deferred,{constructor:function(list,_17f9,_17fa,_17fb,_17fc){this.list=list;this.resultList=new Array(this.list.length);this.chain=[];this.id=this._nextId();this.fired=-1;this.paused=0;this.results=[null,null];this.canceller=_17fc;this.silentlyCancelled=false;if(this.list.length===0&&!_17f9){this.callback(this.resultList);}this.finishedCount=0;this.fireOnOneCallback=_17f9;this.fireOnOneErrback=_17fa;this.consumeErrors=_17fb;dojo.forEach(this.list,function(d,index){d.addCallback(this,function(r){this._cbDeferred(index,true,r);return r;});d.addErrback(this,function(r){this._cbDeferred(index,false,r);return r;});},this);},_cbDeferred:function(index,_1802,_1803){this.resultList[index]=[_1802,_1803];this.finishedCount+=1;if(this.fired!==0){if(_1802&&this.fireOnOneCallback){this.callback([index,_1803]);}else{if(!_1802&&this.fireOnOneErrback){this.errback(_1803);}else{if(this.finishedCount==this.list.length){this.callback(this.resultList);}}}}if(!_1802&&this.consumeErrors){_1803=null;}return _1803;},gatherResults:function(_1804){var d=new dojo.DeferredList(_1804,false,true,false);d.addCallback(function(_1806){var ret=[];dojo.forEach(_1806,function(_1808){ret.push(_1808[1]);});return ret;});return d;}});}if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.cldr.supplemental.getFirstDayOfWeek=function(_1809){var _180a={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,lb:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,tn:6,ye:6,as:0,au:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,ie:0,il:0,is:0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,za:0,zw:0,et:0,mw:0,ng:0,tj:0,sy:4};var _180b=dojo.cldr.supplemental._region(_1809);var dow=_180a[_180b];return (dow===undefined)?1:dow;};dojo.cldr.supplemental._region=function(_180d){_180d=dojo.i18n.normalizeLocale(_180d);var tags=_180d.split("-");var _180f=tags[1];if(!_180f){_180f={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_180f.length==4){_180f=tags[2];}}return _180f;};dojo.cldr.supplemental.getWeekend=function(_1810){var _1811={eg:5,il:5,sy:5,"in":0,ae:4,bh:4,dz:4,iq:4,jo:4,kw:4,lb:4,ly:4,ma:4,om:4,qa:4,sa:4,sd:4,tn:4,ye:4};var _1812={ae:5,bh:5,dz:5,iq:5,jo:5,kw:5,lb:5,ly:5,ma:5,om:5,qa:5,sa:5,sd:5,tn:5,ye:5,af:5,ir:5,eg:6,il:6,sy:6};var _1813=dojo.cldr.supplemental._region(_1810);var start=_1811[_1813];var end=_1812[_1813];if(start===undefined){start=6;}if(end===undefined){end=0;}return {start:start,end:end};};}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");(function(){function _1816(_1817,_1818,_1819,_181a){return _181a.replace(/([a-z])\1*/ig,function(match){var s,pad;var c=match.charAt(0);var l=match.length;var _1820=["abbr","wide","narrow"];switch(c){case "G":s=_1818[(l<4)?"eraAbbr":"eraNames"][_1817.getFullYear()<0?0:1];break;case "y":s=_1817.getFullYear();switch(l){case 1:break;case 2:if(!_1819){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_1817.getMonth()+1)/3);pad=true;break;case "M":var m=_1817.getMonth();if(l<3){s=m+1;pad=true;}else{var propM=["months","format",_1820[l-3]].join("-");s=_1818[propM][m];}break;case "w":var _1823=0;s=dojo.date.locale._getWeekOfYear(_1817,_1823);pad=true;break;case "d":s=_1817.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(_1817);pad=true;break;case "E":var d=_1817.getDay();if(l<3){s=d+1;pad=true;}else{var propD=["days","format",_1820[l-3]].join("-");s=_1818[propD][d];}break;case "a":var _1826=(_1817.getHours()<12)?"am":"pm";s=_1818[_1826];break;case "h":case "H":case "K":case "k":var h=_1817.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_1817.getMinutes();pad=true;break;case "s":s=_1817.getSeconds();pad=true;break;case "S":s=Math.round(_1817.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=dojo.date.getTimezoneName(_1817);if(s){break;}l=4;case "Z":var _1828=_1817.getTimezoneOffset();var tz=[(_1828<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(_1828)/60),2),dojo.string.pad(Math.abs(_1828)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_181a);}if(pad){s=dojo.string.pad(s,l);}return s;});};dojo.date.locale.format=function(_182a,_182b){_182b=_182b||{};var _182c=dojo.i18n.normalizeLocale(_182b.locale);var _182d=_182b.formatLength||"short";var _182e=dojo.date.locale._getGregorianBundle(_182c);var str=[];var sauce=dojo.hitch(this,_1816,_182a,_182e,_182b.fullYear);if(_182b.selector=="year"){var year=_182a.getFullYear();if(_182c.match(/^zh|^ja/)){year+="";}return year;}if(_182b.selector!="time"){var _1832=_182b.datePattern||_182e["dateFormat-"+_182d];if(_1832){str.push(_1833(_1832,sauce));}}if(_182b.selector!="date"){var _1834=_182b.timePattern||_182e["timeFormat-"+_182d];if(_1834){str.push(_1833(_1834,sauce));}}var _1835=str.join(" ");return _1835;};dojo.date.locale.regexp=function(_1836){return dojo.date.locale._parseInfo(_1836).regexp;};dojo.date.locale._parseInfo=function(_1837){_1837=_1837||{};var _1838=dojo.i18n.normalizeLocale(_1837.locale);var _1839=dojo.date.locale._getGregorianBundle(_1838);var _183a=_1837.formatLength||"short";var _183b=_1837.datePattern||_1839["dateFormat-"+_183a];var _183c=_1837.timePattern||_1839["timeFormat-"+_183a];var _183d;if(_1837.selector=="date"){_183d=_183b;}else{if(_1837.selector=="time"){_183d=_183c;}else{_183d=_183b+" "+_183c;}}var _183e=[];var re=_1833(_183d,dojo.hitch(this,_1840,_183e,_1839,_1837));return {regexp:re,tokens:_183e,bundle:_1839};};dojo.date.locale.parse=function(value,_1842){var info=dojo.date.locale._parseInfo(_1842);var _1844=info.tokens,_1845=info.bundle;var re=new RegExp("^"+info.regexp+"$",info.strict?"":"i");var match=re.exec(value);if(!match){return null;}var _1848=["abbr","wide","narrow"];var _1849=[1970,0,1,0,0,0,0];var amPm="";var valid=dojo.every(match,function(v,i){if(!i){return true;}var token=_1844[i-1];var l=token.length;switch(token.charAt(0)){case "y":if(l!=2&&_1842.strict){_1849[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear();var _1851=year.substring(0,2)*100;var _1852=Math.min(Number(year.substring(2,4))+20,99);var num=(v<_1852)?_1851+v:_1851-100+v;_1849[0]=num;}else{if(_1842.strict){return false;}_1849[0]=v;}}break;case "M":if(l>2){var _1854=_1845["months-format-"+_1848[l-3]].concat();if(!_1842.strict){v=v.replace(".","").toLowerCase();_1854=dojo.map(_1854,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_1854,v);if(v==-1){return false;}}else{v--;}_1849[1]=v;break;case "E":case "e":var days=_1845["days-format-"+_1848[l-3]].concat();if(!_1842.strict){v=v.toLowerCase();days=dojo.map(days,function(d){return d.toLowerCase();});}v=dojo.indexOf(days,v);if(v==-1){return false;}break;case "D":_1849[1]=0;case "d":_1849[2]=v;break;case "a":var am=_1842.am||_1845.am;var pm=_1842.pm||_1845.pm;if(!_1842.strict){var _185a=/\./g;v=v.replace(_185a,"").toLowerCase();am=am.replace(_185a,"").toLowerCase();pm=pm.replace(_185a,"").toLowerCase();}if(_1842.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_1849[3]=v;break;case "m":_1849[4]=v;break;case "s":_1849[5]=v;break;case "S":_1849[6]=v;}return true;});var hours=+_1849[3];if(amPm==="p"&&hours<12){_1849[3]=hours+12;}else{if(amPm==="a"&&hours==12){_1849[3]=0;}}var _185c=new Date(_1849[0],_1849[1],_1849[2],_1849[3],_1849[4],_1849[5],_1849[6]);if(_1842.strict){_185c.setFullYear(_1849[0]);}var _185d=_1844.join(""),_185e=_185d.indexOf("d")!=-1,_185f=_185d.indexOf("M")!=-1;if(!valid||(_185f&&_185c.getMonth()>_1849[1])||(_185e&&_185c.getDate()>_1849[2])){return null;}if((_185f&&_185c.getMonth()<_1849[1])||(_185e&&_185c.getDate()<_1849[2])){_185c=dojo.date.add(_185c,"hour",1);}return _185c;};function _1833(_1860,_1861,_1862,_1863){var _1864=function(x){return x;};_1861=_1861||_1864;_1862=_1862||_1864;_1863=_1863||_1864;var _1866=_1860.match(/(''|[^'])+/g);var _1867=_1860.charAt(0)=="'";dojo.forEach(_1866,function(chunk,i){if(!chunk){_1866[i]="";}else{_1866[i]=(_1867?_1862:_1861)(chunk);_1867=!_1867;}});return _1863(_1866.join(""));};function _1840(_186a,_186b,_186c,_186d){_186d=dojo.regexp.escapeString(_186d);if(!_186c.strict){_186d=_186d.replace(" a"," ?a");}return _186d.replace(/([a-z])\1*/ig,function(match){var s;var c=match.charAt(0);var l=match.length;var p2="",p3="";if(_186c.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":p2+"[1-9]|1[0-2]";break;case "D":s=p2+"[1-9]|"+p3+"[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]";break;case "d":s="[12]\\d|"+p2+"[1-9]|3[01]";break;case "w":s=p2+"[1-9]|[1-4][0-9]|5[0-3]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_186c.am||_186b.am||"AM";var pm=_186c.pm||_186b.pm||"PM";if(_186c.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_186a){_186a.push(match);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};})();(function(){var _1876=[];dojo.date.locale.addCustomFormats=function(_1877,_1878){_1876.push({pkg:_1877,name:_1878});};dojo.date.locale._getGregorianBundle=function(_1879){var _187a={};dojo.forEach(_1876,function(desc){var _187c=dojo.i18n.getLocalization(desc.pkg,desc.name,_1879);_187a=dojo.mixin(_187a,_187c);},this);return _187a;};})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(item,type,_187f,_1880){var label;var _1882=dojo.date.locale._getGregorianBundle(_1880);var props=[item,_187f,type];if(_187f=="standAlone"){var key=props.join("-");label=_1882[key];if(label[0]==1){label=undefined;}}props[1]="format";return (label||_1882[props.join("-")]).concat();};dojo.date.locale.isWeekend=function(_1885,_1886){var _1887=dojo.cldr.supplemental.getWeekend(_1886);var day=(_1885||new Date()).getDay();if(_1887.end<_1887.start){_1887.end+=7;if(day<_1887.start){day+=7;}}return day>=_1887.start&&day<=_1887.end;};dojo.date.locale._getDayOfYear=function(_1889){return dojo.date.difference(new Date(_1889.getFullYear(),0,1,_1889.getHours()),_1889)+1;};dojo.date.locale._getWeekOfYear=function(_188a,_188b){if(arguments.length==1){_188b=0;}var _188c=new Date(_188a.getFullYear(),0,1).getDay();var adj=(_188c-_188b+7)%7;var week=Math.floor((dojo.date.locale._getDayOfYear(_188a)+adj-1)/7);if(_188c==_188b){week++;}return week;};}if(!dojo._hasResource["dijit._Calendar"]){dojo._hasResource["dijit._Calendar"]=true;dojo.provide("dijit._Calendar");dojo.declare("dijit._Calendar",[dijit._Widget,dijit._Templated],{templateString:"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset' dojoAttachPoint=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" waiRole=\"presentation\">\n\t\t\t\t<span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div dojoAttachPoint=\"monthLabelSpacer\" class=\"dijitCalendarMonthLabelSpacer\"></div>\n\t\t\t\t<div dojoAttachPoint=\"monthLabelNode\" class=\"dijitCalendarMonthLabel\"></div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' dojoAttachPoint=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" waiRole=\"presentation\">\n\t\t\t\t<span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"dijitReset dijitCalendarDayLabelTemplate\"><span class=\"dijitCalendarDayLabel\"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\">\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\"><span class=\"dijitCalendarDateLabel\"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\t\n",value:new Date(),dayWidth:"narrow",setValue:function(value){dojo.deprecated("dijit.Calendar:setValue() is deprecated.  Use attr('value', ...) instead.","","2.0");this.attr("value",value);},_getValueAttr:function(value){var value=new Date(this.value);value.setHours(0,0,0,0);if(value.getDate()<this.value.getDate()){value=dojo.date.add(value,"hour",1);}return value;},_setValueAttr:function(value){if(!this.value||dojo.date.compare(value,this.value)){value=new Date(value);value.setHours(1);this.displayMonth=new Date(value);if(!this.isDisabledDate(value,this.lang)){this.value=value;this.onChange(this.attr("value"));}this._populateGrid();}},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(dojo.doc.createTextNode(text));},_populateGrid:function(){var month=this.displayMonth;month.setDate(1);var _1895=month.getDay();var _1896=dojo.date.getDaysInMonth(month);var _1897=dojo.date.getDaysInMonth(dojo.date.add(month,"month",-1));var today=new Date();var _1899=this.value;var _189a=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(_189a>_1895){_189a-=7;}dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(_189b,i){i+=_189a;var date=new Date(month);var _189e,clazz="dijitCalendar",adj=0;if(i<_1895){_189e=_1897-_1895+i+1;adj=-1;clazz+="Previous";}else{if(i>=(_1895+_1896)){_189e=i-_1895-_1896+1;adj=1;clazz+="Next";}else{_189e=i-_1895+1;clazz+="Current";}}if(adj){date=dojo.date.add(date,"month",adj);}date.setDate(_189e);if(!dojo.date.compare(date,today,"date")){clazz="dijitCalendarCurrentDate "+clazz;}if(!dojo.date.compare(date,_1899,"date")){clazz="dijitCalendarSelectedDate "+clazz;}if(this.isDisabledDate(date,this.lang)){clazz="dijitCalendarDisabledDate "+clazz;}var _18a1=this.getClassForDate(date,this.lang);if(_18a1){clazz=_18a1+" "+clazz;}_189b.className=clazz+"Month dijitCalendarDateTemplate";_189b.dijitDateValue=date.valueOf();var label=dojo.query(".dijitCalendarDateLabel",_189b)[0];this._setText(label,date.getDate());},this);var _18a3=dojo.date.locale.getNames("months","wide","standAlone",this.lang);this._setText(this.monthLabelNode,_18a3[month.getMonth()]);var y=month.getFullYear()-1;var d=new Date();dojo.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],dojo.date.locale.format(d,{selector:"year",locale:this.lang}));},this);var _this=this;var _18a8=function(_18a9,_18aa,adj){_this._connects.push(dijit.typematic.addMouseListener(_this[_18a9],_this,function(count){if(count>=0){_this._adjustDisplay(_18aa,adj);}},0.8,500));};_18a8("incrementMonth","month",1);_18a8("decrementMonth","month",-1);_18a8("nextYearLabelNode","year",1);_18a8("previousYearLabelNode","year",-1);},goToToday:function(){this.attr("value",new Date());},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);var _18ad=dojo.hitch(this,function(clazz,n){var _18b0=dojo.query(clazz,this.domNode)[0];for(var i=0;i<n;i++){_18b0.parentNode.appendChild(_18b0.cloneNode(true));}});_18ad(".dijitCalendarDayLabelTemplate",6);_18ad(".dijitCalendarDateTemplate",6);_18ad(".dijitCalendarWeekTemplate",5);var _18b2=dojo.date.locale.getNames("days",this.dayWidth,"standAlone",this.lang);var _18b3=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(label,i){this._setText(label,_18b2[(i+_18b3)%7]);},this);var _18b6=dojo.date.locale.getNames("months","wide","standAlone",this.lang);dojo.forEach(_18b6,function(name){var _18b8=dojo.create("div",null,this.monthLabelSpacer);this._setText(_18b8,name);},this);this.value=null;this.attr("value",new Date());},_adjustDisplay:function(part,_18ba){this.displayMonth=dojo.date.add(this.displayMonth,part,_18ba);this._populateGrid();},_onDayClick:function(evt){dojo.stopEvent(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!dojo.hasClass(node,"dijitCalendarDisabledDate")){this.attr("value",node.dijitDateValue);this.onValueSelected(this.attr("value"));}},_onDayMouseOver:function(evt){var node=evt.target;if(node&&(node.dijitDateValue||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){dojo.addClass(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}for(var node=evt.relatedTarget;node;){if(node==this._currentNode){return;}try{node=node.parentNode;}catch(x){node=null;}}dojo.removeClass(this._currentNode,"dijitCalendarHoveredDate");this._currentNode=null;},onValueSelected:function(date){},onChange:function(date){},isDisabledDate:function(_18c3,_18c4){},getClassForDate:function(_18c5,_18c6){}});}if(!dojo._hasResource["dijit.form._DateTimeTextBox"]){dojo._hasResource["dijit.form._DateTimeTextBox"]=true;dojo.provide("dijit.form._DateTimeTextBox");dojo.declare("dijit.form._DateTimeTextBox",dijit.form.RangeBoundTextBox,{regExpGen:dojo.date.locale.regexp,compare:dojo.date.compare,format:function(value,_18c8){if(!value){return "";}return dojo.date.locale.format(value,_18c8);},parse:function(value,_18ca){return dojo.date.locale.parse(value,_18ca)||(this._isEmpty(value)?null:undefined);},serialize:dojo.date.stamp.toISOString,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",postMixInProperties:function(){this.inherited(arguments);if(!this.value||this.value.toString()==dijit.form._DateTimeTextBox.prototype.value.toString()){this.value=null;}var _18cb=this.constraints;_18cb.selector=this._selector;_18cb.fullYear=true;var _18cc=dojo.date.stamp.fromISOString;if(typeof _18cb.min=="string"){_18cb.min=_18cc(_18cb.min);}if(typeof _18cb.max=="string"){_18cb.max=_18cc(_18cb.max);}},_onFocus:function(evt){this._open();},_setValueAttr:function(value,_18cf,_18d0){this.inherited(arguments);if(this._picker){if(!value){value=new Date();}this._picker.attr("value",value);}},_open:function(){if(this.disabled||this.readOnly||!this.popupClass){return;}var _18d1=this;if(!this._picker){var _18d2=dojo.getObject(this.popupClass,false);this._picker=new _18d2({onValueSelected:function(value){if(_18d1._tabbingAway){delete _18d1._tabbingAway;}else{_18d1.focus();}setTimeout(dojo.hitch(_18d1,"_close"),1);dijit.form._DateTimeTextBox.superclass._setValueAttr.call(_18d1,value,true);},lang:_18d1.lang,constraints:_18d1.constraints,isDisabledDate:function(date){var _18d5=dojo.date.compare;var _18d6=_18d1.constraints;return _18d6&&(_18d6.min&&(_18d5(_18d6.min,date,"date")>0)||(_18d6.max&&_18d5(_18d6.max,date,"date")<0));}});this._picker.attr("value",this.attr("value")||new Date());}if(!this._opened){dijit.popup.open({parent:this,popup:this._picker,around:this.domNode,onCancel:dojo.hitch(this,this._close),onClose:function(){_18d1._opened=false;}});this._opened=true;}dojo.marginBox(this._picker.domNode,{w:this.domNode.offsetWidth});},_close:function(){if(this._opened){dijit.popup.close(this._picker);this._opened=false;}},_onBlur:function(){this._close();if(this._picker){this._picker.destroy();delete this._picker;}this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(value,_18d8){this._setValueAttr(this.parse(value,this.constraints),_18d8,value);},destroy:function(){if(this._picker){this._picker.destroy();delete this._picker;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.focusNode,"onkeypress",this._onKeyPress);},_onKeyPress:function(e){var p=this._picker,dk=dojo.keys;if(p&&this._opened&&p.handleKey){if(p.handleKey(e)===false){return;}}if(this._opened&&e.charOrCode==dk.ESCAPE&&!e.shiftKey&&!e.ctrlKey&&!e.altKey){this._close();dojo.stopEvent(e);}else{if(!this._opened&&e.charOrCode==dk.DOWN_ARROW){this._open();dojo.stopEvent(e);}else{if(e.charOrCode===dk.TAB){this._tabbingAway=true;}else{if(this._opened&&(e.keyChar||e.charOrCode===dk.BACKSPACE||e.charOrCode==dk.DELETE)){setTimeout(dojo.hitch(this,function(){dijit.placeOnScreenAroundElement(p.domNode.parentNode,this.domNode,{"BL":"TL","TL":"BL"},p.orient?dojo.hitch(p,"orient"):null);}),1);}}}}}});}if(!dojo._hasResource["dijit.form.DateTextBox"]){dojo._hasResource["dijit.form.DateTextBox"]=true;dojo.provide("dijit.form.DateTextBox");dojo.declare("dijit.form.DateTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitDateTextBox",popupClass:"dijit._Calendar",_selector:"date",value:new Date("")});}if(!dojo._hasResource["dijit._TimePicker"]){dojo._hasResource["dijit._TimePicker"]=true;dojo.provide("dijit._TimePicker");dojo.declare("dijit._TimePicker",[dijit._Widget,dijit._Templated],{templateString:"<div id=\"widget_${id}\" class=\"dijitMenu ${baseClass}\"\n    ><div dojoAttachPoint=\"upArrow\" class=\"dijitButtonNode dijitUpArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" wairole=\"presentation\" role=\"presentation\">&nbsp;</div\n\t\t><div class=\"dijitArrowButtonChar\">&#9650;</div></div\n    ><div dojoAttachPoint=\"timeMenu,focusNode\" dojoAttachEvent=\"onclick:_onOptionSelected,onmouseover,onmouseout\"></div\n    ><div dojoAttachPoint=\"downArrow\" class=\"dijitButtonNode dijitDownArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" wairole=\"presentation\" role=\"presentation\">&nbsp;</div\n\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div></div\n></div>\n",baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date(),_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:dojo.date.stamp.toISOString,_filterString:"",setValue:function(value){dojo.deprecated("dijit._TimePicker:setValue() is deprecated.  Use attr('value') instead.","","2.0");this.attr("value",value);},_setValueAttr:function(date){this.value=date;this._showText();},onOpen:function(best){if(this._beenOpened&&this.domNode.parentNode){var p=dijit.byId(this.domNode.parentNode.dijitPopupParent);if(p){var val=p.getDisplayedValue();if(val&&!p.parse(val,p.constraints)){this._filterString=val;}else{this._filterString="";}this._showText();}}this._beenOpened=true;},isDisabledDate:function(_18e1,_18e2){return false;},_getFilteredNodes:function(start,_18e4,_18e5){var nodes=[],n,i=start,max=this._maxIncrement+Math.abs(i),chk=_18e5?-1:1,dec=_18e5?1:0,inc=_18e5?0:1;do{i=i-dec;n=this._createOption(i);if(n){nodes.push(n);}i=i+inc;}while(nodes.length<_18e4&&(i*chk)<max);if(_18e5){nodes.reverse();}return nodes;},_showText:function(){this.timeMenu.innerHTML="";var _18ed=dojo.date.stamp.fromISOString;this._clickableIncrementDate=_18ed(this.clickableIncrement);this._visibleIncrementDate=_18ed(this.visibleIncrement);this._visibleRangeDate=_18ed(this.visibleRange);var _18ee=function(date){return date.getHours()*60*60+date.getMinutes()*60+date.getSeconds();};var _18f0=_18ee(this._clickableIncrementDate);var _18f1=_18ee(this._visibleIncrementDate);var _18f2=_18ee(this._visibleRangeDate);var time=this.value.getTime();this._refDate=new Date(time-time%(_18f1*1000));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=_18f2/_18f0;this._visibleIncrement=_18f1/_18f0;this._maxIncrement=(60*60*24)/_18f0;var _18f4=this._getFilteredNodes(0,this._totalIncrements>>1,true);var after=this._getFilteredNodes(0,this._totalIncrements>>1,false);if(_18f4.length<this._totalIncrements>>1){_18f4=_18f4.slice(_18f4.length/2);after=after.slice(0,after.length/2);}dojo.forEach(_18f4.concat(after),function(n){this.timeMenu.appendChild(n);},this);},postCreate:function(){if(this.constraints===dijit._TimePicker.prototype.constraints){this.constraints={};}dojo.mixin(this,this.constraints);if(!this.constraints.locale){this.constraints.locale=this.lang;}this.connect(this.timeMenu,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var _this=this;var _18f8=function(){_this._connects.push(dijit.typematic.addMouseListener.apply(null,arguments));};_18f8(this.upArrow,this,this._onArrowUp,1,50);_18f8(this.downArrow,this,this._onArrowDown,1,50);var _18f9=function(cb){return function(cnt){if(cnt>0){cb.call(this,arguments);}};};var _18fc=function(node,cb){return function(e){dojo.stopEvent(e);dijit.typematic.trigger(e,this,node,_18f9(cb),node,1,50);};};this.connect(this.upArrow,"onmouseover",_18fc(this.upArrow,this._onArrowUp));this.connect(this.downArrow,"onmouseover",_18fc(this.downArrow,this._onArrowDown));this.inherited(arguments);},_buttonMouse:function(e){dojo.toggleClass(e.currentTarget,"dijitButtonNodeHover",e.type=="mouseover");},_createOption:function(index){var date=new Date(this._refDate);var _1903=this._clickableIncrementDate;date.setHours(date.getHours()+_1903.getHours()*index,date.getMinutes()+_1903.getMinutes()*index,date.getSeconds()+_1903.getSeconds()*index);var _1904=dojo.date.locale.format(date,this.constraints);if(this._filterString&&_1904.toLowerCase().indexOf(this._filterString)!==0){return null;}var div=dojo.create("div",{"class":this.baseClass+"Item"});div.date=date;div.index=index;dojo.create("div",{"class":this.baseClass+"ItemInner",innerHTML:_1904},div);if(index%this._visibleIncrement<1&&index%this._visibleIncrement>-1){dojo.addClass(div,this.baseClass+"Marker");}else{if(!(index%this._clickableIncrement)){dojo.addClass(div,this.baseClass+"Tick");}}if(this.isDisabledDate(date)){dojo.addClass(div,this.baseClass+"ItemDisabled");}if(!dojo.date.compare(this.value,date,this.constraints.selector)){div.selected=true;dojo.addClass(div,this.baseClass+"ItemSelected");if(dojo.hasClass(div,this.baseClass+"Marker")){dojo.addClass(div,this.baseClass+"MarkerSelected");}else{dojo.addClass(div,this.baseClass+"TickSelected");}}return div;},_onOptionSelected:function(tgt){var tdate=tgt.target.date||tgt.target.parentNode.date;if(!tdate||this.isDisabledDate(tdate)){return;}this._highlighted_option=null;this.attr("value",tdate);this.onValueSelected(tdate);},onValueSelected:function(time){},_highlightOption:function(node,_190a){if(!node){return;}if(_190a){if(this._highlighted_option){this._highlightOption(this._highlighted_option,false);}this._highlighted_option=node;}else{if(this._highlighted_option!==node){return;}else{this._highlighted_option=null;}}dojo.toggleClass(node,this.baseClass+"ItemHover",_190a);if(dojo.hasClass(node,this.baseClass+"Marker")){dojo.toggleClass(node,this.baseClass+"MarkerHover",_190a);}else{dojo.toggleClass(node,this.baseClass+"TickHover",_190a);}},onmouseover:function(e){var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;if(!dojo.hasClass(tgr,this.baseClass+"Item")){return;}this._highlightOption(tgr,true);},onmouseout:function(e){var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;this._highlightOption(tgr,false);},_mouseWheeled:function(e){dojo.stopEvent(e);var _1910=(dojo.isIE?e.wheelDelta:-e.detail);this[(_1910>0?"_onArrowUp":"_onArrowDown")]();},_onArrowUp:function(count){if(typeof count=="number"&&count==-1){return;}if(!this.timeMenu.childNodes.length){return;}var index=this.timeMenu.childNodes[0].index;var divs=this._getFilteredNodes(index,1,true);if(divs.length){this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);this.timeMenu.insertBefore(divs[0],this.timeMenu.childNodes[0]);}},_onArrowDown:function(count){if(typeof count=="number"&&count==-1){return;}if(!this.timeMenu.childNodes.length){return;}var index=this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1;var divs=this._getFilteredNodes(index,1,false);if(divs.length){this.timeMenu.removeChild(this.timeMenu.childNodes[0]);this.timeMenu.appendChild(divs[0]);}},handleKey:function(e){var dk=dojo.keys;if(e.keyChar||e.charOrCode===dk.BACKSPACE||e.charOrCode==dk.DELETE){setTimeout(dojo.hitch(this,function(){this._filterString=e.target.value.toLowerCase();this._showText();}),1);}else{if(e.charOrCode==dk.DOWN_ARROW||e.charOrCode==dk.UP_ARROW){dojo.stopEvent(e);if(this._highlighted_option&&!this._highlighted_option.parentNode){this._highlighted_option=null;}var _1919=this.timeMenu,tgt=this._highlighted_option||dojo.query("."+this.baseClass+"ItemSelected",_1919)[0];if(!tgt){tgt=_1919.childNodes[0];}else{if(_1919.childNodes.length){if(e.charOrCode==dk.DOWN_ARROW&&!tgt.nextSibling){this._onArrowDown();}else{if(e.charOrCode==dk.UP_ARROW&&!tgt.previousSibling){this._onArrowUp();}}if(e.charOrCode==dk.DOWN_ARROW){tgt=tgt.nextSibling;}else{tgt=tgt.previousSibling;}}}this._highlightOption(tgt,true);}else{if(this._highlighted_option&&(e.charOrCode==dk.ENTER||e.charOrCode===dk.TAB)){if(e.charOrCode==dk.ENTER){dojo.stopEvent(e);}setTimeout(dojo.hitch(this,function(){this._onOptionSelected({target:this._highlighted_option});}),1);}}}}});}if(!dojo._hasResource["dijit.form.TimeTextBox"]){dojo._hasResource["dijit.form.TimeTextBox"]=true;dojo.provide("dijit.form.TimeTextBox");dojo.declare("dijit.form.TimeTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitTimeTextBox",popupClass:"dijit._TimePicker",_selector:"time",value:new Date("")});}if(!dojo._hasResource["dijit.form._Spinner"]){dojo._hasResource["dijit.form._Spinner"]=true;dojo.provide("dijit.form._Spinner");dojo.declare("dijit.form._Spinner",dijit.form.RangeBoundTextBox,{defaultTimeout:500,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:"<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\" waiRole=\"presentation\"\n\t><div class=\"dijitInputLayoutContainer\"\n\t\t><div class=\"dijitReset dijitSpinnerButtonContainer\"\n\t\t\t>&nbsp;<div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\t\tdojoAttachPoint=\"upArrowNode\"\n\t\t\t\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse\"\n\t\t\t\tstateModifier=\"UpArrow\"\n\t\t\t\t><div class=\"dijitArrowButtonInner\">&thinsp;</div\n\t\t\t\t><div class=\"dijitArrowButtonChar\">&#9650;</div\n\t\t\t></div\n\t\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\t\tdojoAttachPoint=\"downArrowNode\"\n\t\t\t\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse\"\n\t\t\t\tstateModifier=\"DownArrow\"\n\t\t\t\t><div class=\"dijitArrowButtonInner\">&thinsp;</div\n\t\t\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div\n\t\t\t></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitValidationIcon\"><br></div\n\t\t><div class=\"dijitReset dijitValidationIconText\">&Chi;</div\n\t\t><div class=\"dijitReset dijitInputField\"\n\t\t\t><input class='dijitReset' dojoAttachPoint=\"textbox,focusNode\" type=\"${type}\" dojoAttachEvent=\"onkeypress:_onKeyPress\"\n\t\t\t\twaiRole=\"spinbutton\" autocomplete=\"off\" ${nameAttrSetting}\n\t\t/></div\n\t></div\n></div>\n",baseClass:"dijitSpinner",adjust:function(val,delta){return val;},_arrowState:function(node,_191e){this._active=_191e;this.stateModifier=node.getAttribute("stateModifier")||"";this._setStateClass();},_arrowPressed:function(_191f,_1920,_1921){if(this.disabled||this.readOnly){return;}this._arrowState(_191f,true);this._setValueAttr(this.adjust(this.attr("value"),_1920*_1921),false);dijit.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(node){this._wheelTimer=null;if(this.disabled||this.readOnly){return;}this._arrowState(node,false);},_typematicCallback:function(count,node,evt){var inc=this.smallDelta;if(node==this.textbox){var k=dojo.keys;var key=evt.charOrCode;inc=(key==k.PAGE_UP||key==k.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==k.UP_ARROW||key==k.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(count==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){dojo.stopEvent(evt);var _192a=evt.detail?(evt.detail*-1):(evt.wheelDelta/120);if(_192a!==0){var node=this[(_192a>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_192a,this.smallDelta);if(!this._wheelTimer){clearTimeout(this._wheelTimer);}this._wheelTimer=setTimeout(dojo.hitch(this,"_arrowReleased",node),50);}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));if(dojo.isIE){var _this=this;this.connect(this.domNode,"onresize",function(){setTimeout(dojo.hitch(_this,function(){var sz=this.upArrowNode.parentNode.offsetHeight;if(sz){this.upArrowNode.style.height=sz>>1;this.downArrowNode.style.height=sz-(sz>>1);this.focusNode.parentNode.style.height=sz;}this._setStateClass();}),0);});}}});}if(!dojo._hasResource["dijit.form.NumberTextBox"]){dojo._hasResource["dijit.form.NumberTextBox"]=true;dojo.provide("dijit.form.NumberTextBox");dojo.declare("dijit.form.NumberTextBoxMixin",null,{regExpGen:dojo.number.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:dojo.number.format,postMixInProperties:function(){if(typeof this.constraints.max!="number"){this.constraints.max=9000000000000000;}this.inherited(arguments);},_onFocus:function(){if(this.disabled){return;}var val=this.attr("value");if(typeof val=="number"&&!isNaN(val)){var _192f=this.format(val,this.constraints);if(_192f!==undefined){this.textbox.value=_192f;}}this.inherited(arguments);},format:function(value,_1931){if(typeof value!="number"){return String(value);}if(isNaN(value)){return "";}if(("rangeCheck" in this)&&!this.rangeCheck(value,_1931)){return String(value);}if(this.editOptions&&this._focused){_1931=dojo.mixin(dojo.mixin({},this.editOptions),_1931);}return this._formatter(value,_1931);},parse:dojo.number.parse,_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(value){return (value===null||value===""||value===undefined)?NaN:this.inherited(arguments);},serialize:function(value,_1935){return (typeof value!="number"||isNaN(value))?"":this.inherited(arguments);},_setValueAttr:function(value,_1937,_1938){if(value!==undefined&&_1938===undefined){if(typeof value=="number"){if(isNaN(value)){_1938="";}else{if(("rangeCheck" in this)&&!this.rangeCheck(value,this.constraints)){_1938=String(value);}}}else{if(!value){_1938="";value=NaN;}else{_1938=String(value);value=undefined;}}}this.inherited(arguments,[value,_1937,_1938]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){var n=Number(this.textbox.value);return (String(n)===this.textbox.value)?n:undefined;}else{return v;}}});dojo.declare("dijit.form.NumberTextBox",[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],{});}if(!dojo._hasResource["dijit.form.NumberSpinner"]){dojo._hasResource["dijit.form.NumberSpinner"]=true;dojo.provide("dijit.form.NumberSpinner");dojo.declare("dijit.form.NumberSpinner",[dijit.form._Spinner,dijit.form.NumberTextBoxMixin],{required:true,adjust:function(val,delta){var tc=this.constraints,v=isNaN(val),_193f=!isNaN(tc.max),_1940=!isNaN(tc.min);if(v&&delta!=0){val=(delta>0)?_1940?tc.min:_193f?tc.max:0:_193f?this.constraints.max:_1940?tc.min:0;}var _1941=val+delta;if(v||isNaN(_1941)){return val;}if(_193f&&(_1941>tc.max)){_1941=tc.max;}if(_1940&&(_1941<tc.min)){_1941=tc.min;}return _1941;},_onKeyPress:function(e){if((e.charOrCode==dojo.keys.HOME||e.charOrCode==dojo.keys.END)&&!e.ctrlKey&&!e.altKey){var value=this.constraints[(e.charOrCode==dojo.keys.HOME?"min":"max")];if(value){this._setValueAttr(value,true);}dojo.stopEvent(e);}}});}if(!dojo._hasResource["dojo.cldr.monetary"]){dojo._hasResource["dojo.cldr.monetary"]=true;dojo.provide("dojo.cldr.monetary");dojo.cldr.monetary.getData=function(code){var _1945={ADP:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,DJF:0,ESP:0,GNF:0,IQD:3,ITL:0,JOD:3,JPY:0,KMF:0,KRW:0,KWD:3,LUF:0,LYD:3,MGA:0,MGF:0,OMR:3,PYG:0,RWF:0,TND:3,TRL:0,VUV:0,XAF:0,XOF:0,XPF:0};var _1946={CHF:5};var _1947=_1945[code],round=_1946[code];if(typeof _1947=="undefined"){_1947=2;}if(typeof round=="undefined"){round=0;}return {places:_1947,round:round};};}if(!dojo._hasResource["dojo.currency"]){dojo._hasResource["dojo.currency"]=true;dojo.provide("dojo.currency");dojo.currency._mixInDefaults=function(_1949){_1949=_1949||{};_1949.type="currency";var _194a=dojo.i18n.getLocalization("dojo.cldr","currency",_1949.locale)||{};var iso=_1949.currency;var data=dojo.cldr.monetary.getData(iso);dojo.forEach(["displayName","symbol","group","decimal"],function(prop){data[prop]=_194a[iso+"_"+prop];});data.fractional=[true,false];return dojo.mixin(data,_1949);};dojo.currency.format=function(value,_194f){return dojo.number.format(value,dojo.currency._mixInDefaults(_194f));};dojo.currency.regexp=function(_1950){return dojo.number.regexp(dojo.currency._mixInDefaults(_1950));};dojo.currency.parse=function(_1951,_1952){return dojo.number.parse(_1951,dojo.currency._mixInDefaults(_1952));};}if(!dojo._hasResource["dijit.form.CurrencyTextBox"]){dojo._hasResource["dijit.form.CurrencyTextBox"]=true;dojo.provide("dijit.form.CurrencyTextBox");dojo.declare("dijit.form.CurrencyTextBox",dijit.form.NumberTextBox,{currency:"",regExpGen:dojo.currency.regexp,_formatter:dojo.currency.format,parse:dojo.currency.parse,postMixInProperties:function(){this.constraints.currency=this.currency;this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.HorizontalSlider"]){dojo._hasResource["dijit.form.HorizontalSlider"]=true;dojo.provide("dijit.form.HorizontalSlider");dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:"<table class=\"dijit dijitReset dijitSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,topDecoration\" class=\"dijitReset\" style=\"text-align:center;width:100%;\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper\" dojoAttachEvent=\"onmousedown:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" waiRole=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\" \n\t\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" dojoAttachEvent=\"onmousedown:_onHandleClick\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper\" dojoAttachEvent=\"onmousedown:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\" style=\"right:0px;\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset\" style=\"text-align:center;\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n",value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:dijit.defaultDuration,widgetsInTemplate:true,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{id:""}),baseClass:"dijitSlider",_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyPress:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey){return;}switch(e.charOrCode){case dojo.keys.HOME:this._setValueAttr(this.minimum,true);break;case dojo.keys.END:this._setValueAttr(this.maximum,true);break;case ((this._descending||this.isLeftToRight())?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW):case (this._descending===false?dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW):case (this._descending===false?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW):case (this._descending===false?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW):case (this._descending===false?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN):this.decrement(e);break;default:return;}dojo.stopEvent(e);},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!dojo.isIE){dijit.focus(this.sliderHandle);}dojo.stopEvent(e);},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}dijit.focus(this.sliderHandle);dojo.stopEvent(e);var _1956=dojo.coords(this.sliderBarContainer,true);var _1957=e[this._mousePixelCoord]-_1956[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_1956[this._pixelCount]-_1957):_1957,_1956[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_1958,_1959,_195a){if(this.disabled||this.readOnly){return;}_1958=_1958<0?0:_1959<_1958?_1959:_1958;var count=this.discreteValues;if(count<=1||count==Infinity){count=_1959;}count--;var _195c=_1959/count;var _195d=Math.round(_1958/_195c);this._setValueAttr((this.maximum-this.minimum)*_195d/count+this.minimum,_195a);},_setValueAttr:function(value,_195f){this.valueNode.value=this.value=value;dijit.setWaiState(this.focusNode,"valuenow",value);this.inherited(arguments);var _1960=(value-this.minimum)/(this.maximum-this.minimum);var _1961=(this._descending===false)?this.remainingBar:this.progressBar;var _1962=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_195f&&this.slideDuration>0&&_1961.style[this._progressPixelSize]){var _this=this;var props={};var start=parseFloat(_1961.style[this._progressPixelSize]);var _1966=this.slideDuration*(_1960-start/100);if(_1966==0){return;}if(_1966<0){_1966=0-_1966;}props[this._progressPixelSize]={start:start,end:_1960*100,units:"%"};this._inProgressAnim=dojo.animateProperty({node:_1961,duration:_1966,onAnimate:function(v){_1962.style[_this._progressPixelSize]=(100-parseFloat(v[_this._progressPixelSize]))+"%";},onEnd:function(){delete _this._inProgressAnim;},properties:props});this._inProgressAnim.play();}else{_1961.style[this._progressPixelSize]=(_1960*100)+"%";_1962.style[this._progressPixelSize]=((1-_1960)*100)+"%";}},_bumpValue:function(_1968){if(this.disabled||this.readOnly){return;}var s=dojo.getComputedStyle(this.sliderBarContainer);var c=dojo._getContentBox(this.sliderBarContainer,s);var count=this.discreteValues;if(count<=1||count==Infinity){count=c[this._pixelCount];}count--;var value=(this.value-this.minimum)*count/(this.maximum-this.minimum)+_1968;if(value<0){value=0;}if(value>count){value=count;}value=value*(this.maximum-this.minimum)/count+this.minimum;this._setValueAttr(value,true);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){dojo.stopEvent(evt);var janky=!dojo.isMozilla;var _1972=evt[(janky?"wheelDelta":"detail")]*(janky?1:-1);this[(_1972<0?"decrement":"increment")](evt);},startup:function(){dojo.forEach(this.getChildren(),function(child){if(this[child.container]!=this.containerNode){this[child.container].appendChild(child.domNode);}},this);},_typematicCallback:function(count,_1975,e){if(count==-1){return;}this[(_1975==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);},postCreate:function(){if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";this._connects.push(dijit.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500));this._connects.push(dijit.typematic.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var _self=this;var mover=function(){dijit.form._SliderMover.apply(this,arguments);this.widget=_self;};dojo.extend(mover,dijit.form._SliderMover.prototype);this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:mover});var label=dojo.query("label[for=\""+this.id+"\"]");if(label.length){label[0].id=(this.id+"_label");dijit.setWaiState(this.focusNode,"labelledby",label[0].id);}dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum);this.inherited(arguments);},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this.inherited(arguments);}});dojo.declare("dijit.form._SliderMover",dojo.dnd.Mover,{onMouseMove:function(e){var _197b=this.widget;var _197c=_197b._abspos;if(!_197c){_197c=_197b._abspos=dojo.coords(_197b.sliderBarContainer,true);_197b._setPixelValue_=dojo.hitch(_197b,"_setPixelValue");_197b._isReversed_=_197b._isReversed();}var _197d=e[_197b._mousePixelCoord]-_197c[_197b._startingPixelCoord];_197b._setPixelValue_(_197b._isReversed_?(_197c[_197b._pixelCount]-_197d):_197d,_197c[_197b._pixelCount],false);},destroy:function(e){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var _197f=this.widget;_197f._abspos=null;_197f._setValueAttr(_197f.value,true);}});}if(!dojo._hasResource["dijit._editor.selection"]){dojo._hasResource["dijit._editor.selection"]=true;dojo.provide("dijit._editor.selection");dojo.mixin(dijit._editor.selection,{getType:function(){if(dojo.doc.selection){return dojo.doc.selection.type.toLowerCase();}else{var stype="text";var oSel;try{oSel=dojo.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _1982=oSel.getRangeAt(0);if((_1982.startContainer==_1982.endContainer)&&((_1982.endOffset-_1982.startOffset)==1)&&(_1982.startContainer.nodeType!=3)){stype="control";}}return stype;}},getSelectedText:function(){if(dojo.doc.selection){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().text;}else{var _1983=dojo.global.getSelection();if(_1983){return _1983.toString();}}return "";},getSelectedHtml:function(){if(dojo.doc.selection){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().htmlText;}else{var _1984=dojo.global.getSelection();if(_1984&&_1984.rangeCount){var frag=_1984.getRangeAt(0).cloneContents();var div=dojo.doc.createElement("div");div.appendChild(frag);return div.innerHTML;}return null;}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control"){if(dojo.doc.selection){var range=dojo.doc.selection.createRange();if(range&&range.item){return dojo.doc.selection.createRange().item(0);}}else{var _1988=dojo.global.getSelection();return _1988.anchorNode.childNodes[_1988.anchorOffset];}}return null;},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(dojo.doc.selection){var r=dojo.doc.selection.createRange();r.collapse(true);return r.parentElement();}else{var _198b=dojo.global.getSelection();if(_198b){var node=_198b.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}}return null;},hasAncestorElement:function(_198d){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_198e){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _nlc=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _tlc=String(tags[i]).toLowerCase();if(_nlc==_tlc){return _tlc;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_1997){if(window["getSelection"]){var _1998=dojo.global.getSelection();if(_1998.removeAllRanges){if(_1997){_1998.collapseToStart();}else{_1998.collapseToEnd();}}else{_1998.collapse(_1997);}}else{if(dojo.doc.selection){var range=dojo.doc.selection.createRange();range.collapse(_1997);range.select();}}},remove:function(){var _s=dojo.doc.selection;if(_s){if(_s.type.toLowerCase()!="none"){_s.clear();}return _s;}else{_s=dojo.global.getSelection();_s.deleteFromDocument();return _s;}},selectElementChildren:function(_199b,_199c){var _199d=dojo.global;var _199e=dojo.doc;_199b=dojo.byId(_199b);if(_199e.selection&&dojo.body().createTextRange){var range=_199b.ownerDocument.body.createTextRange();range.moveToElementText(_199b);if(!_199c){try{range.select();}catch(e){}}}else{if(_199d.getSelection){var _19a0=_199d.getSelection();if(_19a0.setBaseAndExtent){_19a0.setBaseAndExtent(_199b,0,_199b,_199b.innerText.length-1);}else{if(_19a0.selectAllChildren){_19a0.selectAllChildren(_199b);}}}}},selectElement:function(_19a1,_19a2){var range,_19a4=dojo.doc;_19a1=dojo.byId(_19a1);if(_19a4.selection&&dojo.body().createTextRange){try{range=dojo.body().createControlRange();range.addElement(_19a1);if(!_19a2){range.select();}}catch(e){this.selectElementChildren(_19a1,_19a2);}}else{if(dojo.global.getSelection){var _19a5=dojo.global.getSelection();if(_19a5.removeAllRanges){range=_19a4.createRange();range.selectNode(_19a1);_19a5.removeAllRanges();_19a5.addRange(range);}}}}});}if(!dojo._hasResource["dijit._editor.range"]){dojo._hasResource["dijit._editor.range"]=true;dojo.provide("dijit._editor.range");dijit.range={};dijit.range.getIndex=function(node,_19a7){var ret=[],retR=[];var stop=_19a7;var onode=node;var pnode,n;while(node!=stop){var i=0;pnode=node.parentNode;while((n=pnode.childNodes[i++])){if(n===node){--i;break;}}if(i>=pnode.childNodes.length){dojo.debug("Error finding index of a node in dijit.range.getIndex");}ret.unshift(i);retR.unshift(i-pnode.childNodes.length);node=pnode;}if(ret.length>0&&onode.nodeType==3){n=onode.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=onode.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};dijit.range.getNode=function(index,_19b0){if(!dojo.isArray(index)||index.length==0){return _19b0;}var node=_19b0;dojo.every(index,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;console.debug("Error: can not find node with index",index,"under parent node",_19b0);return false;}return true;});return node;};dijit.range.getCommonAncestor=function(n1,n2){var _19b5=function(n){var as=[];while(n){as.unshift(n);if(n.nodeName!="BODY"){n=n.parentNode;}else{break;}}return as;};var n1as=_19b5(n1);var n2as=_19b5(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};dijit.range.getAncestor=function(node,regex,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(regex.test(name)){return node;}node=node.parentNode;}return null;};dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;dijit.range.getBlockAncestor=function(node,regex,root){root=root||node.ownerDocument.body;regex=regex||dijit.range.BlockTagNames;var block=null,_19c5;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!block&&regex.test(name)){block=node;}if(!_19c5&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_19c5=node;}node=node.parentNode;}return {blockNode:block,blockContainer:_19c5||node.ownerDocument.body};};dijit.range.atBeginningOfContainer=function(_19c7,node,_19c9){var _19ca=false;var _19cb=(_19c9==0);if(!_19cb&&node.nodeType==3){if(dojo.trim(node.nodeValue.substr(0,_19c9))==0){_19cb=true;}}if(_19cb){var cnode=node;_19ca=true;while(cnode&&cnode!==_19c7){if(cnode.previousSibling){_19ca=false;break;}cnode=cnode.parentNode;}}return _19ca;};dijit.range.atEndOfContainer=function(_19cd,node,_19cf){var atEnd=false;var _19d1=(_19cf==(node.length||node.childNodes.length));if(!_19d1&&node.nodeType==3){if(dojo.trim(node.nodeValue.substr(_19cf))==0){_19d1=true;}}if(_19d1){var cnode=node;atEnd=true;while(cnode&&cnode!==_19cd){if(cnode.nextSibling){atEnd=false;break;}cnode=cnode.parentNode;}}return atEnd;};dijit.range.adjacentNoneTextNode=function(_19d3,next){var node=_19d3;var len=(0-_19d3.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};dijit.range._w3c=Boolean(window["getSelection"]);dijit.range.create=function(){if(dijit.range._w3c){return dojo.doc.createRange();}else{return new dijit.range.W3CRange;}};dijit.range.getSelection=function(win,_19d9){if(dijit.range._w3c){return win.getSelection();}else{var s=new dijit.range.ie.selection(win);if(!_19d9){s._getCurrentSelection();}return s;}};if(!dijit.range._w3c){dijit.range.ie={cachedSelection:{},selection:function(win){this._ranges=[];this.addRange=function(r,_19dd){this._ranges.push(r);if(!_19dd){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _19de=function(){var r=win.document.selection.createRange();var type=win.document.selection.type.toUpperCase();if(type=="CONTROL"){return new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(r));}else{return new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_19de();if(r){this.addRange(r,true);}};},decomposeControlRange:function(range){var _19e4=range.item(0),_19e5=range.item(range.length-1);var _19e6=_19e4.parentNode,_19e7=_19e5.parentNode;var _19e8=dijit.range.getIndex(_19e4,_19e6).o;var _19e9=dijit.range.getIndex(_19e5,_19e7).o+1;return [_19e6,_19e8,_19e7,_19e9];},getEndPoint:function(range,end){var _19ec=range.duplicate();_19ec.collapse(!end);var _19ed="EndTo"+(end?"End":"Start");var _19ee=_19ec.parentElement();var _19ef,_19f0,_19f1;if(_19ee.childNodes.length>0){dojo.every(_19ee.childNodes,function(node,i){var _19f4;if(node.nodeType!=3){_19ec.moveToElementText(node);if(_19ec.compareEndPoints(_19ed,range)>0){_19ef=node.previousSibling;if(_19f1&&_19f1.nodeType==3){_19ef=_19f1;_19f4=true;}else{_19ef=_19ee;_19f0=i;return false;}}else{if(i==_19ee.childNodes.length-1){_19ef=_19ee;_19f0=_19ee.childNodes.length;return false;}}}else{if(i==_19ee.childNodes.length-1){_19ef=node;_19f4=true;}}if(_19f4&&_19ef){var _19f5=dijit.range.adjacentNoneTextNode(_19ef)[0];if(_19f5){_19ef=_19f5.nextSibling;}else{_19ef=_19ee.firstChild;}var _19f6=dijit.range.adjacentNoneTextNode(_19ef);_19f5=_19f6[0];var _19f7=_19f6[1];if(_19f5){_19ec.moveToElementText(_19f5);_19ec.collapse(false);}else{_19ec.moveToElementText(_19ee);}_19ec.setEndPoint(_19ed,range);_19f0=_19ec.text.length-_19f7;return false;}_19f1=node;return true;});}else{_19ef=_19ee;_19f0=0;}if(!end&&_19ef.nodeType!=3&&_19f0==_19ef.childNodes.length){if(_19ef.nextSibling&&_19ef.nextSibling.nodeType==3){_19ef=_19ef.nextSibling;_19f0=0;}}return [_19ef,_19f0];},setEndPoint:function(range,_19f9,_19fa){var _19fb=range.duplicate(),node,len;if(_19f9.nodeType!=3){if(_19fa>0){node=_19f9.childNodes[_19fa-1];if(node.nodeType==3){_19f9=node;_19fa=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_19f9=node.nextSibling;_19fa=0;}else{_19fb.moveToElementText(node.nextSibling?node:_19f9);var _19fe=node.parentNode.insertBefore(document.createTextNode(" "),node.nextSibling);_19fb.collapse(false);_19fe.parentNode.removeChild(_19fe);}}}else{_19fb.moveToElementText(_19f9);_19fb.collapse(true);}}if(_19f9.nodeType==3){var _19ff=dijit.range.adjacentNoneTextNode(_19f9);var _1a00=_19ff[0];len=_19ff[1];if(_1a00){_19fb.moveToElementText(_1a00);_19fb.collapse(false);if(_1a00.contentEditable!="inherit"){len++;}}else{_19fb.moveToElementText(_19f9.parentNode);_19fb.collapse(true);}_19fa+=len;if(_19fa>0){if(_19fb.move("character",_19fa)!=_19fa){console.error("Error when moving!");}}}return _19fb;},decomposeTextRange:function(range){var _1a02=dijit.range.ie.getEndPoint(range);var _1a03=_1a02[0],_1a04=_1a02[1];var _1a05=_1a02[0],_1a06=_1a02[1];if(range.htmlText.length){if(range.htmlText==range.text){_1a06=_1a04+range.text.length;}else{_1a02=dijit.range.ie.getEndPoint(range,true);_1a05=_1a02[0],_1a06=_1a02[1];}}return [_1a03,_1a04,_1a05,_1a06];},setRange:function(range,_1a08,_1a09,_1a0a,_1a0b,_1a0c){var start=dijit.range.ie.setEndPoint(range,_1a08,_1a09);range.setEndPoint("StartToStart",start);if(!_1a0c){var end=dijit.range.ie.setEndPoint(range,_1a0a,_1a0b);}range.setEndPoint("EndToEnd",end||start);return range;}};dojo.declare("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=dijit.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_1a10){_1a10=parseInt(_1a10);if(this.startContainer===node&&this.startOffset==_1a10){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_1a10;if(!this.endContainer){this.setEnd(node,_1a10);}else{this._updateInternal();}},setEnd:function(node,_1a12){_1a12=parseInt(_1a12);if(this.endContainer===node&&this.endOffset==_1a12){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_1a12;if(!this.startContainer){this.setStart(node,_1a12);}else{this._updateInternal();}},setStartAfter:function(node,_1a14){this._setPoint("setStart",node,_1a14,1);},setStartBefore:function(node,_1a16){this._setPoint("setStart",node,_1a16,0);},setEndAfter:function(node,_1a18){this._setPoint("setEnd",node,_1a18,1);},setEndBefore:function(node,_1a1a){this._setPoint("setEnd",node,_1a1a,0);},_setPoint:function(what,node,_1a1d,ext){var index=dijit.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,index.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();dijit.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(body){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var r=this._getIERange();r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}}if(!dojo._hasResource["dijit._editor.html"]){dojo._hasResource["dijit._editor.html"]=true;dojo.provide("dijit._editor.html");dijit._editor.escapeXml=function(str,_1a26){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_1a26){str=str.replace(/'/gm,"&#39;");}return str;};dijit._editor.getNodeHtml=function(node){var _1a28;switch(node.nodeType){case 1:_1a28="<"+node.nodeName.toLowerCase();var _1a29=[];if(dojo.isIE&&node.outerHTML){var s=node.outerHTML;s=s.substr(0,s.indexOf(">")).replace(/(['"])[^"']*\1/g,"");var reg=/([^\s=]+)=/g;var m,key;while((m=reg.exec(s))){key=m[1];if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_1a29.push([key,node.getAttribute("_djrealurl")]);continue;}}var val;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;default:val=node.getAttribute(key);}_1a29.push([key,val.toString()]);}}}else{var attr,i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!="_dj"){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}_1a29.push([n,v]);}}}_1a29.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_1a29[j++])){_1a28+=" "+attr[0]+"=\""+(dojo.isString(attr[1])?dijit._editor.escapeXml(attr[1],true):attr[1])+"\"";}if(node.childNodes.length){_1a28+=">"+dijit._editor.getChildrenHtml(node)+"</"+node.nodeName.toLowerCase()+">";}else{_1a28+=" />";}break;case 3:_1a28=dijit._editor.escapeXml(node.nodeValue,true);break;case 8:_1a28="<!--"+dijit._editor.escapeXml(node.nodeValue,true)+"-->";break;default:_1a28="<!-- Element not recognized - Type: "+node.nodeType+" Name: "+node.nodeName+"-->";}return _1a28;};dijit._editor.getChildrenHtml=function(dom){var out="";if(!dom){return out;}var nodes=dom["childNodes"]||dom;var _1a39=!dojo.isIE||nodes!==dom;var node,i=0;while((node=nodes[i++])){if(!_1a39||node.parentNode==dom){out+=dijit._editor.getNodeHtml(node);}}return out;};}if(!dojo._hasResource["dijit._editor.RichText"]){dojo._hasResource["dijit._editor.RichText"]=true;dojo.provide("dijit._editor.RichText");if(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"]){if(dojo._postLoad){(function(){var _1a3c=dojo.doc.createElement("textarea");_1a3c.id=dijit._scopeName+"._editor.RichText.savedContent";dojo.style(_1a3c,{display:"none",position:"absolute",top:"-100px",height:"3px",width:"3px"});dojo.body().appendChild(_1a3c);})();}else{try{dojo.doc.write("<textarea id=\""+dijit._scopeName+"._editor.RichText.savedContent\" "+"style=\"display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;\"></textarea>");}catch(e){}}}dojo.declare("dijit._editor.RichText",dijit._Widget,{constructor:function(_1a3d){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this._keyHandlers={};this.contentPreFilters.push(dojo.hitch(this,"_preFixUrlAttributes"));if(dojo.isMoz){this.contentPreFilters.push(this._fixContentForMoz);this.contentPostFilters.push(this._removeMozBogus);}if(dojo.isSafari){this.contentPostFilters.push(this._removeSafariBogus);}this.onLoadDeferred=new dojo.Deferred();},inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",_content:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"==this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}dojo.publish(dijit._scopeName+"._editor.RichText::init",[this]);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=dojo.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _1a41={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!dojo.isIE){_1a41.Z=exec("redo");}for(var key in _1a41){this.addKeyHandler(key,true,false,_1a41[key]);}},events:["onKeyPress","onKeyDown","onKeyUp","onClick"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(this._editorCommandsLocalized){return;}this._editorCommandsLocalized=true;var _1a43=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _1a44="",_1a45,i=0;while((_1a45=_1a43[i++])){if(_1a45.charAt(1)!="l"){_1a44+="<"+_1a45+"><span>content</span></"+_1a45+"><br/>";}else{_1a44+="<"+_1a45+"><li>content</li></"+_1a45+"><br/>";}}var div=dojo.doc.createElement("div");dojo.style(div,{position:"absolute",top:"-2000px"});dojo.doc.body.appendChild(div);div.innerHTML=_1a44;var node=div.firstChild;while(node){dijit._editor.selection.selectElement(node.firstChild);dojo.withGlobal(this.window,"selectElement",dijit._editor.selection,[node.firstChild]);var _1a49=node.tagName.toLowerCase();this._local2NativeFormatNames[_1a49]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_1a49]]=_1a49;node=node.nextSibling.nextSibling;}dojo.body().removeChild(div);},open:function(_1a4a){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new dojo.Deferred();}if(!this.isClosed){this.close();}dojo.publish(dijit._scopeName+"._editor.RichText::open",[this]);this._content="";if(arguments.length==1&&_1a4a.nodeName){this.domNode=_1a4a;}var dn=this.domNode;var html;if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=this._preFilterContent(ta.value);dn=this.domNode=dojo.doc.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;dojo.place(dn,ta,"before");var _1a4e=dojo.hitch(this,function(){dojo.style(ta,{display:"block",position:"absolute",top:"-1000px"});if(dojo.isIE){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(dojo.isIE){setTimeout(_1a4e,10);}else{_1a4e();}if(ta.form){dojo.connect(ta.form,"onsubmit",this,function(){ta.value=this.getValue();});}}else{html=this._preFilterContent(dijit._editor.getChildrenHtml(dn));dn.innerHTML="";}var _1a50=dojo.contentBox(dn);this._oldHeight=_1a50.h;this._oldWidth=_1a50.w;this.savedContent=html;if(dn.nodeName&&dn.nodeName=="LI"){dn.innerHTML=" <br>";}this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);if(this.name!=""&&(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"])){var _1a51=dojo.byId(dijit._scopeName+"._editor.RichText.savedContent");if(_1a51.value!=""){var datas=_1a51.value.split(this._SEPARATOR),i=0,dat;while((dat=datas[i++])){var data=dat.split(":");if(data[0]==this.name){html=data[1];datas.splice(i,1);break;}}}this.connect(window,"onbeforeunload","_saveContent");}this.isClosed=false;if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var ifr=(this.editorObject=this.iframe=dojo.doc.createElement("iframe"));ifr.id=this.id+"_iframe";this._iframeSrc=this._getIframeDocTxt();ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(dojo.isIE>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=dojo.hitch(this,function(win){this.window=win;this.document=this.window.document;if(dojo.isIE){this._localizeEditorCommands();}this.onLoad(html);this.savedContent=this.getValue(true);});var s="javascript:parent."+dijit._scopeName+".byId(\""+this.id+"\")._iframeSrc";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(dojo.isWebKit){setTimeout(function(){ifr.setAttribute("src",s);},0);}}else{this._drawIframe(html);this.savedContent=this.getValue(true);}if(dn.nodeName=="LI"){dn.lastChild.style.marginTop="-1.2em";}if(this.domNode.nodeName=="LI"){this.domNode.lastChild.style.marginTop="-1.2em";}dojo.addClass(this.domNode,"RichTextEditable");},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_localizedIframeTitles:null,_getIframeDocTxt:function(){var _cs=dojo.getComputedStyle(this.domNode);var html="";if(dojo.isIE||(!this.height&&!dojo.isMoz)){html="<div>"+html+"</div>";}var font=[_cs.fontWeight,_cs.fontSize,_cs.fontFamily].join(" ");var _1a5c=_cs.lineHeight;if(_1a5c.indexOf("px")>=0){_1a5c=parseFloat(_1a5c)/parseFloat(_cs.fontSize);}else{if(_1a5c.indexOf("em")>=0){_1a5c=parseFloat(_1a5c);}else{_1a5c="1.0";}}var _1a5d="";this.style.replace(/(^|;)(line-|font-?)[^;]+/g,function(match){_1a5d+=match.replace(/^;/g,"")+";";});var d=dojo.doc;return [this.isLeftToRight()?"<html><head>":"<html dir='rtl'><head>",(dojo.isMoz?"<title>"+this._localizedIframeTitles.iframeEditTitle+"</title>":""),"<meta http-equiv='Content-Type' content='text/html;'>","<style>","body,html {","\tbackground:transparent;","\tpadding: 1em 0 0 0;","\tmargin: -1em 0 0 0;","}","body{","\ttop:0px; left:0px; right:0px;","\tfont:",font,";",((this.height||dojo.isOpera)?"":"position: fixed;"),"\tmin-height:",this.minHeight,";","\tline-height:",_1a5c,"}","p{ margin: 1em 0 !important; }",(this.height?"":"body,html{overflow-y:hidden;/*for IE*/} body > div {overflow-x:auto;/*FF:horizontal scrollbar*/ overflow-y:hidden;/*safari*/ min-height:"+this.minHeight+";/*safari*/}"),"li > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; } ","li{ min-height:1.2em; }","</style>",this._applyEditingAreaStyleSheets(),"</head><body onload='frameElement._loadFunc(window,document)' style='"+_1a5d+"'>",html,"</body></html>"].join("");},_drawIframe:function(html){if(!this.iframe){var ifr=(this.iframe=dojo.doc.createElement("iframe"));ifr.id=this.id+"_iframe";var ifrs=ifr.style;ifrs.border="none";ifrs.lineHeight="0";ifrs.verticalAlign="bottom";this.editorObject=this.iframe;this._localizedIframeTitles=dojo.i18n.getLocalization("dijit.form","Textarea");var label=dojo.query("label[for=\""+this.id+"\"]");if(label.length){this._localizedIframeTitles.iframeEditTitle=label[0].innerHTML+" "+this._localizedIframeTitles.iframeEditTitle;}ifr._loadFunc=function(win){};}this.iframe.style.width=this.inheritWidth?this._oldWidth:"100%";if(this._layoutMode){this.iframe.style.height="100%";}else{if(this.height){this.iframe.style.height=this.height;}else{this.iframe.height=this._oldHeight;}}var _1a65;if(this.textarea){_1a65=this.srcNodeRef;}else{_1a65=dojo.doc.createElement("div");_1a65.style.display="none";_1a65.innerHTML=html;this.editingArea.appendChild(_1a65);}this.editingArea.appendChild(this.iframe);var _1a66=dojo.hitch(this,function(){if(!this.editNode){if(!this.document){try{if(this.iframe.contentWindow){this.window=this.iframe.contentWindow;this.document=this.iframe.contentWindow.document;}else{if(this.iframe.contentDocument){this.window=this.iframe.contentDocument.window;this.document=this.iframe.contentDocument;}}}catch(e){}if(!this.document){setTimeout(_1a66,50);return;}var _1a67=this.document;_1a67.open();if(dojo.isAIR){_1a67.body.innerHTML=html;}else{_1a67.write(this._getIframeDocTxt());}_1a67.close();dojo.destroy(_1a65);}if(!this.document.body){setTimeout(_1a66,50);return;}this.onLoad(html);}else{dojo.destroy(_1a65);this.editNode.innerHTML=html;this.onDisplayChanged();}});_1a66();},_applyEditingAreaStyleSheets:function(){var files=[];if(this.styleSheets){files=this.styleSheets.split(";");this.styleSheets="";}files=files.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=files[i++])){var _1a6c=(new dojo._Url(dojo.global.location,url)).toString();this.editingAreaStyleSheets.push(_1a6c);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_1a6c+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}if(dojo.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _1a70=this.document.createElement("link");_1a70.rel="stylesheet";_1a70.type="text/css";_1a70.href=url;head.appendChild(_1a70);}},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}var index=dojo.indexOf(this.editingAreaStyleSheets,url);if(index==-1){return;}delete this.editingAreaStyleSheets[index];dojo.withGlobal(this.window,"query",dojo,["link:[href=\""+url+"\"]"]).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(value){this.disabled=value;if(!this.isLoaded){return;}value=!!value;if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var _1a75=dojo.isIE&&(this.isLoaded||!this.focusOnLoad);if(_1a75){this.editNode.unselectable="on";}this.editNode.contentEditable=!value;if(_1a75){var _this=this;setTimeout(function(){_this.editNode.unselectable="off";},0);}}else{try{this.document.designMode=(value?"off":"on");}catch(e){return;}if(!value&&this._mozSettingProps){var ps=this._mozSettingProps;for(var n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e){}}}}}this._disabledOK=true;},_isResized:function(){return false;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;dijit.registerIframe(this.iframe);}if(!dojo.isIE&&(this.height||dojo.isMoz)){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _this=this;if(dojo.isIE){var _1a7b=(this.tabStop=dojo.doc.createElement("<div tabIndex=-1>"));this.editingArea.appendChild(_1a7b);this.iframe.onfocus=function(){_this.editNode.setActive();};}}this.focusNode=this.editNode;this._preDomFilterContent(this.editNode);var _1a7c=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;dojo.forEach(_1a7c,function(item){this.connect(ap,item.toLowerCase(),item);},this);if(dojo.isIE){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}if(dojo.isWebKit){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");}this.isLoaded=true;this.attr("disabled",this.disabled);this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.callback(true);}if(this.focusOnLoad){dojo.addOnLoad(dojo.hitch(this,function(){setTimeout(dojo.hitch(this,"focus"),this.updateInterval);}));}this.onDisplayChanged();},onKeyDown:function(e){if(e.keyCode===dojo.keys.TAB&&this.isTabIndent){dojo.stopEvent(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(dojo.isIE){if(e.keyCode==dojo.keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===dojo.keys.BACKSPACE&&this.document.selection.type==="Control"){dojo.stopEvent(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}else{if(dojo.isMoz&&!this.isTabIndent){if(e.keyCode==dojo.keys.TAB&&!e.shiftKey&&!e.ctrlKey&&!e.altKey&&this.iframe){var _1a80=dojo.isFF<3?this.iframe.contentDocument:this.iframe;_1a80.title=this._localizedIframeTitles.iframeFocusTitle;this.iframe.focus();dojo.stopEvent(e);}else{if(e.keyCode==dojo.keys.TAB&&e.shiftKey){if(this.toolbar){this.toolbar.focus();}dojo.stopEvent(e);}}}}return true;},onKeyUp:function(e){return;},setDisabled:function(_1a82){dojo.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.attr("disabled",_1a82);},_setValueAttr:function(value){this.setValue(value);},_getDisableSpellCheckAttr:function(){return !dojo.attr(this.document.body,"spellcheck");},_setDisableSpellCheckAttr:function(_1a84){if(this.document){dojo.attr(this.document.body,"spellcheck",!_1a84);}else{this.onLoadDeferred.addCallback(dojo.hitch(this,function(){dojo.attr(this.document.body,"spellcheck",!_1a84);}));}},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode;var _1a87=this._keyHandlers[c];var args=arguments;if(_1a87&&!e.altKey){dojo.forEach(_1a87,function(h){if((!!h.shift==!!e.shiftKey)&&(!!h.ctrl==!!e.ctrlKey)){if(!h.handler.apply(this,args)){e.preventDefault();}}},this);}if(!this._onKeyHitch){this._onKeyHitch=dojo.hitch(this,"onKeyPressed");}setTimeout(this._onKeyHitch,1);return true;},addKeyHandler:function(key,ctrl,shift,_1a8d){if(!dojo.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:shift||false,ctrl:ctrl||false,handler:_1a8d});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(e){if(!this._focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _c=this.getValue(true);if(_c!=this.savedContent){this.onChange(_c);this.savedContent=_c;}if(dojo.isMoz&&this.iframe){var _1a92=dojo.isFF<3?this.iframe.contentDocument:this.iframe;_1a92.title=this._localizedIframeTitles.iframeEditTitle;}},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.attr("disabled",false);}this.inherited(arguments);}},blur:function(){if(!dojo.isIE&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(dojo.doc.body.focus){dojo.doc.body.focus();}}},focus:function(){if(!dojo.isIE){dijit.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(e){if(this._updateTimer){clearTimeout(this._updateTimer);}if(!this._updateHandler){this._updateHandler=dojo.hitch(this,"onNormalizedDisplayChanged");}this._updateTimer=setTimeout(this._updateHandler,this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(_1a95){},_normalizeCommand:function(cmd){var _1a97=cmd.toLowerCase();if(_1a97=="formatblock"){if(dojo.isSafari){_1a97="heading";}}else{if(_1a97=="hilitecolor"&&!dojo.isMoz){_1a97="backcolor";}}return _1a97;},_qcaCache:{},queryCommandAvailable:function(_1a98){var ca=this._qcaCache[_1a98];if(ca!=undefined){return ca;}return (this._qcaCache[_1a98]=this._queryCommandAvailable(_1a98));},_queryCommandAvailable:function(_1a9a){var ie=1;var _1a9c=1<<1;var _1a9d=1<<2;var opera=1<<3;var _1a9f=1<<4;var gt420=dojo.isWebKit;function _1aa1(_1aa2){return {ie:Boolean(_1aa2&ie),mozilla:Boolean(_1aa2&_1a9c),webkit:Boolean(_1aa2&_1a9d),webkit420:Boolean(_1aa2&_1a9f),opera:Boolean(_1aa2&opera)};};var _1aa3=null;switch(_1a9a.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_1aa3=_1aa1(_1a9c|ie|_1a9d|opera);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_1aa3=_1aa1(_1a9c|ie|opera|_1a9f);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_1aa3=_1aa1(ie);break;case "cut":case "copy":case "paste":_1aa3=_1aa1(ie|_1a9c|_1a9f);break;case "inserttable":_1aa3=_1aa1(_1a9c|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_1aa3=_1aa1(ie|_1a9c);break;default:return false;}return (dojo.isIE&&_1aa3.ie)||(dojo.isMoz&&_1aa3.mozilla)||(dojo.isWebKit&&_1aa3.webkit)||(dojo.isWebKit>420&&_1aa3.webkit420)||(dojo.isOpera&&_1aa3.opera);},execCommand:function(_1aa4,_1aa5){var _1aa6;this.focus();_1aa4=this._normalizeCommand(_1aa4);if(_1aa5!=undefined){if(_1aa4=="heading"){throw new Error("unimplemented");}else{if((_1aa4=="formatblock")&&dojo.isIE){_1aa5="<"+_1aa5+">";}}}if(_1aa4=="inserthtml"){_1aa5=this._preFilterContent(_1aa5);_1aa6=true;if(dojo.isIE){var _1aa7=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()=="CONTROL"){var n=_1aa7.item(0);while(_1aa7.length){_1aa7.remove(_1aa7.item(0));}n.outerHTML=_1aa5;}else{_1aa7.pasteHTML(_1aa5);}_1aa7.select();}else{if(dojo.isMoz&&!_1aa5.length){this._sCall("remove");}else{_1aa6=this.document.execCommand(_1aa4,false,_1aa5);}}}else{if((_1aa4=="unlink")&&(this.queryCommandEnabled("unlink"))&&(dojo.isMoz||dojo.isWebKit)){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);_1aa6=this.document.execCommand("unlink",false,null);}else{if((_1aa4=="hilitecolor")&&(dojo.isMoz)){this.document.execCommand("styleWithCSS",false,true);_1aa6=this.document.execCommand(_1aa4,false,_1aa5);this.document.execCommand("styleWithCSS",false,false);}else{if((dojo.isIE)&&((_1aa4=="backcolor")||(_1aa4=="forecolor"))){_1aa5=arguments.length>1?_1aa5:null;_1aa6=this.document.execCommand(_1aa4,false,_1aa5);}else{_1aa5=arguments.length>1?_1aa5:null;if(_1aa5||_1aa4!="createlink"){_1aa6=this.document.execCommand(_1aa4,false,_1aa5);}}}}}this.onDisplayChanged();return _1aa6;},queryCommandEnabled:function(_1aaa){if(this.disabled||!this._disabledOK){return false;}_1aaa=this._normalizeCommand(_1aaa);if(dojo.isMoz||dojo.isWebKit){if(_1aaa=="unlink"){this._sCall("hasAncestorElement",["a"]);}else{if(_1aaa=="inserttable"){return true;}}}if(dojo.isWebKit){if(_1aaa=="copy"){_1aaa="cut";}else{if(_1aaa=="paste"){return true;}}}var elem=dojo.isIE?this.document.selection.createRange():this.document;return elem.queryCommandEnabled(_1aaa);},queryCommandState:function(_1aac){if(this.disabled||!this._disabledOK){return false;}_1aac=this._normalizeCommand(_1aac);return this.document.queryCommandState(_1aac);},queryCommandValue:function(_1aad){if(this.disabled||!this._disabledOK){return false;}var r;_1aad=this._normalizeCommand(_1aad);if(dojo.isIE&&_1aad=="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_1aad)];}else{r=this.document.queryCommandValue(_1aad);}return r;},_sCall:function(name,args){return dojo.withGlobal(this.window,name,dijit._editor.selection,args);},placeCursorAtStart:function(){this.focus();var _1ab1=false;if(dojo.isMoz){var first=this.editNode.firstChild;while(first){if(first.nodeType==3){if(first.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_1ab1=true;this._sCall("selectElement",[first]);break;}}else{if(first.nodeType==1){_1ab1=true;this._sCall("selectElementChildren",[first]);break;}}first=first.nextSibling;}}else{_1ab1=true;this._sCall("selectElementChildren",[this.editNode]);}if(_1ab1){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _1ab3=false;if(dojo.isMoz){var last=this.editNode.lastChild;while(last){if(last.nodeType==3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_1ab3=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType==1){_1ab3=true;if(last.lastChild){this._sCall("selectElement",[last.lastChild]);}else{this._sCall("selectElement",[last]);}break;}}last=last.previousSibling;}}else{_1ab3=true;this._sCall("selectElementChildren",[this.editNode]);}if(_1ab3){this._sCall("collapse",[false]);}},getValue:function(_1ab5){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_1ab5);},_getValueAttr:function(){return this.getValue();},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.setValue(html);}));return;}if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!dojo.isMoz){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(dojo.isMoz&&!html){html="&nbsp;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}},_preFilterContent:function(html){var ec=html;dojo.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;dojo.forEach(this.contentDomPreFilters,function(ef){if(ef&&dojo.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_1abf){var ec;if(!dojo.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_1abf){dom=dojo.clone(dom);}dojo.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=dijit._editor.getChildrenHtml(dom);}else{ec=dom;}if(!dojo.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}dojo.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(e){var _1ac4=dojo.byId(dijit._scopeName+"._editor.RichText.savedContent");_1ac4.value+=this._SEPARATOR+this.name+":"+this.getValue();},escapeXml:function(str,_1ac6){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_1ac6){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){dojo.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit._editor.getNodeHtml instead",2);return dijit._editor.getNodeHtml(node);},getNodeChildrenHtml:function(dom){dojo.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit._editor.getChildrenHtml instead",2);return dijit._editor.getChildrenHtml(dom);},close:function(save,force){if(this.isClosed){return false;}if(!arguments.length){save=true;}this._content=this.getValue();var _1acb=(this.savedContent!=this._content);if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(dojo.isIE){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(dojo.isIE){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=save?this._content:this.savedContent;dojo.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=save?this._content:this.savedContent;}dojo.removeClass(this.domNode,"RichTextEditable");this.isClosed=true;this.isLoaded=false;delete this.editNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;return _1acb;},destroyRendering:function(){},destroy:function(){this.destroyRendering();if(!this.isClosed){this.close(false);}this.inherited(arguments);},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"");},_removeSafariBogus:function(html){return html.replace(/\sclass="webkit-block-placeholder"/gi,"");},_fixContentForMoz:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");}});}if(!dojo._hasResource["dijit._editor._Plugin"]){dojo._hasResource["dijit._editor._Plugin"]=true;dojo.provide("dijit._editor._Plugin");dojo.declare("dijit._editor._Plugin",null,{constructor:function(args,node){if(args){dojo.mixin(this,args);}this._connects=[];},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,queryCommand:null,command:"",commandArg:null,useDefaultCommand:true,buttonClass:dijit.form.Button,getLabel:function(key){return this.editor.commands[key];},_initButton:function(props){if(this.command.length){var label=this.getLabel(this.command);var _1ad6=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){props=dojo.mixin({label:label,showLabel:false,iconClass:_1ad6,dropDown:this.dropDown,tabIndex:"-1"},props||{});this.button=new this.buttonClass(props);}}},destroy:function(f){dojo.forEach(this._connects,dojo.disconnect);if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(dojo.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_1add,_1ade;if(!e||!e.isLoaded||!c.length){return;}if(this.button){try{_1ade=e.queryCommandEnabled(c);if(this.enabled!==_1ade){this.enabled=_1ade;this.button.attr("disabled",!_1ade);}if(typeof this.button.checked=="boolean"){_1add=e.queryCommandState(c);if(this.checked!==_1add){this.checked=_1add;this.button.attr("checked",e.queryCommandState(c));}}}catch(e){console.log(e);}}},setEditor:function(_1adf){this.editor=_1adf;this._initButton();if(this.command.length&&!this.editor.queryCommandAvailable(this.command)){if(this.button){this.button.domNode.style.display="none";}}if(this.button&&this.useDefaultCommand){this.connect(this.button,"onClick",dojo.hitch(this.editor,"execCommand",this.command,this.commandArg));}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_1ae0){if(this.button){_1ae0.addChild(this.button);}}});}if(!dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]){dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]=true;dojo.provide("dijit._editor.plugins.EnterKeyHandling");dojo.declare("dijit._editor.plugins.EnterKeyHandling",dijit._editor._Plugin,{blockNodeForEnter:"BR",constructor:function(args){if(args){dojo.mixin(this,args);}},setEditor:function(_1ae2){this.editor=_1ae2;if(this.blockNodeForEnter=="BR"){if(dojo.isIE){_1ae2.contentDomPreFilters.push(dojo.hitch(this,"regularPsToSingleLinePs"));_1ae2.contentDomPostFilters.push(dojo.hitch(this,"singleLinePsToRegularPs"));_1ae2.onLoadDeferred.addCallback(dojo.hitch(this,"_fixNewLineBehaviorForIE"));}else{_1ae2.onLoadDeferred.addCallback(dojo.hitch(this,function(d){try{this.editor.document.execCommand("insertBrOnReturn",false,true);}catch(e){}return d;}));}}else{if(this.blockNodeForEnter){dojo["require"]("dijit._editor.range");var h=dojo.hitch(this,this.handleEnterKey);_1ae2.addKeyHandler(13,0,0,h);_1ae2.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},connect:function(o,f,tf){if(!this._connects){this._connects=[];}this._connects.push(dojo.connect(o,f,this,tf));},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);this._connects=[];},onKeyPressed:function(e){if(this._checkListLater){if(dojo.withGlobal(this.editor.window,"isCollapsed",dijit)){var _1ae9=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,["LI"]);if(!_1ae9){dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var block=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]);if(block){block.innerHTML=this.bogusHtmlContent;if(dojo.isIE){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{alert("onKeyPressed: Can not find the new block node");}}else{if(dojo.isMoz){if(_1ae9.parentNode.parentNode.nodeName=="LI"){_1ae9=_1ae9.parentNode.parentNode;}}var fc=_1ae9.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_1ae9.insertBefore(fc.ownerDocument.createTextNode(""),fc);var _1aed=dijit.range.create();_1aed.setStart(_1ae9.firstChild,0);var _1aee=dijit.range.getSelection(this.editor.window,true);_1aee.removeAllRanges();_1aee.addRange(_1aed);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&nbsp;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){if(!this.blockNodeForEnter){return true;}var _1af0,range,_1af2,doc=this.editor.document,br;if(e.shiftKey||this.blockNodeForEnter=="BR"){var _1af5=dojo.withGlobal(this.editor.window,"getParentElement",dijit._editor.selection);var _1af6=dijit.range.getAncestor(_1af5,this.blockNodes);if(_1af6){if(!e.shiftKey&&_1af6.tagName=="LI"){return true;}_1af0=dijit.range.getSelection(this.editor.window);range=_1af0.getRangeAt(0);if(!range.collapsed){range.deleteContents();}if(dijit.range.atBeginningOfContainer(_1af6,range.startContainer,range.startOffset)){if(e.shiftKey){br=doc.createElement("br");_1af2=dijit.range.create();_1af6.insertBefore(br,_1af6.firstChild);_1af2.setStartBefore(br.nextSibling);_1af0.removeAllRanges();_1af0.addRange(_1af2);}else{dojo.place(br,_1af6,"before");}}else{if(dijit.range.atEndOfContainer(_1af6,range.startContainer,range.startOffset)){_1af2=dijit.range.create();br=doc.createElement("br");if(e.shiftKey){_1af6.appendChild(br);_1af6.appendChild(doc.createTextNode(""));_1af2.setStart(_1af6.lastChild,0);}else{dojo.place(br,_1af6,"after");_1af2.setStartAfter(_1af6);}_1af0.removeAllRanges();_1af0.addRange(_1af2);}else{return true;}}}else{dijit._editor.RichText.prototype.execCommand.call(this.editor,"inserthtml","<br>");}return false;}var _1af7=true;_1af0=dijit.range.getSelection(this.editor.window);range=_1af0.getRangeAt(0);if(!range.collapsed){range.deleteContents();}var block=dijit.range.getBlockAncestor(range.endContainer,null,this.editor.editNode);var _1af9=block.blockNode;if((this._checkListLater=(_1af9&&(_1af9.nodeName=="LI"||_1af9.parentNode.nodeName=="LI")))){if(dojo.isMoz){this._pressedEnterInBlock=_1af9;}if(/^(?:\s|&nbsp;)$/.test(_1af9.innerHTML)){_1af9.innerHTML="";}return true;}if(!block.blockNode||block.blockNode===this.editor.editNode){dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);block={blockNode:dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(block.blockNode){if(!(block.blockNode.textContent||block.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length){this.removeTrailingBr(block.blockNode);return false;}}else{block.blockNode=this.editor.editNode;}_1af0=dijit.range.getSelection(this.editor.window);range=_1af0.getRangeAt(0);}var _1afa=doc.createElement(this.blockNodeForEnter);_1afa.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(block.blockNode);if(dijit.range.atEndOfContainer(block.blockNode,range.endContainer,range.endOffset)){if(block.blockNode===block.blockContainer){block.blockNode.appendChild(_1afa);}else{dojo.place(_1afa,block.blockNode,"after");}_1af7=false;_1af2=dijit.range.create();_1af2.setStart(_1afa,0);_1af0.removeAllRanges();_1af0.addRange(_1af2);if(this.editor.height){_1afa.scrollIntoView(false);}}else{if(dijit.range.atBeginningOfContainer(block.blockNode,range.startContainer,range.startOffset)){dojo.place(_1afa,block.blockNode,block.blockNode===block.blockContainer?"first":"before");if(_1afa.nextSibling&&this.editor.height){_1afa.nextSibling.scrollIntoView(false);}_1af7=false;}else{if(dojo.isMoz){this._pressedEnterInBlock=block.blockNode;}}}return _1af7;},removeTrailingBr:function(_1afb){var para=/P|DIV|LI/i.test(_1afb.tagName)?_1afb:dijit._editor.selection.getParentOfType(_1afb,["P","DIV","LI"]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||(para.lastChild&&para.lastChild.tagName=="BR")){dojo.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}},_fixNewLineBehaviorForIE:function(d){if(this.editor.document.__INSERTED_EDITIOR_NEWLINE_CSS===undefined){var _1afe="p{margin:0 !important;}";var _1aff=function(_1b00,doc,URI){if(!_1b00){return null;}if(!doc){doc=document;}var style=doc.createElement("style");style.setAttribute("type","text/css");var head=doc.getElementsByTagName("head")[0];if(!head){console.debug("No head tag in document, aborting styles");return null;}else{head.appendChild(style);}if(style.styleSheet){var _1b05=function(){try{style.styleSheet.cssText=_1b00;}catch(e){console.debug(e);}};if(style.styleSheet.disabled){setTimeout(_1b05,10);}else{_1b05();}}else{var _1b06=doc.createTextNode(_1b00);style.appendChild(_1b06);}return style;};_1aff(_1afe,this.editor.document);this.editor.document.__INSERTED_EDITIOR_NEWLINE_CSS=true;return d;}return null;},regularPsToSingleLinePs:function(_1b07,_1b08){function _1b09(el){function _1b0b(nodes){var newP=nodes[0].ownerDocument.createElement("p");nodes[0].parentNode.insertBefore(newP,nodes[0]);dojo.forEach(nodes,function(node){newP.appendChild(node);});};var _1b0f=0;var _1b10=[];var _1b11;while(_1b0f<el.childNodes.length){_1b11=el.childNodes[_1b0f];if(_1b11.nodeType==3||(_1b11.nodeType==1&&_1b11.nodeName!="BR"&&dojo.style(_1b11,"display")!="block")){_1b10.push(_1b11);}else{var _1b12=_1b11.nextSibling;if(_1b10.length){_1b0b(_1b10);_1b0f=(_1b0f+1)-_1b10.length;if(_1b11.nodeName=="BR"){dojo.destroy(_1b11);}}_1b10=[];}_1b0f++;}if(_1b10.length){_1b0b(_1b10);}};function _1b13(el){var _1b15=null;var _1b16=[];var _1b17=el.childNodes.length-1;for(var i=_1b17;i>=0;i--){_1b15=el.childNodes[i];if(_1b15.nodeName=="BR"){var newP=_1b15.ownerDocument.createElement("p");dojo.place(newP,el,"after");if(_1b16.length==0&&i!=_1b17){newP.innerHTML="&nbsp;";}dojo.forEach(_1b16,function(node){newP.appendChild(node);});dojo.destroy(_1b15);_1b16=[];}else{_1b16.unshift(_1b15);}}};var pList=[];var ps=_1b07.getElementsByTagName("p");dojo.forEach(ps,function(p){pList.push(p);});dojo.forEach(pList,function(p){if((p.previousSibling)&&(p.previousSibling.nodeName=="P"||dojo.style(p.previousSibling,"display")!="block")){var newP=p.parentNode.insertBefore(this.document.createElement("p"),p);newP.innerHTML=_1b08?"":"&nbsp;";}_1b13(p);},this.editor);_1b09(_1b07);return _1b07;},singleLinePsToRegularPs:function(_1b20){function _1b21(node){var ps=node.getElementsByTagName("p");var _1b24=[];for(var i=0;i<ps.length;i++){var p=ps[i];var _1b27=false;for(var k=0;k<_1b24.length;k++){if(_1b24[k]===p.parentNode){_1b27=true;break;}}if(!_1b27){_1b24.push(p.parentNode);}}return _1b24;};function _1b29(node){if(node.nodeType!=1||node.tagName!="P"){return dojo.style(node,"display")=="block";}else{if(!node.childNodes.length||node.innerHTML=="&nbsp;"){return true;}}return false;};var _1b2b=_1b21(_1b20);for(var i=0;i<_1b2b.length;i++){var _1b2d=_1b2b[i];var _1b2e=null;var node=_1b2d.firstChild;var _1b30=null;while(node){if(node.nodeType!="1"||node.tagName!="P"){_1b2e=null;}else{if(_1b29(node)){_1b30=node;_1b2e=null;}else{if(_1b2e==null){_1b2e=node;}else{if((!_1b2e.lastChild||_1b2e.lastChild.nodeName!="BR")&&(node.firstChild)&&(node.firstChild.nodeName!="BR")){_1b2e.appendChild(this.editor.document.createElement("br"));}while(node.firstChild){_1b2e.appendChild(node.firstChild);}_1b30=node;}}}node=node.nextSibling;if(_1b30){dojo.destroy(_1b30);_1b30=null;}}}return _1b20;}});}if(!dojo._hasResource["dijit.Editor"]){dojo._hasResource["dijit.Editor"]=true;dojo.provide("dijit.Editor");dojo.declare("dijit.Editor",dijit._editor.RichText,{plugins:null,extraPlugins:null,constructor:function(){if(!dojo.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","dijit._editor.plugins.EnterKeyHandling"];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(dojo.isIE){this.events.push("onBeforeDeactivate");}},postCreate:function(){if(this.customUndo){dojo["require"]("dijit._editor.range");this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);}if(dojo.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=dojo.i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new dijit.Toolbar({});dojo.place(this.toolbar.domNode,this.editingArea,"before");}dojo.forEach(this.plugins,this.addPlugin,this);this.onNormalizedDisplayChanged();this.toolbar.startup();},destroy:function(){dojo.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_1b32,index){var args=dojo.isString(_1b32)?{name:_1b32}:_1b32;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};dojo.publish(dijit._scopeName+".Editor.getPlugin",[o]);if(!o.plugin){var pc=dojo.getObject(args.name);if(pc){o.plugin=new pc(args);}}if(!o.plugin){console.warn("Cannot find plugin",_1b32);return;}_1b32=o.plugin;}if(arguments.length>1){this._plugins[index]=_1b32;}else{this._plugins.push(_1b32);}_1b32.setEditor(this);if(dojo.isFunction(_1b32.setToolbar)){_1b32.setToolbar(this.toolbar);}},startup:function(){},resize:function(size){dijit.layout._LayoutWidget.prototype.resize.apply(this,arguments);},layout:function(){this.editingArea.style.height=(this._contentBox.h-dojo.marginBox(this.toolbar.domNode).h)+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){delete this._savedSelection;if(e.target.tagName=="BODY"){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);}this.inherited(arguments);},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}this._saveSelection();},customUndo:dojo.isIE,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){clearTimeout(this._editTimer);}this._editTimer=setTimeout(dojo.hitch(this,this.endEditing),this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}try{var r=this.inherited("execCommand",arguments);if(dojo.isWebKit&&cmd=="paste"&&!r){throw {code:1011};}}catch(e){if(e.code==1011&&/copy|cut|paste/.test(cmd)){var sub=dojo.string.substitute,accel={cut:"X",copy:"C",paste:"V"},isMac=navigator.userAgent.indexOf("Macintosh")!=-1;alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[isMac?"appleKey":"ctrlKey"],[accel[cmd]])]));}r=false;}if(this.customUndo){this._endEditing();}return r;}},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited("queryCommandEnabled",arguments);}},focus:function(){var _1b41=0;if(this._savedSelection&&dojo.isIE){_1b41=dijit._curFocus!=this.editNode;}this.inherited(arguments);if(_1b41){this._restoreSelection();}},_moveToBookmark:function(b){var _1b43=b;if(dojo.isIE){if(dojo.isArray(b)){_1b43=[];dojo.forEach(b,function(n){_1b43.push(dijit.range.getNode(n,this.editNode));},this);}}else{var r=dijit.range.create();r.setStart(dijit.range.getNode(b.startContainer,this.editNode),b.startOffset);r.setEnd(dijit.range.getNode(b.endContainer,this.editNode),b.endOffset);_1b43=r;}dojo.withGlobal(this.window,"moveToBookmark",dijit,[_1b43]);},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){this.endEditing(true);var s=this._steps.pop();if(this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();return true;}return false;},redo:function(){this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();return true;}return false;},endEditing:function(_1b4b){if(this._editTimer){clearTimeout(this._editTimer);}if(this._inEditing){this._endEditing(_1b4b);this._inEditing=false;}},_getBookmark:function(){var b=dojo.withGlobal(this.window,dijit.getBookmark);var tmp=[];if(dojo.isIE){if(dojo.isArray(b)){dojo.forEach(b,function(n){tmp.push(dijit.range.getIndex(n,this.editNode).o);},this);b=tmp;}}else{tmp=dijit.range.getIndex(b.startContainer,this.editNode).o;b={startContainer:tmp,startOffset:b.startOffset,endContainer:b.endContainer===b.startContainer?tmp:dijit.range.getIndex(b.endContainer,this.editNode).o,endOffset:b.endOffset};}return b;},_beginEditing:function(cmd){if(this._steps.length===0){this._steps.push({"text":this.savedContent,"bookmark":this._getBookmark()});}},_endEditing:function(_1b50){var v=this.getValue(true);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!dojo.isIE&&!this.iframe&&e.keyCode==dojo.keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode,ks=dojo.keys;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){dojo.stopEvent(e);this.undo();return;}else{if(k==89||k==121){dojo.stopEvent(e);this.redo();return;}}}this.inherited(arguments);switch(k){case ks.ENTER:case ks.BACKSPACE:case ks.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");setTimeout(dojo.hitch(this,this.endEditing),1);}else{this.beginEditing("paste");setTimeout(dojo.hitch(this,this.endEditing),1);}break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<dojo.keys.F1||e.keyCode>dojo.keys.F15)){this.beginEditing();break;}case ks.ALT:this.endEditing();break;case ks.UP_ARROW:case ks.DOWN_ARROW:case ks.LEFT_ARROW:case ks.RIGHT_ARROW:case ks.HOME:case ks.END:case ks.PAGE_UP:case ks.PAGE_DOWN:this.endEditing(true);break;case ks.CTRL:case ks.SHIFT:case ks.TAB:break;}},_onBlur:function(){this.inherited("_onBlur",arguments);this.endEditing(true);},_saveSelection:function(){this._savedSelection=this._getBookmark();},_restoreSelection:function(){if(this._savedSelection){if(dojo.withGlobal(this.window,"isCollapsed",dijit)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},_onFocus:function(){setTimeout(dojo.hitch(this,"_restoreSelection"),0);this.inherited(arguments);},onClick:function(){this.endEditing(true);this.inherited(arguments);}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var args=o.args,p;var _p=dijit._editor._Plugin;var name=args.name;switch(name){case "undo":case "redo":case "cut":case "copy":case "paste":case "insertOrderedList":case "insertUnorderedList":case "indent":case "outdent":case "justifyCenter":case "justifyFull":case "justifyLeft":case "justifyRight":case "delete":case "selectAll":case "removeFormat":case "unlink":case "insertHorizontalRule":p=new _p({command:name});break;case "bold":case "italic":case "underline":case "strikethrough":case "subscript":case "superscript":p=new _p({buttonClass:dijit.form.ToggleButton,command:name});break;case "|":p=new _p({button:new dijit.ToolbarSeparator()});}o.plugin=p;});}if(!dojo._hasResource["dojox.grid.cells.dijit"]){dojo._hasResource["dojox.grid.cells.dijit"]=true;dojo.provide("dojox.grid.cells.dijit");(function(){var dgc=dojox.grid.cells;dojo.declare("dojox.grid.cells._Widget",dgc._Base,{widgetClass:dijit.form.TextBox,constructor:function(_1b5b){this.widget=null;if(typeof this.widgetClass=="string"){dojo.deprecated("Passing a string to widgetClass is deprecated","pass the widget class object instead","2.0");this.widgetClass=dojo.getObject(this.widgetClass);}},formatEditing:function(_1b5c,_1b5d){this.needFormatNode(_1b5c,_1b5d);return "<div></div>";},getValue:function(_1b5e){return this.widget.attr("value");},setValue:function(_1b5f,_1b60){if(this.widget&&this.widget.attr){if(this.widget.onLoadDeferred){var self=this;this.widget.onLoadDeferred.addCallback(function(){self.widget.attr("value",_1b60==null?"":_1b60);});}else{this.widget.attr("value",_1b60);}}else{this.inherited(arguments);}},getWidgetProps:function(_1b62){return dojo.mixin({},this.widgetProps||{},{constraints:dojo.mixin({},this.constraint)||{},value:_1b62});},createWidget:function(_1b63,_1b64,_1b65){return new this.widgetClass(this.getWidgetProps(_1b64),_1b63);},attachWidget:function(_1b66,_1b67,_1b68){_1b66.appendChild(this.widget.domNode);this.setValue(_1b68,_1b67);},formatNode:function(_1b69,_1b6a,_1b6b){if(!this.widgetClass){return _1b6a;}if(!this.widget){this.widget=this.createWidget.apply(this,arguments);}else{this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.rowHeightChanged(_1b6b);this.focus();},sizeWidget:function(_1b6c,_1b6d,_1b6e){var p=this.getNode(_1b6e),box=dojo.contentBox(p);dojo.marginBox(this.widget.domNode,{w:box.w});},focus:function(_1b71,_1b72){if(this.widget){setTimeout(dojo.hitch(this.widget,function(){dojox.grid.util.fire(this,"focus");}),0);}},_finish:function(_1b73){this.inherited(arguments);dojox.grid.util.removeNode(this.widget.domNode);}});dgc._Widget.markupFactory=function(node,cell){dgc._Base.markupFactory(node,cell);var d=dojo;var _1b77=d.trim(d.attr(node,"widgetProps")||"");var _1b78=d.trim(d.attr(node,"constraint")||"");var _1b79=d.trim(d.attr(node,"widgetClass")||"");if(_1b77){cell.widgetProps=d.fromJson(_1b77);}if(_1b78){cell.constraint=d.fromJson(_1b78);}if(_1b79){cell.widgetClass=d.getObject(_1b79);}};dojo.declare("dojox.grid.cells.ComboBox",dgc._Widget,{widgetClass:dijit.form.ComboBox,getWidgetProps:function(_1b7a){var items=[];dojo.forEach(this.options,function(o){items.push({name:o,value:o});});var store=new dojo.data.ItemFileReadStore({data:{identifier:"name",items:items}});return dojo.mixin({},this.widgetProps||{},{value:_1b7a,store:store});},getValue:function(){var e=this.widget;e.attr("displayedValue",e.attr("displayedValue"));return e.attr("value");}});dgc.ComboBox.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);var d=dojo;var _1b82=d.trim(d.attr(node,"options")||"");if(_1b82){var o=_1b82.split(",");if(o[0]!=_1b82){cell.options=o;}}};dojo.declare("dojox.grid.cells.DateTextBox",dgc._Widget,{widgetClass:dijit.form.DateTextBox,setValue:function(_1b84,_1b85){if(this.widget){this.widget.attr("value",new Date(_1b85));}else{this.inherited(arguments);}},getWidgetProps:function(_1b86){return dojo.mixin(this.inherited(arguments),{value:new Date(_1b86)});}});dgc.DateTextBox.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.CheckBox",dgc._Widget,{widgetClass:dijit.form.CheckBox,getValue:function(){return this.widget.checked;},setValue:function(_1b89,_1b8a){if(this.widget&&this.widget.attributeMap.checked){this.widget.attr("checked",_1b8a);}else{this.inherited(arguments);}},sizeWidget:function(_1b8b,_1b8c,_1b8d){return;}});dgc.CheckBox.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.Editor",dgc._Widget,{widgetClass:dijit.Editor,getWidgetProps:function(_1b90){return dojo.mixin({},this.widgetProps||{},{height:this.widgetHeight||"100px"});},createWidget:function(_1b91,_1b92,_1b93){var _1b94=new this.widgetClass(this.getWidgetProps(_1b92),_1b91);dojo.connect(_1b94,"onLoad",dojo.hitch(this,"populateEditor"));return _1b94;},formatNode:function(_1b95,_1b96,_1b97){this.content=_1b96;this.inherited(arguments);if(dojo.isMoz){var e=this.widget;e.open();if(this.widgetToolbar){dojo.place(e.toolbar.domNode,e.editingArea,"before");}}},populateEditor:function(){this.widget.attr("value",this.content);this.widget.placeCursorAtEnd();}});dgc.Editor.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);var d=dojo;var h=dojo.trim(dojo.attr(node,"widgetHeight")||"");if(h){if((h!="auto")&&(h.substr(-2)!="em")){h=parseInt(h)+"px";}cell.widgetHeight=h;}};})();}if(!dojo._hasResource["dojo.data.ItemFileWriteStore"]){dojo._hasResource["dojo.data.ItemFileWriteStore"]=true;dojo.provide("dojo.data.ItemFileWriteStore");dojo.declare("dojo.data.ItemFileWriteStore",dojo.data.ItemFileReadStore,{constructor:function(_1b9d){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return dojo.date.stamp.toISOString(obj,{zulu:true});};}if(_1b9d&&(_1b9d.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_1b9f){if(!_1b9f){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){var _1ba0=this.getFeatures()["dojo.data.api.Identity"];return _1ba0;},newItem:function(_1ba1,_1ba2){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _1ba1!="object"&&typeof _1ba1!="undefined"){throw new Error("newItem() was passed something other than an object");}var _1ba3=null;var _1ba4=this._getIdentifierAttribute();if(_1ba4===Number){_1ba3=this._arrayOfAllItems.length;}else{_1ba3=_1ba1[_1ba4];if(typeof _1ba3==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(dojo.isArray(_1ba3)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_1ba3]==="undefined");}this._assert(typeof this._pending._newItems[_1ba3]==="undefined");this._assert(typeof this._pending._deletedItems[_1ba3]==="undefined");var _1ba5={};_1ba5[this._storeRefPropName]=this;_1ba5[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_1ba3]=_1ba5;_1ba5[_1ba4]=[_1ba3];}this._arrayOfAllItems.push(_1ba5);var pInfo=null;if(_1ba2&&_1ba2.parent&&_1ba2.attribute){pInfo={item:_1ba2.parent,attribute:_1ba2.attribute,oldValue:undefined};var _1ba7=this.getValues(_1ba2.parent,_1ba2.attribute);if(_1ba7&&_1ba7.length>0){var _1ba8=_1ba7.slice(0,_1ba7.length);if(_1ba7.length===1){pInfo.oldValue=_1ba7[0];}else{pInfo.oldValue=_1ba7.slice(0,_1ba7.length);}_1ba8.push(_1ba5);this._setValueOrValues(_1ba2.parent,_1ba2.attribute,_1ba8,false);pInfo.newValue=this.getValues(_1ba2.parent,_1ba2.attribute);}else{this._setValueOrValues(_1ba2.parent,_1ba2.attribute,_1ba5,false);pInfo.newValue=_1ba5;}}else{_1ba5[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_1ba5);}this._pending._newItems[_1ba3]=_1ba5;for(var key in _1ba1){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var value=_1ba1[key];if(!dojo.isArray(value)){value=[value];}_1ba5[key]=value;if(this.referenceIntegrity){for(var i=0;i<value.length;i++){var val=value[i];if(this.isItem(val)){this._addReferenceToMap(val,_1ba5,key);}}}}this.onNew(_1ba5,pInfo);return _1ba5;},_removeArrayElement:function(array,_1bae){var index=dojo.indexOf(array,_1bae);if(index!=-1){array.splice(index,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _1bb1=item[this._itemNumPropName];var _1bb2=this.getIdentity(item);if(this.referenceIntegrity){var _1bb3=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=dojo.clone(item[this._reverseRefMap]);}dojo.forEach(_1bb3,function(_1bb4){dojo.forEach(this.getValues(item,_1bb4),function(value){if(this.isItem(value)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(value),attr:_1bb4});this._removeReferenceFromMap(value,item,_1bb4);}},this);},this);var _1bb6=item[this._reverseRefMap];if(_1bb6){for(var _1bb7 in _1bb6){var _1bb8=null;if(this._itemsByIdentity){_1bb8=this._itemsByIdentity[_1bb7];}else{_1bb8=this._arrayOfAllItems[_1bb7];}if(_1bb8){for(var _1bb9 in _1bb6[_1bb7]){var _1bba=this.getValues(_1bb8,_1bb9)||[];var _1bbb=dojo.filter(_1bba,function(_1bbc){return !(this.isItem(_1bbc)&&this.getIdentity(_1bbc)==_1bb2);},this);this._removeReferenceFromMap(item,_1bb8,_1bb9);if(_1bbb.length<_1bba.length){this._setValueOrValues(_1bb8,_1bb9,_1bbb,true);}}}}}}this._arrayOfAllItems[_1bb1]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_1bb2];}this._pending._deletedItems[_1bb2]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_1bbe,value){return this._setValueOrValues(item,_1bbe,value,true);},setValues:function(item,_1bc1,_1bc2){return this._setValueOrValues(item,_1bc1,_1bc2,true);},unsetAttribute:function(item,_1bc4){return this._setValueOrValues(item,_1bc4,[],true);},_setValueOrValues:function(item,_1bc6,_1bc7,_1bc8){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(dojo.isString(_1bc6));this._assert(typeof _1bc7!=="undefined");var _1bc9=this._getIdentifierAttribute();if(_1bc6==_1bc9){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _1bca=this._getValueOrValues(item,_1bc6);var _1bcb=this.getIdentity(item);if(!this._pending._modifiedItems[_1bcb]){var _1bcc={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_1bcc[key]=item[key];}else{if(key===this._reverseRefMap){_1bcc[key]=dojo.clone(item[key]);}else{_1bcc[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_1bcb]=_1bcc;}var _1bce=false;if(dojo.isArray(_1bc7)&&_1bc7.length===0){_1bce=delete item[_1bc6];_1bc7=undefined;if(this.referenceIntegrity&&_1bca){var _1bcf=_1bca;if(!dojo.isArray(_1bcf)){_1bcf=[_1bcf];}for(var i=0;i<_1bcf.length;i++){var value=_1bcf[i];if(this.isItem(value)){this._removeReferenceFromMap(value,item,_1bc6);}}}}else{var _1bd2;if(dojo.isArray(_1bc7)){var _1bd3=_1bc7;_1bd2=_1bc7.slice(0,_1bc7.length);}else{_1bd2=[_1bc7];}if(this.referenceIntegrity){if(_1bca){var _1bcf=_1bca;if(!dojo.isArray(_1bcf)){_1bcf=[_1bcf];}var map={};dojo.forEach(_1bcf,function(_1bd5){if(this.isItem(_1bd5)){var id=this.getIdentity(_1bd5);map[id.toString()]=true;}},this);dojo.forEach(_1bd2,function(_1bd7){if(this.isItem(_1bd7)){var id=this.getIdentity(_1bd7);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_1bd7,item,_1bc6);}}},this);for(var rId in map){var _1bda;if(this._itemsByIdentity){_1bda=this._itemsByIdentity[rId];}else{_1bda=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_1bda,item,_1bc6);}}else{for(var i=0;i<_1bd2.length;i++){var value=_1bd2[i];if(this.isItem(value)){this._addReferenceToMap(value,item,_1bc6);}}}}item[_1bc6]=_1bd2;_1bce=true;}if(_1bc8){this.onSet(item,_1bc6,_1bca,_1bc7);}return _1bce;},_addReferenceToMap:function(_1bdb,_1bdc,_1bdd){var _1bde=this.getIdentity(_1bdc);var _1bdf=_1bdb[this._reverseRefMap];if(!_1bdf){_1bdf=_1bdb[this._reverseRefMap]={};}var _1be0=_1bdf[_1bde];if(!_1be0){_1be0=_1bdf[_1bde]={};}_1be0[_1bdd]=true;},_removeReferenceFromMap:function(_1be1,_1be2,_1be3){var _1be4=this.getIdentity(_1be2);var _1be5=_1be1[this._reverseRefMap];var _1be6;if(_1be5){for(_1be6 in _1be5){if(_1be6==_1be4){delete _1be5[_1be6][_1be3];if(this._isEmpty(_1be5[_1be6])){delete _1be5[_1be6];}}}if(this._isEmpty(_1be5)){delete _1be1[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){console.log("Item: ["+this.getIdentity(item)+"] is referenced by: "+dojo.toJson(item[this._reverseRefMap]));}}},_getValueOrValues:function(item,_1bea){var _1beb=undefined;if(this.hasAttribute(item,_1bea)){var _1bec=this.getValues(item,_1bea);if(_1bec.length==1){_1beb=_1bec[0];}else{_1beb=_1bec;}}return _1beb;},_flatten:function(value){if(this.isItem(value)){var item=value;var _1bef=this.getIdentity(item);var _1bf0={_reference:_1bef};return _1bf0;}else{if(typeof value==="object"){for(var type in this._datatypeMap){var _1bf2=this._datatypeMap[type];if(dojo.isObject(_1bf2)&&!dojo.isFunction(_1bf2)){if(value instanceof _1bf2.type){if(!_1bf2.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_1bf2.serialize(value)};}}else{if(value instanceof _1bf2){return {_type:type,_value:value.toString()};}}}}return value;}},_getNewFileContentString:function(){var _1bf3={};var _1bf4=this._getIdentifierAttribute();if(_1bf4!==Number){_1bf3.identifier=_1bf4;}if(this._labelAttr){_1bf3.label=this._labelAttr;}_1bf3.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _1bf7={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _1bf9=key;var _1bfa=this.getValues(item,_1bf9);if(_1bfa.length==1){_1bf7[_1bf9]=this._flatten(_1bfa[0]);}else{var _1bfb=[];for(var j=0;j<_1bfa.length;++j){_1bfb.push(this._flatten(_1bfa[j]));_1bf7[_1bf9]=_1bfb;}}}}_1bf3.items.push(_1bf7);}}var _1bfd=true;return dojo.toJson(_1bf3,_1bfd);},_isEmpty:function(_1bfe){var empty=true;if(dojo.isObject(_1bfe)){var i;for(i in _1bfe){empty=false;break;}}else{if(dojo.isArray(_1bfe)){if(_1bfe.length>0){empty=false;}}}return empty;},save:function(_1c01){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _1c03=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_1c01&&_1c01.onComplete){var scope=_1c01.scope||dojo.global;_1c01.onComplete.call(scope);}};var _1c05=function(err){self._saveInProgress=false;if(_1c01&&_1c01.onError){var scope=_1c01.scope||dojo.global;_1c01.onError.call(scope,err);}};if(this._saveEverything){var _1c08=this._getNewFileContentString();this._saveEverything(_1c03,_1c05,_1c08);}if(this._saveCustom){this._saveCustom(_1c03,_1c05);}if(!this._saveEverything&&!this._saveCustom){_1c03();}},revert:function(){this._assert(!this._saveInProgress);var _1c09;for(_1c09 in this._pending._modifiedItems){var _1c0a=this._pending._modifiedItems[_1c09];var _1c0b=null;if(this._itemsByIdentity){_1c0b=this._itemsByIdentity[_1c09];}else{_1c0b=this._arrayOfAllItems[_1c09];}_1c0a[this._storeRefPropName]=this;_1c0b[this._storeRefPropName]=null;var _1c0c=_1c0b[this._itemNumPropName];this._arrayOfAllItems[_1c0c]=_1c0a;if(_1c0b[this._rootItemPropName]){var i;for(i=0;i<this._arrayOfTopLevelItems.length;i++){var _1c0e=this._arrayOfTopLevelItems[i];if(this.getIdentity(_1c0e)==_1c09){this._arrayOfTopLevelItems[i]=_1c0a;break;}}}if(this._itemsByIdentity){this._itemsByIdentity[_1c09]=_1c0a;}}var _1c0f;for(_1c09 in this._pending._deletedItems){_1c0f=this._pending._deletedItems[_1c09];_1c0f[this._storeRefPropName]=this;var index=_1c0f[this._itemNumPropName];if(_1c0f["backup_"+this._reverseRefMap]){_1c0f[this._reverseRefMap]=_1c0f["backup_"+this._reverseRefMap];delete _1c0f["backup_"+this._reverseRefMap];}this._arrayOfAllItems[index]=_1c0f;if(this._itemsByIdentity){this._itemsByIdentity[_1c09]=_1c0f;}if(_1c0f[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_1c0f);}}for(_1c09 in this._pending._deletedItems){_1c0f=this._pending._deletedItems[_1c09];if(_1c0f["backupRefs_"+this._reverseRefMap]){dojo.forEach(_1c0f["backupRefs_"+this._reverseRefMap],function(_1c11){var _1c12;if(this._itemsByIdentity){_1c12=this._itemsByIdentity[_1c11.id];}else{_1c12=this._arrayOfAllItems[_1c11.id];}this._addReferenceToMap(_1c12,_1c0f,_1c11.attr);},this);delete _1c0f["backupRefs_"+this._reverseRefMap];}}for(_1c09 in this._pending._newItems){var _1c13=this._pending._newItems[_1c09];_1c13[this._storeRefPropName]=null;this._arrayOfAllItems[_1c13[this._itemNumPropName]]=null;if(_1c13[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_1c13);}if(this._itemsByIdentity){delete this._itemsByIdentity[_1c09];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _1c15=this.getIdentity(item);return new Boolean(this._pending._newItems[_1c15]||this._pending._modifiedItems[_1c15]||this._pending._deletedItems[_1c15]).valueOf();}else{if(!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)){return true;}return false;}},onSet:function(item,_1c17,_1c18,_1c19){},onNew:function(_1c1a,_1c1b){},onDelete:function(_1c1c){},close:function(_1c1d){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{if(this._jsonFileUrl!==""){throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}}});}if(!dojo._hasResource["dojox.string.Builder"]){dojo._hasResource["dojox.string.Builder"]=true;dojo.provide("dojox.string.Builder");dojox.string.Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_1c25){return this.append.apply(this,_1c25);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_1c26,_1c27){b=b.replace(_1c26,_1c27);this.length=b.length;return this;};this.remove=function(start,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,start)+b.substr(start+len);this.length=b.length;return this;};this.insert=function(index,str){if(index==0){b=str+b;}else{b=b.slice(0,index)+str+b.slice(index);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};}if(!dojo._hasResource["dojox.string.tokenize"]){dojo._hasResource["dojox.string.tokenize"]=true;dojo.provide("dojox.string.tokenize");dojox.string.tokenize=function(str,re,_1c2e,_1c2f){var _1c30=[];var match,_1c32,_1c33=0;while(match=re.exec(str)){_1c32=str.slice(_1c33,re.lastIndex-match[0].length);if(_1c32.length){_1c30.push(_1c32);}if(_1c2e){if(dojo.isOpera){var copy=match.slice(0);while(copy.length<match.length){copy.push(null);}match=copy;}var _1c35=_1c2e.apply(_1c2f,match.slice(1).concat(_1c30.length));if(typeof _1c35!="undefined"){_1c30.push(_1c35);}}_1c33=re.lastIndex;}_1c32=str.slice(_1c33);if(_1c32.length){_1c30.push(_1c32);}return _1c30;};}if(!dojo._hasResource["dojox.dtl._base"]){dojo._hasResource["dojox.dtl._base"]=true;dojo.provide("dojox.dtl._base");dojo.experimental("dojox.dtl");(function(){var dd=dojox.dtl;dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=dojo.extend(function(dict){dojo._mixin(this,dict||{});this._dicts=[];},{push:function(){var last=this;var _1c39=dojo.delegate(this);_1c39.pop=function(){return last;};return _1c39;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_1c3b){if(typeof this[key]!="undefined"){return this._normalize(this[key]);}for(var i=0,dict;dict=this._dicts[i];i++){if(typeof dict[key]!="undefined"){return this._normalize(dict[key]);}}return _1c3b;},_normalize:function(value){if(value instanceof Date){value.year=value.getFullYear();value.month=value.getMonth()+1;value.day=value.getDate();value.date=value.year+"-"+("0"+value.month).slice(-2)+"-"+("0"+value.day).slice(-2);value.hour=value.getHours();value.minute=value.getMinutes();value.second=value.getSeconds();value.microsecond=value.getMilliseconds();}return value;},update:function(dict){var _1c40=this.push();if(dict){dojo._mixin(this,dict);}return _1c40;}});var _1c41=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _1c42=/\s+/g;var split=function(_1c44,limit){_1c44=_1c44||_1c42;if(!(_1c44 instanceof RegExp)){_1c44=new RegExp(_1c44,"g");}if(!_1c44.global){throw new Error("You must use a globally flagged RegExp with split "+_1c44);}_1c44.exec("");var part,parts=[],_1c48=0,i=0;while(part=_1c44.exec(this)){parts.push(this.slice(_1c48,_1c44.lastIndex-part[0].length));_1c48=_1c44.lastIndex;if(limit&&(++i>limit-1)){break;}}parts.push(this.slice(_1c48));return parts;};dd.Token=function(_1c4a,_1c4b){this.token_type=_1c4a;this.contents=new String(dojo.trim(_1c4b));this.contents.split=split;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(limit){var bit,bits=[],i=0;limit=limit||999;while(i++<limit&&(bit=_1c41.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){bits.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){bits.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{bits.push(bit);}}}return bits;};var ddt=dd.text={_get:function(_1c51,name,_1c53){var _1c54=dd.register.get(_1c51,name.toLowerCase(),_1c53);if(!_1c54){if(!_1c53){throw new Error("No tag found for "+name);}return null;}var fn=_1c54[1];var _1c56=_1c54[2];var parts;if(fn.indexOf(":")!=-1){parts=fn.split(":");fn=parts.pop();}dojo["require"](_1c56);var _1c58=dojo.getObject(_1c56);return _1c58[fn||name]||_1c58[name+"_"]||_1c58[fn+"_"];},getTag:function(name,_1c5a){return ddt._get("tag",name,_1c5a);},getFilter:function(name,_1c5c){return ddt._get("filter",name,_1c5c);},getTemplate:function(file){return new dd.Template(ddt.getTemplateString(file));},getTemplateString:function(file){return dojo._getText(file.toString())||"";},_resolveLazy:function(_1c5f,sync,json){if(sync){if(json){return dojo.fromJson(dojo._getText(_1c5f))||{};}else{return dd.text.getTemplateString(_1c5f);}}else{return dojo.xhrGet({handleAs:(json)?"json":"text",url:_1c5f});}},_resolveTemplateArg:function(arg,sync){if(ddt._isTemplate(arg)){if(!sync){var d=new dojo.Deferred();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync);},_isTemplate:function(arg){return (typeof arg=="undefined")||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,sync){if(arg.constructor==Object){if(!sync){var d=new dojo.Deferred;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return dojox.string.tokenize(str,ddt._re,ddt._parseDelims);},_parseDelims:function(varr,load,tag){if(varr){return [dd.TOKEN_VAR,varr];}else{if(load){var parts=dojo.trim(tag).split(/\s+/g);for(var i=0,part;part=parts[i];i++){dojo["require"](part);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=dojo.extend(function(_1c70,_1c71){var str=_1c71?_1c70:ddt._resolveTemplateArg(_1c70,true)||"";var _1c73=ddt.tokenize(str);var _1c74=new dd._Parser(_1c73);this.nodelist=_1c74.parse();},{update:function(node,_1c76){return ddt._resolveContextArg(_1c76).addCallback(this,function(_1c77){var _1c78=this.render(new dd._Context(_1c77));if(node.forEach){node.forEach(function(item){item.innerHTML=_1c78;});}else{dojo.byId(node).innerHTML=_1c78;}return this;});},render:function(_1c7a,_1c7b){_1c7b=_1c7b||this.getBuffer();_1c7a=_1c7a||new dd._Context({});return this.nodelist.render(_1c7a,_1c7b)+"";},getBuffer:function(){return new dojox.string.Builder();}});var qfRe=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(dojox.string.tokenize(str,qfRe,function(token){return new dd._Filter(token);}));}};dd._QuickNodeList=dojo.extend(function(_1c7f){this.contents=_1c7f;},{render:function(_1c80,_1c81){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_1c81=_1c81.concat(this.contents[i].resolve(_1c80));}else{_1c81=_1c81.concat(this.contents[i]);}}return _1c81;},dummyRender:function(_1c84){return this.render(_1c84,dd.Template.prototype.getBuffer()).toString();},clone:function(_1c85){return this;}});dd._Filter=dojo.extend(function(token){if(!token){throw new Error("Filter must be called with variable name");}this.contents=token;var cache=this._cache[token];if(cache){this.key=cache[0];this.filters=cache[1];}else{this.filters=[];dojox.string.tokenize(token,this._re,this._tokenize,this);this._cache[token]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(typeof arguments[i]!="undefined"&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var value=arguments[pos];if(this._args[pos]=="'"){value=value.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){value=value.replace(/\\"/g,"\"");}}arg=[!this._args[pos],value];break;}}var fn=ddt.getFilter(arguments[3]);if(!dojo.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_1c8e){if(typeof this.key=="undefined"){return "";}var str=this.resolvePath(this.key,_1c8e);for(var i=0,_1c91;_1c91=this.filters[i];i++){if(_1c91[1]){if(_1c91[1][0]){str=_1c91[0](str,this.resolvePath(_1c91[1][1],_1c8e));}else{str=_1c91[0](str,_1c91[1][1]);}}else{str=_1c91[0](str);}}return str;},resolvePath:function(path,_1c93){var _1c94,parts;var first=path.charAt(0);var last=path.slice(-1);if(!isNaN(parseInt(first))){_1c94=(path.indexOf(".")==-1)?parseInt(path):parseFloat(path);}else{if(first=="\""&&first==last){_1c94=path.slice(1,-1);}else{if(path=="true"){return true;}if(path=="false"){return false;}if(path=="null"||path=="None"){return null;}parts=path.split(".");_1c94=_1c93.get(parts[0]);if(dojo.isFunction(_1c94)){var self=_1c93.getThis&&_1c93.getThis();if(_1c94.alters_data){_1c94="";}else{if(self){_1c94=_1c94.call(self);}else{_1c94="";}}}for(var i=1;i<parts.length;i++){var part=parts[i];if(_1c94){var base=_1c94;if(dojo.isObject(_1c94)&&part=="items"&&typeof _1c94[part]=="undefined"){var items=[];for(var key in _1c94){items.push([key,_1c94[key]]);}_1c94=items;continue;}if(_1c94.get&&dojo.isFunction(_1c94.get)&&_1c94.get.safe){_1c94=_1c94.get(part);}else{if(typeof _1c94[part]=="undefined"){_1c94=_1c94[part];break;}else{_1c94=_1c94[part];}}if(dojo.isFunction(_1c94)){if(_1c94.alters_data){_1c94="";}else{_1c94=_1c94.call(base);}}else{if(_1c94 instanceof Date){_1c94=dd._Context.prototype._normalize(_1c94);}}}else{return "";}}}}return _1c94;}});dd._TextNode=dd._Node=dojo.extend(function(obj){this.contents=obj;},{set:function(data){this.contents=data;return this;},render:function(_1ca0,_1ca1){return _1ca1.concat(this.contents);},isEmpty:function(){return !dojo.trim(this.contents);},clone:function(){return this;}});dd._NodeList=dojo.extend(function(nodes){this.contents=nodes||[];this.last="";},{push:function(node){this.contents.push(node);return this;},concat:function(nodes){this.contents=this.contents.concat(nodes);return this;},render:function(_1ca5,_1ca6){for(var i=0;i<this.contents.length;i++){_1ca6=this.contents[i].render(_1ca5,_1ca6);if(!_1ca6){throw new Error("Template must return buffer");}}return _1ca6;},dummyRender:function(_1ca8){return this.render(_1ca8,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=dojo.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_1caa,_1cab){var str=this.contents.resolve(_1caa);if(!str.safe){str=dd._base.escape(""+str);}return _1cab.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=dojo.extend(function(_1cad){this.contents=_1cad;},{i:0,parse:function(_1cae){var _1caf={};_1cae=_1cae||[];for(var i=0;i<_1cae.length;i++){_1caf[_1cae[i]]=true;}var _1cb1=new dd._NodeList();while(this.i<this.contents.length){token=this.contents[this.i++];if(typeof token=="string"){_1cb1.push(new dd._TextNode(token));}else{var type=token[0];var text=token[1];if(type==dd.TOKEN_VAR){_1cb1.push(new dd._VarNode(text));}else{if(type==dd.TOKEN_BLOCK){if(_1caf[text]){--this.i;return _1cb1;}var cmd=text.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_1cb1.push(fn(this,new dd.Token(type,text)));}}}}}}if(_1cae.length){throw new Error("Could not find closing tag(s): "+_1cae.toString());}this.contents.length=0;return _1cb1;},next_token:function(){var token=this.contents[this.i++];return new dd.Token(token[0],token[1]);},delete_first_token:function(){this.i++;},skip_past:function(_1cb7){while(this.i<this.contents.length){var token=this.contents[this.i++];if(token[0]==dd.TOKEN_BLOCK&&token[1]==_1cb7){return;}}throw new Error("Unclosed tag found when looking for "+_1cb7);},create_variable_node:function(expr){return new dd._VarNode(expr);},create_text_node:function(expr){return new dd._TextNode(expr||"");},getTemplate:function(file){return new dd.Template(file);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_1cbc,name){var _1cbe=dd.register._registry[_1cbc+"s"];for(var i=0,entry;entry=_1cbe[i];i++){if(typeof entry[0]=="string"){if(entry[0]==name){return entry;}}else{if(name.match(entry[0])){return entry;}}}},getAttributeTags:function(){var tags=[];var _1cc2=dd.register._registry.attributes;for(var i=0,entry;entry=_1cc2[i];i++){if(entry.length==3){tags.push(entry);}else{var fn=dojo.getObject(entry[1]);if(fn&&dojo.isFunction(fn)){entry.push(fn);tags.push(entry);}}}return tags;},_any:function(type,base,_1cc8){for(var path in _1cc8){for(var i=0,fn;fn=_1cc8[path][i];i++){var key=fn;if(dojo.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var attr=fn;if(attr.substr(0,5)=="attr:"){attr=attr.slice(5);}dd.register._registry.attributes.push([attr.toLowerCase(),base+"."+path+"."+attr]);}key=key.toLowerCase();}dd.register._registry[type].push([key,fn,base+"."+path]);}}},tags:function(base,_1ccf){dd.register._any("tags",base,_1ccf);},filters:function(base,_1cd1){dd.register._any("filters",base,_1cd1);}};var _1cd2=/&/g;var _1cd3=/</g;var _1cd4=/>/g;var _1cd5=/'/g;var _1cd6=/"/g;dd._base.escape=function(value){return dd.mark_safe(value.replace(_1cd2,"&amp;").replace(_1cd3,"&lt;").replace(_1cd4,"&gt;").replace(_1cd6,"&quot;").replace(_1cd5,"&#39;"));};dd._base.safe=function(value){if(typeof value=="string"){value=new String(value);}if(typeof value=="object"){value.safe=true;}return value;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});})();}if(!dojo._hasResource["dojox.dtl.Context"]){dojo._hasResource["dojox.dtl.Context"]=true;dojo.provide("dojox.dtl.Context");dojox.dtl.Context=dojo.extend(function(dict){this._this={};dojox.dtl._Context.call(this,dict);},dojox.dtl._Context.prototype,{getKeys:function(){var keys=[];for(var key in this){if(this.hasOwnProperty(key)&&key!="_dicts"&&key!="_this"){keys.push(key);}}return keys;},extend:function(obj){return dojo.delegate(this,obj);},filter:function(_1cdd){var _1cde=new dojox.dtl.Context();var keys=[];var i,arg;if(_1cdd instanceof dojox.dtl.Context){keys=_1cdd.getKeys();}else{if(typeof _1cdd=="object"){for(var key in _1cdd){keys.push(key);}}else{for(i=0;arg=arguments[i];i++){if(typeof arg=="string"){keys.push(arg);}}}}for(i=0,key;key=keys[i];i++){_1cde[key]=this[key];}return _1cde;},setThis:function(_this){this._this=_this;},getThis:function(){return this._this;},hasKey:function(key){if(typeof this[key]!="undefined"){return true;}for(var i=0,dict;dict=this._dicts[i];i++){if(typeof dict[key]!="undefined"){return true;}}return false;}});}if(!dojo._hasResource["dojox.dtl.dom"]){dojo._hasResource["dojox.dtl.dom"]=true;dojo.provide("dojox.dtl.dom");(function(){var dd=dojox.dtl;dd.BOOLS={checked:1,disabled:1,readonly:1};dd.TOKEN_CHANGE=-11;dd.TOKEN_ATTR=-12;dd.TOKEN_CUSTOM=-13;dd.TOKEN_NODE=1;var ddt=dd.text;var ddh=dd.dom={_attributes:{},_uppers:{},_re4:/^function anonymous\(\)\s*{\s*(.*)\s*}$/,_reTrim:/(?:^[\n\s]*(\{%)?\s*|\s*(%\})?[\n\s]*$)/g,_reSplit:/\s*%\}[\n\s]*\{%\s*/g,getTemplate:function(text){if(typeof this._commentable=="undefined"){this._commentable=false;var div=document.createElement("div");div.innerHTML="<!--Test comment handling, and long comments, using comments whenever possible.-->";if(div.childNodes.length&&div.childNodes[0].nodeType==8&&div.childNodes[0].data=="comment"){this._commentable=true;}}if(!this._commentable){text=text.replace(/<!--({({|%).*?(%|})})-->/g,"$1");}if(dojo.isIE){text=text.replace(/\b(checked|disabled|readonly|style)="/g,"t$1=\"");}text=text.replace(/\bstyle="/g,"tstyle=\"");var match;var table=dojo.isWebKit;var pairs=[[true,"select","option"],[table,"tr","td|th"],[table,"thead","tr","th"],[table,"tbody","tr","td"],[table,"table","tbody|thead|tr","tr","td"]];var _1cef=[];for(var i=0,pair;pair=pairs[i];i++){if(!pair[0]){continue;}if(text.indexOf("<"+pair[1])!=-1){var _1cf2=new RegExp("<"+pair[1]+"(?:.|\n)*?>((?:.|\n)+?)</"+pair[1]+">","ig");tagLoop:while(match=_1cf2.exec(text)){var _1cf3=pair[2].split("|");var _1cf4=[];for(var j=0,inner;inner=_1cf3[j];j++){_1cf4.push("<"+inner+"(?:.|\n)*?>(?:.|\n)*?</"+inner+">");}var tags=[];var _1cf8=dojox.string.tokenize(match[1],new RegExp("("+_1cf4.join("|")+")","ig"),function(data){var tag=/<(\w+)/.exec(data)[1];if(!tags[tag]){tags[tag]=true;tags.push(tag);}return {data:data};});if(tags.length){var tag=(tags.length==1)?tags[0]:pair[2].split("|")[0];var _1cfc=[];for(var j=0,jl=_1cf8.length;j<jl;j++){var token=_1cf8[j];if(dojo.isObject(token)){_1cfc.push(token.data);}else{var _1cff=token.replace(this._reTrim,"");if(!_1cff){continue;}token=_1cff.split(this._reSplit);for(var k=0,kl=token.length;k<kl;k++){var _1d02="";for(var p=2,pl=pair.length;p<pl;p++){if(p==2){_1d02+="<"+tag+" dtlinstruction=\"{% "+token[k].replace("\"","\\\"")+" %}\">";}else{if(tag==pair[p]){continue;}else{_1d02+="<"+pair[p]+">";}}}_1d02+="DTL";for(var p=pair.length-1;p>1;p--){if(p==2){_1d02+="</"+tag+">";}else{if(tag==pair[p]){continue;}else{_1d02+="</"+pair[p]+">";}}}_1cfc.push(""+_1cef.length);_1cef.push(_1d02);}}}text=text.replace(match[1],_1cfc.join(""));}}}}for(var i=_1cef.length;i--;){text=text.replace(""+i,_1cef[i]);}var re=/\b([a-zA-Z_:][a-zA-Z0-9_\-\.:]*)=['"]/g;while(match=re.exec(text)){var lower=match[1].toLowerCase();if(lower=="dtlinstruction"){continue;}if(lower!=match[1]){this._uppers[lower]=match[1];}this._attributes[lower]=true;}var div=document.createElement("div");div.innerHTML=text;var _1d07={nodes:[]};while(div.childNodes.length){_1d07.nodes.push(div.removeChild(div.childNodes[0]));}return _1d07;},tokenize:function(nodes){var _1d09=[];for(var i=0,node;node=nodes[i++];){if(node.nodeType!=1){this.__tokenize(node,_1d09);}else{this._tokenize(node,_1d09);}}return _1d09;},_swallowed:[],_tokenize:function(node,_1d0d){var first=false;var _1d0f=this._swallowed;var i,j,tag,child;if(!_1d0d.first){first=_1d0d.first=true;var tags=dd.register.getAttributeTags();for(i=0;tag=tags[i];i++){try{(tag[2])({swallowNode:function(){throw 1;}},new dd.Token(dd.TOKEN_ATTR,""));}catch(e){_1d0f.push(tag);}}}for(i=0;tag=_1d0f[i];i++){var text=node.getAttribute(tag[0]);if(text){var _1d0f=false;var _1d16=(tag[2])({swallowNode:function(){_1d0f=true;return node;}},new dd.Token(dd.TOKEN_ATTR,tag[0]+" "+text));if(_1d0f){if(node.parentNode&&node.parentNode.removeChild){node.parentNode.removeChild(node);}_1d0d.push([dd.TOKEN_CUSTOM,_1d16]);return;}}}var _1d17=[];if(dojo.isIE&&node.tagName=="SCRIPT"){_1d17.push({nodeType:3,data:node.text});node.text="";}else{for(i=0;child=node.childNodes[i];i++){_1d17.push(child);}}_1d0d.push([dd.TOKEN_NODE,node]);var _1d18=false;if(_1d17.length){_1d0d.push([dd.TOKEN_CHANGE,node]);_1d18=true;}for(var key in this._attributes){var clear=false;var value="";if(key=="class"){value=node.className||value;}else{if(key=="for"){value=node.htmlFor||value;}else{if(key=="value"&&node.value==node.innerHTML){continue;}else{if(node.getAttribute){value=node.getAttribute(key,2)||value;if(key=="href"||key=="src"){if(dojo.isIE){var hash=location.href.lastIndexOf(location.hash);var href=location.href.substring(0,hash).split("/");href.pop();href=href.join("/")+"/";if(value.indexOf(href)==0){value=value.replace(href,"");}value=decodeURIComponent(value);}}else{if(key=="tstyle"){clear=key;key="style";}else{if(dd.BOOLS[key.slice(1)]&&dojo.trim(value)){key=key.slice(1);}else{if(this._uppers[key]&&dojo.trim(value)){clear=this._uppers[key];}}}}}}}}if(clear){node.setAttribute(clear,"");node.removeAttribute(clear);}if(typeof value=="function"){value=value.toString().replace(this._re4,"$1");}if(!_1d18){_1d0d.push([dd.TOKEN_CHANGE,node]);_1d18=true;}_1d0d.push([dd.TOKEN_ATTR,node,key,value]);}for(i=0,child;child=_1d17[i];i++){if(child.nodeType==1){var _1d1e=child.getAttribute("dtlinstruction");if(_1d1e){child.parentNode.removeChild(child);child={nodeType:8,data:_1d1e};}}this.__tokenize(child,_1d0d);}if(!first&&node.parentNode&&node.parentNode.tagName){if(_1d18){_1d0d.push([dd.TOKEN_CHANGE,node,true]);}_1d0d.push([dd.TOKEN_CHANGE,node.parentNode]);node.parentNode.removeChild(node);}else{_1d0d.push([dd.TOKEN_CHANGE,node,true,true]);}},__tokenize:function(child,_1d20){var data=child.data;switch(child.nodeType){case 1:this._tokenize(child,_1d20);return;case 3:if(data.match(/[^\s\n]/)&&(data.indexOf("{{")!=-1||data.indexOf("{%")!=-1)){var texts=ddt.tokenize(data);for(var j=0,text;text=texts[j];j++){if(typeof text=="string"){_1d20.push([dd.TOKEN_TEXT,text]);}else{_1d20.push(text);}}}else{_1d20.push([child.nodeType,child]);}if(child.parentNode){child.parentNode.removeChild(child);}return;case 8:if(data.indexOf("{%")==0){var text=dojo.trim(data.slice(2,-2));if(text.substr(0,5)=="load "){var parts=dojo.trim(text).split(/\s+/g);for(var i=1,part;part=parts[i];i++){dojo["require"](part);}}_1d20.push([dd.TOKEN_BLOCK,text]);}if(data.indexOf("{{")==0){_1d20.push([dd.TOKEN_VAR,dojo.trim(data.slice(2,-2))]);}if(child.parentNode){child.parentNode.removeChild(child);}return;}}};dd.DomTemplate=dojo.extend(function(obj){if(!obj.nodes){var node=dojo.byId(obj);if(node&&node.nodeType==1){dojo.forEach(["class","src","href","name","value"],function(item){ddh._attributes[item]=true;});obj={nodes:[node]};}else{if(typeof obj=="object"){obj=ddt.getTemplateString(obj);}obj=ddh.getTemplate(obj);}}var _1d2b=ddh.tokenize(obj.nodes);if(dd.tests){this.tokens=_1d2b.slice(0);}var _1d2c=new dd._DomParser(_1d2b);this.nodelist=_1d2c.parse();},{_count:0,_re:/\bdojo:([a-zA-Z0-9_]+)\b/g,setClass:function(str){this.getRootNode().className=str;},getRootNode:function(){return this.buffer.rootNode;},getBuffer:function(){return new dd.DomBuffer();},render:function(_1d2e,_1d2f){_1d2f=this.buffer=_1d2f||this.getBuffer();this.rootNode=null;var _1d30=this.nodelist.render(_1d2e||new dd.Context({}),_1d2f);for(var i=0,node;node=_1d2f._cache[i];i++){if(node._cache){node._cache.length=0;}}return _1d30;},unrender:function(_1d33,_1d34){return this.nodelist.unrender(_1d33,_1d34);}});dd.DomBuffer=dojo.extend(function(_1d35){this._parent=_1d35;this._cache=[];},{concat:function(node){var _1d37=this._parent;if(_1d37&&node.parentNode&&node.parentNode===_1d37&&!_1d37._dirty){return this;}if(node.nodeType==1&&!this.rootNode){this.rootNode=node||true;return this;}if(!_1d37){if(node.nodeType==3&&dojo.trim(node.data)){throw new Error("Text should not exist outside of the root node in template");}return this;}if(this._closed){if(node.nodeType==3&&!dojo.trim(node.data)){return this;}else{throw new Error("Content should not exist outside of the root node in template");}}if(_1d37._dirty){if(node._drawn&&node.parentNode==_1d37){var _1d38=_1d37._cache;if(_1d38){for(var i=0,cache;cache=_1d38[i];i++){this.onAddNode&&this.onAddNode(cache);_1d37.insertBefore(cache,node);this.onAddNodeComplete&&this.onAddNodeComplete(cache);}_1d38.length=0;}}_1d37._dirty=false;}if(!_1d37._cache){_1d37._cache=[];this._cache.push(_1d37);}_1d37._dirty=true;_1d37._cache.push(node);return this;},remove:function(obj){if(typeof obj=="string"){if(this._parent){this._parent.removeAttribute(obj);}}else{if(obj.nodeType==1&&!this.getRootNode()&&!this._removed){this._removed=true;return this;}if(obj.parentNode){this.onRemoveNode&&this.onRemoveNode(obj);if(obj.parentNode){obj.parentNode.removeChild(obj);}}}return this;},setAttribute:function(key,value){var old=dojo.attr(this._parent,key);if(this.onChangeAttribute&&old!=value){this.onChangeAttribute(this._parent,key,old,value);}if(key=="style"){this._parent.style.cssText=value;}else{dojo.attr(this._parent,key,value);}return this;},addEvent:function(_1d3f,type,fn,args){if(!_1d3f.getThis()){throw new Error("You must use Context.setObject(instance)");}this.onAddEvent&&this.onAddEvent(this.getParent(),type,fn);var _1d43=fn;if(dojo.isArray(args)){_1d43=function(e){this[fn].apply(this,[e].concat(args));};}return dojo.connect(this.getParent(),type,_1d3f.getThis(),_1d43);},setParent:function(node,up,root){if(!this._parent){this._parent=this._first=node;}if(up&&root&&node===this._first){this._closed=true;}if(up){var _1d48=this._parent;var _1d49="";var ie=dojo.isIE&&_1d48.tagName=="SCRIPT";if(ie){_1d48.text="";}if(_1d48._dirty){var _1d4b=_1d48._cache;var _1d4c=(_1d48.tagName=="SELECT"&&!_1d48.options.length);for(var i=0,cache;cache=_1d4b[i];i++){if(cache!==_1d48){this.onAddNode&&this.onAddNode(cache);if(ie){_1d49+=cache.data;}else{_1d48.appendChild(cache);if(_1d4c&&cache.defaultSelected&&i){_1d4c=i;}}this.onAddNodeComplete&&this.onAddNodeComplete(cache);}}if(_1d4c){_1d48.options.selectedIndex=(typeof _1d4c=="number")?_1d4c:0;}_1d4b.length=0;_1d48._dirty=false;}if(ie){_1d48.text=_1d49;}}this._parent=node;this.onSetParent&&this.onSetParent(node,up,root);return this;},getParent:function(){return this._parent;},getRootNode:function(){return this.rootNode;}});dd._DomNode=dojo.extend(function(node){this.contents=node;},{render:function(_1d50,_1d51){this._rendered=true;return _1d51.concat(this.contents);},unrender:function(_1d52,_1d53){if(!this._rendered){return _1d53;}this._rendered=false;return _1d53.remove(this.contents);},clone:function(_1d54){return new this.constructor(this.contents);}});dd._DomNodeList=dojo.extend(function(nodes){this.contents=nodes||[];},{push:function(node){this.contents.push(node);},unshift:function(node){this.contents.unshift(node);},render:function(_1d58,_1d59,_1d5a){_1d59=_1d59||dd.DomTemplate.prototype.getBuffer();if(_1d5a){var _1d5b=_1d59.getParent();}for(var i=0;i<this.contents.length;i++){_1d59=this.contents[i].render(_1d58,_1d59);if(!_1d59){throw new Error("Template node render functions must return their buffer");}}if(_1d5b){_1d59.setParent(_1d5b);}return _1d59;},dummyRender:function(_1d5d,_1d5e,_1d5f){var div=document.createElement("div");var _1d61=_1d5e.getParent();var old=_1d61._clone;_1d61._clone=div;var _1d63=this.clone(_1d5e,div);if(old){_1d61._clone=old;}else{_1d61._clone=null;}_1d5e=dd.DomTemplate.prototype.getBuffer();_1d63.unshift(new dd.ChangeNode(div));_1d63.unshift(new dd._DomNode(div));_1d63.push(new dd.ChangeNode(div,true));_1d63.render(_1d5d,_1d5e);if(_1d5f){return _1d5e.getRootNode();}var html=div.innerHTML;return (dojo.isIE)?html.replace(/\s*_(dirty|clone)="[^"]*"/g,""):html;},unrender:function(_1d65,_1d66,_1d67){if(_1d67){var _1d68=_1d66.getParent();}for(var i=0;i<this.contents.length;i++){_1d66=this.contents[i].unrender(_1d65,_1d66);if(!_1d66){throw new Error("Template node render functions must return their buffer");}}if(_1d68){_1d66.setParent(_1d68);}return _1d66;},clone:function(_1d6a){var _1d6b=_1d6a.getParent();var _1d6c=this.contents;var _1d6d=new dd._DomNodeList();var _1d6e=[];for(var i=0;i<_1d6c.length;i++){var clone=_1d6c[i].clone(_1d6a);if(clone instanceof dd.ChangeNode||clone instanceof dd._DomNode){var item=clone.contents._clone;if(item){clone.contents=item;}else{if(_1d6b!=clone.contents&&clone instanceof dd._DomNode){var node=clone.contents;clone.contents=clone.contents.cloneNode(false);_1d6a.onClone&&_1d6a.onClone(node,clone.contents);_1d6e.push(node);node._clone=clone.contents;}}}_1d6d.push(clone);}for(var i=0,clone;clone=_1d6e[i];i++){clone._clone=null;}return _1d6d;},rtrim:function(){while(1){var i=this.contents.length-1;if(this.contents[i] instanceof dd._DomTextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._DomVarNode=dojo.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_1d75,_1d76){var str=this.contents.resolve(_1d75);var type="text";if(str){if(str.render&&str.getRootNode){type="injection";}else{if(str.safe){if(str.nodeType){type="node";}else{if(str.toString){str=str.toString();type="html";}}}}}if(this._type&&type!=this._type){this.unrender(_1d75,_1d76);}this._type=type;switch(type){case "text":this._rendered=true;this._txt=this._txt||document.createTextNode(str);if(this._txt.data!=str){var old=this._txt.data;this._txt.data=str;_1d76.onChangeData&&_1d76.onChangeData(this._txt,old,this._txt.data);}return _1d76.concat(this._txt);case "injection":var root=str.getRootNode();if(this._rendered&&root!=this._root){_1d76=this.unrender(_1d75,_1d76);}this._root=root;var _1d7b=this._injected=new dd._DomNodeList();_1d7b.push(new dd.ChangeNode(_1d76.getParent()));_1d7b.push(new dd._DomNode(root));_1d7b.push(str);_1d7b.push(new dd.ChangeNode(_1d76.getParent()));this._rendered=true;return _1d7b.render(_1d75,_1d76);case "node":this._rendered=true;if(this._node&&this._node!=str&&this._node.parentNode&&this._node.parentNode===_1d76.getParent()){this._node.parentNode.removeChild(this._node);}this._node=str;return _1d76.concat(str);case "html":if(this._rendered&&this._src!=str){_1d76=this.unrender(_1d75,_1d76);}this._src=str;if(!this._rendered){this._rendered=true;this._html=this._html||[];var div=(this._div=this._div||document.createElement("div"));div.innerHTML=str;var _1d7d=div.childNodes;while(_1d7d.length){var _1d7e=div.removeChild(_1d7d[0]);this._html.push(_1d7e);_1d76=_1d76.concat(_1d7e);}}return _1d76;default:return _1d76;}},unrender:function(_1d7f,_1d80){if(!this._rendered){return _1d80;}this._rendered=false;switch(this._type){case "text":return _1d80.remove(this._txt);case "injection":return this._injection.unrender(_1d7f,_1d80);case "node":if(this._node.parentNode===_1d80.getParent()){return _1d80.remove(this._node);}return _1d80;case "html":for(var i=0,l=this._html.length;i<l;i++){_1d80=_1d80.remove(this._html[i]);}return _1d80;default:return _1d80;}},clone:function(){return new this.constructor(this.contents.getExpression());}});dd.ChangeNode=dojo.extend(function(node,up,root){this.contents=node;this.up=up;this.root=root;},{render:function(_1d86,_1d87){return _1d87.setParent(this.contents,this.up,this.root);},unrender:function(_1d88,_1d89){if(!_1d89.getParent()){return _1d89;}return _1d89.setParent(this.contents);},clone:function(){return new this.constructor(this.contents,this.up,this.root);}});dd.AttributeNode=dojo.extend(function(key,value){this.key=key;this.value=value;this.contents=value;if(this._pool[value]){this.nodelist=this._pool[value];}else{if(!(this.nodelist=dd.quickFilter(value))){this.nodelist=(new dd.Template(value,true)).nodelist;}this._pool[value]=this.nodelist;}this.contents="";},{_pool:{},render:function(_1d8c,_1d8d){var key=this.key;var value=this.nodelist.dummyRender(_1d8c);if(dd.BOOLS[key]){value=!(value=="false"||value=="undefined"||!value);}if(value!==this.contents){this.contents=value;return _1d8d.setAttribute(key,value);}return _1d8d;},unrender:function(_1d90,_1d91){this.contents="";return _1d91.remove(this.key);},clone:function(_1d92){return new this.constructor(this.key,this.value);}});dd._DomTextNode=dojo.extend(function(str){this.contents=document.createTextNode(str);this.upcoming=str;},{set:function(data){this.upcoming=data;return this;},render:function(_1d95,_1d96){if(this.contents.data!=this.upcoming){var old=this.contents.data;this.contents.data=this.upcoming;_1d96.onChangeData&&_1d96.onChangeData(this.contents,old,this.upcoming);}return _1d96.concat(this.contents);},unrender:function(_1d98,_1d99){return _1d99.remove(this.contents);},isEmpty:function(){return !dojo.trim(this.contents.data);},clone:function(){return new this.constructor(this.contents.data);}});dd._DomParser=dojo.extend(function(_1d9a){this.contents=_1d9a;},{i:0,parse:function(_1d9b){var _1d9c={};var _1d9d=this.contents;if(!_1d9b){_1d9b=[];}for(var i=0;i<_1d9b.length;i++){_1d9c[_1d9b[i]]=true;}var _1d9f=new dd._DomNodeList();while(this.i<_1d9d.length){var token=_1d9d[this.i++];var type=token[0];var value=token[1];if(type==dd.TOKEN_CUSTOM){_1d9f.push(value);}else{if(type==dd.TOKEN_CHANGE){var _1da3=new dd.ChangeNode(value,token[2],token[3]);value[_1da3.attr]=_1da3;_1d9f.push(_1da3);}else{if(type==dd.TOKEN_ATTR){var fn=ddt.getTag("attr:"+token[2],true);if(fn&&token[3]){if(token[3].indexOf("{%")!=-1||token[3].indexOf("{{")!=-1){value.setAttribute(token[2],"");}_1d9f.push(fn(null,new dd.Token(type,token[2]+" "+token[3])));}else{if(dojo.isString(token[3])){if(token[2]=="style"||token[3].indexOf("{%")!=-1||token[3].indexOf("{{")!=-1){_1d9f.push(new dd.AttributeNode(token[2],token[3]));}else{if(dojo.trim(token[3])){try{dojo.attr(value,token[2],token[3]);}catch(e){}}}}}}else{if(type==dd.TOKEN_NODE){var fn=ddt.getTag("node:"+value.tagName.toLowerCase(),true);if(fn){_1d9f.push(fn(null,new dd.Token(type,value),value.tagName.toLowerCase()));}_1d9f.push(new dd._DomNode(value));}else{if(type==dd.TOKEN_VAR){_1d9f.push(new dd._DomVarNode(value));}else{if(type==dd.TOKEN_TEXT){_1d9f.push(new dd._DomTextNode(value.data||value));}else{if(type==dd.TOKEN_BLOCK){if(_1d9c[value]){--this.i;return _1d9f;}var cmd=value.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(typeof fn!="function"){throw new Error("Function not found for "+cmd);}var tpl=fn(this,new dd.Token(type,value));if(tpl){_1d9f.push(tpl);}}}}}}}}}}if(_1d9b.length){throw new Error("Could not find closing tag(s): "+_1d9b.toString());}return _1d9f;},next_token:function(){var token=this.contents[this.i++];return new dd.Token(token[0],token[1]);},delete_first_token:function(){this.i++;},skip_past:function(_1da8){return dd._Parser.prototype.skip_past.call(this,_1da8);},create_variable_node:function(expr){return new dd._DomVarNode(expr);},create_text_node:function(expr){return new dd._DomTextNode(expr||"");},getTemplate:function(loc){return new dd.DomTemplate(ddh.getTemplate(loc));}});})();}if(!dojo._hasResource["dojox.dtl.html"]){dojo._hasResource["dojox.dtl.html"]=true;dojo.provide("dojox.dtl.html");dojo.deprecated("dojox.dtl.html","All packages and classes in dojox.dtl that start with Html or html have been renamed to Dom or dom");dojox.dtl.HtmlTemplate=dojox.dtl.DomTemplate;}if(!dojo._hasResource["nox.ext.apps.vmanui.BoundedDialog"]){dojo._hasResource["nox.ext.apps.vmanui.BoundedDialog"]=true;dojo.provide("nox.ext.apps.vmanui.BoundedDialog");dojo.declare("nox.ext.apps.vmanui.BoundedDialog",[dijit.Dialog],{_endDrag:function(e){this.inherited(arguments);if(e&&e.node&&e.node===this.domNode){if(this._relativePosition.t<0){this._relativePosition.t=0;dojo.style(e.node,{top:0});}}}});}if(!dojo._hasResource["nox.ext.apps.vmanui.RemoteAddressEditor"]){dojo._hasResource["nox.ext.apps.vmanui.RemoteAddressEditor"]=true;dojo.provide("nox.ext.apps.vmanui.RemoteAddressEditor");dojo.declare("nox.ext.apps.vmanui.RemoteAddressEditor",nox.ext.apps.vmanui.BoundedDialog,{templateString:"<div class=\"dijitDialog selectRemoteAddressDialog\" tabindex=\"-1\" waiState=\"labelledby-${id}_title\">\n  <div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\">\n    <span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\n    <span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"onclick: onCancel\" title=\"${buttonCancel}\">\n      <span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n    </span>\n  </div>\n  <div dojoAttachPoint=\"containerNode\" >\n    <div dojoAttachPoint=\"layoutContainer\" style=\"height:480px;width:500px\" dojoType=\"dijit.layout.BorderContainer\" design=\"headline\" gutters=\"false\">\n      <div dojoType=\"dijit.layout.BorderContainer\" design=\"sidebar\" region=\"center\" class=\"contentContainer\" gutters=\"false\">\n        <div dojoAttachPoint=\"left\" class=\"sideContainer\" region=\"left\" style=\"height: 381px; width: 200px;\" dojoType=\"dijit.layout.BorderContainer\" design=\"headline\" gutters=\"false\">\n          <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" class=\"tableHeader\">\n              Other Address Groups\n          </div>\n          <!-- list goes here -->\n\n          <div dojoType=\"dijit.layout.ContentPane\" minSize=35 region=\"bottom\" class=\"bottomPane\"></div>\n        </div>\n        <div dojoAttachPoint=\"center\" region=\"center\" dojoType=\"dijit.layout.ContentPane\" class=\"middleButtonContainer\">\n          <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"addOne\" dojoAttachEvent=\"onClick: onAddOne\">&#62;&#62;</button>\n          <br/>\n          <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"remOne\" dojoAttachEvent=\"onClick: onRemOne\">&#60;&#60;</button>\n          <br/>\n          <hr>\n          <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"addAll\" dojoAttachEvent=\"onClick: onAddAll\">All &#62;&#62;</button>\n          <br/>\n          <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"remAll\" dojoAttachEvent=\"onClick: onRemAll\">&#60;&#60; All</button>\n        </div>\n        <div dojoAttachPoint=\"right\" class=\"sideContainer\" region=\"right\" style=\"height: 381px; width: 200px;\" dojoType=\"dijit.layout.BorderContainer\" design=\"headline\" gutters=\"false\">\n          <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" class=\"tableHeader\">\n              Selected Address Groups\n          </div>\n          <!-- list goes here -->\n          <!--\n          <div dojoType=\"dijit.layout.ContentPane\" region=\"center\">\n            <select multiple=\"true\" dojoAttachPoint=\"allGroups\" class=\"item-list-editor-list\"></select>\n          </div>\n          -->\n          <div dojoType=\"dijit.layout.ContentPane\" minSize=35 region=\"bottom\" class=\"bottomPane\">\n            <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"position:absolute; top: 3px;\">\n              <tr>\n                <td width=\"70%\" style=\"padding-right: 5px;\">\n                  <input type=\"text\" dojoType=\"nox.ext.apps.vmanui.regex.NetworkTextBox\" dojoAttachPoint=\"quickAddText\" dojoAttachEvent=\"onFocus: onQuickAddTextFocus, onBlur: onQuickAddTextBlur\" value=\"${quickAddDefaultText}\"/>\n                </td>\n                <td>    \n                  <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"quickAddButton\" dojoAttachEvent=\"onClick: onQuickAddClicked\" >Add</button>\n                </td> \n              </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <div dojoType=\"dijit.layout.ContentPane\" region=\"bottom\">\n        <div class=\"dialogButtonContainer\">\n<!--\n          <div style=\"text-align: left;\"> \n            <input dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"invert_radio\" /> \n            Invert Selection: Match address EXCEPT those selected. \n          </div> \n-->\n          <button class=\"blueButton\" dojoType=\"dijit.form.Button\" dojoAttachPoint=\"doneButton\" dojoAttachEvent=\"onClick: onExecute\">Done</button>\n          <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"cancelButton\" dojoAttachEvent=\"onClick: onCancel\">Cancel</button>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n",widgetsInTemplate:true,quickAddDefaultText:"",buttonCancel:"",layoutContainer:null,policy_manager:null,acl_widget:null,postMixInProperties:function(){this.allStore=this.policy_manager.getNWAddrGroupStore();var _1dad=[];var _1dae=this.acl_widget.acl.remote_groups;var i;for(i=0;i<_1dae.length;i++){var g_uid=_1dae[i];var _1db1=this.policy_manager.getNWAddrGroup(g_uid).name;_1dad.push({uid:g_uid,name:_1db1,type:"group"});}var _1db2=this.acl_widget.acl.remote_customs;for(i=0;i<_1db2.length;i++){var c=_1db2[i];_1dad.push({uid:c,name:c,type:"custom"});}this.selectedStore=new dojo.data.ItemFileReadStore({data:{identifier:"uid",label:"name",items:_1dad}});},postCreate:function(){this.inherited(arguments);var d1=new dojo.Deferred();var d2=new dojo.Deferred();var dl=new dojo.DeferredList([d1,d2]);dl.addCallback(this,function(_1db7){var _1db8=_1db7[0][1];var _1db9=_1db7[1][1];var _1dba=dojo.hitch(this,function(_1dbb){var _1dbc=false;dojo.forEach(_1db9,function(item){if(this.selectedStore.isItem(item)&&this.allStore.isItem(_1dbb)&&this.selectedStore.getValue(item,"uid")==this.allStore.getValue(_1dbb,"uid")){_1dbc=true;}},this);return _1dbc;});var _1dbe=[];var i,item;dojo.forEach(_1db8,function(item){if(!_1dba(item)){_1dbe.push(item);}});this.tempAllStore=new dojo.data.ItemFileWriteStore({data:{items:_1dbe}});var _1dc2=[{name:"Groups",field:"name",width:"100%",editable:false,type:dojox.grid.cells._Widget}];var _1dc3=this.leftGrid=new dojox.grid.DataGrid({store:this.tempAllStore,query:{},structure:_1dc2,region:"center"});this.left.addChild(_1dc3);_1dc3.startup();_1dbe=[];dojo.forEach(_1db9,function(item){_1dbe.push(item);});this.tempSelectedStore=new dojo.data.ItemFileWriteStore({data:{items:_1dbe}});var _1dc5=[{name:"Groups",field:"name",width:"100%"}];var _1dc6=this.rightGrid=new dojox.grid.DataGrid({store:this.tempSelectedStore,query:{},structure:_1dc5,region:"center"});this.right.addChild(_1dc6);_1dc6.startup();this.layoutContainer.resize();});this.allStore.fetch({query:{},onComplete:function(items){d1.callback(items);},onError:function(){nox.ext.apps.vmanui.main.vmanui_error("Error loading all address data");}});this.selectedStore.fetch({query:{},onComplete:function(items){d2.callback(items);},onError:function(e){nox.ext.apps.vmanui.main.vmanui_error("Error loading selected address data");}});var _1dca=this.acl_widget.acl.invert_remote_addresses;},_moveItems:function(grid,_1dcc,_1dcd,_1dce){var _1dcf=grid.selection.getSelected();dojo.forEach(_1dcf,function(item){if(!_1dce||item.type=="group"){var _1dd1={"uid":_1dcc.getValue(item,"uid"),"name":_1dcc.getValue(item,"name"),"type":"group"};_1dcd.newItem(_1dd1);}_1dcc.deleteItem(item);});_1dcd.save();_1dcc.save();},_moveAll:function(_1dd2,_1dd3,_1dd4){_1dd2.fetch({query:{},onComplete:function(items){dojo.forEach(items,function(item){if(!_1dd4||item.type=="group"){var _1dd7={"uid":_1dd2.getValue(item,"uid"),"name":_1dd2.getValue(item,"name"),"type":"group"};_1dd3.newItem(_1dd7);}_1dd2.deleteItem(item);});_1dd3.save();_1dd2.save();}});},onAddOne:function(){this._moveItems(this.leftGrid,this.tempAllStore,this.tempSelectedStore,false);},onRemOne:function(){this._moveItems(this.rightGrid,this.tempSelectedStore,this.tempAllStore,true);},onAddAll:function(){this._moveAll(this.tempAllStore,this.tempSelectedStore,false);},onRemAll:function(){this._moveAll(this.tempSelectedStore,this.tempAllStore,true);},_hasAddress:function(name){var bDup=false;this.tempSelectedStore.fetch({query:{},onItem:function(item){if(item.name==name){bDup=true;}}});return bDup;},_addNameToStore:function(name){if(this._hasAddress(name)){return;}this.tempSelectedStore.newItem({uid:name,name:name,type:"custom"});},onQuickAddTextFocus:function(){var text=dojo.trim(this.quickAddText.attr("value"));if(text==this.quickAddDefaultText){this.quickAddText.attr("value","");this.quickAddText.focus();}},onQuickAddTextBlur:function(){var text=dojo.trim(this.quickAddText.attr("value"));if(text.length===0){this.quickAddText.attr("value",this.quickAddDefaultText);}},onQuickAddClicked:function(){if(!this.quickAddText.isValid()){return;}var text=dojo.trim(this.quickAddText.attr("value"));if(text!=this.quickAddDefaultText&&text.length>0){var names=text.split(/\s*,\s*/);dojo.forEach(names,this._addNameToStore,this);}this.quickAddText.attr("value",this.quickAddDefaultText);},onExecute:function(){this.tempSelectedStore.fetch({query:{},onComplete:dojo.hitch(this,function(items){var _1de1=[];var _1de2=[];for(var i=0;i<items.length;i++){var type=this.tempSelectedStore.getValue(items[i],"type");var uid=this.tempSelectedStore.getValue(items[i],"uid");if(type=="group"){_1de2.push(uid);}else{_1de1.push(uid);}}var role=this.acl_widget.role_widget.get_role();var acl=this.acl_widget.acl;acl.remote_customs=_1de1;acl.remote_groups=_1de2;acl.invert_remote_addresses=false;role.acl_rules[acl.ui_index]=acl;this.policy_manager.setRole(role);this.acl_widget.role_widget.redraw_acls();})});this.hide();},hide:function(){this.inherited(arguments);this.destroyRecursive();}});}if(!dojo._hasResource["dijit.form.Textarea"]){dojo._hasResource["dijit.form.Textarea"]=true;dojo.provide("dijit.form.Textarea");dojo.declare("dijit.form.Textarea",dijit.form.SimpleTextarea,{cols:"",_previousNewlines:0,_strictMode:(dojo.doc.compatMode!="BackCompat"),_getHeight:function(_1de8){var newH=_1de8.scrollHeight;if(dojo.isIE){newH+=_1de8.offsetHeight-_1de8.clientHeight-((dojo.isIE<8&&this._strictMode)?dojo._getPadBorderExtents(_1de8).h:0);}else{if(dojo.isMoz){newH+=_1de8.offsetHeight-_1de8.clientHeight;}else{if(dojo.isWebKit&&!(dojo.isSafari<4)){newH+=dojo._getBorderExtents(_1de8).h;}else{newH+=dojo._getPadBorderExtents(_1de8).h;}}}return newH;},_estimateHeight:function(_1dea){_1dea.style.maxHeight="";_1dea.style.height="auto";_1dea.rows=(_1dea.value.match(/\n/g)||[]).length+1;},_needsHelpShrinking:dojo.isMoz||dojo.isWebKit,_onInput:function(){this.inherited(arguments);if(this._busyResizing){return;}this._busyResizing=true;var _1deb=this.textbox;if(_1deb.scrollHeight){var newH=this._getHeight(_1deb)+"px";if(_1deb.style.height!=newH){_1deb.style.maxHeight=_1deb.style.height=newH;}if(this._needsHelpShrinking){if(this._setTimeoutHandle){clearTimeout(this._setTimeoutHandle);}this._setTimeoutHandle=setTimeout(dojo.hitch(this,"_shrink"),0);}}else{this._estimateHeight(_1deb);}this._busyResizing=false;},_busyResizing:false,_shrink:function(){this._setTimeoutHandle=null;if(this._needsHelpShrinking&&!this._busyResizing){this._busyResizing=true;var _1ded=this.textbox;var empty=false;if(_1ded.value==""){_1ded.value=" ";empty=true;}var _1def=_1ded.scrollHeight;if(!_1def){this._estimateHeight(_1ded);}else{var _1df0=_1ded.style.paddingBottom;var _1df1=dojo._getPadExtents(_1ded);_1df1=_1df1.h-_1df1.t;_1ded.style.paddingBottom=_1df1+1+"px";var newH=this._getHeight(_1ded)-1+"px";if(_1ded.style.maxHeight!=newH){_1ded.style.paddingBottom=_1df1+_1def+"px";_1ded.scrollTop=0;_1ded.style.maxHeight=this._getHeight(_1ded)-_1def+"px";}_1ded.style.paddingBottom=_1df0;}if(empty){_1ded.value="";}this._busyResizing=false;}},resize:function(){this._onInput();},_setValueAttr:function(){this.inherited(arguments);this.resize();},postCreate:function(){this.inherited(arguments);dojo.style(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.connect(this.textbox,"onscroll",this._onInput);this.connect(this.textbox,"onresize",this._onInput);this.connect(this.textbox,"onfocus",this._onInput);setTimeout(dojo.hitch(this,"resize"),0);}});}if(!dojo._hasResource["nox.ext.apps.vmanui.menu_creator"]){dojo._hasResource["nox.ext.apps.vmanui.menu_creator"]=true;dojo.provide("nox.ext.apps.vmanui.menu_creator");dojo.declare("nox.ext.apps.vmanui.MenuCreator",null,{_insert_into_rules:function(acl,index,role,type){var _1df7=role.acl_rules;if(index==_1df7.length){_1df7.push(acl);}else{var _1df8=[];for(var i=0;i<_1df7.length;i++){if(i==index){_1df8.push(acl);}_1df8.push(_1df7[i]);}role.acl_rules=_1df8;}if(type=="before"){role.acl_split_before++;}},_change_role:function(pm,role,_1dfc){pm.setRole(role);_1dfc.redraw_acls();dojo.behavior.apply();},change_protocol_for_acl:function(_1dfd,_1dfe){var _1dff=_1dfe.role_widget;var index=_1dfe.acl.ui_index;var role=_1dff.role;var pm=_1dff.policy_manager;role.acl_rules[index].protocol_uid=_1dfd;this._change_role(pm,role,_1dfe.role_widget);},_add_acl_from_modify_menu:function(_1e03,pm,dir,_1e06){var index=null;var type=null;var role=_1e03.role_widget.get_role();if(_1e03.acl){type=_1e03.type;index=_1e03.acl.ui_index;if(_1e06){++index;}}else{index=role.acl_split_before;type=(_1e06)?"after":"before";}this._add_acl(pm,role,index,type,dir,_1e03.role_widget);},_add_acl_from_header_menu:function(_1e0a,pm,dir,type){var role=_1e0a.get_role();var index=0;if(type=="after"){index=role.acl_split_before;}this._add_acl(pm,role,index,type,dir,_1e0a);},_add_acl:function(pm,role,index,type,dir,_1e15){var acl=pm._make_acl(dir,"");this._insert_into_rules(acl,index,role,type);this._change_role(pm,role,_1e15);},_move_acl:function(_1e17,pm,is_up){var role=_1e17.role_widget.get_role();var acl=_1e17.acl;var index=acl.ui_index;var tmp=null;if(is_up){if(index==role.acl_split_before){role.acl_split_before++;}else{if(index===0){nox.ext.apps.vmanui.main.console_log("error, can't move top ACL up");return;}else{tmp=role.acl_rules[index-1];role.acl_rules[index-1]=role.acl_rules[index];role.acl_rules[index]=tmp;}}}else{if(index==(role.acl_split_before-1)){role.acl_split_before--;}else{if(index==(role.acl_rules.length-1)){nox.ext.apps.vmanui.main.console_log("error, can't move bottom ACL down");return;}else{tmp=role.acl_rules[index+1];role.acl_rules[index+1]=role.acl_rules[index];role.acl_rules[index]=tmp;}}}this._change_role(pm,role,_1e17.role_widget);},_delete_acl:function(_1e1e,pm){var role=_1e1e.role_widget.get_role();var index=_1e1e.acl.ui_index;var _1e22=[];for(var i=0;i<role.acl_rules.length;i++){if(i!=index){_1e22.push(role.acl_rules[i]);}}role.acl_rules=_1e22;if(index<role.acl_split_before){role.acl_split_before--;}this._change_role(pm,role,_1e1e.role_widget);},create_simple_acl_menu:function(_1e24,_1e25,pm,_1e27){var menu=new dijit.Menu({targetNodeIds:[_1e24],leftClickToOpen:true});menu.role_widget=_1e25;menu.policy_manager=pm;if(_1e25.is_vif_role()){menu.addChild(new dijit.MenuItem({label:"Add New ACL",onClick:dojo.hitch(this,function(menu,e){this._add_acl_from_header_menu(menu.role_widget,menu.policy_manager,"both","before");},menu)}));}else{if(_1e27!="before"){menu.addChild(new dijit.MenuItem({label:"Add New Mandatory ACL",onClick:dojo.hitch(this,function(menu,e){this._add_acl_from_header_menu(menu.role_widget,menu.policy_manager,"both","before");},menu)}));}if(_1e27!="after"){menu.addChild(new dijit.MenuItem({label:"Add New Default ACL",onClick:dojo.hitch(this,function(menu,e){this._add_acl_from_header_menu(menu.role_widget,menu.policy_manager,"both","after");},menu)}));}}this.attach_menu_listeners(menu);menu.startup();return menu;},create_modify_menu:function(_1e2f,_1e30,pm){var menu=new dijit.Menu({targetNodeIds:[_1e2f],leftClickToOpen:true});menu.acl_widget=_1e30;menu.policy_manager=pm;menu.addChild(new dijit.MenuItem({label:"Add New ACL Above",onClick:dojo.hitch(this,function(menu,e){this._add_acl_from_modify_menu(menu.acl_widget,menu.policy_manager,"both",false);},menu)}));menu.addChild(new dijit.MenuItem({label:"Add New ACL Below",onClick:dojo.hitch(this,function(menu,e){this._add_acl_from_modify_menu(menu.acl_widget,menu.policy_manager,"both",true);},menu)}));var role=menu.acl_widget.role_widget.get_role();var acl=menu.acl_widget.acl;if(acl!==null){var _1e39=role.uid.indexOf("vif")===0;if(acl.ui_index!==0||(!_1e39&&acl.ui_index==role.acl_split_before)){menu.addChild(new dijit.MenuItem({label:"Move Up",onClick:dojo.hitch(this,function(){this._move_acl(menu.acl_widget,menu.policy_manager,true);},menu)}));}if(acl.ui_index<(role.acl_rules.length-1)||(!_1e39&&acl.ui_index<role.acl_split_before)){menu.addChild(new dijit.MenuItem({label:"Move Down",onClick:dojo.hitch(this,function(){this._move_acl(menu.acl_widget,menu.policy_manager,false);},menu)}));}menu.addChild(new dijit.MenuItem({label:"Delete",onClick:dojo.hitch(this,function(){this._delete_acl(menu.acl_widget,menu.policy_manager);},menu)}));}this.attach_menu_listeners(menu);menu.startup();return menu;},attach_menu_listeners:function(menu){var _1e3b=false;dojo.connect(menu,"onOpen",function(){_1e3b=true;nox.ext.apps.vmanui.main.onDialogOpen();});dojo.connect(menu,"onClose",function(){if(_1e3b){nox.ext.apps.vmanui.main.onDialogClose();_1e3b=false;}});},create_netflow_warning_menu:function(_1e3c,_1e3d){var menu=new dijit.Menu({targetNodeIds:[_1e3c],leftClickToOpen:true});dojo.forEach(_1e3d,function(aPool){var sId=aPool[0];var sName=aPool[1];menu.addChild(new dijit.MenuItem({label:sName,onClick:function(){var _1e42=[nox.ext.apps.vmanui.vac.node_types.POOL,sId].join("_");nox.ext.apps.vmanui.vac.show_vac_tab("status",_1e42);}}));});this.attach_menu_listeners(menu);return menu;},create_action_menu:function(_1e43,_1e44,pm){var menu=new dijit.Menu({targetNodeIds:[_1e43],leftClickToOpen:true});menu.acl_widget=_1e44;menu.policy_manager=pm;var _1e47=menu.acl_widget.acl.action;var label=(_1e47=="deny")?"Allow":"Deny";menu.addChild(new dijit.MenuItem({label:"Change Action to "+label,onClick:dojo.hitch(this,function(menu,e){var label=(_1e47=="deny")?"Allow":"Deny";var role=menu.acl_widget.role_widget.get_role();var index=menu.acl_widget.acl.ui_index;role.acl_rules[index].action=(role.acl_rules[index].action=="deny")?"allow":"deny";this._change_role(pm,role,menu.acl_widget.role_widget);},menu)}));this.attach_menu_listeners(menu);return menu;},create_direction_menu:function(_1e4e,_1e4f,pm){var menu=new dijit.Menu({targetNodeIds:[_1e4e],leftClickToOpen:true});dojo.forEach([{val:"in",text:"Use Direction 'from'"},{val:"out",text:"Use Direction 'to'"},{val:"both",text:"Use Direction 'to/from'"}],function(dir){if(_1e4f.acl.direction==dir.val){return;}menu.addChild(new dijit.MenuItem({label:dir.text,onClick:dojo.hitch(this,function(e){var role=_1e4f.role_widget.get_role();role.acl_rules[_1e4f.acl.ui_index].direction=dir.val;this._change_role(pm,role,_1e4f.role_widget);})}));},this);this.attach_menu_listeners(menu);return menu;},create_protocol_menu:function(_1e55,_1e56,pm){var _1e58=nox.ext.apps.vmanui;var menu=new dijit.Menu({targetNodeIds:[_1e55],leftClickToOpen:true});menu.acl_widget=_1e56;menu.policy_manager=pm;menu.addChild(new dijit.MenuItem({label:"Match any protocol",onClick:dojo.hitch(this,function(menu,e){this.change_protocol_for_acl(null,menu.acl_widget);},menu)}));if(_1e56.acl.protocol_uid!==null){menu.addChild(new dijit.MenuItem({label:"View / modify current protocol",onClick:dojo.hitch(this,function(menu,e){var _1e5e=new _1e58.dialog.protocol_edit({acl_widget:menu.acl_widget,protocol_uid:menu.acl_widget.acl.protocol_uid});_1e5e.show();},menu)}));}menu.addChild(new dijit.MenuItem({label:"Use an existing protocol",onClick:dojo.hitch(this,function(menu,e){var _1e61=new _1e58.dialog.select_existing_protocol({acl_widget:menu.acl_widget});_1e61.show();},menu)}));menu.addChild(new dijit.MenuItem({label:"Use a new protocol",onClick:dojo.hitch(this,function(menu,e){var _1e64=new _1e58.dialog.protocol_edit({acl_widget:menu.acl_widget,protocol_uid:null});_1e64.show();},menu)}));this.attach_menu_listeners(menu);return menu;},show_remote_dialog:function(_1e65,pm){var _1e67=new nox.ext.apps.vmanui.RemoteAddressEditor({title:"Select Remote Addresses",acl_widget:_1e65,policy_manager:pm});nox.ext.apps.vmanui.main.onDialogOpen();var _1e68=false;dojo.connect(_1e67,"hide",function(){if(!_1e68){nox.ext.apps.vmanui.main.onDialogClose();_1e68=true;}});_1e67.startup();_1e67.show();},create_changevisibleuid_menu:function(_1e69,_1e6a,pm,cb){var menu=new dijit.Menu({targetNodeIds:[_1e69],leftClickToOpen:true});menu.policy_manager=pm;dojo.forEach(_1e6a,function(role){menu.addChild(new dijit.MenuItem({label:"Show policy for Network '"+role.name+"'",onClick:dojo.hitch(this,function(menu,e){cb(role.uid);},menu)}));});this.attach_menu_listeners(menu);return menu;},create_ntp_server_menu:function(_1e71,_1e72){var menu=new dijit.Menu({targetNodeIds:[_1e71],leftClickToOpen:true});menu.serverName=_1e72;var _1e74=dojo.hitch(nox.ext.apps.vmanui.settings,"remove_ntp",_1e72);menu.addChild(new dijit.MenuItem({label:"Remove",onClick:_1e74}));this.attach_menu_listeners(menu);menu.startup();return menu;},create_admin_account_menu:function(_1e75,_1e76){var _1e77=[];var _1e78=(_1e76==nox.ext.apps.vmanui.User.username());var _1e79=(_1e76=="admin");var _1e7a=nox.ext.apps.vmanui.User.hasCapability("admin-user-change-any-passwd");var _1e7b=nox.ext.apps.vmanui.User.hasCapability("admin-user-change-my-passwd");var _1e7c=nox.ext.apps.vmanui.User.hasCapability("admin-user-change-priv");var _1e7d=nox.ext.apps.vmanui.User.hasCapability("admin-user-remove");var _1e7e=nox.ext.apps.vmanui.User.hasCapability("admin-user-remove-myself");if((_1e78&&_1e7b)||_1e7a){var _1e7f=dojo.hitch(nox.ext.apps.vmanui.settings,"show_change_cred_dialog",_1e76);_1e77.push(new dijit.MenuItem({label:"Change Password",onClick:_1e7f}));}if(!_1e79&&!_1e78&&_1e7c){var _1e80=dojo.hitch(nox.ext.apps.vmanui.settings,"show_change_privileges_dialog",_1e76);_1e77.push(new dijit.MenuItem({label:"Change Privileges",onClick:_1e80}));}if(!_1e79&&((_1e78&&_1e7e)||_1e7d)){var _1e81=dojo.hitch(nox.ext.apps.vmanui.settings,"remove_user",_1e76);_1e77.push(new dijit.MenuItem({label:"Remove",onClick:_1e81}));}if(_1e77.length){var menu=new dijit.Menu({targetNodeIds:[_1e75],leftClickToOpen:true});dojo.forEach(_1e77,function(oItem){menu.addChild(oItem);});this.attach_menu_listeners(menu);menu.startup();return menu;}},create_snapshot_menu:function(_1e84,_1e85){var oUser=nox.ext.apps.vmanui.User;var _1e87=[];if(oUser.hasCapability("restore-snapshot")){var _1e88=dojo.hitch(nox.ext.apps.vmanui.settings,"show_restore_snapshot_dialog",_1e85);_1e87.push(new dijit.MenuItem({label:"Restore to Snapshot",onClick:_1e88}));}if(oUser.hasCapability("create-snapshot")){var _1e88=dojo.hitch(nox.ext.apps.vmanui.settings,"show_delete_snapshot_dialog",_1e85);_1e87.push(new dijit.MenuItem({label:"Delete Snapshot",onClick:_1e88}));}if(oUser.hasCapability("import-export-snapshot")){var _1e89=dojo.hitch(nox.ext.apps.vmanui.settings,"download_snapshot",_1e85);_1e87.push(new dijit.MenuItem({label:"Download",onClick:_1e89}));}if(_1e87.length){var menu=new dijit.Menu({targetNodeIds:[_1e84],leftClickToOpen:true});dojo.forEach(_1e87,function(oItem){menu.addChild(oItem);});this.attach_menu_listeners(menu);menu.startup();return menu;}},create_syslog_menu:function(_1e8c,_1e8d){var menu=new dijit.Menu({targetNodeIds:[_1e8c],leftClickToOpen:true});var _1e8f=dojo.hitch(nox.ext.apps.vmanui.settings,"remove_syslog",_1e8d);menu.addChild(new dijit.MenuItem({label:"Remove",onClick:_1e8f}));this.attach_menu_listeners(menu);menu.startup();return menu;},create_pool_modify_menu:function(_1e90){var menu=new dijit.Menu({targetNodeIds:[_1e90],leftClickToOpen:true});var _1e92=parseInt(_1e90.getAttribute("xapi_status"))||-1;var uid=_1e90.getAttribute("uid");menu.pool_uid=_1e90.getAttribute("pool_uid");menu.pool_name=_1e90.getAttribute("pool_name");menu.addChild(new dijit.MenuItem({label:"Modify Pool",onClick:function(e){nox.ext.apps.vmanui.vac_status.start_modify_pool(menu.pool_uid,null);}}));if(_1e92!=10){menu.addChild(new dijit.MenuItem({label:"Refresh Status",onClick:function(e){nox.ext.apps.vmanui.vac_status.refresh_pool(menu.pool_uid);}}));}menu.addChild(new dijit.MenuItem({label:"Remove Pool",onClick:function(e){if(_1e92>0){nox.ext.apps.vmanui.vac_status.find_fail_mode(uid,function(_1e97){frag.status.allpools.removeConfirmDialog.openDialog(menu.pool_name,menu.pool_uid,(_1e97=="fail_safe"));});}else{frag.status.allpools.removeConfirmDialog.openDialog(menu.pool_name,menu.pool_uid,false);}}}));if(_1e92==10){menu.addChild(new dijit.MenuItem({label:"Steal Pool",onClick:function(e){nox.ext.apps.vmanui.vac_status.start_modify_pool(menu.pool_uid,true);}}));}this.attach_menu_listeners(menu);menu.startup();return menu;}});nox.ext.apps.vmanui.menu_creator.creator=new nox.ext.apps.vmanui.MenuCreator();}if(!dojo._hasResource["nox.ext.apps.vmanui.VisibilityTable"]){dojo._hasResource["nox.ext.apps.vmanui.VisibilityTable"]=true;dojo.provide("nox.ext.apps.vmanui.VisibilityTable");dojo.declare("nox.ext.apps.vmanui.VisibilityTable",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"visibility_table\">\n  <div style=\"border-bottom:1px solid #CCCCCC;margin-bottom:5px;text-align:right;\">\n    <span class=\"netflow_pool_warning\" style=\"visibility:visible;float:left;\" dojoAttachPoint=\"netflow_config_warning\">\n      <span style=\"color:red;font-weight:bold\">Warning:</span> <span class=\"link\" dojoAttachPoint=\"pool_warning_label\">One or more selected pools</span> is not configured to forward NetFlow records to ${app_name_short}\n    </span>\n    <span>${interval_str}</span>\n  </div>\n  <table dojoAttachPoint=\"bidir_table\" class=\"visibility_table_bidir\">\n    <tbody>\n      <tr>\n        <td dojoAttachPoint=\"bidir_in_table_cell\" class=\"bidir_table_cell inbound_table_cell\"></td>\n        <td dojoAttachPoint=\"bidir_out_table_cell\" class=\"bidir_table_cell outbound_table_cell\"></td>\n      </tr>\n    </tbody>\n  </table>\n  <div dojoAttachPoint=\"unidir_table\" class=\"visibility_table_unidir\"></div>\n</div>\n",manager:null,interval:null,interval_str:null,direction:null,bin_type:null,count_type:null,tree_uid:null,in_totals:null,out_totals:null,in_sum:null,out_sum:null,max_items:null,pools_to_warn:null,constructor:function(){this.manager=null;this.interval=1;this.interval_str="";this.direction="";this.bin_type="";this.count_type="";this.tree_uid="";this.in_totals=[];this.out_totals=[];this.in_sum=null;this.out_sum=null;this.max_items=10;this.pools_to_warn=[];this.netflowWarningMenu=null;this.totalsTables={};},postMixInProperties:function(){this.app_name_short=nox.ext.apps.vmanui.main.app_name_short;this.in_sum=parseInt(this.in_sum)||null;this.out_sum=parseInt(this.out_sum)||null;},postCreate:function(){this.treeNode=nox.ext.apps.vmanui.main.current_tree_item;this.buildPhrases();dojo.removeClass(this.bidir_table,"hidden");dojo.removeClass(this.unidir_table,"hidden");if(this.direction=="bidir"){this.buildBidirectionalTable();}else{this.buildUnidirectionalTable(this.direction);}this.buildNetflowWarning();},buildNetflowWarning:function(){if(this.pools_to_warn.length){this.buildNetflowWarningMenu();dojo.style(this.netflow_config_warning,{visibility:"visible"});}else{dojo.style(this.netflow_config_warning,{visibility:"hidden"});}},buildNetflowWarningMenu:function(){var _1e99=[];var aD=[];dojo.forEach(this.pools_to_warn,function(_1e9b){var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/xen_directory/"+_1e9b,handleAs:"json",load:function(r){return [_1e9b,r.name];}});aD.push(d);},this);var _1e9e=new dojo.DeferredList(aD);_1e9e.addCallback(dojo.hitch(this,function(r){_1e99=dojo.map(r,function(oItem){return oItem[1];});var _1ea1=nox.ext.apps.vmanui.menu_creator.creator;this.netflowWarningMenu=_1ea1.create_netflow_warning_menu(this.pool_warning_label,_1e99);}));},buildPhrases:function(){this.binPhrase="";this.scopePhrase="";var _1ea2=this.treeNode.node_type;var _1ea3=nox.ext.apps.vmanui.util.escapeMarkup(this.treeNode.name);var nt=nox.ext.apps.vmanui.vac.node_types;if(this.bin_type=="host"){this.binPhrase="by source VM";}else{if(this.bin_type=="l3proto"){this.binPhrase="by protocol";}else{if(this.bin_type=="l4proto"){this.binPhrase="by application";}else{if(this.binType=="ip"){this.binPhrase="by source IP";}else{}}}}switch(_1ea2){case nt.ALL_POOLS:case nt.ADMIN_GROUPS:case nt.ADMIN_NETWORKS:this.scopePhrase="all resource pools";break;case nt.POOL:this.scopePhrase="resource pool '"+_1ea3+"'";break;case nt.NETWORKS:this.scopePhrase="selected resource pool";break;case nt.NETWORK:this.scopePhrase="VMs on network '"+_1ea3+"'";break;case nt.VM:this.scopePhrase="VM '"+_1ea3+"'";break;case nt.VM_VIF:this.scopePhrase="VM interface '"+_1ea3+"'";break;case nt.NETWORK_VM:this.scopePhrase="VM '"+_1ea3+"' on selected Network";break;case nt.VMS:this.scopePhrase="selected resource pool";break;case nt.SERVERS:this.scopePhrase="selected resource pool";break;case nt.SERVER_NETWORKS:this.scopePhrase="VMs on selected server";break;case nt.SERVER_NETWORK:this.scopePhrase="VMs on network '"+_1ea3+"' on selected server";break;case nt.SERVER_NETWORK_VM:this.scopePhrase="VM '"+_1ea3+"' on selected Network";break;case nt.SERVER:this.scopePhrase="all VMs on server '"+_1ea3+"'";break;case nt.ADMIN_GROUP:this.scopePhrase="VM group '"+_1ea3+"'";break;case nt.ADMIN_NET:this.scopePhrase="address group '"+_1ea3+"'";break;case nt.ADMIN_NET_GROUP:this.scopePhrase="address group '"+_1ea3+"'";break;default:this.scopePhrase=_1ea3?"'"+_1ea3+"'":"selected group";}},buildUnidirectionalTable:function(sDir){dojo.addClass(this.bidir_table,"hidden");dojo.addClass(this.bidir_table,sDir);var _1ea6=(sDir=="in")?this.in_totals:this.out_totals;var iSum=(sDir=="in")?this.in_sum:this.out_sum;if(_1ea6.length>this.max_items){var oMsg=this.trunc_msg(_1ea6.length);dojo.place(oMsg,this.unidir_table,"last");}this.totalsTables.uni=this.addTotalsTable(this.unidir_table,_1ea6,iSum,sDir);this.manager.styleSortIcons(sDir,this.totalsTables.uni);},buildBidirectionalTable:function(){dojo.addClass(this.unidir_table,"hidden");if(this.in_totals.length>this.max_items){var oMsg=this.trunc_msg(this.in_totals.length);dojo.place(oMsg,this.bidir_in_table_cell,"last");}if(this.out_totals.length>this.max_items){var oMsg=this.trunc_msg(this.out_totals.length);dojo.place(oMsg,this.bidir_out_table_cell,"last");}this.totalsTables.bi_in=this.addTotalsTable(this.bidir_in_table_cell,this.in_totals,this.in_sum,"in",true);this.manager.styleSortIcons("in",this.totalsTables.bi_in);this.totalsTables.bi_out=this.addTotalsTable(this.bidir_out_table_cell,this.out_totals,this.out_sum,"out",true);this.manager.styleSortIcons("out",this.totalsTables.bi_out);},addTotalsTable:function(oCell,_1eab,iSum,sDir,_1eae){var _1eaf=(sDir=="in")?"Inbound":"Outbound";var _1eb0=this.count_type+"/s";var _1eb1="Source IP";var _1eb2=nox.ext.apps.vmanui.util.toUpperFirst(this.count_type);if(this.count_type=="bits"){_1eb0="Kbit/s";}else{if(this.count_type=="bytes"){_1eb0="KByte/s";}}if(this.bin_type=="l3proto"){_1eb1="Protocol";}else{if(this.bin_type=="l4proto"){var _1eb3=(sDir=="in")?"client":"server";_1eb1="Application (as "+_1eb3+")";}else{if(this.bin_type=="host"){_1eb1="Source VM";}}}var _1eb4=this.titlePhrase(_1eae?sDir:"");var _1eb5=new nox.ext.apps.vmanui.VisibilityTotalsTable({vis_table:this,table_title:_1eb4,bin_name:_1eb1,total_units:[_1eaf,_1eb2].join(" "),rate_units:[_1eaf,"Rate"].join(" "),perc_units:["% of Total"].join(" "),rate_units_abbr:_1eb0});dojo.place(_1eb5.domNode,oCell,"only");dojo.addClass(_1eb5.domNode,sDir);_1eb5.createRows(_1eab,iSum,this.interval);return _1eb5;},titlePhrase:function(sDir){var _1eb7=[];if(sDir=="in"){_1eb7.push("Inbound");_1eb7.push(this.count_type);_1eb7.push("to switch");}else{if(sDir=="out"){_1eb7.push("Outbound");_1eb7.push(this.count_type);_1eb7.push("from switch");}else{_1eb7.push(nox.ext.apps.vmanui.util.toUpperFirst(this.count_type));_1eb7.push(this.direction=="in"?"to switch":"from switch");}}_1eb7.push(this.binPhrase);return _1eb7.join(" ");},trunc_msg:function(_1eb8){var oSpan=dojo.doc.createElement("span");dojo.style(oSpan,{fontSize:"smaller"});var oText=dojo.doc.createTextNode("(Limiting display to first "+this.max_items+" of "+_1eb8+" items)");dojo.place(oText,oSpan,"only");return oSpan;},rows:function(){var aRows=[];for(var key in this.totalsTables){aRows=aRows.concat(this.totalsTables[key].rows());}return aRows;},uninitialize:function(){if(this.netflowWarningMenu){this.netflowWarningMenu.destroyRecursive();}for(var s in this.totalsTables){var o=this.totalsTables[s];if(o&&dojo.isObject(o)&&dojo.isFunction(o.destroyRecursive)){o.destroyRecursive();}this.totalsTables[s]=null;}this.totalsTables={};this.inherited(arguments);}});dojo.declare("nox.ext.apps.vmanui.VisibilityTotalsTable",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"visibility_totals\">\n  <h2>${table_title}</h2>\n  <table class=\"TableVisibilityStats\" cellspacing=\"0\">\n    <thead>\n      <tr class=\"TableVisibilityStatsHeader\">\n        <th class=\"TableHeaderGradientLight icon_col\">&nbsp;</th>\n        <th class=\"TableHeaderGradientLight\"><a class=\"sort name\">${bin_name}</a><span class=\"sort_icon\"></span></th>\n        <th class=\"TableHeaderGradientLight\"><a class=\"sort total numeric\">${total_units}</a><span class=\"sort_icon\"></span></th>\n        <th class=\"TableHeaderGradientLight\"><a class=\"sort rate numeric\">${rate_units}</a> <span style=\"font-size:smaller\">(${rate_units_abbr})</span><span class=\"sort_icon\"></span></th>\n        <th class=\"TableHeaderGradientLight\"><a class=\"sort perc numeric\">${perc_units}</a></span><span class=\"sort_icon\"></span></th>\n      </tr>\n    </thead>\n    <tbody dojoAttachPoint=\"tbody\">\n    </tbody>\n  </table>\n</div>\n",table_title:null,vis_table:null,bin_name:null,total_units:null,rate_units:null,rate_units_abbr:null,constructor:function(){this.table_title="";this.vis_table=null;this.bin_name="";this.total_units="";this.rate_units="";this.rate_units_abbr="";this.__totals_table_rows=[];},postMixInProperties:function(){this.static_base=nox.ext.apps.vmanui.main.static_base;},postCreate:function(){this.bin_type=this.vis_table?this.vis_table.bin_type:"";this.count_type=this.vis_table?this.vis_table.count_type:"";this.max_items=this.vis_table?this.vis_table.max_items:50;},rows:function(){return this.__totals_table_rows;},empty:function(){dojo.empty(this.tbody);this.__totals_table_rows=[];},createRows:function(_1ebf,iSum,_1ec1){dojo.forEach(_1ebf,function(aItem,i){var _1ec4=aItem[1][0];if(_1ec4>0){var name,_1ec6;var oLink=aItem[2];name=oLink.name;_1ec6=oLink.tree_uid;var scale=1;if(this.count_type=="bits"||this.count_type=="bytes"){scale=1000;}var rate=_1ec4/(scale*_1ec1);var _1eca={};_1eca.places=(rate<10)?2:0;var oRow=new nox.ext.apps.vmanui.VisibilityTotalsTableRow({series_id:aItem[0].join("_"),name:nox.ext.apps.vmanui.util.escapeMarkup(name),tree_uid:_1ec6,total:dojo.number.format(parseInt(_1ec4)),perc:dojo.number.format(parseInt(_1ec4)/iSum,{type:"percent",places:1}),rate:dojo.number.format(rate,_1eca)});dojo.place(oRow.domNode,this.tbody,"last");dojo.addClass(oRow.domNode,i%2?"oddRow":"evenRow");this.__totals_table_rows.push(oRow);}},this);},uninitialize:function(){while(this.__totals_table_rows.length){var o=this.__totals_table_rows.pop();if(o&&dojo.isObject(o)&&dojo.isFunction(o.destroyRecursive)){o.destroyRecursive();}o=null;}this.inherited(arguments);}});dojo.declare("nox.ext.apps.vmanui.VisibilityTotalsTableRow",[dijit._Widget,dijit._Templated],{templateString:"<tr class=\"TableVisibilityStatsRow\">\n  <td class=\"TableVisibilityCell TableVisibilityLegendCell\" dojoAttachPoint=\"legendCell\"><img dojoAttachPoint=\"legendImage\" src=\"${static_base}/nox/ext/apps/vmanui/images/legend_fill.png\" /></td>\n  <td class=\"TableVisibilityCell TableVisibilityNameCell\"><span dojoAttachPoint=\"nameSpan\"></span></td>\n  <td class=\"TableVisibilityCell TableVisibilityTotalCell\" dojoAttachPoint=\"totalCell\"></td>\n  <td class=\"TableVisibilityCell TableVisibilityRateCell\" dojoAttachPoint=\"rateCell\"></td>\n  <td class=\"TableVisibilityCell TableVisibilityPercentageCell\" dojoAttachPoint=\"percentageCell\"></td>\n</tr>\n",name:null,tree_uid:null,total:null,rate:null,perc:null,series_id:null,constructor:function(){this.name="";this.tree_uid=null;this.total=0;this.rate=0;this.perc=0;this.series_id="";},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{name:{node:"nameSpan",type:"innerHTML"},total:{node:"totalCell",type:"innerHTML"},rate:{node:"rateCell",type:"innerHTML"},perc:{node:"percentageCell",type:"innerHTML"}}),postMixInProperties:function(){this.static_base=nox.ext.apps.vmanui.main.static_base;},clickName:function(){nox.ext.apps.vmanui.vac.show_vac_tab("visibility",this.tree_uid);},postCreate:function(){if(this.tree_uid){this.connect(this.nameSpan,"onclick","clickName");dojo.addClass(this.nameSpan,"link");}},fillLegendColor:function(_1ecd){dojo.style(this.legendImage,{backgroundColor:_1ecd});},uninitialize:function(){return this.inherited(arguments);}});}if(!dojo._hasResource["nox.ext.apps.vmanui.flowStatsManager"]){dojo._hasResource["nox.ext.apps.vmanui.flowStatsManager"]=true;dojo.provide("nox.ext.apps.vmanui.flowStatsManager");dojo.declare("nox.ext.apps.vmanui.flowStatsManager",null,{wsArgs:null,plotParams:null,chartToReuse:null,poolsToWarn:null,aInPoints:null,aOutPoints:null,aInTotals:null,aOutTotals:null,iSumIn:null,iSumOut:null,pauseRefresh:false,__node_type_cache:{},__sort_cache:{"in":{"sense":"desc","criterion":"numeric","target":"total"},"out":{"sense":"desc","criterion":"numeric","target":"total"}},flow_stages:[[1,60],[2,150],[4,150],[8,225],[16,225],[32,225],[96,225],[192,225],[384,225],[768,225],[3072,225]],constructor:function(oArgs,_1ecf,_1ed0,_1ed1){this.wsArgs=oArgs||{};this.plotParams=_1ecf||{};this.chartToReuse=_1ed0||null;this.poolsToWarn=_1ed1||[];},draw:function(){return this.get_chart_data();},get_chart_data:function(){this.__node_cache={};var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/flowapi/get_totals_series",content:this.wsArgs,handleAs:"json",timeout:30000,load:dojo.hitch(this,"load"),error:function(r,_1ed4){console.log("[Flow stats error]:",r,_1ed4);var oDiv=dojo.byId(this.plotParams.plotTableContainerId);var oText=dojo.doc.createTextNode(r);dojo.place(oText,oDiv,"only");}});d.addCallback(dojo.hitch(this,"fillLegendColors"));d.addCallback(dojo.hitch(this,"setupSort"));return d;},fillLegendColors:function(_1ed7){var _1ed8=_1ed7.chart||this.chartToReuse;if(_1ed7.table&&_1ed8){nox.ext.apps.vmanui.plotUtil.fillTableLegendColors(_1ed8,_1ed7.table.rows());}return _1ed7;},setupSort:function(_1ed9){var _1eda=[];var _1edb=dojo.query(".visibility_table .sort");var util=nox.ext.apps.vmanui.util;dojo.forEach(_1edb,function(_1edd){var _1ede=dojo.connect(_1edd,"click",this,function(e){var _1ee0=util.findAncestorNodeByClass(_1edd,"visibility_totals");var _1ee1=dojo.hasClass(_1edd,"name")?"name":"numeric";var _1ee2=_1ed9.table.totalsTables;var _1ee3,_1ee4;if(_1ee2.uni){_1ee3=_1ee2.uni;_1ee4=_1ed9.table.direction;}else{_1ee4=dojo.hasClass(_1ee0,"in")?"in":"out";if(_1ee4=="in"){_1ee3=_1ee2.bi_in;}else{if(_1ee4=="out"){_1ee3=_1ee2.bi_out;}}}var _1ee5=this.__sort_cache[_1ee4];var sense=_1ee5["sense"]=="asc"?"desc":"asc";this.sortTotals(_1ee4,_1ee1,sense);if(_1ee1=="name"){_1ee5["target"]="name";}else{if(dojo.hasClass(_1edd,"total")){_1ee5["target"]="total";}else{if(dojo.hasClass(_1edd,"rate")){_1ee5["target"]="rate";}else{if(dojo.hasClass(_1edd,"perc")){_1ee5["target"]="perc";}}}}_1ee3.empty();var items=_1ee4=="in"?this.aInTotals:this.aOutTotals;var sum=_1ee4=="in"?this.iSumIn:this.iSumOut;var _1ee9=_1ed9.table.interval;_1ee3.createRows(items,sum,_1ee9);this.styleSortIcons(_1ee4,_1ee3);this.fillLegendColors(_1ed9);this.setupSort(_1ed9);});_1eda.push(_1ede);},this);var h=dojo.connect(_1ed9.table,"destroy",function(){dojo.forEach(_1eda,function(_1eeb){dojo.disconnect(_1eeb);});_1eda=[];dojo.disconnect(h);});},styleSortIcons:function(_1eec,table){var _1eee=this.__sort_cache[_1eec];var _1eef=_1eee["target"];dojo.query(".sort_icon",table.domNode).forEach(function(icon){dojo.style(icon,{"visibility":"hidden"});});dojo.query("."+_1eef,table.domNode).forEach(function(_1ef1){dojo.query(".sort_icon",_1ef1.parentNode).forEach(function(icon){var sense=_1eee.sense;var _1ef4=sense=="asc"?"desc":"asc";dojo.removeClass(icon,_1ef4);dojo.addClass(icon,sense);dojo.style(icon,{"visibility":"visible"});});});},vmLink:function(sId){var oLink={name:"",tree_uid:null};var name;if(sId==0){name="Other";}else{name=this._series_name([sId]);name=nox.ext.apps.vmanui.util.unescapeMarkup(name);}if(name=="unknown"){name="Unknown Host ("+sId+")";}return {name:name,tree_uid:this.get_tree_uid(sId)};},get_tree_uid:function(sId){var nt=this.__node_type_cache[sId];if(!nt){nt=this.wsArgs.default_node_type;}var _1efa=nox.ext.apps.vmanui.vac.node_types;var _1efb=null;switch(nt){case _1efa.ALL_POOLS:case _1efa.POOL:case _1efa.NETWORKS:case _1efa.VMS:case _1efa.VM_VIF:case _1efa.ADMIN_NETWORKS:case _1efa.ADMIN_NET_GROUP:case _1efa.ADMIN_NET:case _1efa.ADMIN_GROUPS:_1efb=_1efa.VM;break;case _1efa.NETWORK:case _1efa.NETWORK_VIF:_1efb=_1efa.NETWORK_VM;break;case _1efa.SERVERS:case _1efa.SERVER:case _1efa.SERVER_NETWORKS:case _1efa.SERVER_VIF:_1efb=_1efa.SERVER_VM;break;case _1efa.SERVER_NETWORK:case _1efa.SERVER_NETWORK_VIF:_1efb=_1efa.SERVER_NETWORK_VM;break;case _1efa.ADMIN_GROUP:case _1efa.ADMIN_VIF:_1efb=_1efa.ADMIN_VM;break;}if(!_1efb){_1efb=nt;}var _1efc=this.get_nodes({node_type:_1efb,uid:sId});if(_1efc.length==0){return null;}if(_1efc[0].tree_uid==this.wsArgs.tree_uid){return null;}return _1efc[0].tree_uid;},load:function(r,_1efe){var oArgs=this.wsArgs;var _1f00=this.plotParams;var _1f01=this.chartToReuse;var _1f02={};this.aInPoints=r[0];this.aOutPoints=r[1];this.aInTotals=r[2];this.aOutTotals=r[3];this.iSumIn=parseInt(r[4][0]);this.iSumOut=parseInt(r[5][0]);dojo.forEach(this.aInTotals.concat(this.aOutTotals),function(item){if(oArgs.bintype=="host"){item[2]=this.vmLink(item[0][0]);}else{item[2]={"name":this._series_name(item[0])};}},this);var _1f04=this.__sort_cache["in"];this.sortTotals("in",_1f04["criterion"],_1f04["sense"]);var _1f05=this.__sort_cache["out"];this.sortTotals("out",_1f05["criterion"],_1f05["sense"]);_1f02.chart=this.write_chart();_1f02.table=this.write_table();return _1f02;},write_chart:function(){var _1f06=[];var _1f07={};var _1f08=this.plotParams;var _1f09=0;var _1f0a=(new Date()).getTime();var _1f0b=[[this.aInPoints,"high"],[this.aOutPoints,"low"]];for(var i=0;i<_1f0b.length;i++){var _1f0d=_1f0b[i][0];var _1f0e=_1f0b[i][1];for(var j=0;j<_1f0d.length;j++){var key=_1f0d[j][0];var _1f11=_1f0d[j][1];var id=this.series_key_to_id(key);_1f06.push(id);var name=this._series_name(key);if(!_1f07.hasOwnProperty(id)){_1f07[id]={data:{},name:name};}_1f0a=Math.min(_1f0a,1000*_1f11[0][0]);_1f09=Math.max(_1f09,1000*_1f11[_1f11.length-1][0]);for(var k=0;k<_1f11.length;k++){var ts=_1f11[k][0];var val=_1f11[k][1];if(!_1f07[id].data.hasOwnProperty(ts)){_1f07[id].data[ts]={high:0,low:0};}_1f07[id].data[ts][_1f0e]=val;}}}var _1f17=this.create_series_data(_1f07);var _1f18=this.create_label_data(_1f0a,_1f09);var _1f19=this.timestamp_for_duration(_1f0a,_1f08.interval*1000);var sEnd=this.timestamp_for_duration(_1f09,_1f08.interval*1000);this.sInterval=_1f19+" - "+sEnd;var _1f1b=_1f08.plotChartContainerId;var _1f1c=this.chartToReuse;if(_1f1b){if(_1f06.length){if(_1f1c){nox.ext.apps.vmanui.plotUtil.setChartSeries(_1f1c,_1f06,_1f17,_1f18);}else{var sType=_1f08.chartTab||"visibility";_1f1c=nox.ext.apps.vmanui.plotUtil.plotNetFlow(_1f1b,_1f17,_1f18,_1f06,sType);}}else{dojo.empty(_1f1b);}}return _1f1c;},series_key_to_id:function(k){var aIds=dojo.filter(k,function(part){return !isNaN(parseInt(part));});return aIds.join("_");},_series_name:function(_1f21){var bt=this.wsArgs.bintype;var name;if(_1f21.length==2&&_1f21[0]==0&&_1f21[1]==0){return "Other";}if(_1f21.length==1&&_1f21[0]==0){return "Other";}if(bt=="host"){if(_1f21[0]==undefined){return "Unknown VM";}var _1f24=this.get_nodes({uid:_1f21[0],node_type:nox.ext.apps.vmanui.vac.node_types.VM});if(_1f24&&_1f24.length==1){name=_1f24[0].name;}else{name="Unknown Host: "+_1f21[0];}}else{if(bt=="l3proto"){if(_1f21[0]==256){return "Other";}name=this.l3_str(_1f21[0]);}else{if(bt=="l4proto"){if(_1f21[0]==256){return "Other";}name=this.l4_str(_1f21[0],_1f21[1]);}else{if(bt=="ip"){name=this.create_ipaddr(_1f21[0]);}}}}return nox.ext.apps.vmanui.util.escapeMarkup(name);},get_nodes:function(_1f25){var uid=_1f25.uid;var type=_1f25.node_type;if(this.__node_cache[type]&&this.__node_cache[type][uid]){return this.__node_cache[type][uid];}var _1f28=[];nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/tree/node",content:_1f25,sync:true,handleAs:"json",load:function(r){_1f28=r;}});if(!this.__node_cache[type]){this.__node_cache[type]={};}this.__node_cache[type][uid]=_1f28;return this.__node_cache[type][uid];},create_ipaddr:function(key){var parts=[];for(var i=0;i<4;i++){var bits=8*(3-i);parts[i]=(key>>bits)&255;}return parts.join(".");},l3_str:function(_1f2e){return nox.ext.apps.vmanui.protoUtil.l3_str(_1f2e);},l4_str:function(_1f2f,_1f30){return nox.ext.apps.vmanui.protoUtil.l4_str(_1f2f,_1f30);},create_series_data:function(_1f31){var oArgs=this.wsArgs;var _1f33={};var _1f34=0;var _1f35=(oArgs.direction=="bidir")?2*oArgs.count:oArgs.count;for(var sId in _1f31){_1f34++;if(_1f34>_1f35){continue;}var _1f37=[];var oData=_1f31[sId].data;var sName=_1f31[sId].name;var _1f3a=[];for(var ts in oData){_1f3a.push(ts);}_1f3a=_1f3a.sort();dojo.forEach(_1f3a,function(ts){var vals=oData[ts];_1f37.push({"x":ts,"high":vals.high,"low":vals.low});});_1f33[sId]={"name":sName,"data":_1f37};}return _1f33;},create_label_data:function(_1f3e,iEnd){var _1f40=[];var _1f41=this.get_bin_interval(_1f3e,iEnd);var _1f42=parseInt(_1f3e/_1f41)*_1f41;var _1f43=iEnd-_1f3e;while(_1f42<=iEnd){var _1f44=parseInt(_1f42/1000);var _1f45=this.timestamp_for_duration(_1f42,_1f43);_1f40.push({value:_1f44,text:_1f45});_1f42+=_1f41*1000;}return _1f40;},get_bin_interval:function(_1f46,iEnd){var _1f48=((new Date()).getTime()-_1f46)/1000;var size=this.flow_stages[0][0];dojo.forEach(this.flow_stages,function(_1f4a){var iSize=_1f4a[0];var _1f4c=_1f4a[1];if(_1f48<iSize*_1f4c*1.5){return;}size=iSize;});return size;},timestamp_for_duration:function(iTS,_1f4e){var _1f4f=this._get_time_format(_1f4e);return new Date(iTS).strftime(_1f4f);},_get_time_format:function(_1f50){if(_1f50<24*60*60*1000){return "%H:%M:%S";}return "%m/%d %H:%M:%S";},_get_sort_fn:function(_1f51,sense){return function(a,b){var _1f55;if(_1f51=="name"){_1f55=(sense=="desc")?a[2].name.toLowerCase()<b[2].name.toLowerCase():b[2].name.toLowerCase()<a[2].name.toLowerCase();}else{_1f55=(sense=="desc")?a[1][0]<b[1][0]:b[1][0]<a[1][0];}return _1f55?1:-1;};},sortTotals:function(_1f56,_1f57,sense){var _1f59=(_1f56=="in")?this.aInTotals:this.aOutTotals;_1f59.sort(this._get_sort_fn(_1f57,sense));var _1f5a=this.__sort_cache[_1f56];_1f5a.sense=sense;_1f5a.criterion=_1f57;},write_table:function(){var _1f5b=this.aInTotals;var _1f5c=this.aOutTotals;var _1f5d=this.iSumIn;var _1f5e=this.iSumOut;var _1f5f=this.plotParams;var oArgs=this.wsArgs;var _1f61=_1f5f.plotTableContainerId;var _1f62=null;if(_1f61){dojo.empty(_1f61);var _1f63=false;dojo.forEach(_1f5b.concat(_1f5c),function(oTot){if(oTot[1][0]){_1f63=true;}});var oDiv=dojo.byId(_1f61);if(_1f63){_1f62=new nox.ext.apps.vmanui.VisibilityTable({manager:this,interval:_1f5f.interval,interval_str:this.sInterval,direction:oArgs.direction,count_type:oArgs.counttype,bin_type:oArgs.bintype,tree_uid:oArgs.tree_uid,in_totals:_1f5b,out_totals:_1f5c,in_sum:_1f5d,out_sum:_1f5e,pools_to_warn:this.poolsToWarn,max_items:50});dojo.place(_1f62.domNode,oDiv,"only");}else{oDiv.innerHTML="No available data to plot";}}return _1f62;}});}if(!dojo._hasResource["nox.ext.apps.vmanui.vac_visibility"]){dojo._hasResource["nox.ext.apps.vmanui.vac_visibility"]=true;dojo.provide("nox.ext.apps.vmanui.vac_visibility");(function(){var _1f66=nox.ext.apps.vmanui;var _1f67=_1f66.vac_visibility;var _1f68=_1f66.vac.node_types;_1f67.lastUpdateTs=0;_1f67.tableUpdating=false;_1f67.visibilityInputsPreset=false;_1f67.visibilityInputIds=["vis_counttype","vis_reverse","vis_count","vis_bintype","vis_direction","vis_timeInterval"];_1f67.chart=null;_1f67.visibility_init=function(_1f69,_1f6a){nox.ext.apps.vmanui.main.set_document_subtitle("Flow Statistics");_1f67.poolsToWarn=[];var _1f6b=false;this.check_pool_netflow();this.visibility_preset_inputs();if(!dijit.byId("visibility").isLoaded){dijit.byId("visibility").refresh();return false;}if(_1f69===undefined){_1f69=false;}if(_1f6a===undefined){_1f6a=false;}dojo.style(dojo.byId("visibility"),{display:"block"});if(dojo.byId("VisibilitySpan")===null){alert("thought this was dead");dijit.byId("visibility").refresh();return false;}if(_1f69||_1f6a){_1f6b=true;}else{if(_1f67.tableUpdating){return false;}var ts=(new Date()).getTime();interval=dijit.byId("vis_timeInterval").getValue()*0.01*1000;interval=Math.min(interval,600000);interval=interval-5000;if(ts-_1f67.lastUpdateTs<interval){return false;}}var _1f6d=true;dojo.forEach(_1f67.visibilityInputIds,function(sId){var _1f6f=dijit.byId(sId);var _1f70=_1f6f.isValid();_1f6d=_1f6d&&_1f70;if(_1f70){dojo.cookie(sId,_1f6f.attr("value"),{expires:30});}});if(!_1f6d){return false;}_1f67.lastUpdateTs=(new Date()).getTime();var _1f71="/vmanui/visibility?table=1";var _1f72=_1f66.main.current_tree_item;if(_1f72){var _1f73=_1f66.vac.treestore.getValue(_1f72,"tree_uid");_1f71+="&tree_uid="+_1f73;}_1f67.start_chart(_1f6b);return false;};_1f67.visibility_preset_inputs=function(){if(!_1f67.visibilityInputsPreset){var _1f74=false;dojo.forEach(_1f67.visibilityInputIds,function(sId){var value=dojo.cookie(sId);if(value!=undefined){var _1f77=dijit.byId(sId);if(_1f77){_1f77.attr("value",value);}else{_1f74=true;}}});if(!_1f74){_1f67.visibilityInputsPreset=true;}}};_1f67.check_pool_netflow=function(){var oItem=_1f66.main.current_tree_item;if(!oItem){return;}var iType=oItem.node_type;var _1f7a=[];if(iType==_1f68.ALL_POOLS||iType==_1f68.ADMIN_GROUP||iType==_1f68.ADMIN_NET_GROUP){nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/xen_directory",handleAs:"json",sync:true,timeout:30000,load:function(r){_1f7a=r;}});}else{if(iType==_1f68.POOL){_1f7a=[oItem.uid];}else{var _1f7c=_1f67.get_parent_pool_id_for_item(oItem);if(_1f7c){_1f7a=[_1f7c];}}}var _1f7d=[];dojo.forEach(_1f7a,function(_1f7e){if(!_1f67.pool_flows_to_vman(_1f7e)){_1f7d.push(_1f7e.toString());}});_1f67.poolsToWarn=_1f7d;};_1f67.pool_flows_to_vman=function(_1f7f){var _1f80=false;if(_1f7f){nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/netflow/"+encodeURIComponent(_1f7f),handleAs:"json",timeout:30000,preventCache:true,sync:true,load:function(r){_1f80=r.use_vmanager;},error:function(r){_1f80=false;}});}return _1f80;};_1f67.get_parent_pool_id_for_item=function(oItem){var bOK=false;var ct=0;var pt=_1f66.vac.parent_types;var _1f87=oItem.tree_uid;var sUid=null;while(bOK==false&&ct<30){var parts=_1f87.split("_");var type=parts[0];if(type==_1f68.POOL){sUid=parts[1];bOK=true;}else{parts[0]=pt[type];parts.pop();_1f87=parts.join("_");}ct++;}if(bOK&&sUid){return sUid;}};_1f67.table_loading=function(sId){_1f67.set_table_opacity(sId,0.5);};_1f67.table_loaded=function(sId){_1f67.set_table_opacity(sId,1);};_1f67.set_table_opacity=function(sId,_1f8e){var oDiv=dojo.byId(sId);if(oDiv){dojo._setOpacity(oDiv,_1f8e);}};_1f67.start_chart=function(_1f90){var _1f91=dijit.byId("visibility");if(_1f91.pauseRefresh){return;}_1f67.tableUpdating=true;var _1f92="VisibilityTableDiv";_1f67.table_loading(_1f92);var oArgs={};var oItem=_1f66.main.current_tree_item;oArgs.tz=(new Date()).getTimezoneOffset()*-1;oArgs.tree_uid=_1f66.vac.treestore.getValue(oItem,"tree_uid");oArgs.direction=encodeURI(dijit.byId("vis_direction").getValue());oArgs.bintype=encodeURI(dijit.byId("vis_bintype").getValue());oArgs.counttype=encodeURI(dijit.byId("vis_counttype").getValue());oArgs.count=encodeURI(dijit.byId("vis_count").getValue());oArgs.reverse=encodeURI(dijit.byId("vis_reverse").getValue());try{var node=null;dojo.xhrGet({url:"ws.v1/tree/node/"+oArgs.tree_uid,handleAs:"json",sync:true,load:function(r){node=r;}});if(node){nt=node.node_type;oArgs.default_node_type=nt;}}catch(e){console.log("xhr error: ",e);oArgs.default_node_type=null;}var oNow=new Date();var _1f98=dijit.byId("vis_timeInterval").getValue();var _1f99=oNow.getTime()-_1f98*1000;var iEnd=oNow.getTime();oArgs.start_epoch=parseInt(_1f99/1000);oArgs.end_epoch=parseInt(iEnd/1000);var _1f9b={plotTableContainerId:_1f92,plotChartContainerId:"visplot",chartTab:"visibility",interval:_1f98};if(dojo.isIE){_1f66.main.pause_clicked(false);}if(_1f90){if(nox.ext.apps.vmanui.vac_visibility.chart){nox.ext.apps.vmanui.vac_visibility.chart.destroy();nox.ext.apps.vmanui.vac_visibility.chart=null;}}var _1f9c=new nox.ext.apps.vmanui.flowStatsManager(oArgs,_1f9b,nox.ext.apps.vmanui.vac_visibility.chart,nox.ext.apps.vmanui.vac_visibility.poolsToWarn);var d=_1f9c.draw();d.addCallback(nox.ext.apps.vmanui.vac_visibility.finish_chart);d.addCallback(function(){_1f9c=null;});};_1f67.finish_chart=function(_1f9e){if(nox.ext.apps.vmanui.vac_visibility.visibility_table){nox.ext.apps.vmanui.vac_visibility.visibility_table.destroyRecursive();}nox.ext.apps.vmanui.vac_visibility.visibility_table=_1f9e.table;if(!nox.ext.apps.vmanui.vac_visibility.chart&&_1f9e.chart){nox.ext.apps.vmanui.vac_visibility.chart=_1f9e.chart;}nox.ext.apps.vmanui.vac_visibility.tableUpdating=false;nox.ext.apps.vmanui.vac_visibility.table_loaded("VisibilityTableDiv");if(dojo.isIE){nox.ext.apps.vmanui.main.play_clicked(false);}_1f9e=null;};})();}if(!dojo._hasResource["dojox.dtl._Templated"]){dojo._hasResource["dojox.dtl._Templated"]=true;dojo.provide("dojox.dtl._Templated");dojo.declare("dojox.dtl._Templated",dijit._Templated,{_dijitTemplateCompat:false,buildRendering:function(){var node;if(this.domNode&&!this._template){return;}if(!this._template){var t=this.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);if(t instanceof dojox.dtl.Template){this._template=t;}else{node=t;}}if(!node){var nodes=dojo._toDom(this._template.render(new dojox.dtl._Context(this)));if(nodes.nodeType!==1&&nodes.nodeType!==3){for(var i=0,l=nodes.childNodes.length;i<l;++i){node=nodes.childNodes[i];if(node.nodeType==1){break;}}}else{node=nodes;}}this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _1fa4=dojo.parser.parse(node);this._attachTemplateNodes(_1fa4,function(n,p){return n[p];});}if(this.domNode){dojo.place(node,this.domNode,"before");this.destroyDescendants();dojo.destroy(this.domNode);}this.domNode=node;this._fillContent(this.srcNodeRef);},_templateCache:{},getCachedTemplate:function(_1fa7,_1fa8,_1fa9){var _1faa=this._templateCache;var key=_1fa8||_1fa7;if(_1faa[key]&&!_1fa9){return _1faa[key];}_1fa8=dojo.string.trim(_1fa8||dijit._Templated._sanitizeTemplateString(dojo._getText(_1fa7)));if(this._dijitTemplateCompat&&(_1fa9||_1fa8.match(/\$\{([^\}]+)\}/g))){_1fa8=this._stringRepl(_1fa8);}if(_1fa9||!_1fa8.match(/\{[{%]([^\}]+)[%}]\}/g)){return _1faa[key]=dojo._toDom(_1fa8);}else{return _1faa[key]=new dojox.dtl.Template(_1fa8);}},render:function(){this.buildRendering();}});}if(!dojo._hasResource["nox.ext.apps.vmanui.acl"]){dojo._hasResource["nox.ext.apps.vmanui.acl"]=true;dojo.provide("nox.ext.apps.vmanui.acl");dojo.declare("nox.ext.apps.vmanui.acl",[dijit._Widget,dijit._Templated],{templateString:"    <tr class=\"aclRow\">\n\t  <td width=\"8%\" align=\"left\" style=\"border-left: 1px solid #CCC\">\n        <a class=\"acl-action-link\" dojoAttachPoint=\"actionLink\">${acl.action}</a>\n      </td>\n      <td width=\"10%\" align=\"left\">\n        <a class=\"acl-protocol-link\" dojoAttachPoint=\"protocolLink\">${proto_text}</a>\n      </td>\n      <td width=\"6%\">\n        <a class=\"acl-direction-link\" dojoAttachPoint=\"directionLink\">${dir_text}</a>\n      </td>\n      <td width=\"25%\">\n        <a class=\"acl-remote-link\" dojoAttachPoint=\"remoteLink\">${remote_text}</a>\n      </td>\n      <td width=\"40%\" align=\"left\" class=\"acl-desc\">\n        <span dojoAttachPoint=\"desc_box\" dojoType=\"dijit.InlineEditBox\" class=\"acl-desc-link\"\n            noValueIndicator=\"&lt; none &gt;\">${desc_text}</span>\n      </td>\n      <td width=\"40%\" align=\"left\" class=\"acl-rule\">\n        <span class=\"acl-rule-link\">${acl.rule}</span>\n      </td>\n      <td align=\"left\" class=\"acl-hit-count\">\n        <span id=\"${acl_hits_id}\">-</span>\n      </td>\n      <td align=\"center\" width=\"3%\" class=\"acl-button\" style=\"border-right: 1px solid #CCC\">\n        <a class=\"acl-num-link\" dojoAttachPoint=\"numLink\">${acl.ui_index}</a>\n      </td>\n    </tr>\n\n",widgetsInTemplate:true,acl:null,role_widget:null,menuTypeMethods:{"action":"firstClickAction","direction":"firstClickDirection","protocol":"firstClickProtocol","num":"firstClickNum"},constructor:function(){this.show_desc=null;this._cellConnects={};},postMixInProperties:function(){this.acl_hits_id="";if(this.acl){var pm=this.role_widget.policy_manager;this.acl.rule=this._get_rule_text();var _1fad=dojo.map(this.acl.remote_groups,dojo.hitch(this,function(g_uid){var pm=this.role_widget.policy_manager;return pm.getNWAddrGroup(g_uid).name;}));switch(this.acl.direction){case "in":this.dir_text="from";break;case "out":this.dir_text="to";break;case "both":this.dir_text="to / from";break;default:this.dir_text="&lt;Unknown&gt;";}var _1fb0=dojo.map(this.acl.remote_customs,function(c){return c;});var _1fb2=_1fad.concat(_1fb0);this.remote_text=nox.ext.apps.vmanui.util.escapeMarkup(_1fb2.join(" , "));if(this.remote_text.length===0){this.remote_text="Any";}if(this.acl.invert_remote_addresses){this.remote_text="not("+this.remote_text+")";}var proto=pm.getProtocol(this.acl.protocol_uid);this.proto_text="Unknown";if(this.acl.protocol_uid===null){this.proto_text="Any";}else{if(proto===undefined){this.proto_text="Invalid";}else{if(proto.name!==null){this.proto_text=nox.ext.apps.vmanui.util.escapeMarkup(proto.name);}else{this.proto_text="&lt;Custom&gt;";}}}if(this.acl.uid!==undefined){this.acl_hits_id="acl-hits-uid-"+this.acl.uid;}if(this.acl.description===null){this.desc_text="";}else{this.desc_text=nox.ext.apps.vmanui.util.escapeMarkup(this.acl.description);}}else{this.remote_text="";this.proto_text="";this.desc_text="";this.dir_text="";}},postCreate:function(){this.desc_cell=dojo.query(".acl-desc",this.domNode)[0];this.rule_cell=dojo.query(".acl-rule",this.domNode)[0];if(this.acl){if(this.role_widget.is_readonly){this.desc_box.attr("disabled",true);}else{for(var sType in this.menuTypeMethods){var _1fb5=this.menuTypeMethods[sType];var oNode=this[sType+"Link"];this._cellConnects[sType]=dojo.connect(oNode,"onclick",this,_1fb5);}this._cellConnects["remote"]=dojo.connect(this.remoteLink,"onclick",this,"firstClickRemote");dojo.connect(this.desc_box,"onChange",this,"changeDescription");dojo.connect(this.desc_box,"edit",nox.ext.apps.vmanui.main.editStarted);}}else{dojo.empty(this.domNode);var row=dojo.create("tr");var cell1=dojo.create("td");dojo.style(cell1,"borderLeft","None");dojo.attr(cell1,"colSpan",5);var _1fb9=dojo.create("span");_1fb9.innerHTML=this._getInnerACLLabel();dojo.addClass(_1fb9,"inner-acl-span");cell1.appendChild(_1fb9);var cell2=dojo.create("td");dojo.addClass(cell2,"acl-button-white-bg");dojo.style(cell2,"borderRight","1px solid #CCC");cell2.innerHTML="&nbsp;";row.appendChild(cell1);row.appendChild(cell2);this.domNode=row;if(!this.role_widget.is_readonly){this.connectInnerRow=dojo.connect(this,"onClick",this,"firstClickInnerRow");}}this.setDescRuleDisplay();},changeDescription:function(val){return this.role_widget.changeDescription(this,val);},firstClickAction:function(e){this.role_widget.clickCellLink(e.target,this,"action","create_action_menu",e);dojo.disconnect(this._cellConnects.action);},firstClickDirection:function(e){this.role_widget.clickCellLink(e.target,this,"direction","create_direction_menu",e);dojo.disconnect(this._cellConnects.direction);},firstClickProtocol:function(e){this.role_widget.clickCellLink(e.target,this,"protocol","create_protocol_menu",e);dojo.disconnect(this._cellConnects.protocol);},firstClickNum:function(e){this.role_widget.clickCellLink(e.target,this,"num","create_modify_menu",e);dojo.disconnect(this._cellConnects.num);},firstClickRemote:function(e){this.role_widget.clickRemote(this);dojo.disconnect(this._cellConnects.remote);},firstClickInnerRow:function(e){this.role_widget.clickCellLink(this.domNode,this,"innerRow","create_modify_menu",e);dojo.disconnect(this.connectInnerRow);},setDescRuleDisplay:function(){if(this.role_widget.show_desc!==this.show_desc){var _1fc2=this.role_widget.show_desc?this.desc_cell:this.rule_cell;var _1fc3=this.role_widget.show_desc?this.rule_cell:this.desc_cell;dojo.style(_1fc2,{display:""});dojo.style(_1fc3,{display:"none"});this.show_desc=this.role_widget.show_desc;}},_get_proto_text:function(){if(this.acl.protocol_uid===null){return "any protocol";}var _1fc4=function(proto){var str="";if(proto.dst_port!==null){str+=" dst port "+proto.dst_port;}if(proto.src_port!==null){str+=" src port "+proto.src_port;}return str;};var pm=this.role_widget.policy_manager;var proto=pm.getProtocol(this.acl.protocol_uid);if(proto){var desc=null;switch(proto.iptype){case 1:desc="ICMP";break;case 6:desc="TCP"+_1fc4(proto);break;case 17:desc="UDP"+_1fc4(proto);break;default:if(proto.iptype!==null){desc="IP-Proto '"+proto.iptype+"'";}else{if(proto.ethertype!==null){var _1fca=dojo.string.pad(proto.ethertype.toString(16).toUpperCase(),4,"0");desc="Ethertype: 0x"+_1fca;}}}return desc;}throw "Invalid Protocol";},_get_remote_text:function(){var _1fcb=[];var pm=this.role_widget.policy_manager;var _1fcd=dojo.forEach(this.acl.remote_groups,function(g_uid){var g=pm.getNWAddrGroup(g_uid);dojo.forEach(g.members,function(_1fd0){_1fcb.push(_1fd0.address);});});var _1fd1=dojo.forEach(this.acl.remote_customs,function(c){_1fcb.push(c);});var res=(_1fcb.length>0)?_1fcb.join(" , "):"any address";if(this.acl.invert_remote_addresses){res="all addresses except "+res;}return res;},_get_rule_text:function(){try{var pm=this.role_widget.policy_manager;var str=(this.acl.action=="deny")?"Deny ":"Allow ";str+=this._get_proto_text();switch(this.acl.direction){case "in":str+=" from ";break;case "out":str+=" to ";break;case "both":str+=" to/from ";break;default:throw "Invalid direction '"+this.acl.direction+"'";}str+=this._get_remote_text();var proto=pm.getProtocol(this.acl.protocol_uid);if(proto&&!proto.unidirectional){str+=" (and reply traffic)";}return str;}catch(e){nox.ext.apps.vmanui.main.console_log("Error getting acl text: "+e);return "&lt;Unknown&gt;";}},_getInnerACLLabel:function(){var type=this.role_widget.role.uid.split(";")[0];var pfx="Placeholder for more specific ";switch(type){case "global":return pfx+"Pool, Network, VM, and Interface policies.";case "pool":return pfx+"Network, VM, and Interface policies.";case "network":return pfx+"VM and Interface policies.";case "vm":return pfx+"Interface policy.";default:return "";}},uninitialize:function(){this.inherited(arguments);if(this.desc_box){this.desc_box.destroyRecursive();}}});}if(!dojo._hasResource["nox.ext.apps.vmanui.role_policy_layer"]){dojo._hasResource["nox.ext.apps.vmanui.role_policy_layer"]=true;dojo.provide("nox.ext.apps.vmanui.role_policy_layer");dojo.declare("nox.ext.apps.vmanui.role_policy_layer",[dijit._Widget,dijit._Templated],{widgetsInTemplate:true,templateString:"<div class=\"${role.xen_type}-shell\">\n  <div class=\"ruleContainer\">\n    <div dojoAttachPoint=\"header\" class=\"policyHeader ${role.xen_type} policyExpand\">\n      <span class=\"expandToggle\" dojoAttachEvent=\"onclick:toggleVisibility\" dojoAttachPoint=\"visibility_link\"></span>\n      <span class=\"policyLabel\" dojoAttachPoint=\"header_label\"></span>\n      <span class=\"policyViewOthers\" dojoAttachPoint=\"view_others\"></span>\n    </div>\n    <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" dojoAttachPoint=\"table\" class=\"TableFirewallPolicy acl-table\">\n      <tr class=\"${classname}\">\n        <th align=\"left\" class=\"TableHeaderGradientLight\" style=\"border-left: 1px solid #BFBFBF;\">Action</th>\n        <th align=\"left\" class=\"TableHeaderGradientLight\">Protocol</th>\n        <th align=\"left\" class=\"TableHeaderGradientLight\">Direction</th>\n        <th align=\"left\" class=\"TableHeaderGradientLight\">Remote Addresses</th>\n        <th align=\"left\" class=\"TableHeaderGradientLight\">\n          <span>\n            <input dojoType=\"dijit.form.RadioButton\" name=\"descRuleToggle\" dojoAttachPoint=\"desc_toggle\" type=\"radio\" checked=\"checked\" class=\"descRadio\" dojoAttachEvent=\"onClick:onShowDesc\" />\n            Description\n          </span>\n          <span>\n            <input dojoType=\"dijit.form.RadioButton\" name=\"descRuleToggle\" dojoAttachPoint=\"rule_toggle\" type=\"radio\" class=\"ruleRadio\" dojoAttachEvent=\"onClick:onShowRule\" />\n            Rule Details\n          </span>\n        </th>\n        <th align=\"left\" nowrap=\"nowrap\" class=\"TableHeaderGradientLight acl-hit-count\">Hit Count</th>\n        <th align=\"center\" class=\"TableHeaderGradientLight gear-image-table-header-light\" dojoAttachPoint=\"modify_cell\">&nbsp;</th>\n      </tr>\n    </table>\n  </div>\n</div>\n",policy_manager:null,role_index:null,is_stats:false,is_readonly:false,_acl_child_widgets:null,_acl_related_child_widgets:null,_header_related_child_widgets:null,parent_layer:null,show_desc:null,is_visible:null,constructor:function(){this.contentPane=null;this.show_desc=true;this.is_visible=false;this._acl_child_widgets=[];this._acl_related_child_widgets=[];this._header_related_child_widgets=[];this.menuFactory=nox.ext.apps.vmanui.menu_creator.creator;this.__menuCache={acl:{},placeholder:{}};},get_role:function(){return this.policy_manager.getRole(this.role_uid);},get_role_name:function(_1fd9){var name=this.role.name;if(_1fd9){name=name.replace(/&/g,"&amp;");name=name.replace(/</g,"&lt;");name=name.replace(/>/g,"&gt;");}return name;},clearAclCache:function(){for(var sId in this.__menuCache.acl){var _1fdc=this.__menuCache.acl[sId];this.__clearDirectCache(_1fdc);delete this.__menuCache.acl[sId];}},clearPlaceholderCache:function(){this.__clearDirectCache(this.__menuCache.placeholder);},__clearDirectCache:function(_1fdd){for(var sId in _1fdd){var oMenu=_1fdd[sId];oMenu.destroyRecursive();oMenu=null;delete _1fdd[sId];}},clearCache:function(){this.clearAclCache();this.clearPlaceholderCache();},cacheMenuByAclAndType:function(oMenu,_1fe1,sType){var _1fe3=this.__menuCache.acl[_1fe1.id];if(!_1fe3){this.__menuCache.acl[_1fe1.id]={};}this.__menuCache.acl[_1fe1.id][sType]=oMenu;},getCachedMenu:function(sId,sType){var _1fe6=this.__menuCache.acl[sId];if(_1fe6&&_1fe6[sType]){return _1fe6[sType];}},is_vif_role:function(){return (this.get_role().uid.search("vif;")===0);},_create_placeholder_acl:function(type){if(this.is_readonly){return;}var role=this.get_role();if(type=="before"){if(role.acl_split_before!==0){return;}}else{if(type=="after"&&!this.is_vif_role()){if(role.acl_split_before!=role.acl_rules.length){return;}}else{return;}}var row=dojo.create("tr");dojo.addClass(row,"acl-placeholder-row");var cell1=dojo.create("td");dojo.attr(cell1,"colSpan",5);if(this.is_vif_role()){cell1.innerHTML="No ACLs.";}else{var _1feb=(type=="before")?"mandatory":"default";cell1.innerHTML="No "+_1feb+" ACLs.";}dojo.style(cell1,"borderRight","none");row.appendChild(cell1);var cell2=dojo.create("td");cell2.id=type+"_"+this.role_index;dojo.addClass(cell2,"acl-button");cell2.innerHTML="&nbsp;";dojo.style(cell2,"borderLeft","none");row.appendChild(cell2);dojo.addClass(row,this.classname);dojo.connect(cell2,"onclick",this,"clickPlaceholderCell");dojo.place(row,this.tbody);},_create_inner_row:function(){if(this.is_vif_role()){return;}if(this.is_bottom&&!this.is_stats){var _1fed=new nox.ext.apps.vmanui.acl({acl:null,role_widget:this,type:null});this.track_acl_related(_1fed);dojo.addClass(_1fed.domNode,"innermost-row");_1fed.startup();dojo.addClass(_1fed.domNode,this.classname);dojo.place(_1fed.domNode,this.tbody);}else{if(!this.is_bottom){if(this.inner_cell===undefined){this.inner_cell=dojo.create("td");dojo.attr(this.inner_cell,"colSpan",8);dojo.addClass(this.inner_cell,"policyInnerContainer");this.inner_div=dojo.create("div");this.inner_cell.appendChild(this.inner_div);}else{var _1fee=this.inner_cell.parentNode;_1fee.parentNode.removeChild(_1fee);}var row=dojo.create("tr");row.appendChild(this.inner_cell);dojo.place(row,this.tbody);}}},track_acl:function(_1ff0){this._acl_child_widgets.push(_1ff0);},track_acl_related:function(_1ff1){this._acl_related_child_widgets.push(_1ff1);},track_header_related:function(_1ff2){this._header_related_child_widgets.push(_1ff2);},clickPlaceholderCell:function(e){var oNode=e.target;var sId=oNode.id;var sType="";if(/(before|after)_(\d+)/.test(sId)){sType=RegExp.$1;var oMenu=this.__menuCache.placeholder[sType];if(!oMenu){var _1ff8=(sType=="after")?"before":"after";var oMenu=this.menuFactory.create_simple_acl_menu(oNode,this,this.policy_manager,_1ff8);this.track_acl_related(oMenu);this.__menuCache.placeholder[sType]=oMenu;oMenu._openMyself(e);}}},clickRemote:function(_1ff9){var sType="remote";var oMenu=this.getCachedMenu(_1ff9.id,sType);if(!oMenu){oMenu=this.menuFactory.show_remote_dialog(_1ff9,this.policy_manager);this.track_acl_related(m);this.cacheMenuByAclAndType(oMenu,_1ff9,sType);oMenu._openMyself(e);}},clickNetworkChange:function(e){var _1ffd=this.policy_manager.role_stack[this.role_index];if(!this.networkChangeMenu){this.networkChangeMenu=this.menuFactory.create_changevisibleuid_menu(this.view_others,_1ffd,this.policy_manager,dojo.hitch(this,"changeVisibleUid"));this.track_header_related(this.networkChangeMenu);this.networkChangeMenu._openMyself(e);dojo.disconnect(this.connectNetworkChange);}},clickGearCell:function(e){if(!this.roleGearMenu){this.roleGearMenu=this.menuFactory.create_simple_acl_menu(this.modify_cell,this,this.policy_manager);this.track_header_related(this.roleGearMenu);this.roleGearMenu._openMyself(e);dojo.disconnect(this.connectModifyCell);}},clickCellLink:function(oNode,_2000,sType,_2002,e){var m=this.getCachedMenu(_2000.id,sType);if(!m){m=this.menuFactory[_2002](oNode,_2000,this.policy_manager);this.track_acl_related(m);this.cacheMenuByAclAndType(m,_2000,sType);m._openMyself(e);}},changeDescription:function(_2005,_2006){var role=_2005.role_widget.role;var pm=_2005.role_widget.policy_manager;var index=_2005.acl.ui_index;role.acl_rules[index].description=_2006;pm.setRole(role);},_draw_acls:function(){this.clearCache();var role=this.get_role();if(this.table){dojo.query(".acl-placeholder-row",this.table).forEach(function(row){if(row.parentNode.parentNode==this.table){row.parentNode.removeChild(row);}},this);}var type="before";this._create_placeholder_acl("before");this._acl_child_widgets=[];for(var i=0;i<role.acl_rules.length;i++){if(i==role.acl_split_before){this._create_inner_row();type="after";}var acl=role.acl_rules[i];acl.ui_index=i;var _200f=new nox.ext.apps.vmanui.acl({acl:acl,role_widget:this,type:type});_200f.startup();dojo.addClass(_200f.domNode,this.classname);dojo.place(_200f.domNode,this.tbody,"last");this.track_acl(_200f);this.track_acl_related(_200f);if(this.is_stats){for(var j=0;j<role.acl_rules.length;j++){var _2011=role.acl_rules[j];if(_2011.invert_remote_addresses&&_2011.remote_groups.length===0&&_2011.remote_customs.length===0){var s=byId("acl-hits-uid-"+_2011.uid,this.domNode);if(s){s.innerHTML="0";}}}}}if(role.acl_rules.length==role.acl_split_before||role.acl_rules.length===0){this._create_inner_row();}this._create_placeholder_acl("after");this.setVisibilityCSS();},setDescriptionCSS:function(){dojo.forEach(this._acl_child_widgets,function(_2013){_2013.setDescRuleDisplay();});if(this.show_desc){dojo.query(".descRadio",this.domNode).addClass("dijitRadioChecked");dojo.query(".ruleRadio",this.domNode).removeClass("dijitRadioChecked");}else{dojo.query(".ruleRadio",this.domNode).addClass("dijitRadioChecked");dojo.query(".descRadio",this.domNode).removeClass("dijitRadioChecked");}},setVisibilityCSS:function(){var _2014=(this.is_visible)?"":"none";var cls=(this.is_visible)?"policyCollapse":"policyExpand";dojo.query("."+this.classname,this.domNode).forEach(function(node){dojo.style(node,{display:_2014});});dojo.removeClass(this.header,"policyCollapse");dojo.removeClass(this.header,"policyExpand");dojo.addClass(this.header,cls);if(this.inner_cell!==undefined){if(this.is_visible){dojo.addClass(this.inner_cell,"expandRuleContainer");}else{dojo.removeClass(this.inner_cell,"expandRuleContainer");}}},postMixInProperties:function(){var tab=nox.ext.apps.vmanui.main.current_tabs["vac"];if(tab=="policy"){this.contentPane=dijit.byId("policy");}var _2018=this.getBottomLayer();while(this.role_index<this.policy_manager.role_stack.length){var _2019=this.policy_manager.role_stack[this.role_index];if(dojo.isArray(_2019)){if(_2019.length===0){this.role_index++;continue;}var _201a=dojo.map(_2019,function(_201b){return _201b.uid;});var uid=null;if(this.contentPane){uid=this.contentPane.ui_state[_2018.uid].role_to_show[this.role_index];}if(uid&&(dojo.indexOf(_201a,uid)!=-1)){this.role_uid=uid;}else{this.role_uid=_2019[0].uid;}}else{this.role_uid=_2019.uid;}break;}this.role=this.get_role();this.is_bottom=this.role_index==this.policy_manager.role_stack.length-1;var _201d;if(this.contentPane){_201d=this.contentPane.ui_state[_2018.uid].visibility_state[this.role_uid];}if(_201d!=undefined){this.is_visible=_201d;}else{this.is_visible=this.is_bottom;}this.classname=this.role_uid+"-content";},redraw_acls:function(){this.header_label.innerHTML=this._getHeaderLabel();this._acl_child_widgets=[];this._destroyChildWidgets(this._acl_related_child_widgets);this._draw_acls();},postCreate:function(){this.tbody=dojo.query("tbody",this.table)[0];this.redraw_acls();if(!this.is_bottom){this.child=new nox.ext.apps.vmanui.role_policy_layer({role_index:this.role_index+1,policy_manager:this.policy_manager,is_stats:this.is_stats,is_readonly:this.is_readonly,parent_layer:this},this.inner_div);this.child.startup();}if(this.is_stats){dojo.addClass(this.domNode,"policy-table-with-stats");}var _201e=this.policy_manager.role_stack[this.role_index];var m=null;if(dojo.isArray(_201e)&&_201e.length>1){dojo.style(this.view_others,{"display":"inline"});this.view_others.innerHTML="Change Network";this.connectNetworkChange=dojo.connect(this.view_others,"onclick",this,"clickNetworkChange");}if(!this.is_readonly){this.connectModifyCell=dojo.connect(this.modify_cell,"onclick",this,"clickGearCell");}},_destroyChildWidgets:function(_2020){dojo.forEach(_2020,function(_2021){try{_2021.destroyRecursive();_2021=null;}catch(e){}});_2020=[];},redrawAclsRecursive:function(){this.redraw_acls();if(this.child){this.child.redrawAclsRecursive();}},toggleVisibility:function(){this.setVisibility(dojo.hasClass(this.header,"policyExpand"));},setVisibility:function(_2022){this.is_visible=_2022;this.setVisibilityCSS();var _2023=this.getBottomLayer();if(this.contentPane){this.contentPane.ui_state[_2023.uid].visibility_state[this.role_uid]=_2022;}},recursiveEnforceVisibility:function(){this.setVisibility(this.is_visible);if(this.child){this.child.recursiveEnforceVisibility();}},recursiveSetVisibility:function(_2024){if(this.child){this.setVisibility(_2024);this.child.recursiveSetVisibility(_2024);}else{this.setVisibility(true);}},recursiveSetShowDescription:function(_2025){this.show_desc=_2025;this.setDescriptionCSS();if(this.child){this.child.recursiveSetShowDescription(_2025);}this.onShowDescChange(_2025);},onShowDescChange:function(_2026){},onShowRule:function(){this.changeShowDesc(false);},onShowDesc:function(){this.changeShowDesc(true);},changeShowDesc:function(_2027){var _2028=this.getTopLayer();_2028.recursiveSetShowDescription(_2027);},getBottomLayer:function(){var _2029=this.policy_manager.role_stack.length-1;return this.policy_manager.role_stack[_2029];},getTopLayer:function(){if(this.parent_layer===null){return this;}else{return this.parent_layer.getTopLayer();}},onModify:function(){},changeVisibleUid:function(_202a){var _202b=this.getBottomLayer();if(this.contentPane){this.contentPane.ui_state[_202b.uid].role_to_show[this.role_index]=_202a;}this.role_uid=_202a;this.role=this.get_role();this.redraw_acls();},_getHeaderLabel:function(){var type=this.role.uid.split(";")[0];switch(type){case "global":return "Global Policy";case "pool":return "Policy for pool '"+this.get_role_name(true)+"'";case "network":return "Policy for network '"+this.get_role_name(true)+"'";case "vm":return "Policy for VM '"+this.get_role_name(true)+"'";case "vif":return "Policy for Interface '"+this.get_role_name(true)+"'";default:return "Policy for '"+this.get_role_name(true)+"'";}},uninitialize:function(){this.inherited(arguments);this.desc_toggle.destroyRecursive();this.rule_toggle.destroyRecursive();if(this.child){this.child.destroyRecursive();}this._acl_child_widgets=[];this._destroyChildWidgets(this._acl_related_child_widgets);this._destroyChildWidgets(this._header_related_child_widgets);}});}if(!dojo._hasResource["nox.ext.apps.vmanui.role_config_layer"]){dojo._hasResource["nox.ext.apps.vmanui.role_config_layer"]=true;dojo.provide("nox.ext.apps.vmanui.role_config_layer");dojo.declare("nox.ext.apps.vmanui.role_config_layer",[dijit._Widget,dojox.dtl._Templated],{widgetsInTemplate:true,policy_manager:null,role_index:null,is_bottom:false,is_readonly:false,parent_layer:null,use_strikethrough:false,child_widgets:null,get_role:function(){return this.policy_manager.getRole(this.role_uid);},get_role_name:function(_202d){var name=this.role.name;if(_202d){name=name.replace(/&/g,"&amp;");name=name.replace(/</g,"&lt;");name=name.replace(/>/g,"&gt;");}return name;},isConfigSet:function(){return false;},_postMixInSetup:function(){},postMixInProperties:function(){while(this.role_index<this.policy_manager.role_stack.length){var _202f=this.policy_manager.role_stack[this.role_index];if(dojo.isArray(_202f)){if(_202f.length===0){this.role_index++;continue;}this.role_uid=_202f[0].uid;}else{this.role_uid=_202f.uid;}break;}this.role=this.get_role();var _2030=this.policy_manager.role_stack.length-1;this.is_bottom=this.role_index==_2030;this.is_global=this.parent_layer===null;this._postMixInSetup();},postCreate:function(){this.child_widgets=[];var _2031=this.policy_manager.role_stack[this.role_index];if(dojo.isArray(_2031)&&_2031.length>1){dojo.style(this.view_others,{"display":"inline"});this.view_others.innerHTML="Change Network";var menus=nox.ext.apps.vmanui.menu_creator.creator;var m=menus.create_changevisibleuid_menu(this.view_others,_2031,this.policy_manager,dojo.hitch(this,this.changeVisibleUid));this.child_widgets.push(m);}if(this.off_block&&this.parent_layer===null){dojo.style(this.off_block,"display","none");}this._postCreateSetup();},uninitialize:function(){this.inherited(arguments);if(this.child){this.child.destroyRecursive();}if(this.child_widgets){dojo.forEach(this.child_widgets,function(w){w.destroyRecursive();});}},updateAllStrikeThrough:function(){var b=this.getBottomLayer();var _2036=!(b.inherit.getValue());var p=b.parent_layer;while(p!==null){p.use_strikethrough=_2036;p.updateStrikeThrough();_2036=_2036||p.isConfigSet();p=p.parent_layer;}},updateStrikeThrough:function(){if(this.use_strikethrough){dojo.addClass(this.text_desc,"invalidatedPortConfig");}else{dojo.removeClass(this.text_desc,"invalidatedPortConfig");}},changeVisibleUid:function(_2038){},inputIsValid:function(){return true;},recursiveInputIsValid:function(){if(this.is_bottom){return this.inputIsValid();}else{return this.child.recursiveInputIsValid();}},getBottomLayer:function(){if(this.is_bottom){return this;}else{return this.child.getBottomLayer();}},onIsValidChange:function(_2039){if(this.parent_layer!==null){this.parent_layer.onIsValidChange(_2039);}}});}if(!dojo._hasResource["nox.ext.apps.vmanui.role_qos_layer"]){dojo._hasResource["nox.ext.apps.vmanui.role_qos_layer"]=true;dojo.provide("nox.ext.apps.vmanui.role_qos_layer");dojo.declare("nox.ext.apps.vmanui.role_qos_layer",[nox.ext.apps.vmanui.role_config_layer],{templateString:"\n<div style=\"\" > \n  \n  <p class=\"qosHeader {{role.xen_type}}\">\n    <span dojoAttachPoint=\"label\"></span>  \n  {% if is_bottom %}\n            </p> \n            <input dojoType=\"dijit.form.RadioButton\" name=\"qos_config\" \n            dojoAttachPoint=\"inherit\" type=\"radio\" \n            dojoAttachEvent=\"onClick:onRadioChange\"/>\n            {% if is_global  %}  \n              No global QoS policy\n            {% else %} \n              Inherit QoS policy from parent \n            {% endif %}\n            <div dojoAttachPoint=\"off_block\"> \n            <br> \n            <input dojoType=\"dijit.form.RadioButton\" name=\"qos_config\"\n            dojoAttachPoint=\"off\" type=\"radio\"  \n            dojoAttachEvent=\"onClick:onRadioChange\"/>\n            Disable inherited QoS policy\n            </div> \n            <br> \n            <input dojoType=\"dijit.form.RadioButton\" name=\"qos_config\"\n            dojoAttachPoint=\"set\" type=\"radio\" \n            dojoAttachEvent=\"onClick:onRadioChange\"/>\n            Apply a QoS limit of \n            <input dojoType=\"dijit.form.NumberSpinner\"\n            constraints=\"{min:1,places:0}\"\n            smallDelta=\"1\"\n            required=\"true\"\n            intermediateChanges=\"true\"\n            dojoAttachPoint=\"set_rate\" style=\"width:100px;\"\n            dojoAttachEvent=\"onClick:onEdit\" />  \n            <select dojoType=\"dijit.form.FilteringSelect\" dojoAttachPoint=\"set_rate_unit\" \n              style=\"width: 100px\" dojoAttachEvent=\"onClick:onEdit\" > \n              <option value=\"1000\" selected=\"true\"> Kbit / sec </option> \n              <option value=\"1000000\"> Mbit / sec </option> \n              <option value=\"1000000000\"> Gbit / sec </option> \n            </select>\n            with a burst size of  \n            <input dojoType=\"nox.ext.apps.vmanui.role_qos_layer.BurstSizeNumberSpinner\"\n            constraints=\"{min:1,places:0}\"\n            intermediateChanges=\"true\"\n            smallDelta=\"1\"\n            required=\"true\" \n            dojoAttachPoint=\"set_burst\" style=\"width:100px;\"\n            dojoAttachEvent=\"onClick:onEdit\" />  \n            <select dojoType=\"dijit.form.FilteringSelect\" dojoAttachPoint=\"set_burst_unit\" \n              style=\"width: 100px\" dojoAttachEvent=\"onClick:onEdit, onChange:onChangeBurstUnit\" > \n              <option value=\"1000\" selected=\"true\"> Kbits </option> \n              <option value=\"1000000\"> Mbits </option> \n              <option value=\"1000000000\"> Gbits </option> \n            </select> \n          \n   {% else %} \n   <span dojoAttachPoint=\"text_desc\"> </span> \n   <span class=\"policyViewOthers\" dojoAttachPoint=\"view_others\"></span> \n      \n   </p> \n            <div class=\"innerContainer\" dojoAttachPoint=\"inner_div\" ></div> \n   {% endif %} \n</div>  \n",widgetsInTemplate:true,fields:["inherit","off","set","set_rate","set_rate_unit","set_burst","set_burst_unit"],_getHeaderLabel:function(){return "QoS policy for '"+this.get_role_name(true)+"':";},isConfigSet:function(){var q=this.role.qos;return q=="set"||q=="off";},_drawNonBottom:function(){var _203b=this.role.qos;var _203c=this.role.qos_limit_kbps;var _203d=this.role.qos_burst_kbps;this.label.innerHTML=this._getHeaderLabel();if(_203b=="set"){this.text_desc.innerHTML="QoS limit of "+this._get_unit_text(_203c,true)+" and max-burst "+this._get_unit_text(_203d,false);}else{if(_203b=="off"){this.text_desc.innerHTML="QoS enforcement disabled";}else{this.text_desc.innerHTML=this.is_global?"None":"";}}dojo.addClass(this.text_desc,"role-config-data");this.updateStrikeThrough();},_drawBottom:function(){var _203e=this.role.qos;var _203f=this.role.qos_limit_kbps*1000;var _2040=this.role.qos_burst_kbps*1000;this.label.innerHTML=this._getHeaderLabel();if(_203e=="set"){this.set.setValue(true);var _2041=this._get_unit_multiplier(_203f);var _2042=_203f/_2041;this.set_rate.setValue(_2042);this.set_rate_unit.setValue(_2041);var _2043=this._get_unit_multiplier(_2040);var _2044=_2040/_2043;this.set_burst.setValue(_2044);this.set_burst_unit.setValue(_2043);}else{if(_203e=="off"){this.off.setValue(true);}else{this.inherit.setValue(true);}}},_postCreateSetup:function(){if(!this.is_bottom){this.child=new nox.ext.apps.vmanui.role_qos_layer({role_index:this.role_index+1,policy_manager:this.policy_manager,parent_layer:this,is_readonly:this.is_readonly});this.inner_div.appendChild(this.child.domNode);this.child.startup();this._drawNonBottom();}else{this._drawBottom();this.update_controls();dojo.forEach(this.fields,dojo.hitch(this,function(_2045){if(this[_2045]){this.child_widgets.push(this[_2045]);}}));this.set_burst.unitsWidget=this.set_burst_unit;dojo.connect(this.set_rate,"onChange",dojo.hitch(this,"save"));dojo.connect(this.set_rate_unit,"onChange",dojo.hitch(this,"save"));dojo.connect(this.set_rate_unit,"onKeyUp",dojo.hitch(this,"save"));dojo.connect(this.set_burst,"onChange",dojo.hitch(this,"save"));dojo.connect(this.set_burst_unit,"onChange",dojo.hitch(this,"save"));dojo.connect(this.set_burst_unit,"onKeyUp",dojo.hitch(this,"save"));}},onEdit:function(){nox.ext.apps.vmanui.main.editStarted();},onChangeBurstUnit:function(evt){this.set_burst.validate();},inputIsValid:function(){if(this.inherit.getValue()||this.off.getValue()){return true;}var _2047=true;dojo.forEach(this.fields,function(_2048){if(_2048=="inherit"||_2048=="off"||_2048=="set"){return;}if(!this[_2048].isValid()){this[_2048].focus();_2047=false;}},this);return _2047;},save:function(){if(!this.inputIsValid()){this.onIsValidChange(false);return;}this.onIsValidChange(true);if(this.set.getValue()){this.role.qos="set";var l=this.set_rate.getValue()*this.set_rate_unit.getValue();this.role.qos_limit_kbps=parseInt(l/1000,10);this.role.qos_burst="set";var b=this.set_burst.getValue()*this.set_burst_unit.getValue();this.role.qos_burst_kbps=parseInt(b/1000,10);}else{if(this.off.getValue()){this.role.qos="off";this.role.qos_limit_kbps=null;this.role.qos_burst="off";this.role.qos_burst_kbps=null;}else{this.role.qos="inherit";this.role.qos_limit_kbps=null;this.role.qos_burst="inherit";this.role.qos_burst_kbps=null;}}this.policy_manager.setRole(this.role);},onRadioChange:function(){var qos=this.role.qos;var _204c=(!(this.set.getValue()&&qos=="set"||this.off.getValue()&&qos=="off"||this.inherit.getValue()&&qos=="inherit"));this.update_controls();if(_204c){this.save();this.onEdit();}},update_controls:function(){var _204d=this.set.getValue();if(!_204d){this.set_rate.setValue("");this.set_rate_unit.setValue("");this.set_burst.setValue("");this.set_burst_unit.setValue("");}else{if(isNaN(this.set_rate.getValue())){this.set_rate.setValue("100");this.set_rate_unit.setValue("1000");this.set_burst.setValue("100");this.set_burst_unit.setValue("1000");}}this.set_rate.attr("disabled",!_204d);this.set_rate_unit.attr("disabled",!_204d);this.set_burst.attr("disabled",!_204d);this.set_burst_unit.attr("disabled",!_204d);if(this.parent_layer!==null){this.updateAllStrikeThrough();}if(this.is_readonly){dojo.forEach(this.fields,dojo.hitch(this,function(_204e){if(this[_204e]){this[_204e].attr("disabled",true);}}));}},changeVisibleUid:function(_204f){this.role_uid=_204f;this.role=this.get_role();this._drawNonBottom();this.updateAllStrikeThrough();},_get_unit_multiplier:function(_2050){var _2051=1;while(_2050>=(_2051*1000)){_2051*=1000;}return _2051;},_get_unit_text:function(_2052,_2053){var _2054=1;while((_2052/(_2054*1000))>=1){_2054*=1000;}var _2055={1:"K",1000:"M",1000000:"G"};var p=_2055[_2054];if(p===undefined){return "?";}var type=_2053?p+"bit / sec":p+"bits";return parseInt(_2052/_2054,10)+" "+type;}});dojo.declare("nox.ext.apps.vmanui.role_qos_layer.BurstSizeNumberSpinner",dijit.form.NumberSpinner,{unitsWidget:null,minimumBurstSpeed:13000,__errorType:0,minimumSpeedErrorMessage:"Burst size cannot be under 13 Kbits",isValid:function(){var _2058=this.inherited(arguments);this.errorType(0);if(_2058&&this.unitsWidget){var _2059=this.unitsWidget.getValue();var iSize=this.getValue()*_2059;if(iSize>=this.minimumBurstSpeed){_2058=true;}else{this.errorType(1);_2058=false;}}return _2058;},getErrorMessage:function(){if(this.errorType()==1){return this.minimumSpeedErrorMessage;}return this.inherited(arguments);},errorType:function(){if(arguments.length){this.__errorType=arguments[0];return this;}return this.__errorType;}});}if(!dojo._hasResource["nox.ext.apps.vmanui.role_rspan_layer"]){dojo._hasResource["nox.ext.apps.vmanui.role_rspan_layer"]=true;dojo.provide("nox.ext.apps.vmanui.role_rspan_layer");dojo.declare("nox.ext.apps.vmanui.role_rspan_layer",[nox.ext.apps.vmanui.role_config_layer],{templateString:"<div>\n  <p class=\"role_spanHeader {{role.xen_type}}\">\n    <span dojoAttachPoint=\"label\"></span>\n{% if not is_bottom %}\n    <span dojoAttachPoint=\"text_desc\"></span>\n    <span class=\"policyViewOthers\" dojoAttachPoint=\"view_others\"></span>\n{% endif %}\n  </p>\n\n{% if is_bottom %}\n  <input dojoType=\"dijit.form.RadioButton\" name=\"rspan_config\"\n    dojoAttachPoint=\"inherit\" type=\"radio\"\n    dojoAttachEvent=\"onClick:onRadioChange\"/>\n    {% if is_global %}\n      No global RSPAN policy\n    {% else %}\n      Inherit RSPAN policy from parent\n    {% endif %}\n  <div dojoAttachPoint=\"off_block\">\n    <br />\n    <input dojoType=\"dijit.form.RadioButton\" name=\"rspan_config\"\n      dojoAttachPoint=\"off\" type=\"radio\"\n      dojoAttachEvent=\"onClick:onRadioChange\"/>\n  Disable inherited RSPAN policy\n  </div>\n  <br>\n  <input dojoType=\"dijit.form.RadioButton\" name=\"rspan_config\"\n  dojoAttachPoint=\"set\" type=\"radio\"\n  dojoAttachEvent=\"onClick:onRadioChange\" />\n  RSPAN traffic to target VLAN\n  <input dojoType=\"dijit.form.FilteringSelect\" dojoAttachPoint=\"set_value\" required=\"true\" dojoAttachEvent=\"onClick:onEdit\" />\n  <span class=\"link vlan_link\" style=\"margin-left:15px\">Manage target VLAN list</span>\n  <span class=\"bad_vlan error_span\"></span>\n{% else %}\n  <div class=\"innerContainer\" dojoAttachPoint=\"inner_div\" ></div>\n{% endif %}\n</div>\n",widgetsInTemplate:true,fields:["inherit","off","set","set_value"],isConfigSet:function(){var r=this.role.rspan;return r=="set"||r=="off";},_getHeaderLabel:function(){return "RSPAN policy for '"+this.get_role_name(true)+"':";},_drawNonBottom:function(){var _205c=this.role.rspan;var value=this.role.rspan_vlan;this.label.innerHTML=this._getHeaderLabel();if(_205c=="set"){this.text_desc.innerHTML="RSPAN to VLAN "+value;}else{if(_205c=="off"){this.text_desc.innerHTML="RSPAN disabled";}else{this.text_desc.innerHTML=this.is_global?"None":"";}}dojo.addClass(this.text_desc,"role-config-data");this.updateStrikeThrough();},postCreate:function(){if(this.set_value){this.set_value.store=this.vlanStore();}this.inherited(arguments);},_postCreateSetup:function(){var _205e=this.role.rspan;var value=this.role.rspan_vlan;if(this.set_value){this.badVlanSpan=dojo.query(".bad_vlan",this.domNode)[0];this.statusLink=dojo.query("span.vlan_link",this.domNode)[0];this.set_value.store.fetch({onComplete:dojo.hitch(this,"initRspanValueStore")});}if(!this.is_bottom){this.child=new nox.ext.apps.vmanui.role_rspan_layer({role_index:this.role_index+1,policy_manager:this.policy_manager,parent_layer:this,is_readonly:this.is_readonly});this.inner_div.appendChild(this.child.domNode);this.child.startup();this._drawNonBottom();}else{this.label.innerHTML=this._getHeaderLabel();if(_205e=="set"){this.set_value.attr("value",value);this.set_value.validate();this.badVlanSpan.innerHTML="";if(!this.set_value.isValid()||this.set_value.attr("value")!=value){if(this.badVlanSpan){this.badVlanSpan.innerHTML="Saved value "+value+" is no longer available. Please "+"choose a valid VLAN or another policty "+"option.";var h=dojo.connect(this.policy_manager,"onSaveSuccess",this,function(){if(this.badVlanSpan){this.badVlanSpan.innerHTML="";}dojo.disconnect(h);});}}this.set.setValue(true);}else{if(_205e=="off"){this.off.setValue(true);}else{this.inherit.setValue(true);}}this.update_controls();dojo.forEach(this.fields,dojo.hitch(this,function(_2061){if(this[_2061]){this.child_widgets.push(this[_2061]);}}));dojo.connect(this.set_value,"onChange",dojo.hitch(this,"save"));}},getBestTreeUid:function(){var bOK=false;var _2063=nox.ext.apps.vmanui.main.current_tree_item.tree_uid;var vac=nox.ext.apps.vmanui.vac;var nt=vac.node_types;var pt=vac.parent_types;var ct=0;while(bOK==false&&ct<30){var parts=_2063.split("_");var type=parts[0];if(type==nt.ALL_POOLS||type==nt.POOL||type==nt.NETWORK||type==nt.SERVER_NETWORK){bOK=true;}else{parts[0]=pt[type];parts.pop();_2063=parts.join("_");}ct++;}if(bOK){return _2063;}return null;},initRspanValueStore:function(_206a){if(this.statusLink){if(_206a.length==0){var id=this.getBestTreeUid();if(id){dojo.style(this.statusLink,{"display":"inline"});this.statusLink.onclick=function(){nox.ext.apps.vmanui.vac.show_vac_tab("status",id);};}else{this.statusLink.onclick=null;}}else{dojo.style(this.statusLink,{"display":"none"});}}},onEdit:function(){nox.ext.apps.vmanui.main.editStarted();},inputIsValid:function(){if(this.inherit.getValue()||this.off.getValue()){return true;}if(!this.set_value.isValid()){this.set_value.focus();return false;}return true;},save:function(){if(!this.inputIsValid()){this.onIsValidChange(false);return;}if(this.set.getValue()){this.role.rspan="set";this.role.rspan_vlan=this.set_value.getValue();}else{if(this.off.getValue()){this.role.rspan="off";this.role.rspan_vlan=null;}else{this.role.rspan="inherit";this.role.rspan_vlan=null;}}this.onIsValidChange(true);this.policy_manager.setRole(this.role);},onRadioChange:function(){var rspan=this.role.rspan;var _206d=(!(rspan=="set"&&this.set.getValue()||rspan=="off"&&this.off.getValue()||rspan=="inherit"&&this.inherit.getValue()));if(_206d){this.onEdit();this.save();this.update_controls();}},getRoleStackVlans:function(){var oIds=this.getRoleStackIdMap();var _206f=[];if(oIds.global){_206f=this.getVlans();if(oIds.pool){var _2070=this.getVlans(oIds.pool);_206f=nox.ext.apps.vmanui.util.arrayUnion(_206f,_2070);if(oIds.network){var _2071=[];if(dojo.isArray(oIds.network)){var _2072=[];dojo.forEach(oIds.network,function(_2073){_2072.push(this.getVlans(oIds.pool,_2073));},this);_2071=nox.ext.apps.vmanui.util.arrayIntersect.apply(null,_2072);}else{_2071=this.getVlans(oIds.pool,oIds.network);}_206f=nox.ext.apps.vmanui.util.arrayUnion(_206f,_2071);}}}return _206f;},vlanUrl:function(_2074,_2075){if(_2074&&_2075){return ["/ws.v1","xen_directory",_2074,"network",_2075,"vlan"].join("/");}else{if(_2074){return ["/ws.v1","xen_directory",_2074,"vlan"].join("/");}else{return "/ws.v1/xen_directory/vlan";}}},getVlans:function(_2076,_2077){var url=this.vlanUrl(_2076,_2077);var vlans=[];nox.ext.apps.vmanui.xhrGet({url:url,sync:true,handleAs:"json",preventCache:true,timeout:10000,load:function(_207a,_207b){vlans=nox.ext.apps.vmanui.util.keys(_207a);},error:function(_207c,_207d){console.log(_207c);}});return vlans;},getRoleStackIdMap:function(){ids={};dojo.forEach(this.policy_manager.role_stack,function(role){if(dojo.isArray(role)){if(role.length&&role[0].xen_type=="network"){ids[role[0].xen_type]=[];dojo.forEach(role,function(oRole){var id=oRole.uid.replace(oRole.xen_type+";","");ids[oRole.xen_type].push(id);},this);}}else{var id=role.uid.replace(role.xen_type+";","");ids[role.xen_type]=id;}},this);return ids;},vlanStore:function(){this.getRoleStackVlans();var data={identifier:"name",label:"name",items:[]};data.items=dojo.map(this.getRoleStackVlans().sort(function(a,b){return a-b;}),function(vlan){return {name:vlan};});return new dojo.data.ItemFileReadStore({data:data});},update_controls:function(){this.set_value.attr("disabled",!this.set.getValue());if(!this.set.getValue()){this.set_value.setValue("");}if(this.parent_layer!==null){this.updateAllStrikeThrough();}if(this.is_readonly){dojo.forEach(this.fields,dojo.hitch(this,function(_2086){if(this[_2086]){this[_2086].attr("disabled",true);}}));}},changeVisibleUid:function(_2087){this.role_uid=_2087;this.role=this.get_role();this._drawNonBottom();this.updateAllStrikeThrough();}});}if(!dojo._hasResource["nox.ext.apps.vmanui.policy_manager"]){dojo._hasResource["nox.ext.apps.vmanui.policy_manager"]=true;dojo.provide("nox.ext.apps.vmanui.policy_manager");dojo.declare("nox.ext.apps.vmanui.PolicyManager",null,{_role_map:null,_proto_map:null,_nwaddrgroup_map:null,owner_uid:null,role_stack:null,menus:null,canceled:false,constructor:function(_2088){this.owner_uid=_2088;this._dirty_roles={};this._proto_map={};this._nwaddrgroup_map={};this.dirty_protos={};},_make_acl:function(dir,desc){return {action:"allow",uid:null,protocol_uid:null,description:desc,direction:dir,invert_remote_addresses:false,remote_groups:[],remote_customs:[]};},_do_get:function(url){return nox.ext.apps.vmanui.xhrGet({url:url,timeout:10000,handleAs:"json",preventCache:true});},initialize:function(){var d1=this._do_get("/ws.v1/protocol");var d2=this._do_get("/ws.v1/role/"+encodeURI(this.owner_uid)+"/stack");var d3=this._do_get("/ws.v1/group/nwaddr");var dlist=new dojo.DeferredList([d1,d2,d3]);dlist.addCallback(dojo.hitch(this,function(_2090){this.init_deferred=null;var _2091=false;if(_2090.length!=3){nox.ext.apps.vmanui.main.console_log("Error: deferredlist expected 3 items, got: ",res);_2091=true;}dojo.forEach(_2090,function(res){if(!res[0]){nox.ext.apps.vmanui.main.console_log("Error loading policy data",res[1]);_2091=true;}});if(_2091){all_done.callback(false);return;}this._proto_map={};dojo.forEach(_2090[0][1],function(p){this._proto_map[p.uid]=p;},this);this.role_stack=_2090[1][1];this.setRoleMapFromStack();this._nwaddgroup_map={};dojo.forEach(_2090[2][1],function(g){this._nwaddrgroup_map[g[0]]={"uid":g[0],"name":g[1],"members":g[2]};},this);return true;}));this.init_deferred=dlist;return dlist;},setRoleMapFromStack:function(){this._role_map={};for(var i=0;i<this.role_stack.length;i++){if(dojo.isArray(this.role_stack[i])){var _2096=this.role_stack[i];for(var j=0;j<_2096.length;j++){this._role_map[_2096[j].uid]=_2096[j];}}else{this._role_map[this.role_stack[i].uid]=this.role_stack[i];}}return null;},setDisableMACSpoof:function(uid,val){this._role_map[uid].mac_spoof_disabled=val=="on"?"true":"false";this._dirty_roles[uid]="";},getDisableMACSpoof:function(uid){return this._role_map[uid].mac_spoof_disabled;},getRole:function(_209b){return this._role_map[_209b];},setRole:function(role){if(role.uid===undefined||role.uid===null){nox.ext.apps.vmanui.main.console_log("error, cannot setRole with empty uid");return;}this._role_map[role.uid]=role;this._dirty_roles[role.uid]="";this.onModify(role);},onModify:function(role){},saveAll:function(){return this.saveRoles();},saveRoles:function(){var _209e=dijit.byId("csrf_token_v").getValue();var _209f=new dojo.Deferred();var _20a0=[];for(var uid in this._dirty_roles){if(true){var _20a2=dojo.clone(this.getRole(uid));_20a2["csrf_token"]=_209e;var d=nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/role/"+encodeURI(uid),headers:{"content-type":"application/json","X-CSRF-Token":_209e},putData:dojo.toJson(_20a2),timeout:10000});_20a0.push(d);}}var alld=new dojo.DeferredList(_20a0);alld.addCallback(dojo.hitch(this,function(_20a5){dojo.forEach(_20a5,function(res){if(!res[0]){nox.ext.apps.vmanui.main.console_log("error saving role data",res[1]);return;}this._dirty_roles={};_209f.callback();});this.onSaveSuccess();}));return _209f;},onSaveSuccess:function(){},getProtocol:function(_20a7){return this._proto_map[_20a7];},getProtocolStore:function(){return this._get_readonlystore_from_uid_map(this._proto_map);},_get_readonlystore_from_uid_map:function(_20a8){var _20a9=[];for(var uid in _20a8){if(true){_20a9.push(dojo.clone(_20a8[uid]));}}var data={identifier:"uid",label:"name",items:_20a9};return new dojo.data.ItemFileReadStore({data:data});},_refresh_protocols:function(_20ac){var d2=this._do_get("/ws.v1/protocol");d2.addCallback(dojo.hitch(this,function(_20ae){this._proto_map={};dojo.forEach(_20ae,function(p){this._proto_map[p.uid]=p;},this);return _20ac.uid;}));return d2;},addProtocol:function(proto){var _20b1=dijit.byId("csrf_token_v").getValue();var _20b2=dojo.clone(proto);_20b2["csrf_token"]=_20b1;var d=nox.ext.apps.vmanui.rawXhrPost({url:"/ws.v1/protocol",headers:{"content-type":"application/json","X-CSRF-Token":_20b1},postData:dojo.toJson(_20b2),handleAs:"json",timeout:10000});d.addCallback(dojo.hitch(this,"_refresh_protocols"));return d;},modifyProtocol:function(proto){var _20b5=dijit.byId("csrf_token_v").getValue();var _20b6=dojo.clone(proto);_20b6["csrf_token"]=_20b5;var d=nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/protocol/"+encodeURIComponent(_20b6.uid),headers:{"content-type":"application/json","X-CSRF-Token":_20b5},putData:dojo.toJson(_20b6),handleAs:"json",timeout:10000});d.addCallback(dojo.hitch(this,"_refresh_protocols"));d.addErrback(function(){nox.ext.apps.vmanui.main.console_log("error modifying protocol: ",arguments);});return d;},deleteProtocol:function(uid){var _20b9=dijit.byId("csrf_token_v").getValue();var d=nox.ext.apps.vmanui.xhrDelete({url:"/ws.v1/protocol/"+encodeURIComponent(uid),headers:{"content-type":"application/json","X-CSRF-Token":_20b9},handleAs:"json",timeout:10000});d.addCallback(dojo.hitch(this,"_refresh_protocols"));return d;},getNWAddrGroup:function(_20bb){return this._nwaddrgroup_map[_20bb];},getNWAddrGroupStore:function(){return this._get_readonlystore_from_uid_map(this._nwaddrgroup_map);},isCanceled:function(){return this.canceled;},cancel:function(){this.canceled=true;if(this.init_deferred){this.init_deferred.cancel();this.init_deferred=null;}}});}if(!dojo._hasResource["nox.ext.apps.vmanui.vac_status"]){dojo._hasResource["nox.ext.apps.vmanui.vac_status"]=true;dojo.provide("nox.ext.apps.vmanui.vac_status");(function(){var _20bc=nox.ext.apps.vmanui;var _20bd=nox.ext.apps.vmanui.vac_status;_20bd.status_init=function(){nox.ext.apps.vmanui.main.set_document_subtitle("Status");dojo.style(dojo.byId("status"),{display:"block"});dojo.query("tr",this.domNode).forEach(function(row,i){dojo.addClass(row,i%2?"oddRow":"evenRow");});var t=_20bc.vac.node_types;var _20c1=_20bd._get_current_node_type();if(_20c1===null){return;}_20bd.dijits_to_destroy=[];_20bd.vlan_attempts=0;_20bd.vlan_attempt_pid=null;_20bd.vlan_pool_id=null;_20bd.vlan_request=null;clearTimeout(_20bd.vlan_attempt_pid);switch(_20c1){case t.ALL_POOLS:_20bd._init_allpools();break;case t.POOL:_20bd._init_pool();break;case t.ADMIN_NET_GROUP:_20bd._init_adminnetwork();break;case t.SERVER_NETWORK:case t.NETWORK:_20bd._init_network();break;case t.NETWORK_VIF:case t.SERVER_NETWORK_VIF:case t.SERVER_VIF:case t.VM_VIF:case t.ADMIN_VIF:dojo.query("tr","iface_stats").forEach(function(row,i){dojo.removeClass(row,"evenRow");dojo.removeClass(row,"oddRow");});break;}};_20bd._get_current_node_type=function(){var href=dijit.byId("status").attr("href");var arr1=href.split("&");for(var i=0;i<arr1.length;i++){if(arr1[i].indexOf("node_type=")!=-1){return parseInt(arr1[i].split("=")[1],10);}}return null;};_20bd._init_allpools=function(){dojo.query(".acl-button",dojo.byId("status")).forEach(function(td){var menu=_20bc.menu_creator.creator.create_pool_modify_menu(td);_20bd.dijits_to_destroy.push(menu);});var url="/ws.v1/xen_directory/vlan";_20bd._init_vlans(url,null,null,"allpools_vlans");};_20bd._init_network=function(){var _20ca=_20bc.main.current_tree_item.uid;var _20cb=_20bc.main.current_tree_item.pool_uid;var _20cc=["/ws.v1","xen_directory",_20cb,"network",_20ca,"vlan"];var url=_20cc.join("/");_20bd._init_vlans(url,_20cb,_20ca,"network_instance_vlans");};_20bd._init_pool=function(){_20bd.init_fail_mode();if(dojo.query("body.cap-set-netflow-config").length===0){dijit.byId("vnet_netflow").attr("disabled",true);dijit.byId("other_netflow").attr("disabled",true);dijit.byId("other_netflow_text").attr("disabled",true);}else{dojo.forEach(["vnet_netflow","other_netflow"],function(id){dojo.connect(dijit.byId(id),"onChange",function(){_20bc.main.editStarted();var _20cf=dijit.byId("other_netflow");var _20d0=dijit.byId("other_netflow_text");var _20d1=true;if(_20cf.getValue()&&!_20d0.isValid()){_20d0.focus();_20d1=false;}dijit.byId("netflow_save_btn").attr("disabled",!_20d1);dijit.byId("netflow_reset_btn").attr("disabled",false);_20d0.attr("disabled",!_20cf.getValue());if(!_20cf.getValue()){_20d0.setValue("");}});});dojo.connect(dijit.byId("other_netflow_text"),"onKeyUp",function(){_20bc.main.editStarted();var valid=dijit.byId("other_netflow_text").isValid();dijit.byId("netflow_save_btn").attr("disabled",!valid);dijit.byId("netflow_reset_btn").attr("disabled",false);});dojo.connect(dijit.byId("netflow_save_btn"),"onClick",function(){var uid=dijit.byId("uid").getValue();var _20d4=dijit.byId("vnet_netflow").getValue();var _20d5=dijit.byId("csrf_token_v").getValue();var _20d6="";if(dijit.byId("other_netflow").getValue()){_20d6=dijit.byId("other_netflow_text").getValue();}nox.ext.apps.vmanui.rawXhrPut({url:"ws.v1/netflow/"+encodeURIComponent(uid),headers:{"content-type":"application/json","X-CSRF-Token":_20d5},putData:dojo.toJson({"use_vmanager":_20d4,"other_servers":_20d6,"csrf_token":_20d5}),load:function(_20d7,_20d8){dijit.byId("netflow_save_btn").attr("disabled",true);dijit.byId("netflow_reset_btn").attr("disabled",true);_20bc.main.editFinished();},error:function(_20d9,_20da){_20bc.main.vmanui_error("Failed to save NetFlow changes.");},timeout:30000});});}_20bd.vlan_pool_id=_20bc.main.current_tree_item.datasource_id;var _20db=_20bc.main.current_tree_item.uid;var url="/ws.v1/xen_directory/"+_20db+"/vlan";_20bd._init_vlans(url,_20db,null,"pool_instance_vlans");dojo.connect(dijit.byId("netflow_reset_btn"),"onClick",function(){_20bc.main.refresh_current();_20bc.main.editFinished();});};_20bd._init_vlans=function(url,_20de,_20df,_20e0){_20bd.vlan_request=nox.ext.apps.vmanui.xhrGet({url:url,preventCache:true,handleAs:"json",timeout:3000000,load:function(_20e1,_20e2){_20bd.vlan_attempts=0;clearTimeout(_20bd.vlan_attempt_pid);_20bd.create_vlan_editor(_20e1,_20de,_20df,_20e0);},error:function(_20e3,_20e4){if(_20bd.vlan_attempts<3){_20bd.vlan_attempt_pid=setTimeout(function(){_20bd._init_vlans(url,_20de,_20df,_20e0);},1000);}else{var msg="Failed to fetch vlans for pool "+_20de+", network "+_20df+": "+_20e3;_20bc.main.vmanui_error(msg);}_20bd.vlan_attempts++;}});};_20bd.create_vlan_editor=function(_20e6,_20e7,_20e8,_20e9){var _20ea=new nox.ext.apps.vmanui.VlanListEditor({"pool_id":_20e7,"network_id":_20e8,"vlan_counts":_20e6},_20e9);_20bd.dijits_to_destroy.push(_20ea);var vlans=nox.ext.apps.vmanui.util.keys(_20e6).sort(function(a,b){return a-b;});dojo.forEach(vlans,function(vlan){_20ea.newItem(vlan,true);});_20ea.setBaseline();};_20bd._init_adminnetwork=function(){dojo.connect(dijit.byId("save_nwaddr_group"),"onClick",function(){var _20ef=dijit.byId("address_box").getValue().split(",");var _20f0=[];var re=new RegExp("^"+nox.ext.apps.vmanui.regex.ipv4_net_or_address+"$");for(var i=0;i<_20ef.length;i++){var s=dojo.trim(_20ef[i]);if(s.length===0){continue;}if(!re.test(s)){_20bc.main.vmanui_error("Invalid address/network: '"+s+"'");return;}_20f0.push({"address":s});}var uid=dijit.byId("group_uid").getValue();var d=nox.ext.apps.vmanui.vac_status.get_group(uid,"nwaddr");d.addCallback(function(group){group.members=_20f0;return nox.ext.apps.vmanui.vac_status.put_group(uid,"nwaddr",group);});d.addCallback(function(){nox.ext.apps.vmanui.main.refresh_current();nox.ext.apps.vmanui.main.editFinished();});});};_20bd.status_unload=function(){var t=_20bc.vac.node_types;var _20f8=_20bd._get_current_node_type();if(_20f8===null){return;}switch(_20f8){}dojo.forEach(_20bd.dijits_to_destroy,function(d,i){if(d.destroyRecursive){d.destroyRecursive();d=null;}});_20bd.dijits_to_destroy=[];};_20bd.show_add_to_addr_group_dialog=function(_20fb){dijit.byId("add_net_member_dialog_group_uid").setValue(_20fb);dijit.byId("add_net_member_dialog").show();};_20bd.show_add_to_host_group_dialog=function(_20fc){var d=nox.ext.apps.vmanui.vac_status.prepare_host_group_add_store(_20fc);d.addCallback(function(fs){nox.ext.apps.vmanui.main.onDialogOpen();dijit.byId("add_member_dialog_group_uid").setValue(_20fc);dijit.byId("add_member_dialog").show();var h1=dojo.connect(dijit.byId("add_to_admin_group"),"onClick",function(){dojo.disconnect(h1);if(!fs.isValid()){return;}var uid=dijit.byId("add_member_dialog_group_uid").getValue();var _2101=fs.getValue();dijit.byId("add_member_dialog").hide();_20bc.main.onDialogClose();var d=_20bc.vac_status.get_group(uid,"host");d.addCallback(function(group){group.members.push({"uid":_2101});return _20bc.vac_status.put_group(uid,"host",group);});d.addCallback(function(){setTimeout(function(){_20bc.main.refresh_current(false);},400);});});var h2=dojo.attach(dijit.byId("add_memeber_dialog"),"hide",function(){dojo.disconnect(h1);dojo.disconnect(h2);fs.destroyRecursive();});});};_20bd.prepare_host_group_add_store=function(uid){var _2106=new dojo.data.ItemFileWriteStore({url:"/ws.v1/xen_directory/vm?jsonstore=true",urlPreventCache:"true"});var fs=new dijit.form.FilteringSelect({store:_2106,searchAttr:"name",query:{show:true}});dijit.byId("add_to_admin_group").attr("disabled",true);dojo.connect(fs,"onChange",function(){dijit.byId("add_to_admin_group").attr("disabled",!fs.isValid());});dojo.connect(fs,"onKeyUp",function(){dijit.byId("add_to_admin_group").attr("disabled",!fs.isValid());});var d2=new dojo.Deferred();var d=nox.ext.apps.vmanui.vac_status.get_group(uid,"host");d.addCallback(function(group){_2106.fetch({query:{},onItem:function(item){var show=true;dojo.forEach(group.members,function(m){if(_2106.getValue(item,"uid")==m.uid){show=false;}});_2106.setValue(item,"show",show);},onComplete:function(){d2.callback(fs);}});});var _210e=dojo.byId("vm_group_add_select");dojo.empty(_210e);dojo.place(fs.domNode,_210e);return d2;};_20bd.makeHostGroupRemoveLink=function(idx,item){if(item===null){return;}return ("<span class=\"capabilities-block cap-edit-groups\"><a href=\"javascript:frag.status.alladmingroups.removeConfirmDialog.openDialog('"+adminGroupDataStore.getValue(item,"realName")+"',"+adminGroupDataStore.getValue(item,"name")+")\">Remove</a></span>");};_20bd.remove_addr_member=function(_2111){var _2112=dijit.byId("group_uid").getValue();_20bd.remove_group_member("nwaddr",_2112,_2111);};_20bd.remove_host_member=function(_2113){var _2114=dijit.byId("group_uid").getValue();_20bd.remove_group_member("host",_2114,_2113);};_20bd.remove_group_member=function(_2115,_2116,_2117){var d=_20bd.get_group(_2116,_2115);d.addCallback(function(group){var _211a=[];for(var i=0;i<group.members.length;i++){if(_2117!=group.members[i].uid){_211a.push(group.members[i]);}}group.members=_211a;var d2=_20bd.put_group(_2116,_2115,group);d2.addCallback(function(){setTimeout(function(){nox.ext.apps.vmanui.main.refresh_current(false);},400);});});};_20bd.get_group=function(uid,type){var url="/ws.v1/group/"+type+"/"+encodeURIComponent(uid);return nox.ext.apps.vmanui.xhrGet({url:url,preventCache:true,handleAs:"json",timeout:3000000,error:function(_2120,_2121){_20bc.main.vmanui_error("Failed to fetch group");}});};_20bd.put_group=function(uid,type,group){var url="/ws.v1/group/"+type+"/"+encodeURIComponent(uid);var _2126=dijit.byId("csrf_token_v").getValue();var _2127=dojo.clone(group);_2127["csrf_token"]=_2126;return nox.ext.apps.vmanui.rawXhrPut({url:url,headers:{"content-type":"application/json","X-CSRF-Token":_2126},putData:dojo.toJson(_2127),timeout:3000000,error:function(_2128,_2129){_20bc.main.vmanui_error("Failed to modify group");}});};_20bd.modify_group_name=function(uid,type,name,desc){var d=_20bd.get_group(uid,type);d.addCallback(function(g){g.name=name;g.description=desc;return _20bd.put_group(uid,type,g);});return d;};_20bd.create_empty_group=function(type,name,_2132){var _2133={"name":name,"description":_2132,"members":[]};return _20bc.vac_status.create_group(type,_2133);};_20bd.create_group=function(type,group){var url="/ws.v1/group/"+type;var _2137=dijit.byId("csrf_token_v").getValue();var _2138=dojo.clone(group);_2138["csrf_token"]=_2137;return nox.ext.apps.vmanui.rawXhrPost({url:url,headers:{"content-type":"application/json","X-CSRF-Token":_2137},postData:dojo.toJson(_2138),timeout:3000000,handleAs:"json",error:function(_2139,_213a){_20bc.main.vmanui_error("Failed to create group");}});};_20bd.delete_group=function(uid,type){var url="/ws.v1/group/"+type+"/"+encodeURIComponent(uid);var _213e=dijit.byId("csrf_token_v").getValue();return nox.ext.apps.vmanui.xhrDelete({url:url,headers:{"content-type":"application/json","X-CSRF-Token":_213e},timeout:3000000,error:function(_213f,_2140){if(_213f.status==409){var _2141=(type=="nwaddr")?"address group":"VM group";_20bc.main.vmanui_error("This "+_2141+" cannot be deleted "+" because it is currently being used in an ACL rule.");}else{_20bc.main.vmanui_error("Failed to remove group");}}});};_20bd.__lastAddedPoolProperties=null;_20bd.__lastAddedPoolPassword=null;_20bd.get_pool_property=function(oPool,_2143){var value;dojo.forEach(oPool.properties,function(_2145){if(_2145[0]==_2143){value=_2145[1];}});return value;};_20bd.set_pool_property=function(oPool,_2147,_2148){var _2149=false;dojo.forEach(oPool.properties,function(_214a){if(_214a[0]==_2147){_214a[1]=_2148;_2149=true;}});if(!_2149){oPool.properties.push([_2147,_2148]);}};_20bd.retry_add_pool_with_steal=function(){if(_20bd.__lastAddedPoolProperties==null){return;}var oPool=dojo.clone(_20bd.__lastAddedPoolProperties);_20bd.set_pool_property(oPool,"steal_pool","true");_20bd.set_pool_property(oPool,"password",_20bd.__lastAddedPoolPassword);_20bd.modify_pool(oPool);};_20bd.add_pool=function(sIp,sUser,sCred,_214f){var _2150=_214f?"true":"false";var _2151=dijit.byId("csrf_token_v").getValue();_20bd.__lastAddedPoolPassword=sCred;return nox.ext.apps.vmanui.rawXhrPost({url:"/ws.v1/datasource",headers:{"content-type":"application/json","X-CSRF-Token":_2151},handleAs:"json",postData:dojo.toJson({type:"Xen",name:"",search_order:0,properties:[["master_address_1",sIp],["username",sUser],["password",sCred],["steal_pool",_2150]],csrf_token:_2151}),error:function(_2152,_2153){nox.ext.apps.vmanui.main.vmanui_error("Failed to add pool '"+ip+"'");},timeout:30000});};_20bd.modify_pool=function(_2154){_20bd.__lastAddedPoolPassword=_20bd.get_pool_property(_2154,"password");var _2155=dijit.byId("csrf_token_v").getValue();var _2156=dojo.clone(_2154);_2156["csrf_token"]=_2155;return nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/datasource/"+encodeURIComponent(_2154.uid),headers:{"content-type":"application/json","X-CSRF-Token":_2155},handleAs:"json",timeout:30000,putData:dojo.toJson(_2156),error:function(_2157,_2158){var name=oPool.name||_20bd.get_pool_property(oPool,"master_address_1")||"";var _215a=name?" '"+name+"'":"";nox.ext.apps.vmanui.main.vmanui_error("Failed to modify pool"+_215a);}});};_20bd.remove_pool=function(uid){if(uid==_20bd.vlan_pool_id){_20bd.vlan_request.cancel();}var oNode=_20bc.main.current_tree_item;if((oNode.node_type==_20bc.vac.node_types.POOL)&&(oNode.datasource_id==uid)){_20bc.vac.show_vac_tab("status",_20bc.vac.node_types.ALL_POOLS.toString());}var _215d=dijit.byId("csrf_token_v").getValue();return nox.ext.apps.vmanui.xhrDelete({url:"/ws.v1/datasource/"+encodeURIComponent(uid),headers:{"content-type":"application/json","X-CSRF-Token":_215d},timeout:30000,error:function(_215e,_215f){nox.ext.apps.vmanui.main.vmanui_error("Failed to remove pool");}});};_20bd.confirm_remove_pool=function(_2160,name){var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/xen/pool_by_datasource/"+_2160,handleAs:"json",preventCache:true,load:function(_2163,_2164){var _2165=_2163.uid;var _2166=_2163.active;nox.ext.apps.vmanui.vac_status.find_fail_mode(_2165,function(_2167){frag.status.allpools.removeConfirmDialog.openDialog(name,_2160,(_2166>0&&_2167=="fail_safe"));});},error:function(_2168,_2169){nox.ext.apps.vmanui.main.vmanui_error("Failed to find pool");},timeout:30000});};_20bd.refresh_pool=function(uid){var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/datasource/"+uid,handleAs:"json",preventCache:true,timeout:30000,load:function(r){var _216d=r;_216d.refresh_status=true;_216d.properties=dojo.filter(_216d.properties,function(oItem){return oItem[0]=="master_address_1";});var d=_20bd.modify_pool(_216d);d.addCallback(nox.ext.apps.vmanui.vac_status.show_connect_status_dialog);}});};_20bd.start_modify_pool=function(uid,_2171){var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/datasource/"+uid,handleAs:"json",preventCache:true,load:function(_2173,_2174){var _2175=_2173;if(_2171){_20bd.set_pool_property(_2173,"steal_pool","true");}var dd=_20bd.get_pool_tree_item(uid);dd.addCallback(function(_2177){_2175.xapi_status=_2177.active;_20bd.show_pool_edit(_2175,null);});dd.addErrback(function(_2178){console.log(_2178);_20bd.show_pool_edit(_2175,null);});},error:function(_2179,_217a){nox.ext.apps.vmanui.main.vmanui_error("Failed to find pool");},timeout:30000});};_20bd.show_pool_edit=function(_217b,_217c){var _217d=new nox.ext.apps.vmanui.dialog.pool_edit({pool_obj:_217b,error_str:_217c});_217d.show();};_20bd.get_pool_tree_item=function(_217e){return nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/xen/pool_by_datasource/"+_217e,preventCache:true,handleAs:"json"});};_20bd.show_connect_status_dialog=function(_217f){_20bd.__lastAddedPoolProperties=_217f;var popup=new nox.ext.apps.vmanui.dialog.pool_connect_status({pool_obj:_217f});popup.show();};_20bd.fail_mode=null;_20bd.start_fail_mode_edit=function(){_20bc.main.editStarted();dijit.byId("fail_mode_submit_button").setAttribute("disabled",false);dijit.byId("fail_mode_cancel_button").setAttribute("disabled",false);};_20bd.get_fail_mode=function(){if(!_20bd.fail_mode){_20bd.init_fail_mode();}return _20bd.fail_mode;};_20bd.find_fail_mode=function(uid,_2182){if(!_2182){return;}if(uid=="all"){_20bc.vac.get_all_pool_nodes(function(_2183){var _2184=[];dojo.forEach(_2183,function(node){var _2186=node[1].uid;_2184.push(_20bc.xhrGet({url:"/ws.v1/xen_directory/"+_2186,preventCache:true,handleAs:"json"}));});var dl=new dojo.DeferredList(_2184);dl.addCallback(function(_2188){var _2189="fail_open";dojo.forEach(_2188,function(_218a){if(_218a[1].fail_mode){_2189="fail_safe";}});_2182(_2189);});});}else{_20bc.xhrGet({url:"/ws.v1/xen_directory/"+uid,preventCache:true,handleAs:"json",load:function(_218b){var _218c=_218b.fail_mode?"fail_safe":"fail_open";_2182(_218c);},error:function(_218d){_2182("fail_open");}});}};_20bd.init_fail_mode=function(){var user=nox.ext.apps.vmanui.User;if(user&&user.role()=="readonly"){dijit.byId("vac_status_fail_open_mode").disabled=true;dijit.byId("vac_status_fail_safe_mode").disabled=true;dojo.addClass(dojo.byId("fail_mode_buttons"),"hidden");}var _218f=_20bc.settings.get_controller_interface_obj();_218f.addCallback(function(_2190){dojo.forEach(_2190,function(iface){if(iface.dhcp){dijit.byId("vac_status_fail_open_mode").disabled=true;dijit.byId("vac_status_fail_safe_mode").disabled=true;dojo.removeClass("fail_mode_message","hidden");}});});var _2192=_20bc.main.current_tree_item.uid;var d=nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/xen_directory/"+_2192,preventCache:true,handleAs:"json"});d.addCallback(function(_2194){var _2195=(_2194.fail_mode==1)?"fail_safe":"fail_open";_20bd.fail_mode=_2195;if(_2195=="fail_safe"){dijit.byId("vac_status_fail_safe_mode").setValue(true);}else{dijit.byId("vac_status_fail_open_mode").setValue(true);}});};_20bd.set_fail_mode=function(_2196){var _2197=_20bc.main.current_tree_item.uid;var _2198=dijit.byId("csrf_token_v").getValue();return nox.ext.apps.vmanui.rawXhrPut({url:"/ws.v1/xen_directory/"+_2197,headers:{"content-type":"application/json","X-CSRF-Token":_2198},handleAs:"json",putData:dojo.toJson({"fail_mode":(_2196=="fail_safe")?1:0,"csrf_token":_2198}),load:function(_2199){_20bd.fail_mode=_2196;_20bc.main.editFinished();},error:function(_219a,_219b){_20bc.main.vmanui_error("Could not save fail mode changes.",function(){_20bc.main.editFinished();_20bd.fail_mode_reset();});},timeout:30000});};_20bd.fail_mode_submit=function(){var _219c=(dijit.byId("vac_status_fail_open_mode").checked)?"fail_open":"fail_safe";_20bd.set_fail_mode(_219c);dijit.byId("fail_mode_submit_button").setAttribute("disabled",true);dijit.byId("fail_mode_cancel_button").setAttribute("disabled",true);};_20bd.fail_mode_reset=function(){dijit.byId("fail_mode_submit_button").setAttribute("disabled",true);dijit.byId("fail_mode_cancel_button").setAttribute("disabled",true);var _219d=_20bd.get_fail_mode();if(_219d=="fail_safe"){dijit.byId("vac_status_fail_safe_mode").setValue(true);}else{dijit.byId("vac_status_fail_open_mode").setValue(true);}_20bc.main.editFinished();};})();}if(!dojo._hasResource["nox.ext.apps.vmanui.regex"]){dojo._hasResource["nox.ext.apps.vmanui.regex"]=true;dojo.provide("nox.ext.apps.vmanui.regex");(function(){var regex=nox.ext.apps.vmanui.regex;regex.transport_port="(([1-9]\\d?\\d?\\d?)|([1-5]\\d{4})|(6[0-4]\\d{3})|(65[0-4]\\d{2})|(655|[0-2]\\d)|(6553[0-5]))";regex.LDH="([a-zA-Z0-9\\-]+)";regex.dns_name="("+regex.LDH+"(\\."+regex.LDH+")*)";regex.dns_domain="("+regex.LDH+"(\\."+regex.LDH+")+)";regex.dns_domain_list="("+regex.dns_domain+"(\\s*,\\s*"+regex.dns_domain+")*)";regex.decimal_byte="((\\d\\d?)|([01]\\d{2})|(2[0-4]\\d)|(25[0-5]))";regex.ipv4_address="(("+regex.decimal_byte+"\\.){3}"+regex.decimal_byte+")";regex.ipv4_net_suffix="(/((\\d)|([1-2]\\d)|(3[0-2])))";regex.ipv4_net=regex.ipv4_address+regex.ipv4_net_suffix;regex.ipv4_net_or_address="("+regex.ipv4_address+regex.ipv4_net_suffix+"?)";regex.ipv4_net_or_address_list="(\\s*"+regex.ipv4_net_or_address+"([,\\s]+"+regex.ipv4_net_or_address+")*\\s*?)";regex.dns_or_ipv4="("+regex.dns_name+"|"+regex.ipv4_address+")";regex.host_and_port="("+regex.dns_or_ipv4+":"+regex.transport_port+")";regex.ip_and_port="("+regex.ipv4_address+":"+regex.transport_port+")";regex.ipv4_address_list="("+regex.ipv4_address+"(\\s*,\\s*"+regex.ipv4_address+")*)";regex.mac_address_octet="([0-9a-fA-F]{1,2})";regex.mac_address="(("+regex.mac_address_octet+":){5}"+regex.mac_address_octet+")";regex.vlan="((\\d\\d?\\d?)|([1-3]\\d{2})|(40[0-9][0-5]))";regex.ethertype="(0x([0-9a-zA-Z]){4})";})();dojo.declare("nox.ext.apps.vmanui.regex.IPv4TextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.ipv4_address,required:true,promptMessage:"Enter an IPv4 address e.g. : 192.168.1.10",invalidMessage:"Invalid IPv4 address"});dojo.declare("nox.ext.apps.vmanui.regex.DNSSearchTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.dns_domain,required:false,promptMessage:"Enter a DNS search domain e.g. : foo.com",invalidMessage:"Invalid DNS search domain"});dojo.declare("nox.ext.apps.vmanui.regex.IPv4Netmask",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.ipv4_address,required:true,promptMessage:"Enter an IPv4 netmask e.g. : 255.255.255.0",invalidMessage:"Invalid IPv4 netmask"});dojo.declare("nox.ext.apps.vmanui.regex.HostAndPortTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.host_and_port,required:true,promptMessage:"Enter a hostname/IP and port separated by a colon, e.g. : 192.168.1.1:2055",invalidMessage:"Invalid host and port"});dojo.declare("nox.ext.apps.vmanui.regex.IPAndPortTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.ip_and_port,required:true,invalidMessage:"Enter an IP and port separated by a colon, e.g. : 192.168.1.1:2055"});dojo.declare("nox.ext.apps.vmanui.regex.HostTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.dns_or_ipv4,promptMessage:"Enter a hostname/IP, e.g. : 192.168.1.1",invalidMessage:"Invalid host or IP"});dojo.declare("nox.ext.apps.vmanui.regex.NetworkTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.ipv4_net_or_address,promptMessage:"Enter an IP address or subnet, e.g. : 192.168.1.0/24",invalidMessage:"Invalid IP or subnet"});dojo.declare("nox.ext.apps.vmanui.regex.CidrTextarea",[dijit.form.ValidationTextBox,dijit.form.SimpleTextarea],{invalidMessage:"Invalid IP or CIDR block",regExp:nox.ext.apps.vmanui.regex.ipv4_net_or_address_list,postMixInProperties:function(){this.inherited(arguments);this.constraints.locale=this.lang;this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage;}var p=this.regExpGen(this.constraints);this.regExp=p;var _21a0="";if(p!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_21a0+=re;break;case ")":_21a0+="|$)";break;default:_21a0+="(?:"+re+"|$)";break;}});}try{"".search(_21a0);}catch(e){_21a0=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp);}this._partialre="^(?:"+_21a0+")$";this._add_button=null;},validate:function(){if(!this._add_button){this._add_button=dijit.byId("net_member_add_button");}if(arguments.length===0){this.validate(true);}if(this._add_button){this._add_button.attr("disabled",!this.isValid());}this.inherited(arguments);},onFocus:function(){if(!this.isValid()){this.displayMessage(this.getErrorMessage());}},onBlur:function(){this.validate(false);},_onInput:function(){this.inherited(arguments);this.validate(true);}});dojo.declare("nox.ext.apps.vmanui.regex.VLANTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.vlan,promptMessage:"Enter a VLAN from 0 to 4095",invalidMessage:"Invalid VLAN value"});dojo.declare("nox.ext.apps.vmanui.regex.EthertypeTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.ethertype,promptMessage:"Enter a two-byte hex value (e.g., '0x0806' for ARP)",invalidMessage:"Invalid Ethertype value"});dojo.declare("nox.ext.apps.vmanui.regex.IPProtocolTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.decimal_byte,promptMessage:"Enter a decimal value 0 to 255 (e.g., '47' for GRE)",invalidMessage:"Invalid IP protocol value"});dojo.declare("nox.ext.apps.vmanui.regex.TransportPortTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.transport_port,promptMessage:"Enter a decimal value 1 to 65535 (e.g., '53' for DNS)",invalidMessage:"Invalid transport port"});dojo.declare("nox.ext.apps.vmanui.regex.ICMPTypeTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.decimal_byte,promptMessage:"Enter a decimal value 1 to 255",invalidMessage:"Invalid ICMP type"});dojo.declare("nox.ext.apps.vmanui.regex.ICMPCodeTextBox",dijit.form.ValidationTextBox,{regExp:nox.ext.apps.vmanui.regex.decimal_byte,promptMessage:"Enter a decimal value 1 to 255",invalidMessage:"Invalid ICMP code"});}if(!dojo._hasResource["nox.ext.apps.vmanui.DbContentPane"]){dojo._hasResource["nox.ext.apps.vmanui.DbContentPane"]=true;dojo.provide("nox.ext.apps.vmanui.DbContentPane");dojo.declare("nox.ext.apps.vmanui.DbContentPane",dijit.layout.ContentPane,{pauseRefresh:false,pauseMsg:"Event Updates Paused",pauseTitle:"Pause Refresh",resumeTitle:"Resume Refresh",constructor:function(){this.isRefreshing=false;this.hasPolicy=false;this.pauseRefresh=false;},refresh:function(_21a2,_21a3){var _21a4=_21a3||!_21a2;if(this.isRefreshing&&!_21a4){return;}if(_21a4&&this.hasPolicy){this.lastRoleStack=null;}this.isRefreshing=true;this.cancel();if(!this.containerNode||!_21a2){this._setContent(this.onDownloadStart(),true);}else{if(_21a3){this._setContent(this.onDownloadStart(),true);}}var self=this;var _21a6={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,content:{tzoffset:(new Date()).getTimezoneOffset()*-60},handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(_21a6,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||nox.ext.apps.vmanui.xhrGet)(_21a6));if(this.doubleBufferCallback){hand.addCallback(dojo.hitch(this,"doubleBufferCallback"));}hand.addCallback(function(html){if(html==null){return;}try{self._isDownloaded=true;self._setContent(html,false);self.onDownloadEnd();}catch(err){self._onError("Content",err);}delete self._xhrDfd;return html;});hand.addErrback(function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;});hand.addBoth(dojo.hitch(this,"timeoutEndRefresh"));},needRefresh:function(){var _21aa=true;if(this.hasPolicy){_21aa=this.compareRoleStack();this.lastRoleStack=dojo.clone(this.pm.role_stack);}return _21aa;},compareRoleStack:function(){var _21ab=false;if(this.lastRoleStack==null){_21ab=true;}else{var sOld=dojo.toJson(this.lastRoleStack);var sNew=dojo.toJson(this.pm.role_stack);_21ab=(sOld!=sNew);}return _21ab;},timeoutEndRefresh:function(){setTimeout(dojo.hitch(this,"endRefresh"),nox.ext.apps.vmanui.main.TIMEOUT_MSEC/2);},endRefresh:function(){this.isRefreshing=false;}});}if(!dojo._hasResource["nox.ext.apps.vmanui.AccessControlDbContentPane"]){dojo._hasResource["nox.ext.apps.vmanui.AccessControlDbContentPane"]=true;dojo.provide("nox.ext.apps.vmanui.AccessControlDbContentPane");function byId(id,_21af){var list=dojo.query("[id="+id+"]",_21af);return (list.length>0)?list[0]:null;};dojo.declare("nox.ext.apps.vmanui.AccessControlDbContentPane",nox.ext.apps.vmanui.DbContentPane,{pm:null,top_layer:null,parse_results:null,read_only:null,parseOnLoad:false,constructor:function(){this.show_desc=true;this.read_only=false;this.ui_state={};this.expanded_state={};this.hasPolicy=true;this.lastRoleStack=null;this.vmanui=nox.ext.apps.vmanui;},postMixInProperties:function(){this.inherited(arguments);dojo.connect(this,"onUnload",this,function(){if(this.pm){this.pm.cancel();}});},postCreate:function(){this.inherited(arguments);},doubleBufferCallback:function(html){this.vmanui.main.set_document_subtitle("Access Control");var d1=new dojo.Deferred();var _21b3=document.createElement("div");_21b3.innerHTML=html;var _21b4=byId("policy_div",_21b3);if(!_21b4){return;}dojo.addClass(_21b4,this.read_only?"policy_readonly":"policy_edit");var _21b5=byId("role_uid",_21b3).value;if(!this.ui_state[_21b5]){this.ui_state[_21b5]={visibility_state:{},role_to_show:{}};}if(this.pm){this.pm.cancel();}this.lastPm=this.pm;this.pm=new nox.ext.apps.vmanui.PolicyManager(_21b5);this.pm.initialize().addCallback(dojo.hitch(this,"pmCallback",d1,_21b4,_21b3));return d1;},pmCallback:function(d,_21b7,_21b8,_21b9){try{if(this.pm.isCanceled()){d.cancel();return;}var _21ba=this.needRefresh();this.lastRoleStack=dojo.clone(this.pm.role_stack);if(!_21ba){this.pm=this.lastPm;d.callback(null);return;}if(!_21b9){_21b7.innerHTML="<center>Error loading ACL data</center>";d.callback(_21b8);return;}this.destroyWidgets();this.parse_results=dojo.parser.parse(_21b8,true);if(this.top_layer){this.top_layer.destroyRecursive();}this.top_layer=new nox.ext.apps.vmanui.role_policy_layer({role_index:0,policy_manager:this.pm,is_stats:false,is_readonly:this.read_only});this.top_layer.startup();dojo.connect(this.top_layer,"onModify",this.vmanui.main.editStarted);this.enforceVisibility();this.sync_to_expand(true);this.top_layer.changeShowDesc(this.show_desc);dojo.connect(this.top_layer,"onShowDescChange",this,function(_21bb){this.show_desc=_21bb;});_21b7.appendChild(this.top_layer.domNode);}catch(e){this.vmanui.main.vmanui_error("Error drawing ACLs: ",e);this.vmanui.main.console_log("acl-draw err: ",e);}dojo.connect(dijit.byId("save_role_btn",_21b8),"onClick",dojo.hitch(this,function(){var d=this.pm.saveAll();d.addErrback(dojo.hitch(this.vmanui.main,"vmanui_error","Failed to Save Policy Changes"));d.addCallback(dojo.hitch(this,function(){dijit.byId("save_role_btn",_21b8).attr("disabled",true);dijit.byId("reset_role_btn",_21b8).attr("disabled",true);this.vmanui.main.editFinished();nox.ext.apps.vmanui.main.refresh_current(false,true);}));}));dojo.connect(dijit.byId("reset_role_btn",_21b8),"onClick",this,function(){this.vmanui.main.refresh_current(true);this.vmanui.main.editFinished();});dojo.connect(byId("policy_expand_link",_21b8),"onclick",dojo.hitch(this,function(){var _21bd=this.top_layer.getBottomLayer();var uid=_21bd.uid;this.expanded_state[uid]=!this.expanded_state[uid];this.sync_to_expand();}));dojo.connect(this.pm,"onModify",this,function(role){this.vmanui.main.editStarted();dijit.byId("save_role_btn").attr("disabled",false);dijit.byId("reset_role_btn").attr("disabled",false);});d.callback(_21b8);},enforceVisibility:function(_21c0){if(this.top_layer){this.top_layer.recursiveEnforceVisibility();}},sync_to_expand:function(bInit){if(this.top_layer){var _21c2=this.top_layer.policy_manager.role_stack.length;var _21c3=dijit.byId("policy_expand_link");dojo.removeClass(_21c3.domNode,"hidden");if(_21c2<=1){dojo.addClass(_21c3.domNode,"hidden");}else{var _21c4=this.top_layer.getBottomLayer();var _21c5=this.expanded_state[_21c4.uid];_21c3.attr("label",(_21c5?"Collapse All":"Expand All"));}if(!bInit){this.top_layer.recursiveSetVisibility(_21c5);}}},destroyWidgets:function(){if(!this.parse_results){return;}dojo.forEach(this.parse_results,function(w){if(w.destroyRecursive&&w.domNode){w.destroyRecursive();}});this.parse_results=[];}});}if(!dojo._hasResource["nox.ext.apps.vmanui.PortConfigDbContentPane"]){dojo._hasResource["nox.ext.apps.vmanui.PortConfigDbContentPane"]=true;dojo.provide("nox.ext.apps.vmanui.PortConfigDbContentPane");function byId(id,_21c8){var list=dojo.query("[id="+id+"]",_21c8);return (list.length>0)?list[0]:null;};dojo.declare("nox.ext.apps.vmanui.PortConfigDbContentPane",nox.ext.apps.vmanui.DbContentPane,{pm:null,top_qos_layer:null,top_rspan_layer:null,parse_results:null,read_only:false,parseOnLoad:false,doubleBufferCallback:function(html){nox.ext.apps.vmanui.main.set_document_subtitle("Port Configuration");var _21cb=nox.ext.apps.vmanui;var d1=new dojo.Deferred();var _21cd=document.createElement("div");_21cd.innerHTML=html;var _21ce=byId("qos_div",_21cd);var _21cf=byId("rspan_div",_21cd);if(!_21ce||!_21cf){return;}var _21d0=byId("port_role_uid",_21cd).value;if(this.pm){this.pm.cancel();}this.pm=new nox.ext.apps.vmanui.PolicyManager(_21d0);this.pm.initialize().addCallback(dojo.hitch(this,function(_21d1){try{if(this.pm.isCanceled()){d1.cancel();return;}if(!_21d1){policy_node.innerHTML="<center>Error loading Port Configuration data</center>";d1.callback(_21cd);return;}this.destroyWidgets();this.parse_results=dojo.parser.parse(_21cd,true);var _21d2=dijit.byId("disable_mac_spoof_check");if(_21d2){var _21d3=this.pm.getDisableMACSpoof(_21d0);_21d2.setValue(_21d3=="true");_21d2.setAttribute("disabled",this.read_only);this.connect(_21d2,"onClick",function(e){_21cb.main.editStarted();dijit.byId("save_port_config_btn").attr("disabled",false);dijit.byId("reset_port_config_btn").attr("disabled",false);var _21d5=dojo.byId("port_role_uid");if(_21d5){var uid=_21d5.value;this.pm.setDisableMACSpoof(uid,_21d2.getValue());}});}if(this.top_qos_layer){this.top_qos_layer.destroyRecursive();}if(this.top_rspan_layer){this.top_rspan_layer.destroyRecursive();}this.top_qos_layer=new nox.ext.apps.vmanui.role_qos_layer({role_index:0,policy_manager:this.pm,is_readonly:this.read_only});this.top_qos_layer.startup();_21ce.appendChild(this.top_qos_layer.domNode);this.top_rspan_layer=new nox.ext.apps.vmanui.role_rspan_layer({role_index:0,policy_manager:this.pm,is_readonly:this.read_only});this.top_rspan_layer.startup();_21cf.appendChild(this.top_rspan_layer.domNode);dojo.connect(dijit.byId("save_port_config_btn"),"onClick",this,function(){if(!this.top_qos_layer||!this.top_qos_layer.recursiveInputIsValid()){_21cb.main.vmanui_error("Invalid QoS settings");return;}if(!this.top_rspan_layer||!this.top_rspan_layer.recursiveInputIsValid()){_21cb.main.vmanui_error("Invalid RSPAN settings");return;}var d=this.pm.saveAll();d.addErrback(function(){_21cb.main.vmanui_error("Failed to Save Port Configuration Changes");});d.addCallback(function(){dijit.byId("save_port_config_btn").attr("disabled",true);dijit.byId("reset_port_config_btn").attr("disabled",true);_21cb.main.editFinished();});});dojo.connect(dijit.byId("reset_port_config_btn"),"onClick",function(){_21cb.main.refresh_current(false);_21cb.main.editFinished();});var _21d8=function(_21d9){dijit.byId("save_port_config_btn").attr("disabled",!_21d9);};dojo.connect(this.top_qos_layer,"onIsValidChange",_21d8);dojo.connect(this.top_rspan_layer,"onIsValidChange",_21d8);dojo.connect(this.pm,"onModify",function(role){dijit.byId("reset_port_config_btn").attr("disabled",false);});}catch(e){_21cb.main.vmanui_error("Error drawing Port Config:"+e);_21cb.main.console_log("err: ",e);}d1.callback(_21cd);}));return d1;},postMixInProperties:function(){this.inherited(arguments);dojo.connect(this,"onUnload",this,function(){if(this.pm){this.pm.cancel();}});},destroyWidgets:function(){if(!this.parse_results){return;}dojo.forEach(this.parse_results,function(w){if(w.destroyRecursive&&w.domNode){w.destroyRecursive();}});this.parse_results=[];}});}if(!dojo._hasResource["nox.ext.apps.vmanui.StatusDbContentPane"]){dojo._hasResource["nox.ext.apps.vmanui.StatusDbContentPane"]=true;dojo.provide("nox.ext.apps.vmanui.StatusDbContentPane");function byId(id,_21dd){var list=dojo.query("[id="+id+"]",_21dd);return (list.length>0)?list[0]:null;};dojo.declare("nox.ext.apps.vmanui.StatusDbContentPane",nox.ext.apps.vmanui.DbContentPane,{pm:null,vif_top_layer:null,old_vif_top_layer:null,parse_results:null,show_desc:true,constructor:function(){this.hasPolicy=true;this.lastRoleStack=null;this.vmanui=nox.ext.apps.vmanui;},postMixInProperties:function(){this.inherited(arguments);var h=dojo.connect(this,"onUnload",this,function(){if(this.pm){this.pm.cancel();}dojo.disconnect(h);});},doubleBufferCallback:function(html){var t=this.vmanui.vac.node_types;var _21e2=this.vmanui.vac_status._get_current_node_type();if(_21e2===null){return html;}switch(_21e2){case t.NETWORK_VIF:case t.SERVER_NETWORK_VIF:case t.SERVER_VIF:case t.VM_VIF:case t.ADMIN_VIF:this.parseOnLoad=false;break;default:this.parseOnLoad=true;return;}var _21e3=document.createElement("div");_21e3.innerHTML=html;var _21e4=byId("iface_stats",_21e3);var d1=new dojo.Deferred();var _21e6="vif;"+byId("uid",_21e3).value;if(this.pm){this.pm.cancel();}this.lastPm=this.pm;this.pm=new nox.ext.apps.vmanui.PolicyManager(_21e6);this.pm.initialize().addCallback(dojo.hitch(this,"pmCallback",d1,_21e4,_21e3));return d1;},pmCallback:function(d,_21e8,_21e9,_21ea){try{if(this.pm.isCanceled()){d.cancel();return;}var _21eb=this.needRefresh();this.lastRoleStack=dojo.clone(this.pm.role_stack);if(!_21eb){d.callback(null);this.pm=this.lastPm;return;}if(this._h_vif_top){dojo.disconnect(this._h_vif_top);}if(!_21ea){_21e8.innerHTML="<center>Error loading VIF ACLs</center>";d.callback(_21e9);return;}this.parse_results=dojo.parser.parse(_21e9,true);this.old_vif_top_layer=this.vif_type_layser;this.vif_top_layer=new nox.ext.apps.vmanui.role_policy_layer({role_index:0,policy_manager:this.pm,is_stats:true,is_readonly:true});this.vif_top_layer.startup();this.vif_top_layer.recursiveSetVisibility(true);this.vif_top_layer.changeShowDesc(this.show_desc);this._h_vif_top=dojo.connect(this.vif_top_layer,"onShowDescChange",this,function(_21ec){this.show_desc=_21ec;this.fill_acl_stats();});this.recursivelyConnectSetVisibility(this.vif_top_layer);dojo.addClass(_21e8,"policy_readonly");_21e8.appendChild(this.vif_top_layer.domNode);var mac=byId("mac_addr",_21e9).value;nox.ext.apps.vmanui.xhrGet({url:"/ws.v1/vmac/"+mac+"/aclcount",preventCache:true,handleAs:"json",timeout:3000,load:dojo.hitch(this,function(res){this.acl_stats_map=res;this.fill_acl_stats();})});d.callback(_21e9);if(this.old_vif_top_layer){this.old_vif_top_layer.destroyRecursive();this.old_vif_top_layer=null;}}catch(e){console.log(e);this.vmanui.main.vmanui_error("Error drawing ACL Stats");this.vmanui.main.console_log("Error drawing ACL Stats",e);}},recursivelyConnectSetVisibility:function(_21ef){dojo.connect(_21ef,"setVisibility",this,function(_21f0){if(_21f0){this.fill_acl_stats();}});if(_21ef.child){this.recursivelyConnectSetVisibility(_21ef.child);}},fill_acl_stats:function(){for(var id in this.acl_stats_map){var s=dojo.byId("acl-hits-uid-"+id);if(s){s.innerHTML=this.acl_stats_map[id];}}},destroyWidgets:function(){if(!this.parse_results){return;}dojo.forEach(this.parse_results,function(w){if(w.destroyRecursive&&w.domNode){w.destroyRecursive();}});this.parse_results=[];}});}if(!dojo._hasResource["nox.ext.apps.vmanui.protocol_modify"]){dojo._hasResource["nox.ext.apps.vmanui.protocol_modify"]=true;dojo.provide("nox.ext.apps.vmanui.protocol_modify");dojo.declare("nox.ext.apps.vmanui.protocol_modify",[dijit._Widget,dojox.dtl._Templated],{templateString:"<div class=\"protocol_modify\">\n\n  <div class=\"protocol_section\">Ethertype</div>\n\n  <div class=\"protocol_inputs\">\n    <input dojoType=\"dijit.form.RadioButton\" name=\"ethertype\" dojoAttachPoint=\"ethertype_ip\" type=\"radio\" />\n    <label>IP</label>\n    <input dojoType=\"dijit.form.RadioButton\" name=\"ethertype\" dojoAttachPoint=\"ethertype_other\" type=\"radio\" />\n    <label>Other</label>\n    <input dojoType=\"nox.ext.apps.vmanui.regex.EthertypeTextBox\" dojoAttachPoint=\"ethertype_other_text\" style=\"width: 120px; padding: 0;\"/>\n  </div>\n\n  <div class=\"protocol_section\" dojoAttachPoint=\"ip_row1\">IP Protocol</div>\n\n  <div class=\"protocol_inputs\" dojoAttachPoint=\"ip_row2\">\n    <input dojoType=\"dijit.form.RadioButton\" name=\"iptype\" dojoAttachPoint=\"iptype_any\" type=\"radio\" />\n    <label>Any</label>\n    <input dojoType=\"dijit.form.RadioButton\" name=\"iptype\" dojoAttachPoint=\"iptype_tcp\" type=\"radio\" />\n    <label>TCP</label>\n    <input dojoType=\"dijit.form.RadioButton\" name=\"iptype\" dojoAttachPoint=\"iptype_udp\" type=\"radio\" />\n    <label>UDP</label>\n    <input dojoType=\"dijit.form.RadioButton\" name=\"iptype\" dojoAttachPoint=\"iptype_icmp\" type=\"radio\" />\n    <label>ICMP</label>\n    <input dojoType=\"dijit.form.RadioButton\" name=\"iptype\" dojoAttachPoint=\"iptype_other\" type=\"radio\" />\n    <label>Other</label>\n    <input dojoType=\"nox.ext.apps.vmanui.regex.IPProtocolTextBox\" dojoAttachPoint=\"iptype_other_text\" style=\"width: 80px; padding: 0;\"/>\n  </div>\n\n  <div class=\"protocol_section\" dojoAttachPoint=\"tport_row1\">Destination Port</div>\n\n  <div class=\"protocol_inputs\" dojoAttachPoint=\"tport_row2\">\n    <input dojoType=\"dijit.form.RadioButton\" name=\"dst_port\" dojoAttachPoint=\"dst_port_any\" type=\"radio\" />\n    <label>Any</label>\n    <input dojoType=\"dijit.form.RadioButton\" name=\"dst_port\" dojoAttachPoint=\"dst_port_only\" type=\"radio\" />\n    <label>Only</label> port\n    <input dojoType=\"nox.ext.apps.vmanui.regex.TransportPortTextBox\" dojoAttachPoint=\"dst_port_text\" style=\"width: 120px; padding: 0;\" />\n  </div>\n\n  <div class=\"protocol_section\" dojoAttachPoint=\"tport_row3\">Source Port</div>\n\n  <div class=\"protocol_inputs\" dojoAttachPoint=\"tport_row4\">\n    <input dojoAttachPoint=\"src_port_any\" type=\"radio\" dojoType=\"dijit.form.RadioButton\" name=\"src_port\"/>\n    <label>Any</label>\n    <input dojoType=\"dijit.form.RadioButton\" name=\"src_port\" dojoAttachPoint=\"src_port_only\" type=\"radio\" />\n    <label>Only</label> port\n    <input dojoType=\"nox.ext.apps.vmanui.regex.TransportPortTextBox\" dojoAttachPoint=\"src_port_text\" style=\"width: 120px; padding: 0;\" />\n  </div>\n\n  <div class=\"protocol_section\" dojoAttachPoint=\"icmp_row1\" style=\"display: none;\">ICMP Type</div>\n\n  <div class=\"protocol_inputs\" dojoAttachPoint=\"icmp_row2\" style=\"display: none;\">\n    <input dojoType=\"dijit.form.RadioButton\" name=\"icmp_type\" dojoAttachPoint=\"icmp_type_any\" type=\"radio\" />\n    <label>Any</label>\n    <input dojoType=\"dijit.form.RadioButton\" name=\"icmp_type\" dojoAttachPoint=\"icmp_type_only\" type=\"radio\" />\n    <label>Only</label> type\n    <input dojoType=\"nox.ext.apps.vmanui.regex.ICMPTypeTextBox\" dojoAttachPoint=\"icmp_type_text\" style=\"width: 120px; padding: 0;\" />\n  </div>\n\n  <div class=\"protocol_section\" dojoAttachPoint=\"icmp_row3\" style=\"display: none;\">ICMP Code</div>\n\n  <div class=\"protocol_inputs\" dojoAttachPoint=\"icmp_row4\" style=\"display: none;\">\n    <input dojoAttachPoint=\"icmp_code_any\" type=\"radio\" dojoType=\"dijit.form.RadioButton\" name=\"icmp_code\"/>\n    <label>Any</label>\n    <input dojoType=\"dijit.form.RadioButton\" name=\"icmp_code\" dojoAttachPoint=\"icmp_code_only\" type=\"radio\" />\n    <label>Only</label> code\n    <input dojoType=\"nox.ext.apps.vmanui.regex.ICMPCodeTextBox\" dojoAttachPoint=\"icmp_code_text\" style=\"width: 120px; padding: 0;\" />\n  </div>\n\n  <div class=\"protocol_inputs\">\n    <input dojoAttachPoint=\"bidirectional\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" />Match reply traffic\n  </div>\n\n  <div class=\"protocol_section\">One-time Use vs. Multiple Uses</div>\n\n  <div class=\"protocol_inputs\" dojoAttachPoint=\"div_name_custom\">\n    <input dojoType=\"dijit.form.RadioButton\" name=\"name_type\" dojoAttachPoint=\"name_custom\" type=\"radio\" />\n    Only use it once. Do NOT add it to the list of protocols.\n  </div>\n\n  <div class=\"protocol_inputs\">\n    <input dojoType=\"dijit.form.RadioButton\" name=\"name_type\" dojoAttachPoint=\"name_save\" type=\"radio\" />\n    Create a name for it and add it to the list of protocols.\n    <input dojoType=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"name\" promptMessage=\"Enter any string name for this protocol\" style=\"width: 120px; margin-left: 14px; padding: 0;\"/>\n  </div>\n\n  <div class=\"dialogButtonContainer\">\n{% if is_standalone %}\n    <button class=\"blueButton\" dojoType=\"dijit.form.Button\" dojoAttachPoint=\"save_button\">\n      Save &amp; Use\n    </button>\n    <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"cancel_button\">\n      Cancel\n    </button>\n{% else %}\n    <button class=\"blueButton\" dojoType=\"dijit.form.Button\" dojoAttachPoint=\"save_button\">\n      Save Protocol Changes\n    </button>\n    <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"delete_button\">\n      Delete Protocol\n    </button>\n{% endif %}\n  </div>\n\n</div>\n",widgetsInTemplate:true,is_new:null,protocol_uid:null,is_standalone:null,policy_manager:null,acl_widget:null,postMixInProperties:function(){},showProtocol:function(_21f4){this.is_new=false;this._redraw(_21f4);this.onShow();},showNewProtocol:function(){var _21f5={"ethertype":2048,"name":null,"unidirectional":false,"dst_port":null,"src_port":null,"iptype":6};this.is_new=true;this._redraw(_21f5);this.onShow();},_setup_other_click_listener:function(_21f6,_21f7){dojo.connect(_21f6,"onChange",dojo.hitch(this,function(_21f8,_21f9){var _21fa=!_21f8.getValue();if(_21fa){_21f9.setValue("");_21f9.focusNode.blur();}_21f9.setAttribute("disabled",_21fa);},_21f6,_21f7));},_reset_ip_settings:function(_21fb){this.iptype_tcp.setValue(true);dojo.forEach(["iptype_any","iptype_tcp","iptype_udp","iptype_icmp","iptype_other"],dojo.hitch(this,function(_21fc){this[_21fc].attr("disabled",_21fb);}));var _21fd=(_21fb)?"none":"";dojo.style(this.ip_row1,"display",_21fd);dojo.style(this.ip_row2,"display",_21fd);},_reset_transport_port_settings:function(_21fe){this.dst_port_any.setValue(true);this.dst_port_text.attr("disabled",true);this.src_port_any.setValue(true);this.src_port_text.attr("disabled",true);var _21ff=(_21fe)?"none":"";dojo.style(this.tport_row1,"display",_21ff);dojo.style(this.tport_row2,"display",_21ff);dojo.style(this.tport_row3,"display",_21ff);dojo.style(this.tport_row4,"display",_21ff);},_reset_icmp_settings:function(_2200){this.icmp_type_any.setValue(true);this.icmp_type_text.attr("disabled",true);this.icmp_code_any.setValue(true);this.icmp_code_text.attr("disabled",true);var _2201=(_2200)?"none":"";dojo.style(this.icmp_row1,"display",_2201);dojo.style(this.icmp_row2,"display",_2201);dojo.style(this.icmp_row3,"display",_2201);dojo.style(this.icmp_row4,"display",_2201);},_reset_bidirectionality:function(_2202){this.bidirectional.setValue(_2202);var _2203=!this.iptype_udp.getValue();this.bidirectional.attr("disabled",_2203);},_redraw:function(_2204){dojo.style(this.domNode,{"display":"block"});if(!this.is_new){this.protocol_uid=_2204.uid;}var etype=_2204.ethertype;var _2206=(etype==2048);this.ethertype_ip.setValue(_2206);dojo.connect(this.ethertype_ip,"onChange",dojo.hitch(this,function(){var _2207=(this.ethertype_ip.getValue())?false:true;this._reset_ip_settings(_2207);this._reset_transport_port_settings(_2207);this._reset_icmp_settings(true);this._reset_bidirectionality(!_2207);}));this.ethertype_other.setValue(!_2206);if(!_2206){var _2208=dojo.string.pad(etype.toString(16).toUpperCase(),4,"0");this.ethertype_other_text.setValue("0x"+_2208);}else{this.ethertype_other_text.setValue("");}if(_2206){this.ethertype_other_text.setAttribute("disabled",true);}this._setup_other_click_listener(this.ethertype_other,this.ethertype_other_text);this.iptype_tcp.setValue(true);this.iptype_icmp.setValue(false);var _2209=dojo.hitch(this,function(){var _220a=!(this.iptype_tcp.getValue()||this.iptype_udp.getValue());this._reset_transport_port_settings(_220a);this._reset_bidirectionality(!_220a);});dojo.connect(this.iptype_tcp,"onChange",_2209);dojo.connect(this.iptype_udp,"onChange",_2209);var _220b=dojo.hitch(this,function(){var _220c=!(this.iptype_icmp.getValue());this._reset_icmp_settings(_220c);if(!_220c){this._reset_bidirectionality(false);}});dojo.connect(this.iptype_icmp,"onChange",_220b);this._setup_other_click_listener(this.iptype_other,this.iptype_other_text);var _220d=_2204.iptype;var _220e=false;if(_220d===null){this.iptype_any.setValue(true);}else{if(_220d==6){this.iptype_tcp.setValue(true);}else{if(_220d==17){this.iptype_udp.setValue(true);}else{if(_220d==1){this.iptype_icmp.setValue(true);}else{this.iptype_other.setValue(true);this.iptype_other_text.setValue(_220d);_220e=true;}}}}this.iptype_other_text.setAttribute("disabled",!_220e);this._setup_other_click_listener(this.src_port_only,this.src_port_text);this._setup_other_click_listener(this.dst_port_only,this.dst_port_text);this._setup_other_click_listener(this.icmp_type_only,this.icmp_type_text);this._setup_other_click_listener(this.icmp_code_only,this.icmp_code_text);if(_220d==6||_220d==17){var _220f=_2204.dst_port;this.dst_port_any.setValue(_220f===null);this.dst_port_only.setValue(_220f!==null);this.dst_port_text.setAttribute("disabled",(_220f===null));this.dst_port_text.setValue((_220f!==null)?_220f:"");var _2210=_2204.src_port;this.src_port_any.setValue(_2210===null);this.src_port_only.setValue(_2210!==null);this.src_port_text.setAttribute("disabled",(_2210===null));this.src_port_text.setValue((_2210!==null)?_2210:"");}else{if(_220d==1){var _2211=_2204.src_port;this.icmp_type_any.setValue(_2211===null);this.icmp_type_only.setValue(_2211!==null);this.icmp_type_text.setAttribute("disabled",(_2211===null));this.icmp_type_text.setValue((_2211!==null)?_2211:"");var _2212=_2204.dst_port;this.icmp_code_any.setValue(_2212===null);this.icmp_code_only.setValue(_2212!==null);this.icmp_code_text.setAttribute("disabled",(_2212===null));this.icmp_code_text.setValue((_2212!==null)?_2212:"");}}this._reset_bidirectionality(!_2204.unidirectional);this.name_save.setValue(_2204.name!==null);this.name_custom.setValue(_2204.name===null);this._setup_other_click_listener(this.name_save,this.name);this.name.setAttribute("disabled",(_2204.name===null));dojo.removeClass(this.div_name_custom,"hidden");this.name_save.attr("disabled",false);if(_2204.uid&&_2204.name){dojo.addClass(this.div_name_custom,"hidden");this.name_save.attr("disabled",true);}var name=_2204.name;if(name!==null){this.name.setDisplayedValue(name);}dojo.connect(this.save_button,"onClick",dojo.hitch(this,function(){if(!this.isValid()){return;}this._save();this.onSave();}));dojo.connect(this.cancel_button,"onClick",dojo.hitch(this,function(){this.onCancel();}));dojo.connect(this.delete_button,"onClick",dojo.hitch(this,function(){var menus=nox.ext.apps.vmanui.menu_creator.creator;var d=this.policy_manager.deleteProtocol(this.protocol_uid);d.addCallback(dojo.hitch(this,function(_2216){this.onDelete();}));d.addErrback(function(_2217){if(_2217.status==409){nox.ext.apps.vmanui.main.vmanui_error("This protocol cannot be deleted "+" because it is currently being used in an ACL rule.");}else{main_module.vmanu_error("Failed to delete protocol");}});this.onSave();}));},isValid:function(){if(this.name_save.getValue()){if(this.name.getValue().length===0){this.name.focus();return false;}}if(this.ethertype_other.getValue()){if(this.ethertype_other_text.isValid()&&this.ethertype_other_text.getValue().length>0){return true;}else{this.ethertype_other_text.focus();return false;}}if(this.ethertype_ip.getValue()&&this.iptype_other.getValue()){if(this.iptype_other_text.isValid()&&this.iptype_other_text.getValue().length>0){var _2218=this.iptype_other_text.getValue();if(_2218==1||_2218==6||_2218==17){if(_2218==1){this.iptype_icmp.setValue(true);}else{if(_2218==6){this.iptype_tcp.setValue(true);}else{if(_2218==17){this.iptype_udp.setValue(true);}}}this.iptype_other_text.setValue("");return false;}return true;}else{this.iptype_other_text.focus();return false;}}if(this.ethertype_ip.getValue()&&this.iptype_any.getValue()){return true;}if(this.ethertype_ip.getValue()&&(this.iptype_tcp.getValue()||this.iptype_udp.getValue())){if(!(this.src_port_any.getValue()||(this.src_port_text.isValid()&&this.src_port_text.getValue().length>0))){this.src_port_text.focus();return false;}if(!(this.dst_port_any.getValue()||(this.dst_port_text.isValid()&&this.dst_port_text.getValue().length>0))){this.dst_port_text.focus();return false;}return true;}if(this.ethertype_ip.getValue()&&this.iptype_icmp.getValue()){if(!(this.icmp_type_any.getValue()||(this.icmp_type_text.isValid()&&this.icmp_type_text.getValue().length>0))){this.icmp_type_text.focus();return false;}if(!(this.icmp_code_any.getValue()||(this.icmp_code_text.isValid()&&this.icmp_code_text.getValue().length>0))){this.icmp_code_text.focus();return false;}return true;}return false;},_save:function(){var _2219={"iptype":null,"dst_port":null,"src_port":null,"name":null};if(!this.is_new){_2219.uid=this.protocol_uid;}if(this.ethertype_ip.getValue()){_2219.ethertype=2048;}else{_2219.ethertype=parseInt(this.ethertype_other_text.getValue());}if(_2219.ethertype==2048){if(this.iptype_any.getValue()){_2219.iptype=null;}else{if(this.iptype_tcp.getValue()){_2219.iptype=6;}else{if(this.iptype_udp.getValue()){_2219.iptype=17;}else{if(this.iptype_icmp.getValue()){_2219.iptype=1;}else{_2219.iptype=parseInt(this.iptype_other_text.getValue());}}}}if(_2219.iptype==6||_2219.iptype==17){if(this.src_port_only.getValue()){_2219.src_port=parseInt(this.src_port_text.getValue());}if(this.dst_port_only.getValue()){_2219.dst_port=parseInt(this.dst_port_text.getValue());}}if(_2219.iptype==1){if(this.icmp_type_only.getValue()){_2219.src_port=parseInt(this.icmp_type_text.getValue());}if(this.icmp_code_only.getValue()){_2219.dst_port=parseInt(this.icmp_code_text.getValue());}}}_2219.unidirectional=!(this.bidirectional.getValue());if(!this.is_new){_2219.uid=this.protocol_uid;}if(this.name_save.getValue()){_2219.name=this.name.getValue();}if(this.is_new){var d_new=this.policy_manager.addProtocol(_2219);d_new.addCallback(dojo.hitch(this,function(_221b){var menus=nox.ext.apps.vmanui.menu_creator.creator;menus.change_protocol_for_acl(_221b,this.acl_widget);}));d_new.addErrback(function(){main_module.vmanu_error("Failed to add protocol");});}else{var d=this.policy_manager.modifyProtocol(_2219);d.addCallback(dojo.hitch(this,function(_221e){var _221f=this.acl_widget.role_widget.getTopLayer();_221f.redrawAclsRecursive();this.onModify(_221e);}));d.addErrback(function(){main_module.vmanu_error("Failed to modify protocol");});}},onCancel:function(){},onSave:function(){},onShow:function(){},onModify:function(_2220){},onDelete:function(){},postCreate:function(){},uninitialize:function(){this.inherited(arguments);for(var f in this){if(f=="acl_widget"){continue;}var w=this[f];if(w&&dojo.isObject(w)&&dojo.isFunction(w.destroyRecursive)){w.destroyRecursive();}}}});}if(!dojo._hasResource["nox.ext.apps.vmanui.Search"]){dojo._hasResource["nox.ext.apps.vmanui.Search"]=true;dojo.provide("nox.ext.apps.vmanui.Search");dojo.declare("nox.ext.apps.vmanui.Search",[dijit._Widget,dijit._Templated],{templateString:"<form class=\"noxSearch\" dojoAttachPoint=\"containerNode\" dojoAttachEvent=\"onreset: onReset, onsubmit: onSubmit\"\n        >\n    <div class=\"searchInput\">\n        <img src=\"${imageBasePathStr}/searchIcon.gif\").toString()} alt=\"Filter your Search\" class=\"searchIcon\"\n            dojoAttachPoint=\"changeFilterNode\" />\n        <input type=\"text\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"searchString\" />\n        <img src=\"${imageBasePathStr}/searchClearIcon.gif\" alt=\"Clear your Search\" class=\"searchClear\"\n            dojoAttachEvent=\"onclick: onReset\" />\n    </div>\n</form>\n",imageBasePathStr:dojo.moduleUrl("nox.ext.apps.vmanui","images").toString(),widgetsInTemplate:true,_fillContent:function(_2223){this._source=_2223;},startup:function(){if(this._started){return;}this.reflectState(true);this.events=[dojo.connect(this.searchString,"onFocus",this,"onSearchFocus"),dojo.connect(this.searchString,"onBlur",this,"onSearchBlur")];var _2224=dojo.query(".searchContainer");if(_2224.length>0){this.container=dijit.getEnclosingWidget(_2224[0]);this.recomputeWidth();if(this.container.resize){dojo.connect(this.container,"resize",this,"recomputeWidth");}}this.inherited(arguments);},recomputeWidth:function(){try{var _2225=dojo.style(this.container.domNode,"width")-100;this.searchString._setStyleAttr("width : "+_2225+"px");}catch(e){nox.ext.apps.vmanui.main.console_log("Error resizing search box: ",e);}},destroyDescendants:function(){dojo.forEach(this.events,dojo.disconnect);this.inherited(arguments);},reflectState:function(empty){this.isEmpty=empty;if(empty){setTimeout(function(){dojo.addClass(dijit.byId("searchBox").containerNode,"empty");},100);}else{dojo.removeClass(this.domNode,"empty");this.searchString.setValue("");}},onSearchFocus:function(){if(this.isEmpty){this.reflectState(false);}},onSearchBlur:function(){if(this.searchString.getValue()){this.isEmpty=false;}else{this.reflectState(true);}},onReset:function(){this.searchString.setValue("");this.reflectState(true);this.submit();},onSubmit:function(evt){dojo.stopEvent(evt);if(this.isEmpty){this.searchString.setValue("");}this.submit();return false;},submit:function(){if(!nox.ext.apps.vmanui.main.check_warn_on_nav()){return;}nox.ext.apps.vmanui.main.current_tree_item=null;nox.ext.apps.vmanui.vac.load_nav_tree();}});}if(!dojo._hasResource["nox.ext.apps.vmanui.dialog.pool_connect_status"]){dojo._hasResource["nox.ext.apps.vmanui.dialog.pool_connect_status"]=true;dojo.provide("nox.ext.apps.vmanui.dialog.pool_connect_status");dojo.declare("nox.ext.apps.vmanui.dialog.pool_connect_status",[dijit._Widget,dojox.dtl._Templated],{popup:null,widgetsInTemplate:true,canceled:false,pool_obj:null,master_addr:"<unknown>",templateString:"<div dojoAttachPoint=\"containerNode\" style=\"width:300px\">\n  <div class=\"pollingDiv\">\n    <div>Trying to connect to '{{ master_addr }}'</div> \n    <div style=\"text-align:center;margin-top:12px;\">\n      <div dojoType=\"dijit.ProgressBar\" style=\"width:300px\" indeterminate=\"true\"></div>\n    </div> \n    <div class=\"dialogButtonContainer\">\n      <button dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:onCancel\">Cancel </button> \n    </div> \n  </div>\n  <div class=\"stealingDiv\">\n    <div style=\"margin-bottom:15px\">This pool is already managed by controller <span class=\"currentControllerIP\"></span>.\n    Would you like to steal control by force or just leave it under the other controller's command?</div>\n    <div style=\"text-align:right\">\n      <button class=\"blueButton\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:stealPool\">Steal Control</button>\n      <button dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:hide\">Leave it</button>\n    </div>\n  </div>\n</div>\n",postMixInProperties:function(){this.inherited(arguments);this.popup=new nox.ext.apps.vmanui.BoundedDialog({});dojo.connect(this.popup,"onCancel",this,"onCancel");this.popup.attr("title","Establishing XenServer Connection...");for(var i=0;i<this.pool_obj.properties.length;i++){var p=this.pool_obj.properties[i];if(p[0]=="master_address_1"){this.master_addr=p[1];}}},postCreate:function(){this.pollingDiv=dojo.query("div.pollingDiv",this.domNode)[0];this.stealingDiv=dojo.query("div.stealingDiv",this.domNode)[0];this.pollingDiv.style.display="block";this.stealingDiv.style.display="none";},show:function(){this.popup.attr("content",this.domNode);dojo.addClass(this.popup.domNode,"poolConnectStatusDialog");nox.ext.apps.vmanui.main.onDialogOpen();this.popup.show();setTimeout(dojo.hitch(this,"poll"),1000);},stealPool:function(){this.hide();nox.ext.apps.vmanui.vac_status.retry_add_pool_with_steal();},askToSteal:function(oItem){this.pollingDiv.style.display="none";this.stealingDiv.style.display="block";dojo.query("span.currentControllerIP",this.domNode).forEach(function(oNode){oNode.innerHTML=oItem.controller;});},poll:function(){var _222c=nox.ext.apps.vmanui;if(this.canceled){return;}var d=_222c.vac_status.get_pool_tree_item(this.pool_obj.uid);d.addCallback(dojo.hitch(this,function(_222e){var _222f=_222e["active"];var _2230=parseInt(_222f);if(this.canceled){return;}if(_2230==10){if(!this.pool_obj["refresh_status"]){this.askToSteal(_222e);}else{this.hide();}return;}else{if((_2230==0)||(_2230==9)){this.hide();return;}else{if(_2230==1){setTimeout(dojo.hitch(this,function(){this.poll();}),500);return;}}}this.hide();delete this.pool_obj["refresh_status"];var _2231=new _222c.dialog.pool_edit({pool_obj:this.pool_obj,error_str:this._getErrorStr(_222f)});_2231.show();}));d.addErrback(dojo.hitch(this,function(_2232){if(_2232.status==404){setTimeout(dojo.hitch(this,function(){this.poll();}),1000);}}));},hide:function(){nox.ext.apps.vmanui.main.onDialogClose();this.popup.destroy();this.destroy();},onCancel:function(){this.canceled=true;this.hide();var _2233=new nox.ext.apps.vmanui.dialog.pool_edit({pool_obj:this.pool_obj});_2233.show();},_getErrorStr:function(_2234){switch(_2234){case 2:return "Internal Error";case 3:return "Unable to establish network connection";case 4:return "Invalid address";case 5:return "Peer is not a valid XenServer";case 6:return "Duplicate pool";case 7:return "Invalid username or password";default:return "Unknown Error";}}});}if(!dojo._hasResource["nox.ext.apps.vmanui.dialog.pool_edit"]){dojo._hasResource["nox.ext.apps.vmanui.dialog.pool_edit"]=true;dojo.provide("nox.ext.apps.vmanui.dialog.pool_edit");dojo.declare("nox.ext.apps.vmanui.dialog.pool_edit",[dijit._Widget,dojox.dtl._Templated],{popup:null,widgetsInTemplate:true,error_str:null,pool_obj:null,templateString:"\n<div>\n{% if has_error %}\n  <div class=\"poolConnectError\">Connection Error : {{ error_str }}</div>\n{% endif %}\n  <form dojoType=\"dijit.form.Form\" dojoAttachEvent=\"onSubmit:formSubmit\">\n    <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" class=\"TableFirewallPolicy\" style=\"background: none; border: none;\">\n      <tr>\n        <td style=\"text-align:right\"><label class=\"nowrap\">Pool Master Server (DNS/IP):</label></td>\n        <td><input dojoType=\"nox.ext.apps.vmanui.regex.HostTextBox\"\n          dojoAttachPoint=\"master_addr_text\" type=\"text\" style=\"padding: 0;\"\n          dojoAttachEvent=\"onKeyUp:_check_submit_enabled\"/></td>\n      </tr>\n\n      <tr>\n        <td style=\"text-align:right\"><label class=\"nowrap\">Login Username:</label></td>\n        <td><input dojoType=\"dijit.form.ValidationTextBox\"\n                  dojoAttachPoint=\"username_text\" type=\"text\"\n                  value=\"root\" required=\"true\" style=\"padding: 0;\"\n                  dojoAttachEvent=\"onKeyUp:_check_submit_enabled\"/></td>\n      </tr>\n\n      <tr>\n        <td style=\"text-align:right\"><label class=\"nowrap\">Login Password:</label></td>\n        <td><input dojoType=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"password_text\"\n          type=\"password\" required=\"true\" style=\"padding: 0;\"\n          dojoAttachEvent=\"onKeyUp:_check_submit_enabled\"/></td>\n      </tr>\n\n      <tr class=\"steal_pool_row\">\n        <td style=\"text-align:right;vertical-align:top;padding-top:10px\"><label>Steal:</label></td>\n        <td style=\"width:200px\">\n          <input dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"steal_checkbox\" style=\"margin:0px;margin-right:3px;float:left\" />\n          <span style=\"font-size:85%;color:#4C4C4C\">If checked, forcibly replaces any existing controller.</span>\n        </td>\n      </tr>\n\n    </table>\n    <div class=\"dialogButtonContainer\">\n      <button class=\"blueButton\" dojoType=\"dijit.form.Button\"\n        dojoAttachPoint=\"submit_button\" type=\"submit\" >Connect</button>\n      <button dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:onCancel\">Cancel</button>\n    </div>\n  </form>\n</div>\n",field_names:["master_addr_text","username_text","password_text"],postMixInProperties:function(){this.inherited(arguments);this.is_new=this.pool_obj===null;this.has_error=this.error_str!==null;this.popup=new nox.ext.apps.vmanui.BoundedDialog({});this.can_steal=false;dojo.connect(this.popup,"onCancel",this,"onCancel");if(this.is_new){this.popup.attr("title","Add Resource Pool");}else{this.popup.attr("title","Modify Resource Pool");}if(this.is_new||(this.pool_obj&&this.pool_obj.xapi_status==10)){this.can_steal=true;}},postCreate:function(){var _2235=dojo.query("tr.steal_pool_row",this.domNode)[0];dojo.removeClass(_2235,"hidden");this.steal_checkbox.attr("disabled",false);if(!this.can_steal){dojo.addClass(_2235,"hidden");this.steal_checkbox.attr("disabled",true);}},fillFields:function(){var ip="";var user="root";var cred="";var steal=false;if(!this.is_new){dojo.forEach(this.pool_obj.properties,function(_223a){if(_223a[0]=="master_address_1"){ip=_223a[1];}else{if(_223a[0]=="password"){cred=_223a[1];}else{if(_223a[0]=="username"){user=_223a[1];}else{if(_223a[0]=="steal_pool"){steal=_223a[1]=="true";}}}}});}this.username_text.setValue(user);this.master_addr_text.setValue(ip);this.password_text.setValue(cred);this.steal_checkbox.attr("checked",steal);this._check_submit_enabled();},_check_submit_enabled:function(){var valid=true;for(var i=0;i<this.field_names.length;i++){var f=this.field_names[i];if(!this[f].isValid()||this[f].getValue().length<1){valid=false;break;}}this.submit_button.attr("disabled",!valid);},show:function(){this.fillFields();this.popup.attr("content",this.domNode);dojo.addClass(this.popup.domNode,"poolEditDialog");nox.ext.apps.vmanui.main.onDialogOpen();this.popup.show();},hide:function(){nox.ext.apps.vmanui.main.onDialogClose();this.popup.destroy();this.destroy();},onCancel:function(){this.hide();},isValid:function(){for(var i=0;i<this.field_names.length;i++){var f=this.field_names[i];if(!this[f].isValid()){this[f].focus();return false;}}return true;},formSubmit:function(evt){dojo.stopEvent(evt);this.onSubmit();},onSubmit:function(){if(!this.isValid()){return;}if(this.is_new){var d_new=nox.ext.apps.vmanui.vac_status.add_pool(this.master_addr_text.getValue(),this.username_text.getValue(),this.password_text.getValue(),this.steal_checkbox.checked);d_new.addCallback(nox.ext.apps.vmanui.vac_status.show_connect_status_dialog);}else{this.pool_obj.properties=[["master_address_1",this.master_addr_text.getValue()],["username",this.username_text.getValue()],["password",this.password_text.getValue()]];if(this.can_steal){var _2242=this.steal_checkbox.checked?"true":"false";this.pool_obj.properties.push(["steal_pool",_2242]);}var d=nox.ext.apps.vmanui.vac_status.modify_pool(this.pool_obj);d.addCallback(nox.ext.apps.vmanui.vac_status.show_connect_status_dialog);}this.hide();}});}if(!dojo._hasResource["nox.ext.apps.vmanui.dialog.select_existing_protocol"]){dojo._hasResource["nox.ext.apps.vmanui.dialog.select_existing_protocol"]=true;dojo.provide("nox.ext.apps.vmanui.dialog.select_existing_protocol");dojo.declare("nox.ext.apps.vmanui.dialog.select_existing_protocol",[dijit._Widget,dojox.dtl._Templated],{popup:null,widgetsInTemplate:true,acl_widget:null,empty_str:"",_skipNodeCache:false,templateString:"<div> \n<table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" class=\"TableFirewallPolicy\">\n    <tr>\n\t<td><div dojoAttachPoint=\"protocol_box\"></div></td>\n    <td class=\"dialogButtonContainer\"> \n      <button class=\"blueButton\" dojoType=\"dijit.form.Button\" \n        disabled=\"true\" dojoAttachPoint=\"use_proto_btn\"\n        dojoAttachEvent=\"onClick:onSubmit\">\n        Use Protocol \n      </button>\n      <button dojoType=\"dijit.form.Button\" \n          dojoAttachPoint=\"cancel_btn\"\n          dojoAttachEvent=\"onClick:onCancel\">\n          Cancel\n        </button>\n    </td>\n    </tr>\n    <tr><td> \n        <a dojoAttachPoint=\"view_details_link\"> </a>\n    </td>\n\t</tr>\n    <tr>\n\t</tr>\n  </table> \n  <span dojoAttachPoint=\"proto_modify\" \n        dojoAttachEvent=\"onSave:onProtoSave\"\n        dojoType=\"nox.ext.apps.vmanui.protocol_modify\"\n        is_standalone=\"false\"> \n  </span> {{ empty_str }}\n</div> \n",postMixInProperties:function(){this.inherited(arguments);this.popup=new nox.ext.apps.vmanui.BoundedDialog({});dojo.connect(this.popup,"onCancel",this,"onCancel");this.popup.attr("title","Select an Existing Protocol");},_initialize_filtering_select:function(){if(this._proto_fs){this._proto_fs.destroyRecursive();}var pm=this.acl_widget.role_widget.policy_manager;dojo.empty(this.protocol_box);this._proto_fs=new dijit.form.FilteringSelect({store:pm.getProtocolStore()});var _2245=dojo.hitch(this,function(){this.use_proto_btn.attr("disabled",!this._proto_fs.isValid());var st=(this._proto_fs.isValid())?"block":"none";dojo.style(this.view_details_link,"display",st);});dojo.connect(this._proto_fs,"onChange",_2245);_2245();dojo.place(this._proto_fs.domNode,this.protocol_box);var _2247=pm.getProtocol(this.acl_widget.acl.protocol_uid);if(_2247!==undefined&&_2247.name!==null){this._proto_fs.setDisplayedValue(_2247.name);}this.toggle_details(false);},startup:function(){this.proto_modify.policy_manager=this.acl_widget.role_widget.policy_manager;this.proto_modify.acl_widget=this.acl_widget;this._initialize_filtering_select();dojo.connect(this.proto_modify,"onModify",this,"_refresh_protocol_dialog");dojo.connect(this.proto_modify,"onDelete",this,"_refresh_protocol_dialog",null);dojo.connect(this.view_details_link,"onclick",dojo.hitch(this,function(){this.toggle_details();}));},show:function(){this.popup.attr("content",this.domNode);dojo.addClass(this.popup.domNode,"selectProtocolDialog");nox.ext.apps.vmanui.main.onDialogOpen();this.popup.show();this.popup.refocus=false;},_destroyChildWidgets:function(){this.proto_modify.destroyRecursive();if(this._proto_fs){this._proto_fs.destroyRecursive();}this.use_proto_btn.destroyRecursive();this.cancel_btn.destroyRecursive();},hide:function(){this._destroyChildWidgets();nox.ext.apps.vmanui.main.onDialogClose();this.popup.destroy();this.destroyRecursive();},onCancel:function(){this.hide();},onSubmit:function(){var menus=nox.ext.apps.vmanui.menu_creator.creator;var _2249=this._proto_fs.getValue();menus.change_protocol_for_acl(_2249,this.acl_widget);this.hide();},toggle_details:function(_224a){var pane=this.proto_modify;if(_224a===undefined){_224a=(dojo.style(pane.domNode,"display")=="none");}var _224c,msg;if(!_224a){_224c="none";msg="view protocol details";this._proto_fs.attr("disabled",false);}else{var pm=this.acl_widget.role_widget.policy_manager;var uid=this._proto_fs.getValue();pane.showProtocol(pm.getProtocol(uid));_224c="block";msg="hide protocol details";this._proto_fs.attr("disabled",true);}dojo.style(pane.domNode,{"display":_224c});this.view_details_link.innerHTML=msg;},_refresh_protocol_dialog:function(uid){this._initialize_filtering_select();if(uid){var pm=this.acl_widget.role_widget.policy_manager;var _2252=pm.getProtocol(uid);this._proto_fs.setDisplayedValue(_2252.name);}},onProtoSave:function(){dojo.style(this.proto_modify.domNode,"display","none");}});}if(!dojo._hasResource["nox.ext.apps.vmanui.dialog.protocol_edit"]){dojo._hasResource["nox.ext.apps.vmanui.dialog.protocol_edit"]=true;dojo.provide("nox.ext.apps.vmanui.dialog.protocol_edit");dojo.declare("nox.ext.apps.vmanui.dialog.protocol_edit",[dijit._Widget,dojox.dtl._Templated],{popup:null,widgetsInTemplate:true,acl_widget:null,protocol_uid:null,_skipNodeCache:true,empty_str:"",templateString:"<div> \n  <div dojoAttachPoint=\"proto_modify_div\" > \n    <!--    dojoType=\"nox.ext.apps.vmanui.protocol_modify\" dojoAttachPoint=\"proto_modify\" > -->  \n</div> \n</div> \n",postMixInProperties:function(){this.inherited(arguments);this.popup=new nox.ext.apps.vmanui.BoundedDialog({});dojo.connect(this.popup,"onCancel",this,"hide");if(this.protocol_uid===null){this.popup.attr("title","Create Protocol");}else{this.popup.attr("title","View/Modify Protocol");}},postCreate:function(){},startup:function(){this.proto_modify=new nox.ext.apps.vmanui.protocol_modify({is_standalone:true});dojo.place(this.proto_modify.domNode,this.proto_modify_div);var pm=this.acl_widget.role_widget.policy_manager;this.proto_modify.policy_manager=pm;this.proto_modify.acl_widget=this.acl_widget;if(this.protocol_uid!==null){var proto=pm.getProtocol(this.protocol_uid);this.proto_modify.showProtocol(proto);}else{this.proto_modify.showNewProtocol();}dojo.connect(this.proto_modify,"onSave",this,"hide");dojo.connect(this.proto_modify,"onCancel",this,"hide");},show:function(){this.popup.attr("content",this.domNode);dojo.addClass(this.popup.domNode,"protocolEditDialog");nox.ext.apps.vmanui.main.onDialogOpen();this.popup.show();this.popup.refocus=false;},hide:function(){nox.ext.apps.vmanui.main.onDialogClose();this.popup.destroy();this.proto_modify.destroy();this.destroy();}});}if(!dojo._hasResource["nox.ext.apps.vmanui.dialog.controller_addr_edit"]){dojo._hasResource["nox.ext.apps.vmanui.dialog.controller_addr_edit"]=true;dojo.provide("nox.ext.apps.vmanui.dialog.controller_addr_edit");dojo.declare("nox.ext.apps.vmanui.dialog.controller_addr_edit",[dijit._Widget,dijit._Templated],{popup:null,widgetsInTemplate:true,addr_obj:null,templateString:"\n<div>\n  <form dojoType=\"dijit.form.Form\" dojoAttachEvent=\"onSubmit:formSubmit\">\n\n<table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" class=\"TableFirewallPolicy\" style=\"background: none; border: none;\">\n  <tr>\n    <td colspan=\"2\"><input dojoType=\"dijit.form.RadioButton\" name=\"dhcp_enabled\"\n        dojoAttachPoint=\"dhcp_yes_radio\" type=\"radio\"\n        dojoAttachEvent=\"onChange:_sync_to_radio\"\n        /> Use DHCP\n    </td>\n  </tr>\n</table>\n<div id=\"dhcp_message\" class=\"hint hidden\">\nDHCP is not available on this controller because at least one of the resource pools is configured to use\n'fail-safe' mode, which is incompatible with DHCP.\n</div>\n\n<table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" class=\"TableFirewallPolicy\" style=\"background: none; border: none;\">\n  <tr>\n    <td colspan=\"2\"><input dojoType=\"dijit.form.RadioButton\" name=\"dhcp_enabled\"\n        dojoAttachPoint=\"dhcp_no_radio\" type=\"radio\"\n        dojoAttachEvent=\"onChange:_sync_to_radio\"\n        /> Manual Configuration\n    </td>\n  </tr>\n  <tr>\n    <td><label>IP Address:</label></td>\n    <td><input dojoType=\"nox.ext.apps.vmanui.regex.IPv4TextBox\"\n              dojoAttachPoint=\"address_text\" type=\"text\"\n              required=\"true\" style=\"padding: 0;\"\n              dojoAttachEvent=\"onKeyUp:_check_submit_enabled\"/></td>\n  </tr>\n  <tr>\n    <td><label>Netmask:</label></td>\n    <td><input dojoType=\"nox.ext.apps.vmanui.regex.IPv4Netmask\"\n              dojoAttachPoint=\"netmask_text\" type=\"text\"\n              required=\"true\" style=\"padding: 0;\"\n              dojoAttachEvent=\"onKeyUp:_check_submit_enabled\"/></td>\n  </tr>\n  <tr>\n    <td><label>Gateway:</label></td>\n    <td><input dojoType=\"nox.ext.apps.vmanui.regex.IPv4TextBox\"\n              dojoAttachPoint=\"gateway_text\" type=\"text\"\n              required=\"false\" style=\"padding: 0;\"\n              dojoAttachEvent=\"onKeyUp:_check_submit_enabled\"/></td>\n  </tr>\n  <tr>\n    <td style=\"vertical-align:top;padding-top:10px;white-space:nowrap\"><label>DNS Servers:</label></td>\n    <td>\n      <input dojoType=\"nox.ext.apps.vmanui.regex.IPv4TextBox\"\n            dojoAttachPoint=\"dns-nameserver0_text\" type=\"text\"\n            required=\"false\" style=\"padding: 0;\"\n            dojoAttachEvent=\"onKeyUp:_check_submit_enabled\"/>\n      <br/>\n      <input dojoType=\"nox.ext.apps.vmanui.regex.IPv4TextBox\"\n           dojoAttachPoint=\"dns-nameserver1_text\" type=\"text\"\n           required=\"false\" style=\"padding: 0;\"\n           dojoAttachEvent=\"onKeyUp:_check_submit_enabled\"/>\n    </td>\n  </tr>\n  <tr>\n    <td><label>Search Domain:</label></td>\n    <td><input dojoType=\"nox.ext.apps.vmanui.regex.DNSSearchTextBox\"\n              dojoAttachPoint=\"dns-search_text\" style=\"padding: 0;\"\n              dojoAttachEvent=\"onKeyUp:_check_submit_enabled\"/></td>\n  </tr>\n</table>\n\n<div class=\"dialogButtonContainer\">\n  <button class=\"blueButton\" dojoType=\"dijit.form.Button\"\n    dojoAttachPoint=\"submit_button\" disabled=\"true\" type=\"submit\">\n    Make Changes </button>\n  <button dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:onCancel\">Cancel\n  </button>\n</div>\n\n  </form>\n</div>\n",field_names:["address_text","netmask_text","gateway_text","dns-search_text","dns-nameserver0_text","dns-nameserver1_text","dhcp_yes_radio","dhcp_no_radio"],array_fields:{"dns-nameserver0_text":"dns-nameservers","dns-nameserver1_text":"dns-nameservers"},postMixInProperties:function(){this.inherited(arguments);this.popup=new nox.ext.apps.vmanui.BoundedDialog({});dojo.connect(this.popup,"onCancel",this,"onCancel");this.popup.attr("title","Controller IP Address Settings");},fillFields:function(_2255){if(_2255=="fail_safe"){this.dhcp_yes_radio.setAttribute("disabled","true");this.dhcp_no_radio.setAttribute("disabled","true");dojo.removeClass("dhcp_message","hidden");}else{dojo.addClass("dhcp_message","hidden");}if(this.addr_obj.dhcp){this.dhcp_yes_radio.setValue(true);}else{this.dhcp_no_radio.setValue(true);dojo.forEach(this.field_names,function(f){if(this.array_fields[f]){return;}var arr=f.split("_");if(arr[1]=="text"&&this.addr_obj[arr[0]]){this[f].setValue(this.addr_obj[arr[0]]);}},this);if(dojo.isArray(this.addr_obj["dns-nameservers"])){dojo.forEach(this.addr_obj["dns-nameservers"],function(dns,i){this["dns-nameserver"+i+"_text"].setValue(dns);},this);}}},_sync_to_radio:function(){var _225a=this.dhcp_yes_radio.getValue();dojo.forEach(this.field_names,function(f){var arr=f.split("_");if(arr[1]=="text"){if(_225a){this[f].setValue("");}this[f].attr("disabled",_225a);}},this);this._check_submit_enabled();},_check_submit_enabled:function(){var valid=true;if(this.dhcp_no_radio.getValue()){for(var i=0;i<this.field_names.length;i++){var f=this.field_names[i];if(this[f].isValid&&!this[f].isValid()){valid=false;break;}}}this.submit_button.attr("disabled",!valid);},show:function(){nox.ext.apps.vmanui.vac_status.find_fail_mode("all",dojo.hitch(this,this.fillFields));this._sync_to_radio();this.submit_button.attr("disabled",true);this.popup.attr("content",this.domNode);dojo.addClass(this.popup.domNode,"controllerAddrEditDialog");nox.ext.apps.vmanui.main.onDialogOpen();this.popup.show();},hide:function(){nox.ext.apps.vmanui.main.onDialogClose();this.popup.destroy();this.destroy();},onCancel:function(){this.hide();},isValid:function(){if(this.dhcp_yes_radio.getValue()){return true;}for(var i=0;i<this.field_names.length;i++){var f=this.field_names[i];if(this[f].isValid&&!this[f].isValid()){this[f].focus();return false;}}return true;},formSubmit:function(evt){dojo.stopEvent(evt);this.onSubmit();},onSubmit:function(){if(!this.isValid()){return;}var _2263={"name":this.addr_obj.name};if(this.dhcp_yes_radio.getValue()){_2263.dhcp=true;}else{_2263.dhcp=false;dojo.forEach(this.field_names,function(f){var arr=f.split("_");if(this.array_fields[f]){return;}if(arr[1]=="text"){var v=this[f].getValue();if(v.length>0){_2263[arr[0]]=v;}}},this);for(var f in this.array_fields){var arr=f.split("_");var k=this.array_fields[f];if(arr[1]=="text"){var v=this[f].getValue();if(v.length){if(_2263[k]==undefined){_2263[k]=[];}_2263[k].push(v);}}}}this.onSave(_2263);this.hide();},onSave:function(_226b){}});}if(!dojo._hasResource["nox.ext.apps.vmanui.dialog.controller_hostname_edit"]){dojo._hasResource["nox.ext.apps.vmanui.dialog.controller_hostname_edit"]=true;dojo.provide("nox.ext.apps.vmanui.dialog.controller_hostname_edit");dojo.declare("nox.ext.apps.vmanui.HostNameTextbox",dijit.form.ValidationTextBox,{lowercase:true,isValid:function(){return this.inherited(arguments)&&this.isHostNameValid();},isHostNameValid:function(){var val=this.textbox.value;if(/^-/.test(val)||/-$/.test(val)){return false;}if(/[^a-z0-9-]/.test(val)){return false;}return true;}});dojo.declare("nox.ext.apps.vmanui.DomainNameTextbox",dijit.form.ValidationTextBox,{lowercase:true,isValid:function(){return this.inherited(arguments)&&this.isDomainNameValid();},isDomainNameValid:function(){var val=this.textbox.value;var _226e=val.split(".");for(var i=0;i<_226e.length;i++){var part=_226e[i];if(/^-/.test(part)||/-$/.test(part)){return false;}if(/[^a-z0-9-]/.test(part)){return false;}}return true;}});dojo.declare("nox.ext.apps.vmanui.dialog.controller_hostname_edit",[dijit._Widget,dijit._Templated],{popup:null,widgetsInTemplate:true,hostname:null,domain:null,templateString:"<div>\n  <form dojoType=\"dijit.form.Form\" dojoAttachEvent=\"onSubmit:formSubmit\">\n    <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" class=\"TableFirewallPolicy\" style=\"background:none;border:none\">\n      <tr>\n        <td><label>Host Name:</label></td>\n        <td><input dojoType=\"nox.ext.apps.vmanui.HostNameTextbox\" name=\"hostname\"\n             dojoAttachPoint=\"hostNameInput\" type=\"text\" required=\"true\" style=\"padding:0\"\n             dojoAttachEvent=\"onKeyUp:_check_submit_enabled\" /></td>\n      </tr>\n      <tr>\n        <td><label>Domain Name:</label></td>\n        <td><input dojoType=\"nox.ext.apps.vmanui.DomainNameTextbox\" name=\"domainname\"\n             dojoAttachPoint=\"domainNameInput\" type=\"text\" required=\"false\" style=\"padding:0\"\n             dojoAttachEvent=\"onKeyUp:_check_submit_enabled\" /></td>\n      </tr>\n    </table>\n\n    <div class=\"dialogButtonContainer\">\n      <button class=\"blueButton\" dojoType=\"dijit.form.Button\" dojoAttachPoint=\"submit_button\" disabled=\"true\" type=\"submit\">Make Changes</button>\n      <button dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:onCancel\">Cancel</button>\n    </div>\n\n  </form>\n</div>\n",constructor:function(){this.hostname="";this.domain="";},postMixInProperties:function(){this.inherited(arguments);this.popup=new nox.ext.apps.vmanui.BoundedDialog({});dojo.connect(this.popup,"onCancel",this,"onCancel");this.popup.attr("title","Controller Host Settings");},show:function(){this.hostNameInput.attr("value",this.hostname);this.domainNameInput.attr("value",this.domain);this._check_submit_enabled();this.submit_button.attr("disabled",true);this.popup.attr("content",this.domNode);dojo.addClass(this.popup.domNode,"controllerAddrEditDialog");nox.ext.apps.vmanui.main.onDialogOpen();this.popup.show();},formSubmit:function(evt){dojo.stopEvent(evt);this.onSubmit();},hide:function(){nox.ext.apps.vmanui.main.onDialogClose();this.popup.destroy();this.destroy();},_check_submit_enabled:function(){this.submit_button.attr("disabled",!this.isValid());},isValid:function(){return this.hostNameInput.isValid()&&this.domainNameInput.isValid();},onCancel:function(){this.hide();},onSubmit:function(){if(!this.isValid()){return;}this.onSave(this.hostNameInput.attr("value"),this.domainNameInput.attr("value"));this.hide();},onSave:function(_2272,_2273){}});}if(!dojo._hasResource["nox.ext.apps.vmanui.dialog.main"]){dojo._hasResource["nox.ext.apps.vmanui.dialog.main"]=true;dojo.provide("nox.ext.apps.vmanui.dialog.main");}if(!dojo._hasResource["nox.ext.apps.vmanui.ListEditor"]){dojo._hasResource["nox.ext.apps.vmanui.ListEditor"]=true;dojo.provide("nox.ext.apps.vmanui.ListEditor");dojo.declare("nox.ext.apps.vmanui.ListEditor",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"list_editor\" style=\"text-align:left\">\n  <table dojoAttachPoint=\"tableNode\" class=\"list_editor_table\">\n    <tr>\n      <td>\n        <div dojoAttachPoint=\"emptyNode\" class=\"list_editor_empty\">\n          <div dojoAttachPoint=\"emptyTextRegular\" class=\"list_editor_empty_regular\">Click + to add an item to this list</div>\n          <div dojoAttachPoint=\"emptyTextReadOnly\" class=\"list_editor_empty_readonly\">There are no items in this list</div>\n        </div>\n        <div dojoAttachPoint=\"contentNode\" class=\"list_editor_contents\"></div>\n      </td>\n      <td rowspan=\"2\">\n        <div class=\"list_editor_controls\">\n          <button dojoType=\"dijit.form.Button\" class=\"blueButton\" dojoAttachPoint=\"save_button\">Save Target VLAN Changes</button>\n          <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"reset_button\">Undo Changes</button>\n        </div>\n        <div dojoAttachPoint=\"infoNode\" class=\"list_editor_item_info\" style=\"display:none\"></div>\n        <div dojoAttachPoint=\"errorNode\" class=\"list_editor_error\"></div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <div class=\"list_editor_item_controls\">\n          <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"add_button\">+</button>\n          <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"delete_button\">&minus;</button>\n        </div>\n      </td>\n    </tr>\n  </table>\n</div>\n",widgetsInTemplate:true,constructor:function(){this._items={};this._itemOrder=[];this._selected=[];this._animate=dojo.isIE?false:true;this._wrapperHeight="24";this._animDuration=500;this._animRate=50;this._readonly=false;this._handles=[];},postCreate:function(){dojo.style(this.contentNode,{display:"none"});dojo.style(this.emptyNode,{display:"block"});this.isEmpty=true;if(this._readonly){this.add_button.attr("disabled",true);this.delete_button.attr("disabled",true);this.save_button.attr("disabled",true);this.reset_button.attr("disabled",true);dojo.style(this.add_button.domNode,{"display":"none"});dojo.style(this.delete_button.domNode,{"display":"none"});dojo.style(this.save_button.domNode,{"display":"none"});dojo.style(this.reset_button.domNode,{"display":"none"});dojo.style(this.emptyTextReadOnly,{"display":"block"});dojo.style(this.emptyTextRegular,{"display":"none"});}else{var cxd=dojo.connect(this.delete_button,"onClick",this,"deleteSelected");var cxa=dojo.connect(this.add_button,"onClick",this,"createItem");var cxs=dojo.connect(this.save_button,"onClick",this,"save");var cxr=dojo.connect(this.reset_button,"onClick",this,"reset");this.delete_button.attr("disabled",true);var cxc=dojo.connect(dojo.body(),"onclick",this,"clickOut");dojo.style(this.emptyTextReadOnly,{"display":"none"});dojo.style(this.emptyTextRegular,{"display":"block"});this._handles.push(cxd,cxa,cxs,cxr,cxc);}},empty:function(_2279){for(var sId in this._items){this.removeItem(sId,_2279);}},createItem:function(){if(this._readonly){return;}throw Error("createItem() must be implemented in a subclass");},itemWrapper:function(_227b){var sId=this.itemWrapperId(_227b);return dojo.byId(sId);},itemWrapperId:function(_227d){return ["list_item_wrapper",this.id,_227d].join("_");},wrapItem:function(_227e,_227f){var oDiv=dojo.doc.createElement("div");dojo.place(_227e.domNode,oDiv,"only");dojo.addClass(oDiv,"list_editor_item");oDiv.id=this.itemWrapperId(_227e.id);if(_227f){dojo.addClass(oDiv,"list_editor_item_first");}if(this._animate){dojo.style(oDiv,{"height":"0px"});}if(!this._readonly){var cxc=dojo.connect(oDiv,"onclick",this,"clickItem");var cxd=dojo.connect(oDiv,"onmousedown",this,"mouseDownItem");var cxu=dojo.connect(oDiv,"onmouseup",this,"mouseUpItem");this._handles.push(cxc,cxd,cxu);}return oDiv;},itemOrder:function(){var _2284=[];dojo.query(".list_editor_item",this.contentNode).forEach(function(_2285){var _2286=_2285.id.replace("list_item_wrapper_"+this.id+"_","");_2284.push(_2286);},this);var _2287={};dojo.forEach(_2284,function(_2288,i){_2287[_2288]=i;});return {asArray:_2284,count:_2284.length,index:_2287};},deleteSelected:function(event){if(this._readonly){return;}dojo.forEach(this._selected,function(sId){this.removeItem(sId);},this);dojo.stopEvent(event);},clickOut:function(event){var _228d=true;var oNode=event.target;while(_228d&&oNode&&(oNode!=dojo.body())){if(oNode==this.tableNode){_228d=false;}oNode=oNode.parentNode;}if(_228d){this.unselectAll();}},unselectAll:function(){if(this._readonly){return;}if(this._selected.length){this.unselectItems(this._selected);}},unselectItems:function(_228f){if(this._readonly){return;}var _2290={};dojo.forEach(_228f,function(_2291){var _2292=this.itemWrapper(_2291);if(_2292){dojo.removeClass(_2292,"list_editor_item_selected");}_2290[_2291]=true;},this);var _2293=dojo.filter(this._selected,function(sId){return (!_2290[sId]);});this._selected=_2293;this._onSelectChange();},extendSelectedTo:function(_2295){if(this._readonly){return;}var _2296=this.itemOrder();var iMax=0,iMin=_2296.count;dojo.forEach(this._selected,function(_2299){iMax=Math.max(iMax,_2296.index[_2299]);iMin=Math.min(iMin,_2296.index[_2299]);});var _229a=_2296.index[_2295];var _229b=[];if(_229a<iMin){_229b=_2296.asArray.slice(_229a,iMin);}else{if(_229a>iMax){_229b=_2296.asArray.slice(iMax+1,_229a+1);}}this.selectItems(_229b,true);},isSelected:function(sId){if(this._readonly){return false;}var bIs=false;dojo.forEach(this._selected,function(_229e){if(_229e==sId){bIs=true;}});return bIs;},selectItems:function(_229f,_22a0){if(this._readonly){return;}if(!_22a0){this.unselectAll();}dojo.forEach(_229f,function(sId){var _22a2=this.itemWrapper(sId);dojo.addClass(_22a2,"list_editor_item_selected");this._selected.push(sId);},this);this._onSelectChange();},mouseDownItem:function(event){this._selectConnect=dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent);},mouseUpItem:function(event){if(this._selectConnect){dojo.disconnect(this._selectConnect);}},clickItem:function(event){if(this._readonly){return;}if(this._selectConnect){dojo.disconnect(this._selectConnect);}var _22a6=event.currentTarget.id.replace("list_item_wrapper_"+this.id+"_","");if(event.metaKey||event.altKey||event.ctrlKey){if(this.isSelected(_22a6)){this.unselectItems([_22a6]);}else{this.selectItems([_22a6],true);}}else{if(event.shiftKey){this.extendSelectedTo(_22a6);}else{this.selectItems([_22a6],false);}}dojo.stopEvent(event);event.preventDefault();},_onSelectChange:function(){if(this._readonly){return;}var oDone={},_22a8=[];dojo.forEach(this._selected,function(sId){if(!oDone[sId]){_22a8.push(sId);}oDone[sId]=true;});this._selected=_22a8;var _22aa=(this._selected.length==0);if(this._selected.length==1){this._items[this._selected[0]].focus();}else{if(this._selected.length>1){for(var sId in this._items){var _22ac=this._items[sId];if(_22ac){_22ac.focusNode.blur();}}_22aa=false;}}if(this.delete_button.domNode){this.delete_button.attr("disabled",_22aa);}},itemCount:function(){var count=0;for(var id in this._items){count++;}return count;},getItem:function(_22af){if(dojo.isString(_22af)){sId=_22af;}else{sId=_22af.id;}return this._items[sId];},removeItem:function(_22b0,_22b1){var _22b2=this.getItem(_22b0);if(_22b2){this.unselectItems([_22b2.id]);delete this._items[_22b2.id];var oNode=this.itemWrapper(_22b2.id);if(!_22b1){this.__itemsChanged();}var cb=dojo.hitch(this,function(){this.contentNode.removeChild(oNode);_22b2.destroyRecursive();_22b2=null;oNode=null;});if(this._animate){dojo.animateProperty({node:oNode,duration:this._animDuration,rate:this._animRate,onEnd:cb,properties:{"height":{start:this._wrapperHeight,end:"0"}}}).play();}else{cb();}}},addItem:function(_22b5){var id=_22b5.id;if(this._items[id]){this._items[id].destroy();this._items[id]=null;delete this._items[id];}var _22b7=(this.itemCount()==0);this._items[id]=_22b5;var oNode=this.wrapItem(_22b5,_22b7);dojo.place(oNode,this.contentNode,"last");if(this._animate){dojo.animateProperty({node:oNode,duration:this._animDuration,rate:this._animRate,onEnd:function(){dojo.style(oNode,{"height":""});},properties:{"height":{start:"0",end:this._wrapperHeight}}}).play();}this.__itemsChanged();},__itemsChanged:function(){var _22b9=this.itemCount()?false:true;if(_22b9!=this.isEmpty){this.isEmpty=_22b9;dojo.style(this.contentNode,{display:_22b9?"none":"block"});dojo.style(this.emptyNode,{display:_22b9?"block":"none"});}var _22ba=this.contentNode.childNodes;var _22bb=dojo.map(_22ba,function(_22bc){return _22bc.childNodes[0].id;});var _22bd=[];for(var sId in this._items){_22bd.push([sId,dojo.indexOf(_22bb,this._items[sId].domNode.id)]);}_22bd=_22bd.sort(function(pairA,pairB){return pairA[1]-pairB[1];});this._itemOrder=dojo.map(_22bd,function(aPair){return aPair[0];});},reset:function(){},save:function(){},uninitialize:function(){dojo.forEach(this._handles,function(h){dojo.disconnect(h);});this._handles=[];for(var sId in this._items){this._items[sId].destroyRecursive();this._items[sId]=null;}this._items={};this._itemOrder=[];this._selected=[];this.inherited(arguments);}});}if(!dojo._hasResource["nox.ext.apps.vmanui.VlanListEditor"]){dojo._hasResource["nox.ext.apps.vmanui.VlanListEditor"]=true;dojo.provide("nox.ext.apps.vmanui.VlanListEditor");dojo.declare("nox.ext.apps.vmanui.VlanListEditor",nox.ext.apps.vmanui.ListEditor,{pool_id:null,network_id:null,vlan_counts:null,constructor:function(){this._baselineValues={};this.vmanui=nox.ext.apps.vmanui;},postMixInProperties:function(){this._readonly=!nox.ext.apps.vmanui.User.hasCapability("update-xen-dir");},postCreate:function(){this.inherited(arguments);if(this._readonly){var _22c4="all pools";if(this.pool_id){_22c4="this pool";if(this.network_id){_22c4="this network";}}this.emptyTextReadOnly.innerHTML="No VLANs configured for "+_22c4;}else{this.connect(this.delete_button,"onClick","editStarted");this.connect(this.add_button,"onClick","editStarted");}},editStarted:function(){this.vmanui.main.editStarted();},clickItem:function(){this.inherited(arguments);this.vmanui.main.editStarted();},setBaseline:function(){this._baselineValues={};for(var sId in this._items){this._items[sId].attr("readOnly",true);this._baselineValues[this._items[sId].attr("value")]=1;}this.evaluateState();},reset:function(event){this.resetToBaseline();},orderedBaselineValues:function(){var _22c7=[];for(var value in this._baselineValues){_22c7.push(value);}return _22c7.sort(function(a,b){return a-b;});},resetToBaseline:function(){var _22cb=this.orderedBaselineValues();var _22cc=dojo.map(this._itemOrder,function(sId){return this._items[sId];},this);var _22ce=Math.max(_22cb.length,_22cc.length);for(var i=0;i<_22ce;i++){var _22d0=_22cc[i],value=_22cb[i];var _22d2=null;if(_22d0&&value){if(_22d0.attr("value")!=value){_22d0.attr("value",value);}}else{if(_22d0){this.removeItem(_22d0,true);}else{if(value){this.newItem(value,true);}}}}this.__itemsChanged();this.setBaseline();return;},createItem:function(event){if(this._readonly){return;}this.newItem();},newItem:function(value,_22d5){var _22d6={required:true,intermediateChanges:true,promptMessage:"Enter a value from 1 to 4094",constraints:{min:1,max:4094}};if(value!=undefined){_22d6.value=value;}var _22d7=new dijit.form.NumberTextBox(_22d6);_22d7.domNode.style.width="60px";this.addItem(_22d7);this.connect(_22d7,"onChange","evaluateState");if(!_22d5){this.selectItems([_22d7.id],false);}},__itemsChanged:function(){this.inherited(arguments);this.evaluateState();},isValid:function(){if(this._readonly){return true;}var _22d8=true;var _22d9={},aDups=[],_22db="";for(var sId in this._items){var _22dd=this._items[sId];var value=_22dd.attr("value");_22d9[value]=_22d9[value]||0;_22d9[value]++;_22d8=_22dd.isValid()&&_22d8;}if(_22d8){for(value in _22d9){if(_22d9[value]!=1){aDups.push(value);}}}if(aDups.length){_22d8=false;_22db="Duplicate VLANS: "+aDups.join(", ");}this.errorNode.innerHTML=_22db;return _22d8;},evaluateState:function(event){if(this._readonly){this.save_button.attr("disabled",true);this.reset_button.attr("disabled",true);return;}var _22e0=true;_22e0=_22e0&&this.isValid();_22e0=_22e0&&this.compareBaseline();this.save_button.attr("disabled",!_22e0);this.reset_button.attr("disabled",!_22e0);this.__check_vlan_count();},compareBaseline:function(){if(this._readonly){return false;}var _22e1={};var _22e2=false;for(var value in this._baselineValues){_22e1[value]=1;}for(var sId in this._items){var _22e5=this._items[sId];var value=_22e5.attr("value");if(_22e1[value]){_22e1[value]++;}else{_22e1[value]=1;}}for(var value in _22e1){if(_22e1[value]!=2){_22e2=true;}}return _22e2;},save:function(event){if(this._readonly){return;}if(this.isValid()){this.__save();}else{this.vmanui.main.vmanui_error("Can't save invalid VLAN data");}},__deltas:function(){var aAdd=[],_22e8=[],_22e9={};if(!this._readonly){for(var sId in this._items){var value=this._items[sId].attr("value").toString();_22e9[value]=1;if(!this._baselineValues[value]){aAdd.push(value);}}for(var value in this._baselineValues){value=value.toString();if(!_22e9[value]){_22e8.push(value);}}}return {"add":aAdd.sort(function(a,b){return a-b;}),"delete":_22e8.sort(function(a,b){return a-b;}),"diffs":aAdd.length+_22e8.length};},__save:function(_22f0){if(this._readonly){return;}var _22f1=this.__deltas();var aAdd=_22f1["add"],_22f3=_22f1["delete"];if(!_22f0&&_22f3.length){if(this.__confirmDeletions(_22f3)){return;}}aDeferreds=[];dojo.forEach(_22f3,function(vlan){var d=this.__delete_vlan(vlan);aDeferreds.push(d);},this);dojo.forEach(aAdd.sort(),function(vlan){var d=this.__post_vlan(vlan);aDeferreds.push(d);},this);var d=new dojo.DeferredList(aDeferreds,false,true);d.addCallback(dojo.hitch(this,"__save_callback"));},__confirmDeletions:function(_22f9){if(this._readonly){return false;}var aWarn=[];dojo.forEach(_22f9,function(vlan){if(this.vlan_counts[vlan]){aWarn.push(vlan);}},this);if(aWarn.length){var _22fc=dijit.byId("remove_target_vlan_dialog");var _22fd=dojo.query(".vlans",_22fc.domNode)[0];_22fd.innerHTML=aWarn.join(", ");_22fc.vlanEditor=this;_22fc.show();return true;}return false;},__save_callback:function(r){if(this._readonly){return;}var _22ff=0;var _2300=[];var _2301={"delete":[],"post":[]};dojo.forEach(r,function(dr){vlan=dr[1][1];_2303=dr[1][2];if(dr[1][0]==true){if(_2303=="delete"){_2300=_2300.concat(dr[1][3]);}}else{_2301[_2303].push(vlan);_22ff++;}});if(_2300.length){}if(_22ff){var _2304=[];for(var _2303 in _2301){var _2305=_2301[_2303];if(_2305.length){var text=(_2305.length==1?"vlan":"vlans");_2304.push("Failed to "+_2303.toUpperCase()+" "+text+" "+_2305.join(", "));}}this.vmanui.main.vmanui_error(_2304.join(". "),this.__finish_save,this);}else{this.__finish_save();}},_onSelectChange:function(){if(this._readonly){return;}this.inherited(arguments);this.__check_vlan_count();},__check_vlan_count:function(){if(this._readonly){return;}dojo.style(this.infoNode,{"display":"none"});if(this._selected.length==1){var id=this._selected[0];var item=this._items[id];var vlan=item.attr("value");if(!isNaN(vlan)){var _230a=this.vlan_counts[vlan];if(_230a){this.infoNode.innerHTML="VLAN "+vlan+" is used in "+_230a+" RSPAN configuration"+(_230a==1?"":"s");dojo.style(this.infoNode,{"display":"block"});}}}},__finish_save:function(){if(this._readonly){return;}this.vmanui.main.editFinished();this.vmanui.main.refresh_current();},__ws_vlan_url:function(vlan){var _230c=["ws.v1","xen_directory"];if(this.pool_id){_230c.push(this.pool_id);if(this.network_id){_230c.push("network",this.network_id);}}_230c.push("vlan",vlan);return _230c.join("/");},__delete_vlan:function(vlan){if(this._readonly){return;}var _230e=dijit.byId("csrf_token_v").getValue();var d=nox.ext.apps.vmanui.xhrDelete({url:this.__ws_vlan_url(vlan),headers:{"content-type":"application/json","X-CSRF-Token":_230e},timeout:30000,handleAs:"json",load:function(r){return [true,vlan,"delete",r];},error:function(r){return [false,vlan,"delete"];}});return d;},__post_vlan:function(vlan){if(this._readonly){return;}var _2313=dijit.byId("csrf_token_v").getValue();var d=nox.ext.apps.vmanui.rawXhrPost({url:this.__ws_vlan_url(vlan),headers:{"content-type":"application/json","X-CSRF-Token":_2313},postData:dojo.toJson({"csrf_token":_2313}),timeout:30000,handleAs:"json",load:function(r){return [true,vlan,"post"];},error:function(r){return [false,vlan,"post"];}});return d;},uninitialize:function(){this.vmanui=null;this.inherited(arguments);}});}if(!dojo._hasResource["nox.ext.apps.vmanui.CertDisplay"]){dojo._hasResource["nox.ext.apps.vmanui.CertDisplay"]=true;dojo.provide("nox.ext.apps.vmanui.CertDisplay");dojo.declare("nox.ext.apps.vmanui.CertDisplay",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<table class=\"dvs_cert_display\">\n  <tr>\n    <td class=\"label\">Subject Common Name:</td>\n    <td>${subject_cn}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Subject Organization:</td>\n    <td>${subject_o}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Subject Organization Unit:</td>\n    <td>${subject_ou}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Subject Location:</td>\n    <td>${subject_l}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Subject State:</td>\n    <td>${subject_st}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Subject Country:</td>\n    <td>${subject_c}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Issuer Common Name:</td>\n    <td>${issuer_cn}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Issuer Organization:</td>\n    <td>${issuer_o}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Issuer Organization Unit:</td>\n    <td>${issuer_ou}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Issuer Location:</td>\n    <td>${issuer_l}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Issuer State:</td>\n    <td>${issuer_st}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Issuer Country:</td>\n    <td>${issuer_c}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Not Valid Before:</td>\n    <td>${not_before}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">Not Valid After:</td>\n    <td>${not_after}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">SHA1 Fingerprint:</td>\n    <td>${sha1_fingerprint}</td>\n  </tr>\n  <tr>\n    <td class=\"label\">MD5 Fingerprint:</td>\n    <td>${md5_fingerprint}</td>\n  </tr>\n</table>\n",subject_cn:null,subject_o:null,subject_ou:null,subject_l:null,subject_st:null,subject_c:null,issuer_cn:null,issuer_o:null,issuer_ou:null,issuer_l:null,issuer_st:null,issuer_c:null,not_after:null,not_before:null,sha1_fingerprint:null,md5_fingerprint:null,constructor:function(_2317){_2317.not_before=this._format_date(_2317.not_before);_2317.not_after=this._format_date(_2317.not_after);for(field in _2317){this[field]=_2317[field];}},_format_date:function(date){var _2319=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/;var _231a=date.match(_2319);var year=parseInt(_231a[1],10);var month=parseInt(_231a[2],10)-1;var day=parseInt(_231a[3],10);var hour=parseInt(_231a[4],10);var _231f=parseInt(_231a[5],10);var _2320=parseInt(_231a[6],10);var d=new Date();d.setUTCFullYear(year);d.setUTCMonth(month);d.setUTCDate(day);d.setUTCHours(hour);d.setUTCMinutes(_231f);d.setUTCSeconds(_2320);return d.toUTCString();}});}if(!dojo._hasResource["nox.ext.apps.vmanui.main"]){dojo._hasResource["nox.ext.apps.vmanui.main"]=true;dojo.provide("nox.ext.apps.vmanui.main");(function(){var _2322=nox.ext.apps.vmanui;var _2323=nox.ext.apps.vmanui.main;_2323.is_paused=false;_2323.paused_by_user=false;_2323.current_section="vac";_2323.current_tabs={"vac":"status","settings":"settingsIPConfiguration","dashboard":null};_2323.bookmark_tree_uid=null;_2323.current_tree_item=null;_2323.current_timeout=null;_2323.TIMEOUT_MSEC=10000;_2323.max_same_url_refresh=3600;_2323.num_same_url_refresh=0;_2323.FRAGMENT_DELIMITER="$";_2323.click_play_on_dialog_close=false;_2323.open_dialog_count=0;_2323.document_title="";dojox.cometd.RestChannels.defaultInstance.url="/ws.v1/channels";dojox.cometd.RestChannels.defaultInstance.reloadDataOnReconnect=false;_2323.edit_in_progress=false;_2323.paused_before_edits=false;_2323.nav_warning="Navigating away from this pane "+"will discard any changes.  Continue?";_2323.set_document_title_base=function(s){_2323.document_title=s;};_2323.set_document_subtitle=function(s){dojo.doc.title=[_2323.document_title,s].join(" ");};_2323.check_warn_on_nav=function(){if(_2323.edit_in_progress){var res=confirm(_2323.nav_warning);if(res){_2323.edit_in_progress=false;}return res;}return true;};_2323.try_play_clicked=function(){if(!_2323.edit_in_progress&&_2323.open_dialog_count===0){_2323.play_clicked();}};_2323.editStarted=function(){var user=nox.ext.apps.vmanui.User;if(user&&user.role()=="readonly"){return;}if(_2323.edit_in_progress){return;}_2323.edit_in_progress=true;_2323.paused_before_edits=_2323.paused_by_user;if(!_2323.is_paused){_2323.pause_clicked();}};_2323.editFinished=function(){_2323.edit_in_progress=false;if(!_2323.paused_before_edits){_2323.try_play_clicked();}};_2323.channel_is_disconnected=false;_2323.console_log=function(){if(console&&console.log){console.log.apply(dojo.global,arguments);}};_2323.vmanui_error=function(msg,_2329,_232a){dojo.byId("vmanui_error_msg").innerHTML="<h2>"+msg+"</h2>";var _232b=dijit.byId("vmanui_error_dialog");if(typeof _2329=="function"){var _232c=dojo.connect(_232b,"hide",function(){_2329.call(_232a);dojo.disconnect(_232c);});}_232b.show();};_2323.play_clicked=function(_232d){dijit.byId("refreshPauseButton").setChecked(true);if(_232d&&!_2323.check_warn_on_nav()){return;}dijit.byId("refreshPauseButton").setChecked(false);_2323.is_paused=false;_2323.paused_by_user=false;dojo.style(dijit.byId("pausedUpdates").domNode,{display:"none"});dojo.removeClass(dijit.byId("refreshControlPane").domNode,"pausedControls");var _232e=dijit.byId("refreshPauseButton");_232e.domNode.title="Pause Data Updates";_2323.current_timeout=setTimeout(_2323.refresh_timeout,_2323.TIMEOUT_MSEC);if(_232d){_2323.refresh_clicked();}};_2323.pause_clicked=function(_232f){if(_232f){_2323.paused_by_user=true;}_2323.is_paused=true;dojo.style(dijit.byId("pausedUpdates").domNode,{display:"block"});dojo.addClass(dijit.byId("refreshControlPane").domNode,"pausedControls");var _2330=dijit.byId("refreshPauseButton");_2330.domNode.title="Resume Data Updates";_2330.setChecked(true);if(_2323.current_timeout){clearTimeout(_2323.current_timeout);}};_2323.refresh_clicked=function(){if(!_2323.check_warn_on_nav()){return;}_2323.refresh_current(false,true);};_2323.refresh_timeout=function(){if(_2323.current_section=="settings"){_2323.current_timeout=setTimeout(_2323.refresh_timeout,_2323.TIMEOUT_MSEC);}else{if(!_2323.check_warn_on_nav()){return;}_2323.current_timeout=null;_2323.refresh_current(false,false);}};_2323.togglehelp=function(){var oc=dijit.byId("outerContainer");var hc=dijit.byId("headerContainer");var c=dijit.byId("inlineHelpContainer");var htc=dijit.byId("headerTopContainer");if(dojo.style(c.domNode,"height")===0){c.resize({h:130});htc.resize({h:153});hc.resize({h:226});}else{c.resize({h:0});htc.resize({h:23});hc.resize({h:96});}oc.resize();if(dojo.isWebKit){var _2335=_2323.current_section;var pane=null;if((_2335=="settings")||(_2335=="vac")){var pane=dijit.byId(_2323.current_section);pane.domNode.style.height="100%";pane.domNode.style.width="100%";}}};_2323.onDialogOpen=function(){if(!_2323.is_paused){_2323.pause_clicked();_2323.click_play_on_dialog_close=true;}_2323.open_dialog_count++;};_2323.onDialogClose=function(){if(_2323.open_dialog_count<=0){_2323.console_log("Error, onDialogClose called when open_dialog_count = ",_2323.open_dialog_count);return;}_2323.open_dialog_count--;if(_2323.open_dialog_count===0&&_2323.click_play_on_dialog_close){_2323.try_play_clicked();_2323.click_play_on_dialog_close=false;}};_2323._getHash=function(){var h=window.location.hash;if(h.charAt(0)=="#"){h=h.substring(1);}return dojo.isMozilla?h:decodeURIComponent(h);};_2323.update_history=function(){var frag=_2323.current_section;var _2339="";var d=_2323.FRAGMENT_DELIMITER;if(_2323.current_section=="vac"){frag=_2323.current_section+d+_2323.current_tabs["vac"];if(_2323.current_tree_item!==null){_2339=_2322.vac.treestore.getValue(_2323.current_tree_item,"tree_uid");frag+=d+_2339;}else{if(_2323.bookmark_tree_uid!==null){_2339=_2323.bookmark_tree_uid;frag+=d+_2339;}}}else{if(_2323.current_section=="settings"){frag=_2323.current_section+d+_2323.current_tabs["settings"];}}var _233b={"section":_2323.current_section,"tab":_2323.current_tabs[_2323.current_section],"tree_uid":_2339};var state={handle:dojo.hitch(_233b,function(type){_2323.current_section=this.section;_2323.current_tabs[this.section]=this.tab;_2323.make_current_viewable();if(this.section=="vac"){var tid=(this.tree_uid==="")?""+_2322.vac.node_types.ALL_POOLS:this.tree_uid;_2322.vac.expandTreeToNode(tid);}}),changeUrl:frag};dojo.back.addToHistory(state);};_2323.update_help=function(){var _233f="/vmanui/help?sec="+_2323.current_section+"&tab="+_2323.current_tabs[_2323.current_section];if(_2323.current_section=="vac"&&_2323.current_tree_item){_233f+="&node_type="+encodeURIComponent(_2323.current_tree_item.node_type)+"&uid="+encodeURIComponent(_2323.current_tree_item.uid);}dijit.byId("inlineHelpPane").setHref(_233f);};_2323.make_current_viewable=function(){dijit.byId("sectionContainer").selectChild(dijit.byId(_2323.current_section));if(_2323.current_section=="vac"&&dijit.byId("vacTabContainer")){dijit.byId("vacTabContainer").selectChild(dijit.byId(_2323.current_tabs["vac"]));}else{if(_2323.current_section=="settings"&&dijit.byId("settingsContainer")){dijit.byId("settingsContainer").selectChild(dijit.byId(_2323.current_tabs["settings"]));}}};_2323.refresh_current=function(_2340,_2341,_2342,delay){if(_2340===undefined){_2340=false;}if(_2340==true){_2323.num_same_url_refresh=0;}else{if(_2323.num_same_url_refresh>_2323.max_same_url_refresh){_2323.num_same_url_refresh=0;window.location="/login?last_page=/";}_2323.num_same_url_refresh+=1;}if(_2341===undefined){_2341=false;}if(_2323.current_section=="vac"&&dijit.byId(_2323.current_tabs["vac"])){if(_2323.current_tabs["vac"]=="visibility"){_2322.vac_visibility.visibility_init(_2340,_2341);}else{var _2344=_2323.current_tree_item;if(!_2344){_2323.console_log("Error: vac div already exists, but current_tree_item is null");return;}if(!_2340){var _2345=dijit.byId(_2323.current_tabs["vac"]);if(!_2345.pauseRefresh){_2345.refresh(true,_2341);}}else{var _2346=_2323.current_tabs.vac;var path=_2322.vac.get_vac_path_for_item(_2346,_2344);dijit.byId(_2323.current_tabs["vac"]).setHref(path,_2340||_2341);}}}else{if(_2323.current_section=="dashboard"){_2322.dashboard.dashboard_init(_2340,_2341);}else{dijit.byId(_2323.current_section).refresh(!_2340,_2341);}}if(_2340){_2323.update_history();_2323.update_help();}if(_2342){if(delay){setTimeout(_2342,delay);}else{_2342();}}if(_2323.current_timeout){clearTimeout(_2323.current_timeout);}if(!_2323.is_paused){_2323.current_timeout=setTimeout(_2323.refresh_timeout,_2323.TIMEOUT_MSEC);}};_2323.set_section_container_display=function(v){if(!dojo.isIE){dojo.style(dijit.byId("sectionContainer").domNode,{display:v});}dijit.byId("sectionContainer").layout();};_2323.show_section=function(_2349){if(!_2323.check_warn_on_nav()){return;}_2323.current_section=_2349;if(!dijit.byId(_2349).isLoaded){_2323.set_section_container_display("none");_2323.num_same_url_refresh=0;}_2323.make_current_viewable();_2323.update_help();if(dijit.byId(_2349).isLoaded){_2323.refresh_current(true,true);}else{_2323.update_history();}dojo.forEach(["dashboard","vac","settings"],function(s){var _234b="selected_"+s;var _234c=dijit.byId(s+"_button").domNode;if(s!=_2349){dojo.removeClass(_234c,_234b);}else{dojo.addClass(_234c,_234b);}});};_2323.detect_os=function(){var nav=navigator.appVersion.toLowerCase();dojo.isMac=nav.indexOf("macintosh")>=0;dojo.isWin=nav.indexOf("windows")>=0;if(dojo.isMac){dojo.addClass(dojo.doc.documentElement,"dj_mac");}if(dojo.isWin){dojo.addClass(dojo.doc.documentElement,"dj_win");}};_2323.main_init=function(){_2323.detect_os();dojo.back.setInitialState({back:function(){}});_2323.static_base=dijit.byId("static_base").getValue();_2323.app_name_short=dijit.byId("app_name_short").getValue();_2323.app_name_long=dijit.byId("app_name_long").getValue();_2323.current_timeout=setTimeout(_2323.refresh_timeout,_2323.TIMEOUT_MSEC);setTimeout(_2323.run_connectivity_test,5000);var h=_2323._getHash();var d=_2323.FRAGMENT_DELIMITER;if(h.length>0){if(h.indexOf("vac"+d)===0){hash_arr=h.split(d);_2323.current_section=hash_arr[0];_2323.current_tabs["vac"]=hash_arr[1];_2323.bookmark_tree_uid=hash_arr[2];}else{if(h.indexOf("settings"+d)===0){hash_arr=h.split(d);_2323.current_section=hash_arr[0];_2323.current_tabs["settings"]=hash_arr[1];}else{_2323.current_section=h;}}_2323.update_history();}dojo.connect(dijit.byId("dashboard"),"onLoad",_2322.dashboard.on_dashboard_load);dojo.connect(dijit.byId("vac"),"onLoad",_2322.vac.on_vac_load);dojo.connect(dijit.byId("settings"),"onLoad",_2322.settings.on_settings_load);_2323.show_section(_2323.current_section);nox.ext.apps.vmanui.RequestTracker.instance().poke();};_2323.disconnected_from_server=false;_2323.conn_test_disabled=false;_2323._connect_test_handle=null;_2323.DEFAULT_CONNECT_TEST_MSEC=5000;_2323.FAST_CONNECT_TEST_MSEC=1000;_2323.disable_connection_testing=function(){if(_2323._connect_test_handle){clearTimeout(_2323._connect_test_handle);_2323._connect_test_handle=null;}_2323.conn_test_disabled=true;};_2323.reenable_connection_testing=function(){_2323.conn_test_disabled=false;_2323.run_connectivity_test();};_2323.onConnectFailure=function(){var _2350=dijit.byId("net_error_dialog");if(!_2350.open){_2350.show();_2323.onDialogOpen();}if(_2323._connect_test_handle===null){_2323._connect_test_handle=setTimeout(_2323.run_connectivity_test,_2323.FAST_CONNECT_TEST_MSEC);}};_2323.onConnectSuccess=function(){var _2351=dijit.byId("net_error_dialog");if(_2351.open){_2351.hide();_2323.onDialogClose();}if(_2323._connect_test_handle===null){_2323._connect_test_handle=setTimeout(_2323.run_connectivity_test,_2323.DEFAULT_CONNECT_TEST_MSEC);}};_2323.run_connectivity_test=function(){clearTimeout(_2323._connect_test_handle);_2323._connect_test_handle=null;dojo.xhrGet({url:"/ws.v1/nox/up",preventCache:true,load:function(_2352){if(_2323.conn_test_disabled){return;}_2323.onConnectSuccess();},error:function(_2353){if(_2323.conn_test_disabled){return;}if(_2353.status==401){dijit.byId("net_error_dialog").hide();document.location="/login?last_page=/";}else{_2323.onConnectFailure();}},timeout:5000});};_2323.open_docs=function(){var dlg=dijit.byId("manual_dialog");dlg.show();};_2323.eventPaneLoaded=function(){var _2355=this;_2323.setupTableRefresh(_2355);_2355.pauseRefresh=false;};_2323.setupTableRefresh=function(_2356){dojo.query(".event_update",_2356.domNode).forEach(function(_2357){var _2358=dojo.create("span",{"class":"update_info"});_2357.insertBefore(_2358,_2357.firstChild);var _2359=dojo.create("a",{"class":"pause_refresh_button pause","title":_2356.pauseTitle});_2358.appendChild(_2359);var _235a=dojo.create("span",{"class":"pause_message","innerHTML":_2356.pauseMsg});_2358.appendChild(_235a);var _235b=dojo.query(".recentTables",_2356.domNode)[0];dojo.connect(_235b,"onscroll",function(e){var _235d=e.target;var _235e=_235d.scrollTop;if(_235e){if(!_2356.pauseRefresh){_2323.togglePauseRefresh(_2356,_235b,_2359);}}});dojo.connect(_2359,"click",function(e){_2323.togglePauseRefresh(_2356,_235b,_2359);});});};_2323.togglePauseRefresh=function(_2360,_2361,_2362){if(_2360.pauseRefresh){if(_2361){_2361.scrollTop=0;}dojo.removeClass(_2362,"play");dojo.addClass(_2362,"pause");dojo.attr(_2362,"title",_2360.pauseTitle);dojo.style(_2362.nextSibling,{"display":"none"});_2360.pauseRefresh=false;}else{_2360.pauseRefresh=true;dojo.removeClass(_2362,"pause");dojo.addClass(_2362,"play");dojo.attr(_2362,"title",_2360.resumeTitle);dojo.style(_2362.nextSibling,{"display":"inline"});}};dojo.addOnUnload(function(){if(_2323.edit_in_progress){return _2323.nav_warning;}});})();}dojo.i18n._preloadLocalizations("nox.ext.apps.vmanui.nls.main",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
